Executing Bridge.Build.Task...
Reading configuration file bridge.json at C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\BuildBridge.csproj for configuration Debug ...
Getting configuration by file path bridge.Debug.json at C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\BuildBridge.csproj ...
Skipping bridge.Debug.json (not found)
Getting configuration by file path bridge.json at C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\BuildBridge.csproj ...
Found configuration file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bridge.json
Reading base configuration at C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bridge.json ...
Setting translator properties...
Translator properties:
	BridgeLocation:bin\Debug\Bridge.dll
	BuildArguments:
	DefineConstants:BRIDGE DEBUG TRACE
	Rebuild:False
	ProjectProperties:$(AssemblyName):BridgeBuild, $(CheckForOverflowUnderflow):, $(Configuration):Debug, $(DefineConstants):DEBUG;TRACE, $(OutDir):bin\Debug\, $(OutputPath):bin\Debug\, $(OutputType):Library, $(Platform):AnyCPU, $(RootNamespace):BridgeBuild
EnsureProjectProperties at C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\BuildBridge.csproj ...
DefaultNamespace:BridgeBuild
BuildAssemblyLocation...
    FullOutputPath:C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\
    OutDir:bin\Debug\
    OutputPath:bin\Debug\
    AssemblyLocation:C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\BridgeBuild.dll
BuildAssemblyLocation done
Getting source files by xml...
Getting source files by location...
Getting source files by location done (found 73 items)
Getting source files by xml done
EnsureDefineConstants...
EnsureDefineConstants done
EnsureProjectProperties done
ApplyProjectPropertiesToConfig...
ApplyTokens ...
Properties:$(AssemblyName):BridgeBuild, $(CheckForOverflowUnderflow):, $(Configuration):Debug, $(DefineConstants):DEBUG;TRACE, $(OutDir):bin\Debug\, $(OutputPath):bin\Debug\, $(OutputType):Library, $(Platform):AnyCPU, $(RootNamespace):BridgeBuild
ApplyTokens done
ApplyProjectPropertiesToConfig done
Setting translator properties done
Applying logger configuration parameters...
Logger level: Trace
Read config file: {"FileName":null,"Output":"bin\\Debug\\bridge\\","OutputBy":"Project","FileNameCasing":"None","OutputFormatting":"Formatted","StartIndexInName":0,"Module":null,"Dependencies":[],"BeforeBuild":null,"AfterBuild":null,"AutoPropertyToField":false,"PluginsPath":null,"GenerateTypeScript":false,"GenerateDocumentation":"Basic","BuildArguments":null,"CleanOutputFolderBeforeBuild":null,"CleanOutputFolderBeforeBuildPattern":null,"Configuration":null,"DefineConstants":[],"Locales":null,"LocalesOutput":null,"LocalesFileName":null,"CombineLocales":false,"CombineScripts":false,"UseTypedArrays":false,"IgnoreCast":false,"Logging":{"Level":"Trace","TimeStamps":null,"MaxSize":null,"Folder":null,"FileName":null},"OverflowMode":null,"NoLoggerTimeStamps":null,"StrictNullChecks":false,"Reflection":{"Disabled":false,"memberAccessibility":null,"TypeAccessibility":null,"Filter":null,"Output":null,"Target":0},"Assembly":{"DisableInitAssembly":false,"EnableReservedNamespaces":false,"FullName":null},"Resources":[],"Loader":{"Type":0,"FunctionName":null,"ManualLoading":false,"ManualLoadingMask":null,"SkipManualVariables":false},"NamedFunctions":0,"SourceMap":true,"Html":true,"Console":true,"Report":false,"Rules":{"Lambda":1,"Boxing":1,"ArrayIndex":0,"Integer":0,"AnonymousType":1,"AutoProperty":1,"InlineComment":null,"ExternalCast":null,"Level":0},"ReferencesPath":null,"References":null}
2018-10-12T09:31:23:512 	Trace		Setting logger configuration parameters done
2018-10-12T09:31:23:521 	Info		Translating...
2018-10-12T09:31:23:523 	Info		Inspecting references...
2018-10-12T09:31:23:526 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\BridgeBuild.dll ...
2018-10-12T09:31:23:547 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\Bridge.dll ...
2018-10-12T09:31:23:557 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\Bridge.dll done
2018-10-12T09:31:23:559 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\Bridge.Html5.dll ...
2018-10-12T09:31:23:563 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\Bridge.dll ...
2018-10-12T09:31:23:580 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\Bridge.dll done
2018-10-12T09:31:23:581 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\Bridge.Html5.dll done
2018-10-12T09:31:23:582 	Trace		Assembly definition loading C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\BridgeBuild.dll done
2018-10-12T09:31:23:583 	Trace		Reading types for assembly BridgeBuild ...
2018-10-12T09:31:23:645 	Trace		Reading types for assembly done
2018-10-12T09:31:23:645 	Trace		Reading types for assembly Bridge ...
2018-10-12T09:31:23:653 	Trace		Reading types for assembly done
2018-10-12T09:31:23:653 	Trace		Reading types for assembly Bridge.Html5 ...
2018-10-12T09:31:23:665 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:23:666 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference, ReaderParameters) Bridge, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null, Deferred
2018-10-12T09:31:23:689 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:23:690 	Trace		Reading types for assembly done
2018-10-12T09:31:23:690 	Info		Inspecting references done
2018-10-12T09:31:23:695 	Info		Product info:
2018-10-12T09:31:23:696 	Info			Bridge.Compiler version 17.1.1
2018-10-12T09:31:23:696 	Info			[Bridge Framework, version 17.1.1]
2018-10-12T09:31:23:697 	Info			Copyright 2008-2018 Object.NET, Inc.
2018-10-12T09:31:23:702 	Info		Discovering plugins...
2018-10-12T09:31:23:703 	Trace		Set assembly Resolve and Load events for domain MSBuild.exe
2018-10-12T09:31:23:703 	Trace		Current domain MSBuild.exe
2018-10-12T09:31:23:703 	Trace		Application base: C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\
2018-10-12T09:31:23:703 	Trace		Loaded assemblies:
2018-10-12T09:31:23:704 	Trace			mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll True
2018-10-12T09:31:23:704 	Trace			MSBuild, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\MSBuild.exe False
2018-10-12T09:31:23:704 	Trace			System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll True
2018-10-12T09:31:23:704 	Trace			System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll True
2018-10-12T09:31:23:705 	Trace			System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll True
2018-10-12T09:31:23:705 	Trace			Microsoft.Build.Framework, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Microsoft.Build.Framework.dll False
2018-10-12T09:31:23:705 	Trace			Microsoft.Build, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Microsoft.Build.dll False
2018-10-12T09:31:23:706 	Trace			System.Runtime.InteropServices.RuntimeInformation, Version=4.0.1.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\System.Runtime.InteropServices.RuntimeInformation.dll False
2018-10-12T09:31:23:706 	Trace			System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Runtime.dll True
2018-10-12T09:31:23:706 	Trace			System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll True
2018-10-12T09:31:23:707 	Trace			System.Threading.Tasks.Dataflow, Version=4.5.24.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Threading.Tasks.Dataflow\v4.0_4.5.24.0__b03f5f7f11d50a3a\System.Threading.Tasks.Dataflow.dll True
2018-10-12T09:31:23:707 	Trace			System.Threading.Tasks, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Threading.Tasks\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Threading.Tasks.dll True
2018-10-12T09:31:23:708 	Trace			System.Diagnostics.Tracing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Diagnostics.Tracing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Diagnostics.Tracing.dll True
2018-10-12T09:31:23:708 	Trace			System.Collections.Concurrent, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Collections.Concurrent\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Collections.Concurrent.dll True
2018-10-12T09:31:23:709 	Trace			System.Collections.Immutable, Version=1.2.1.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\System.Collections.Immutable.dll False
2018-10-12T09:31:23:709 	Trace			Microsoft.Build.Utilities.Core, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Microsoft.Build.Utilities.Core.dll False
2018-10-12T09:31:23:710 	Trace			System.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Collections\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Collections.dll True
2018-10-12T09:31:23:711 	Trace			Microsoft.Build.Tasks.Core, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Microsoft.Build.Tasks.Core.dll False
2018-10-12T09:31:23:711 	Trace			Microsoft.NET.Build.Extensions.Tasks, Version=15.5.0.1015, Culture=neutral, PublicKeyToken=31bf3856ad364e35 C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\Microsoft\Microsoft.NET.Build.Extensions\tools\net46\Microsoft.NET.Build.Extensions.Tasks.dll False
2018-10-12T09:31:23:711 	Trace			System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml.Linq\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.Linq.dll True
2018-10-12T09:31:23:711 	Trace			System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.Serialization\v4.0_4.0.0.0__b77a5c561934e089\System.Runtime.Serialization.dll True
2018-10-12T09:31:23:712 	Trace			SMDiagnostics, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\SMDiagnostics\v4.0_4.0.0.0__b77a5c561934e089\SMDiagnostics.dll True
2018-10-12T09:31:23:712 	Trace			System.ServiceModel.Internals, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Internals\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Internals.dll True
2018-10-12T09:31:23:712 	Trace			Microsoft.Build.Tasks.CodeAnalysis, Version=2.6.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Roslyn\Microsoft.Build.Tasks.CodeAnalysis.dll False
2018-10-12T09:31:23:713 	Trace			System.Text.Encoding, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Text.Encoding\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Text.Encoding.dll True
2018-10-12T09:31:23:713 	Trace			System.Reflection, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Reflection\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Reflection.dll True
2018-10-12T09:31:23:713 	Trace			System.Resources.ResourceManager, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Resources.ResourceManager\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Resources.ResourceManager.dll True
2018-10-12T09:31:23:713 	Trace			System.Globalization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Globalization\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Globalization.dll True
2018-10-12T09:31:23:714 	Trace			System.Runtime.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.Extensions\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Runtime.Extensions.dll True
2018-10-12T09:31:23:714 	Trace			System.IO.FileSystem, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.IO.FileSystem\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.IO.FileSystem.dll True
2018-10-12T09:31:23:714 	Trace			System.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Linq\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Linq.dll True
2018-10-12T09:31:23:714 	Trace			System.Security.Principal.Windows, Version=4.0.1.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Roslyn\System.Security.Principal.Windows.dll False
2018-10-12T09:31:23:715 	Trace			System.Security.Cryptography.Algorithms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Security.Cryptography.Algorithms\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Security.Cryptography.Algorithms.dll True
2018-10-12T09:31:23:715 	Trace			System.Security.Cryptography.Primitives, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Security.Cryptography.Primitives\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Security.Cryptography.Primitives.dll True
2018-10-12T09:31:23:715 	Trace			System.IO, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.IO\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.IO.dll True
2018-10-12T09:31:23:716 	Trace			System.IO.FileSystem.Primitives, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.IO.FileSystem.Primitives\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.IO.FileSystem.Primitives.dll True
2018-10-12T09:31:23:716 	Trace			System.Threading, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Threading\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Threading.dll True
2018-10-12T09:31:23:717 	Trace			System.IO.Pipes, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.IO.Pipes\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.IO.Pipes.dll True
2018-10-12T09:31:23:717 	Trace			System.Runtime.InteropServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.InteropServices\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Runtime.InteropServices.dll True
2018-10-12T09:31:23:717 	Trace			System.Security.AccessControl, Version=4.0.1.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\Bin\Roslyn\System.Security.AccessControl.dll False
2018-10-12T09:31:23:718 	Trace			Bridge.Build, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\Bridge.Builder.v16.dll False
2018-10-12T09:31:23:718 	Trace			Microsoft.Build.Utilities.v4.0, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a C:\windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.Build.Utilities.v4.0\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.Build.Utilities.v4.0.dll True
2018-10-12T09:31:23:719 	Trace			Bridge.Contract, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\Bridge.Contract.dll False
2018-10-12T09:31:23:719 	Trace			Bridge.Translator, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\Bridge.Translator.dll False
2018-10-12T09:31:23:719 	Trace			Mono.Cecil, Version=0.9.6.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756 C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\Mono.Cecil.dll False
2018-10-12T09:31:23:719 	Trace			ICSharpCode.NRefactory.CSharp, Version=5.0.0.0, Culture=neutral, PublicKeyToken=d4bfe873e7598c49 C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\ICSharpCode.NRefactory.CSharp.dll False
2018-10-12T09:31:23:720 	Trace			ICSharpCode.NRefactory, Version=5.0.0.0, Culture=neutral, PublicKeyToken=d4bfe873e7598c49 C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\ICSharpCode.NRefactory.dll False
2018-10-12T09:31:23:720 	Trace			Newtonsoft.Json, Version=11.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\Newtonsoft.Json.dll False
2018-10-12T09:31:23:720 	Trace			System.Numerics, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Numerics\v4.0_4.0.0.0__b77a5c561934e089\System.Numerics.dll True
2018-10-12T09:31:23:720 	Trace			System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll True
2018-10-12T09:31:23:721 	Trace			Mono.Cecil.Rocks, Version=0.9.6.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756 C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\packages\Bridge.Min.17.1.1\tools\Mono.Cecil.Rocks.dll False
2018-10-12T09:31:23:721 	Trace			System.ComponentModel.Composition, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ComponentModel.Composition\v4.0_4.0.0.0__b77a5c561934e089\System.ComponentModel.Composition.dll True
2018-10-12T09:31:23:722 	Info		Will use the following plugin path "C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\Bridge\plugins"
2018-10-12T09:31:23:722 	Info		The plugin path does not exist. Skipping searching test framework plugins in the plugin folder.
2018-10-12T09:31:23:723 	Trace		Will search all translator references to find resource(s) with names starting from "Bridge.Plugins." ...
2018-10-12T09:31:23:724 	Trace		Searching plugins in reference Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null ...
2018-10-12T09:31:23:725 	Trace		skipPluginAssemblies is not set
2018-10-12T09:31:23:728 	Trace		The reference contains 0 resource(s) needed
2018-10-12T09:31:23:729 	Trace		Searching plugins in reference Bridge.Html5, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null ...
2018-10-12T09:31:23:729 	Trace		skipPluginAssemblies is not set
2018-10-12T09:31:23:729 	Trace		The reference contains 0 resource(s) needed
2018-10-12T09:31:23:729 	Info		No AssemblyCatalogs found
2018-10-12T09:31:23:729 	Info		Reading plugin configs...
2018-10-12T09:31:23:730 	Info		Reading plugin configs done
2018-10-12T09:31:23:731 	Info		Building syntax tree...
2018-10-12T09:31:23:735 	Trace		Loaded assembly: Microsoft.CodeAnalysis.CSharp, Version=2.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
2018-10-12T09:31:23:742 	Trace		Loaded assembly: Microsoft.CodeAnalysis, Version=2.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
2018-10-12T09:31:23:753 	Trace		Loaded assembly: System.ValueTuple, Version=4.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51
2018-10-12T09:31:23:757 	Trace		Loaded assembly: System.Reflection.Metadata, Version=1.4.1.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:23:762 	Trace		Loaded assembly: System.Threading.Tasks.Parallel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:23:862 	Trace		Loaded assembly: System.Runtime.Numerics, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:24:095 	Trace		Domain MSBuild.exe resolving assembly System.Collections.Immutable, Version=1.2.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a requested by none ...
2018-10-12T09:31:24:098 	Trace		Resolved for System.Collections.Immutable, Version=1.2.1.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a in the loaded domain assemblies
2018-10-12T09:31:24:125 	Trace		Loaded assembly: System.Reflection.Primitives, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:24:155 	Trace		Rewriting/replacing code from files one after the other (not parallel) due to logger level being 'trace'.
2018-10-12T09:31:24:452 	Trace		Loaded assembly: System.Text.Encoding.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:24:459 	Trace		Loaded assembly: System.Reflection.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:24:834 	Trace		Loaded assembly: Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
2018-10-12T09:31:26:859 	Trace		Building syntax tree...
Parsing files one after the other (not parallel) due to logger level being 'trace'.
2018-10-12T09:31:26:865 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\App.cs ...
2018-10-12T09:31:27:060 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:077 	Trace			Expanding query expressions done
2018-10-12T09:31:27:081 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:087 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:120 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:121 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\App.cs done
2018-10-12T09:31:27:121 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\Properties\AssemblyInfo.cs ...
2018-10-12T09:31:27:130 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:131 	Trace			Expanding query expressions done
2018-10-12T09:31:27:132 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:136 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:137 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\Properties\AssemblyInfo.cs done
2018-10-12T09:31:27:137 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Debugger.cs ...
2018-10-12T09:31:27:157 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:160 	Trace			Expanding query expressions done
2018-10-12T09:31:27:161 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:162 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:167 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:167 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Debugger.cs done
2018-10-12T09:31:27:168 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\DeepCloneHelper.cs ...
2018-10-12T09:31:27:174 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:176 	Trace			Expanding query expressions done
2018-10-12T09:31:27:177 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:179 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:179 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\DeepCloneHelper.cs done
2018-10-12T09:31:27:179 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Extensions.cs ...
2018-10-12T09:31:27:180 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:181 	Trace			Expanding query expressions done
2018-10-12T09:31:27:181 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:181 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:182 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Extensions.cs done
2018-10-12T09:31:27:182 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ICopyable.cs ...
2018-10-12T09:31:27:186 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:186 	Trace			Expanding query expressions done
2018-10-12T09:31:27:187 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:187 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:188 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ICopyable.cs done
2018-10-12T09:31:27:188 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ObjectCloner.cs ...
2018-10-12T09:31:27:196 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:198 	Trace			Expanding query expressions done
2018-10-12T09:31:27:199 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:200 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:203 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:204 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ObjectCloner.cs done
2018-10-12T09:31:27:204 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Point.cs ...
2018-10-12T09:31:27:219 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:221 	Trace			Expanding query expressions done
2018-10-12T09:31:27:222 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:224 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:224 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Point.cs done
2018-10-12T09:31:27:225 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\RandomSupplier.cs ...
2018-10-12T09:31:27:226 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:226 	Trace			Expanding query expressions done
2018-10-12T09:31:27:226 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:227 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:227 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\RandomSupplier.cs done
2018-10-12T09:31:27:227 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Rectangle.cs ...
2018-10-12T09:31:27:229 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:229 	Trace			Expanding query expressions done
2018-10-12T09:31:27:230 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:230 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:231 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Rectangle.cs done
2018-10-12T09:31:27:231 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\TimeStamp.cs ...
2018-10-12T09:31:27:231 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:232 	Trace			Expanding query expressions done
2018-10-12T09:31:27:232 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:232 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:232 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\TimeStamp.cs done
2018-10-12T09:31:27:233 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Unicode.cs ...
2018-10-12T09:31:27:237 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:238 	Trace			Expanding query expressions done
2018-10-12T09:31:27:238 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:239 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:239 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Unicode.cs done
2018-10-12T09:31:27:240 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector2D.cs ...
2018-10-12T09:31:27:245 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:248 	Trace			Expanding query expressions done
2018-10-12T09:31:27:248 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:249 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:250 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector2D.cs done
2018-10-12T09:31:27:250 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector3D.cs ...
2018-10-12T09:31:27:263 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:264 	Trace			Expanding query expressions done
2018-10-12T09:31:27:265 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:266 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:267 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:267 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector3D.cs done
2018-10-12T09:31:27:268 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Accessor.cs ...
2018-10-12T09:31:27:269 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:269 	Trace			Expanding query expressions done
2018-10-12T09:31:27:270 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:270 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:271 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Accessor.cs done
2018-10-12T09:31:27:271 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ClonedState.cs ...
2018-10-12T09:31:27:271 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:272 	Trace			Expanding query expressions done
2018-10-12T09:31:27:272 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:272 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:273 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ClonedState.cs done
2018-10-12T09:31:27:273 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ECSManager.cs ...
2018-10-12T09:31:27:279 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:280 	Trace			Expanding query expressions done
2018-10-12T09:31:27:281 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:282 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:282 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:283 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ECSManager.cs done
2018-10-12T09:31:27:283 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Entity.cs ...
2018-10-12T09:31:27:284 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:284 	Trace			Expanding query expressions done
2018-10-12T09:31:27:284 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:284 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:285 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Entity.cs done
2018-10-12T09:31:27:285 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ProcessorFlex.cs ...
2018-10-12T09:31:27:285 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:286 	Trace			Expanding query expressions done
2018-10-12T09:31:27:286 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:286 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:286 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ProcessorFlex.cs done
2018-10-12T09:31:27:287 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\CharByCharAnimation.cs ...
2018-10-12T09:31:27:288 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:289 	Trace			Expanding query expressions done
2018-10-12T09:31:27:289 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:290 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:290 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\CharByCharAnimation.cs done
2018-10-12T09:31:27:290 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\BlinkAnimation.cs ...
2018-10-12T09:31:27:292 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:293 	Trace			Expanding query expressions done
2018-10-12T09:31:27:294 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:294 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:295 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\BlinkAnimation.cs done
2018-10-12T09:31:27:295 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextGame.cs ...
2018-10-12T09:31:27:295 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:296 	Trace			Expanding query expressions done
2018-10-12T09:31:27:296 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:296 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:297 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextGame.cs done
2018-10-12T09:31:27:297 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextScreenN.cs ...
2018-10-12T09:31:27:303 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:304 	Trace			Expanding query expressions done
2018-10-12T09:31:27:305 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:307 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:307 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextScreenN.cs done
2018-10-12T09:31:27:308 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\KeyboardIO.cs ...
2018-10-12T09:31:27:308 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:308 	Trace			Expanding query expressions done
2018-10-12T09:31:27:309 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:309 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:309 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\KeyboardIO.cs done
2018-10-12T09:31:27:310 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseHover.cs ...
2018-10-12T09:31:27:310 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:311 	Trace			Expanding query expressions done
2018-10-12T09:31:27:311 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:311 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:312 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseHover.cs done
2018-10-12T09:31:27:312 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseIO.cs ...
2018-10-12T09:31:27:312 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:313 	Trace			Expanding query expressions done
2018-10-12T09:31:27:313 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:313 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:314 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseIO.cs done
2018-10-12T09:31:27:314 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\UnicodeRemap.cs ...
2018-10-12T09:31:27:314 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:315 	Trace			Expanding query expressions done
2018-10-12T09:31:27:315 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:315 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:316 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\UnicodeRemap.cs done
2018-10-12T09:31:27:316 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\Palette.cs ...
2018-10-12T09:31:27:317 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:317 	Trace			Expanding query expressions done
2018-10-12T09:31:27:317 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:318 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:318 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\Palette.cs done
2018-10-12T09:31:27:318 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\TestGame.cs ...
2018-10-12T09:31:27:319 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:319 	Trace			Expanding query expressions done
2018-10-12T09:31:27:319 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:320 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:320 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\TestGame.cs done
2018-10-12T09:31:27:320 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextBoard.cs ...
2018-10-12T09:31:27:328 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:330 	Trace			Expanding query expressions done
2018-10-12T09:31:27:330 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:338 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:340 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:340 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextBoard.cs done
2018-10-12T09:31:27:340 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextWorld.cs ...
2018-10-12T09:31:27:343 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:343 	Trace			Expanding query expressions done
2018-10-12T09:31:27:343 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:344 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:345 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:345 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextWorld.cs done
2018-10-12T09:31:27:345 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleSetup.cs ...
2018-10-12T09:31:27:346 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:347 	Trace			Expanding query expressions done
2018-10-12T09:31:27:347 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:349 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:350 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:350 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleSetup.cs done
2018-10-12T09:31:27:350 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DebugExtra\DebugEx.cs ...
2018-10-12T09:31:27:350 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:351 	Trace			Expanding query expressions done
2018-10-12T09:31:27:351 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:351 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:351 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DebugExtra\DebugEx.cs done
2018-10-12T09:31:27:352 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DeckManager.cs ...
2018-10-12T09:31:27:352 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:353 	Trace			Expanding query expressions done
2018-10-12T09:31:27:353 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:354 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:354 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:354 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DeckManager.cs done
2018-10-12T09:31:27:354 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\ECSIntegration.cs ...
2018-10-12T09:31:27:355 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:355 	Trace			Expanding query expressions done
2018-10-12T09:31:27:355 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:356 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:356 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\ECSIntegration.cs done
2018-10-12T09:31:27:356 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyAI.cs ...
2018-10-12T09:31:27:357 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:357 	Trace			Expanding query expressions done
2018-10-12T09:31:27:357 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:358 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:358 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyAI.cs done
2018-10-12T09:31:27:358 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyDataCreator.cs ...
2018-10-12T09:31:27:359 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:360 	Trace			Expanding query expressions done
2018-10-12T09:31:27:360 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:361 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:361 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyDataCreator.cs done
2018-10-12T09:31:27:361 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\SpawnFactory.cs ...
2018-10-12T09:31:27:362 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:362 	Trace			Expanding query expressions done
2018-10-12T09:31:27:362 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:363 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:363 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\SpawnFactory.cs done
2018-10-12T09:31:27:363 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\Happs\Happ.cs ...
2018-10-12T09:31:27:364 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:364 	Trace			Expanding query expressions done
2018-10-12T09:31:27:365 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:374 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:375 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:376 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\Happs\Happ.cs done
2018-10-12T09:31:27:376 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\InputHolder.cs ...
2018-10-12T09:31:27:377 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:377 	Trace			Expanding query expressions done
2018-10-12T09:31:27:377 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:378 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:378 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:378 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\InputHolder.cs done
2018-10-12T09:31:27:378 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveCreatorProg.cs ...
2018-10-12T09:31:27:380 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:380 	Trace			Expanding query expressions done
2018-10-12T09:31:27:380 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:381 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:381 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveCreatorProg.cs done
2018-10-12T09:31:27:381 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveData.cs ...
2018-10-12T09:31:27:382 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:383 	Trace			Expanding query expressions done
2018-10-12T09:31:27:384 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:384 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:385 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:385 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveData.cs done
2018-10-12T09:31:27:385 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataExecuter.cs ...
2018-10-12T09:31:27:388 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:389 	Trace			Expanding query expressions done
2018-10-12T09:31:27:389 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:392 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:393 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:393 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataExecuter.cs done
2018-10-12T09:31:27:393 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataTags.cs ...
2018-10-12T09:31:27:393 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:394 	Trace			Expanding query expressions done
2018-10-12T09:31:27:394 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:394 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:394 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataTags.cs done
2018-10-12T09:31:27:395 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleMain.cs ...
2018-10-12T09:31:27:398 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:399 	Trace			Expanding query expressions done
2018-10-12T09:31:27:399 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:406 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:407 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:407 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleMain.cs done
2018-10-12T09:31:27:407 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageData.cs ...
2018-10-12T09:31:27:409 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:409 	Trace			Expanding query expressions done
2018-10-12T09:31:27:409 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:410 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:410 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageData.cs done
2018-10-12T09:31:27:410 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageToBattle.cs ...
2018-10-12T09:31:27:410 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:410 	Trace			Expanding query expressions done
2018-10-12T09:31:27:411 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:411 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:411 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:411 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageToBattle.cs done
2018-10-12T09:31:27:411 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\TrackBattle.cs ...
2018-10-12T09:31:27:412 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:412 	Trace			Expanding query expressions done
2018-10-12T09:31:27:412 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:413 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:413 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\TrackBattle.cs done
2018-10-12T09:31:27:413 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AsyncTasks.cs ...
2018-10-12T09:31:27:414 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:414 	Trace			Expanding query expressions done
2018-10-12T09:31:27:414 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:415 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:415 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AsyncTasks.cs done
2018-10-12T09:31:27:415 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AttackPreview.cs ...
2018-10-12T09:31:27:416 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:416 	Trace			Expanding query expressions done
2018-10-12T09:31:27:416 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:417 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:417 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:417 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AttackPreview.cs done
2018-10-12T09:31:27:417 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\BattleRender.cs ...
2018-10-12T09:31:27:427 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:428 	Trace			Expanding query expressions done
2018-10-12T09:31:27:428 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:442 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:443 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:443 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\BattleRender.cs done
2018-10-12T09:31:27:443 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ColorStuff.cs ...
2018-10-12T09:31:27:444 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:444 	Trace			Expanding query expressions done
2018-10-12T09:31:27:445 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:445 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:445 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ColorStuff.cs done
2018-10-12T09:31:27:445 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\GameMain.cs ...
2018-10-12T09:31:27:446 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:447 	Trace			Expanding query expressions done
2018-10-12T09:31:27:447 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:448 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:448 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:449 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\GameMain.cs done
2018-10-12T09:31:27:449 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HappHandling.cs ...
2018-10-12T09:31:27:451 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:451 	Trace			Expanding query expressions done
2018-10-12T09:31:27:452 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:457 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:457 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:458 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HappHandling.cs done
2018-10-12T09:31:27:458 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreen.cs ...
2018-10-12T09:31:27:460 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:460 	Trace			Expanding query expressions done
2018-10-12T09:31:27:460 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:462 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:462 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:462 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreen.cs done
2018-10-12T09:31:27:463 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreenIntegration.cs ...
2018-10-12T09:31:27:463 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:463 	Trace			Expanding query expressions done
2018-10-12T09:31:27:464 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:464 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:464 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreenIntegration.cs done
2018-10-12T09:31:27:464 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\InputHandling.cs ...
2018-10-12T09:31:27:465 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:465 	Trace			Expanding query expressions done
2018-10-12T09:31:27:465 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:473 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:473 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:474 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\InputHandling.cs done
2018-10-12T09:31:27:474 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ITextScreen.cs ...
2018-10-12T09:31:27:474 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:475 	Trace			Expanding query expressions done
2018-10-12T09:31:27:475 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:475 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:475 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ITextScreen.cs done
2018-10-12T09:31:27:475 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MessageOnPosition.cs ...
2018-10-12T09:31:27:476 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:476 	Trace			Expanding query expressions done
2018-10-12T09:31:27:476 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:477 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:477 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:477 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MessageOnPosition.cs done
2018-10-12T09:31:27:478 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ModeSelectionScreen.cs ...
2018-10-12T09:31:27:478 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:479 	Trace			Expanding query expressions done
2018-10-12T09:31:27:479 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:479 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:479 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ModeSelectionScreen.cs done
2018-10-12T09:31:27:480 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MouseHoverText.cs ...
2018-10-12T09:31:27:480 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:481 	Trace			Expanding query expressions done
2018-10-12T09:31:27:481 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:481 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:482 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:482 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MouseHoverText.cs done
2018-10-12T09:31:27:482 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\NavigationKeyboard.cs ...
2018-10-12T09:31:27:482 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:483 	Trace			Expanding query expressions done
2018-10-12T09:31:27:483 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:484 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:484 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:485 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\NavigationKeyboard.cs done
2018-10-12T09:31:27:485 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\PreviewSystem.cs ...
2018-10-12T09:31:27:487 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:488 	Trace			Expanding query expressions done
2018-10-12T09:31:27:488 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:489 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:489 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\PreviewSystem.cs done
2018-10-12T09:31:27:489 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ReflectionTest.cs ...
2018-10-12T09:31:27:489 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:490 	Trace			Expanding query expressions done
2018-10-12T09:31:27:490 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:490 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:490 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ReflectionTest.cs done
2018-10-12T09:31:27:491 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageGroupSelectionScreen.cs ...
2018-10-12T09:31:27:492 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:492 	Trace			Expanding query expressions done
2018-10-12T09:31:27:492 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:493 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:493 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageGroupSelectionScreen.cs done
2018-10-12T09:31:27:493 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ResultScreen.cs ...
2018-10-12T09:31:27:494 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:494 	Trace			Expanding query expressions done
2018-10-12T09:31:27:494 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:495 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:495 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:496 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ResultScreen.cs done
2018-10-12T09:31:27:496 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ScreenUtils.cs ...
2018-10-12T09:31:27:496 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:497 	Trace			Expanding query expressions done
2018-10-12T09:31:27:497 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:497 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:497 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ScreenUtils.cs done
2018-10-12T09:31:27:498 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageSelectionScreen.cs ...
2018-10-12T09:31:27:499 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:499 	Trace			Expanding query expressions done
2018-10-12T09:31:27:500 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:501 	Trace			Accepting lambda fixer visitor done
2018-10-12T09:31:27:502 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:502 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageSelectionScreen.cs done
2018-10-12T09:31:27:502 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\UIReusable.cs ...
2018-10-12T09:31:27:503 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:503 	Trace			Expanding query expressions done
2018-10-12T09:31:27:504 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:504 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:504 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\UIReusable.cs done
2018-10-12T09:31:27:504 	Trace		Source file C:\Users\Pedro\AppData\Local\Temp\.NETFramework,Version=v4.6.1.AssemblyAttributes.cs ...
2018-10-12T09:31:27:506 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:506 	Trace			Expanding query expressions done
2018-10-12T09:31:27:507 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:507 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:508 	Trace		Source file C:\Users\Pedro\AppData\Local\Temp\.NETFramework,Version=v4.6.1.AssemblyAttributes.cs done
2018-10-12T09:31:27:508 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs ...
2018-10-12T09:31:27:508 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:508 	Trace			Expanding query expressions done
2018-10-12T09:31:27:509 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:509 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:509 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs done
2018-10-12T09:31:27:509 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs ...
2018-10-12T09:31:27:509 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:510 	Trace			Expanding query expressions done
2018-10-12T09:31:27:510 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:510 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:510 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs done
2018-10-12T09:31:27:511 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs ...
2018-10-12T09:31:27:511 	Trace			Parsing syntax tree done
2018-10-12T09:31:27:511 	Trace			Expanding query expressions done
2018-10-12T09:31:27:512 	Trace			Accepting lambda detector visitor done
2018-10-12T09:31:27:512 	Trace			Accepting type system convert visitor done
2018-10-12T09:31:27:512 	Trace		Source file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs done
2018-10-12T09:31:27:512 	Info		Building syntax tree done
2018-10-12T09:31:27:517 	Trace		Loaded assembly: ICSharpCode.NRefactory.Cecil, Version=5.0.0.0, Culture=neutral, PublicKeyToken=d4bfe873e7598c49
2018-10-12T09:31:27:518 	Info		Assembly definition to references...
2018-10-12T09:31:27:518 	Trace			Loading AssemblyDefinition Bridge ...
2018-10-12T09:31:28:584 	Trace			Loading AssemblyDefinition done
2018-10-12T09:31:28:585 	Trace			Loading AssemblyDefinition Bridge.Html5 ...
2018-10-12T09:31:28:625 	Trace			Loading AssemblyDefinition done
2018-10-12T09:31:28:625 	Info		Assembly definition to references done
2018-10-12T09:31:28:646 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\App.cs
2018-10-12T09:31:28:901 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\Properties\AssemblyInfo.cs
2018-10-12T09:31:28:902 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Debugger.cs
2018-10-12T09:31:28:917 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\DeepCloneHelper.cs
2018-10-12T09:31:28:926 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Extensions.cs
2018-10-12T09:31:28:929 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ICopyable.cs
2018-10-12T09:31:28:930 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ObjectCloner.cs
2018-10-12T09:31:28:960 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Point.cs
2018-10-12T09:31:28:978 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\RandomSupplier.cs
2018-10-12T09:31:28:980 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Rectangle.cs
2018-10-12T09:31:28:988 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\TimeStamp.cs
2018-10-12T09:31:28:989 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Unicode.cs
2018-10-12T09:31:28:990 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector2D.cs
2018-10-12T09:31:29:003 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector3D.cs
2018-10-12T09:31:29:021 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Accessor.cs
2018-10-12T09:31:29:022 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ClonedState.cs
2018-10-12T09:31:29:023 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ECSManager.cs
2018-10-12T09:31:29:028 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Entity.cs
2018-10-12T09:31:29:030 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ProcessorFlex.cs
2018-10-12T09:31:29:031 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\CharByCharAnimation.cs
2018-10-12T09:31:29:033 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\BlinkAnimation.cs
2018-10-12T09:31:29:034 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextGame.cs
2018-10-12T09:31:29:034 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextScreenN.cs
2018-10-12T09:31:29:035 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\KeyboardIO.cs
2018-10-12T09:31:29:035 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseHover.cs
2018-10-12T09:31:29:036 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseIO.cs
2018-10-12T09:31:29:036 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\UnicodeRemap.cs
2018-10-12T09:31:29:037 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\Palette.cs
2018-10-12T09:31:29:037 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\TestGame.cs
2018-10-12T09:31:29:038 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextBoard.cs
2018-10-12T09:31:29:054 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextWorld.cs
2018-10-12T09:31:29:065 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleSetup.cs
2018-10-12T09:31:29:079 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DebugExtra\DebugEx.cs
2018-10-12T09:31:29:080 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DeckManager.cs
2018-10-12T09:31:29:083 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\ECSIntegration.cs
2018-10-12T09:31:29:083 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyAI.cs
2018-10-12T09:31:29:083 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyDataCreator.cs
2018-10-12T09:31:29:085 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\SpawnFactory.cs
2018-10-12T09:31:29:087 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\Happs\Happ.cs
2018-10-12T09:31:29:089 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\InputHolder.cs
2018-10-12T09:31:29:090 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveCreatorProg.cs
2018-10-12T09:31:29:095 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveData.cs
2018-10-12T09:31:29:097 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataExecuter.cs
2018-10-12T09:31:29:109 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataTags.cs
2018-10-12T09:31:29:109 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleMain.cs
2018-10-12T09:31:29:118 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageData.cs
2018-10-12T09:31:29:123 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageToBattle.cs
2018-10-12T09:31:29:124 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\TrackBattle.cs
2018-10-12T09:31:29:130 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AsyncTasks.cs
2018-10-12T09:31:29:132 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AttackPreview.cs
2018-10-12T09:31:29:133 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\BattleRender.cs
2018-10-12T09:31:29:168 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ColorStuff.cs
2018-10-12T09:31:29:170 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\GameMain.cs
2018-10-12T09:31:29:174 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HappHandling.cs
2018-10-12T09:31:29:198 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreen.cs
2018-10-12T09:31:29:203 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreenIntegration.cs
2018-10-12T09:31:29:203 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\InputHandling.cs
2018-10-12T09:31:29:206 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ITextScreen.cs
2018-10-12T09:31:29:206 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MessageOnPosition.cs
2018-10-12T09:31:29:207 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ModeSelectionScreen.cs
2018-10-12T09:31:29:208 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MouseHoverText.cs
2018-10-12T09:31:29:209 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\NavigationKeyboard.cs
2018-10-12T09:31:29:211 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\PreviewSystem.cs
2018-10-12T09:31:29:215 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ReflectionTest.cs
2018-10-12T09:31:29:216 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageGroupSelectionScreen.cs
2018-10-12T09:31:29:218 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ResultScreen.cs
2018-10-12T09:31:29:225 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ScreenUtils.cs
2018-10-12T09:31:29:225 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageSelectionScreen.cs
2018-10-12T09:31:29:228 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\UIReusable.cs
2018-10-12T09:31:29:228 	Trace		Preconvert C:\Users\Pedro\AppData\Local\Temp\.NETFramework,Version=v4.6.1.AssemblyAttributes.cs
2018-10-12T09:31:29:229 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs
2018-10-12T09:31:29:229 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs
2018-10-12T09:31:29:229 	Trace		Preconvert C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs
2018-10-12T09:31:29:232 	Info		Inspecting types...
2018-10-12T09:31:29:233 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\App.cs
2018-10-12T09:31:29:253 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\Properties\AssemblyInfo.cs
2018-10-12T09:31:29:267 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Debugger.cs
2018-10-12T09:31:29:271 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\DeepCloneHelper.cs
2018-10-12T09:31:29:271 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Extensions.cs
2018-10-12T09:31:29:272 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ICopyable.cs
2018-10-12T09:31:29:272 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\ObjectCloner.cs
2018-10-12T09:31:29:273 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Point.cs
2018-10-12T09:31:29:278 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\RandomSupplier.cs
2018-10-12T09:31:29:279 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Rectangle.cs
2018-10-12T09:31:29:279 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\TimeStamp.cs
2018-10-12T09:31:29:280 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Unicode.cs
2018-10-12T09:31:29:280 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector2D.cs
2018-10-12T09:31:29:282 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\BaseUtils\Vector3D.cs
2018-10-12T09:31:29:284 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Accessor.cs
2018-10-12T09:31:29:284 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ClonedState.cs
2018-10-12T09:31:29:285 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ECSManager.cs
2018-10-12T09:31:29:286 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\Entity.cs
2018-10-12T09:31:29:286 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolutionRmk\ECS\ProcessorFlex.cs
2018-10-12T09:31:29:287 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\CharByCharAnimation.cs
2018-10-12T09:31:29:287 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\BlinkAnimation.cs
2018-10-12T09:31:29:287 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextGame.cs
2018-10-12T09:31:29:288 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\ITextScreenN.cs
2018-10-12T09:31:29:291 	Trace		Loaded assembly: Object.Net.Utilities, Version=2.5.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:29:300 	Trace		Loaded assembly: Anonymously Hosted DynamicMethods Assembly, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:29:302 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\KeyboardIO.cs
2018-10-12T09:31:29:303 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseHover.cs
2018-10-12T09:31:29:303 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\MouseIO.cs
2018-10-12T09:31:29:304 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\UnicodeRemap.cs
2018-10-12T09:31:29:304 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\Palette.cs
2018-10-12T09:31:29:305 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\GameScreen\TestGame.cs
2018-10-12T09:31:29:305 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextBoard.cs
2018-10-12T09:31:29:306 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\ReusablePidrohVS\TextRenderingLogic\TextWorld.cs
2018-10-12T09:31:29:307 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleSetup.cs
2018-10-12T09:31:29:308 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DebugExtra\DebugEx.cs
2018-10-12T09:31:29:308 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\DeckManager.cs
2018-10-12T09:31:29:309 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\ECSIntegration.cs
2018-10-12T09:31:29:309 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyAI.cs
2018-10-12T09:31:29:310 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\EnemyDataCreator.cs
2018-10-12T09:31:29:310 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\SpawnFactory.cs
2018-10-12T09:31:29:311 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\Happs\Happ.cs
2018-10-12T09:31:29:311 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\InputHolder.cs
2018-10-12T09:31:29:312 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveCreatorProg.cs
2018-10-12T09:31:29:313 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveData.cs
2018-10-12T09:31:29:314 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataExecuter.cs
2018-10-12T09:31:29:322 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\MoveDataTags.cs
2018-10-12T09:31:29:323 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\BattleMain.cs
2018-10-12T09:31:29:324 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageData.cs
2018-10-12T09:31:29:325 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\StageToBattle.cs
2018-10-12T09:31:29:326 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedLogic\TrackBattle.cs
2018-10-12T09:31:29:326 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AsyncTasks.cs
2018-10-12T09:31:29:327 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\AttackPreview.cs
2018-10-12T09:31:29:327 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\BattleRender.cs
2018-10-12T09:31:29:329 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ColorStuff.cs
2018-10-12T09:31:29:330 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\GameMain.cs
2018-10-12T09:31:29:331 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HappHandling.cs
2018-10-12T09:31:29:331 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreen.cs
2018-10-12T09:31:29:332 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\HelpScreenIntegration.cs
2018-10-12T09:31:29:332 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\InputHandling.cs
2018-10-12T09:31:29:334 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ITextScreen.cs
2018-10-12T09:31:29:334 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MessageOnPosition.cs
2018-10-12T09:31:29:335 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ModeSelectionScreen.cs
2018-10-12T09:31:29:335 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\MouseHoverText.cs
2018-10-12T09:31:29:335 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\NavigationKeyboard.cs
2018-10-12T09:31:29:336 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\PreviewSystem.cs
2018-10-12T09:31:29:336 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ReflectionTest.cs
2018-10-12T09:31:29:337 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageGroupSelectionScreen.cs
2018-10-12T09:31:29:337 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ResultScreen.cs
2018-10-12T09:31:29:338 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\ScreenUtils.cs
2018-10-12T09:31:29:338 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\StageSelectionScreen.cs
2018-10-12T09:31:29:339 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\TurnBasedTextRendering\UIReusable.cs
2018-10-12T09:31:29:340 	Trace		Visiting syntax tree C:\Users\Pedro\AppData\Local\Temp\.NETFramework,Version=v4.6.1.AssemblyAttributes.cs
2018-10-12T09:31:29:342 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs
2018-10-12T09:31:29:342 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs
2018-10-12T09:31:29:342 	Trace		Visiting syntax tree C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\obj\Debug\TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs
2018-10-12T09:31:29:343 	Info		Inspecting types done
2018-10-12T09:31:29:343 	Info		Creating emitter...
2018-10-12T09:31:29:347 	Trace		Initializing items for Bridge types...
2018-10-12T09:31:29:355 	Trace		Initializing items for Bridge types done
2018-10-12T09:31:29:356 	Trace		Sorting types infos by name...
2018-10-12T09:31:29:357 	Trace		Sorting types infos by name done
2018-10-12T09:31:29:357 	Trace		Sorting types by inheritance...
2018-10-12T09:31:29:359 	Trace		Loaded assembly: TopologicalSorting, Version=1.0.2.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:29:362 	Trace		Topological sorting...
2018-10-12T09:31:29:363 	Trace			Topological sorting first iteration...
2018-10-12T09:31:29:369 	Trace				HitCounter0 = 152
2018-10-12T09:31:29:370 	Trace				HitCounter1 = 144
2018-10-12T09:31:29:370 	Trace				HitCounter2 = 36
2018-10-12T09:31:29:370 	Trace				HitCounter3 = 36
2018-10-12T09:31:29:370 	Trace				HitCounter4 = 41
2018-10-12T09:31:29:371 	Trace				HitCounter5 = 0
2018-10-12T09:31:29:371 	Trace				HitCounter6 = 0
2018-10-12T09:31:29:371 	Trace			Topological sorting first iteration done
2018-10-12T09:31:29:371 	Trace			Topological sorting third iteration...
2018-10-12T09:31:29:372 	Trace				Calculate sorting...
2018-10-12T09:31:29:375 	Trace				Calculate sorting done
2018-10-12T09:31:29:376 	Trace				Getting Reflection names for 152 types...
2018-10-12T09:31:29:376 	Trace				Got Enumerable<ISet<OrderedProcess>>
2018-10-12T09:31:29:377 	Trace				Got Enumerator<ISet<OrderedProcess>>
2018-10-12T09:31:29:379 	Trace				Getting Reflection names done
2018-10-12T09:31:29:379 	Trace				HitCounter0 = 4
2018-10-12T09:31:29:379 	Trace				HitCounter1 = 152
2018-10-12T09:31:29:379 	Trace				HitCounter2 = 152
2018-10-12T09:31:29:380 	Trace				HitCounter3 = 0
2018-10-12T09:31:29:380 	Trace				HitCounter4 = 0
2018-10-12T09:31:29:380 	Trace				HitCounter5 = 0
2018-10-12T09:31:29:380 	Trace				HitCounter6 = 0
2018-10-12T09:31:29:381 	Trace			Topological sorting third iteration done
2018-10-12T09:31:29:381 	Trace		Topological sorting done
2018-10-12T09:31:29:382 	Trace		Priority sorting...
2018-10-12T09:31:29:385 	Trace		Priority sorting done
2018-10-12T09:31:29:385 	Trace		Sorting types by inheritance done
2018-10-12T09:31:29:387 	Info		Creating emitter done
2018-10-12T09:31:29:390 	Trace		Sorting references...
2018-10-12T09:31:29:390 	Trace				Calculate sorting references...
2018-10-12T09:31:29:391 	Trace				Calculate sorting references done
2018-10-12T09:31:29:391 	Trace				Got Enumerable<ISet<OrderedProcess>>
2018-10-12T09:31:29:391 	Trace				Got Enumerator<ISet<OrderedProcess>>
2018-10-12T09:31:29:392 	Trace			Handling mscorlib
2018-10-12T09:31:29:392 	Trace			Handling Bridge
2018-10-12T09:31:29:392 	Trace			Handling Bridge.Html5
2018-10-12T09:31:29:393 	Trace		Sorting references done:
2018-10-12T09:31:29:393 	Trace			Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:29:393 	Trace			Bridge.Html5, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:29:393 	Info		Before emitting...
2018-10-12T09:31:29:394 	Info		Before emitting done
2018-10-12T09:31:29:395 	Info		Emitting...
2018-10-12T09:31:29:397 	Trace		Emitting block Bridge.Translator.EmitBlock
2018-10-12T09:31:31:010 	Info		Transforming outputs...
2018-10-12T09:31:31:012 	Trace		Wrapping to modules...
2018-10-12T09:31:31:014 	Trace		Wrapping to modules done
2018-10-12T09:31:31:015 	Trace		Combining outputs...
2018-10-12T09:31:31:016 	Trace		File name BridgeBuild.js
2018-10-12T09:31:31:026 	Trace		File name BridgeBuild.meta.js
2018-10-12T09:31:31:028 	Trace		Combining outputs done
2018-10-12T09:31:31:028 	Info		Transforming outputs done
2018-10-12T09:31:31:029 	Info		Emitting done
2018-10-12T09:31:31:029 	Info		After emitting...
2018-10-12T09:31:31:030 	Info		After emitting done
2018-10-12T09:31:31:030 	Info		Translating done
2018-10-12T09:31:31:031 	Info		Post processing...
2018-10-12T09:31:31:031 	Info		outputPath is C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\
2018-10-12T09:31:31:033 	Trace		Preparing resources config...
2018-10-12T09:31:31:034 	Trace		The resources config section has 0 non-default settings
2018-10-12T09:31:31:036 	Trace		CheckConsoleConfigSetting...
2018-10-12T09:31:31:037 	Trace		CheckConsoleConfigSetting done
2018-10-12T09:31:31:039 	Trace		Done preparing resources config
2018-10-12T09:31:31:039 	Info		projectPath is C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild
2018-10-12T09:31:31:040 	Info		Extracting core scripts...
2018-10-12T09:31:31:042 	Info		Extracting resources...
2018-10-12T09:31:31:044 	Trace		Checking if reference Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null contains Bridge Resources List Bridge.Resources.json
2018-10-12T09:31:31:045 	Trace		Reading Bridge Resources List
2018-10-12T09:31:31:046 	Trace		Read Bridge Resources List: [
  {
    "FileName": "bridge.js",
    "Name": "bridge.js",
    "Path": null,
    "Parts": null
  },
  {
    "FileName": "bridge.console.js",
    "Name": "bridge.console.js",
    "Path": null,
    "Parts": null
  },
  {
    "FileName": "bridge.d.ts",
    "Name": "bridge.d.ts",
    "Path": null,
    "Parts": null
  },
  {
    "FileName": "bridge.meta.js",
    "Name": "bridge.meta.js",
    "Path": null,
    "Parts": null
  }
]
2018-10-12T09:31:31:054 	Trace		Extracting item bridge.js
2018-10-12T09:31:31:054 	Trace		Resource name bridge.js and file name: bridge.js
2018-10-12T09:31:31:055 	Trace		Did not find extract resource option for resource name bridge.js. Will use default embed behavior
2018-10-12T09:31:31:058 	Trace		Adding referenced output bridge.js
2018-10-12T09:31:31:065 	Trace		Extracting item bridge.console.js
2018-10-12T09:31:31:066 	Trace		Resource name bridge.console.js and file name: bridge.console.js
2018-10-12T09:31:31:066 	Trace		Did not find extract resource option for resource name bridge.console.js. Will use default embed behavior
2018-10-12T09:31:31:066 	Trace		Adding referenced output bridge.console.js
2018-10-12T09:31:31:067 	Trace		Extracting item bridge.d.ts
2018-10-12T09:31:31:067 	Trace		Resource name bridge.d.ts and file name: bridge.d.ts
2018-10-12T09:31:31:067 	Trace		Did not find extract resource option for resource name bridge.d.ts. Will use default embed behavior
2018-10-12T09:31:31:068 	Trace		Extracting item bridge.meta.js
2018-10-12T09:31:31:068 	Trace		Resource name bridge.meta.js and file name: bridge.meta.js
2018-10-12T09:31:31:069 	Trace		Did not find extract resource option for resource name bridge.meta.js. Will use default embed behavior
2018-10-12T09:31:31:069 	Trace		Adding referenced output bridge.meta.js
2018-10-12T09:31:31:073 	Trace		Checking if reference Bridge.Html5, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null contains Bridge Resources List Bridge.Resources.json
2018-10-12T09:31:31:073 	Trace		Reference Bridge.Html5, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null does not contain Bridge Resources List
2018-10-12T09:31:31:074 	Trace		Checking if reference Bridge.Html5, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null contains Bridge Resources List Bridge.Resources.list
2018-10-12T09:31:31:074 	Trace		Reference Bridge.Html5, Version=17.0.0.0, Culture=neutral, PublicKeyToken=null does not contain Bridge Resources List
2018-10-12T09:31:31:074 	Info		Done extracting resources
2018-10-12T09:31:31:078 	Trace		Loaded assembly: AjaxMin, Version=5.14.5506.26196, Culture=neutral, PublicKeyToken=21ef50ce11b5d80f
2018-10-12T09:31:31:080 	Info		Skipping extracting Locales
2018-10-12T09:31:31:081 	Info		Done extracting core scripts
2018-10-12T09:31:31:082 	Trace		Minification...
2018-10-12T09:31:31:083 	Trace		No minification required as OutputFormatting = Formatted
2018-10-12T09:31:31:084 	Trace		Combining locales...
2018-10-12T09:31:31:084 	Trace		Skipping combining locales as CombineLocales and CombineScripts config oiptions are both switched off.
2018-10-12T09:31:31:086 	Trace		Combining project outputs...
2018-10-12T09:31:31:087 	Trace		Skipping project outputs as CombineScripts config option switched off.
2018-10-12T09:31:31:089 	Info		Starts Save with projectOutputPath = C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\
2018-10-12T09:31:31:092 	Trace		Output bridge.js
2018-10-12T09:31:31:093 	Trace		Output file name changed to C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.js
2018-10-12T09:31:31:094 	Trace		Output full name C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.js
2018-10-12T09:31:31:105 	Trace		Saving content (string) into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.js ...
2018-10-12T09:31:31:106 	Trace		Saved file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.js
2018-10-12T09:31:31:106 	Trace		Output bridge.console.js
2018-10-12T09:31:31:106 	Trace		Output file name changed to C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.console.js
2018-10-12T09:31:31:107 	Trace		Output full name C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.console.js
2018-10-12T09:31:31:107 	Trace		Saving content (string) into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.console.js ...
2018-10-12T09:31:31:108 	Trace		Saved file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.console.js
2018-10-12T09:31:31:109 	Trace		Output bridge.meta.js
2018-10-12T09:31:31:109 	Trace		Output file name changed to C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.meta.js
2018-10-12T09:31:31:109 	Trace		Output full name C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.meta.js
2018-10-12T09:31:31:112 	Trace		Saving content (string) into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.meta.js ...
2018-10-12T09:31:31:113 	Trace		Saved file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\bridge.meta.js
2018-10-12T09:31:31:114 	Trace		Output BridgeBuild.js
2018-10-12T09:31:31:114 	Trace		Output file name changed to C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js
2018-10-12T09:31:31:114 	Trace		Output full name C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js
2018-10-12T09:31:31:158 	Trace		SourceMap for C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js
2018-10-12T09:31:31:159 	Trace		{
  "version": 3,
  "file": "BridgeBuild.js",
  "sourceRoot": "",
  "sources": ["App.cs","../../ReusablePidrohVS/BaseUtils/ObjectCloner.cs","../../ReusablePidrohVS/BaseUtils/Debugger.cs","../../ReusablePidrohVS/BaseUtils/DeepCloneHelper.cs","../../ReusablePidrohVS/BaseUtils/Extensions.cs","../../ReusablePidrohVS/BaseUtils/Point.cs","../../ReusablePidrohVS/BaseUtils/RandomSupplier.cs","../../ReusablePidrohVS/BaseUtils/Rectangle.cs","../../ReusablePidrohVS/BaseUtils/TimeStamp.cs","../../ReusablePidrohVS/BaseUtils/Unicode.cs","../../ReusablePidrohVS/BaseUtils/Vector2D.cs","../../ReusablePidrohVS/BaseUtils/Vector3D.cs","../TurnBasedLogic/MoveData.cs","../TurnBasedTextRendering/AsyncTasks.cs","../TurnBasedLogic/BattleSetup.cs","../TurnBasedLogic/BattleMain.cs","../TurnBasedTextRendering/ColorStuff.cs","../TurnBasedLogic/DebugExtra/DebugEx.cs","../TurnBasedLogic/DeckManager.cs","../TurnBasedLogic/ECSIntegration.cs","../TurnBasedLogic/EnemyAI.cs","../TurnBasedLogic/SpawnFactory.cs","../TurnBasedLogic/EnemyDataCreator.cs","../TurnBasedLogic/StageData.cs","../TurnBasedLogic/MoveDataExecuter.cs","../TurnBasedLogic/Happs/Happ.cs","../TurnBasedLogic/InputHolder.cs","../TurnBasedLogic/MoveCreatorProg.cs","../TurnBasedLogic/TrackBattle.cs","../TurnBasedLogic/StageToBattle.cs","../../VisualStudioSolutionRmk/ECS/Accessor.cs","../../VisualStudioSolutionRmk/ECS/ClonedState.cs","../../VisualStudioSolutionRmk/ECS/ECSManager.cs","../../VisualStudioSolutionRmk/ECS/Entity.cs","../../VisualStudioSolutionRmk/ECS/ProcessorFlex.cs","../../ReusablePidrohVS/TextRenderingLogic/TextWorld.cs","../../ReusablePidrohVS/TextRenderingLogic/Palette.cs","../../ReusablePidrohVS/TextRenderingLogic/GameScreen/KeyboardIO.cs","../../ReusablePidrohVS/TextRenderingLogic/GameScreen/MouseHover.cs","../../ReusablePidrohVS/TextRenderingLogic/GameScreen/UnicodeRemap.cs","../../ReusablePidrohVS/TextRenderingLogic/TextBoard.cs","../../ReusablePidrohVS/TextRenderingLogic/GameScreen/ITextScreenN.cs","../TurnBasedTextRendering/AttackPreview.cs","../TurnBasedTextRendering/HappHandling.cs","../TurnBasedTextRendering/HelpScreenIntegration.cs","../TurnBasedTextRendering/HelpScreen.cs","../TurnBasedTextRendering/InputHandling.cs","../TurnBasedTextRendering/MessageOnPosition.cs","../TurnBasedTextRendering/MouseHoverText.cs","../TurnBasedTextRendering/NavigationKeyboard.cs","../TurnBasedTextRendering/PreviewSystem.cs","../TurnBasedTextRendering/ReflectionTest.cs","../TurnBasedTextRendering/UIReusable.cs","../TurnBasedTextRendering/BattleRender.cs","../TurnBasedTextRendering/GameMain.cs","../TurnBasedTextRendering/ResultScreen.cs","../TurnBasedTextRendering/StageGroupSelectionScreen.cs","../../ReusablePidrohVS/TextRenderingLogic/GameScreen/TestGame.cs","../TurnBasedTextRendering/ModeSelectionScreen.cs","../TurnBasedTextRendering/StageSelectionScreen.cs","../../ReusablePidrohVS/TextRenderingLogic/BlinkAnimation.cs","../../ReusablePidrohVS/TextRenderingLogic/CharByCharAnimation.cs"],
  "names": [""],
  "mappings": "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",
  "sourcesContent": ["using Bridge;\r\nusing Bridge.Html5;\r\n//using ECS;\r\nusing Newtonsoft.Json;\r\nusing Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TurnBased.TextRendering;\r\n//using Pidroh.ConsoleApp.Turnbased;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace BridgeBuild\r\n{\r\n    public class App\r\n    {\r\n        private static int buffer;\r\n        private static bool bufferOn;\r\n        //private static HTMLPreElement text;\r\n        private static GameMain gr;\r\n        private static TextBoard TextBoard;\r\n        //private static StringBuilder sb;\r\n        private static string[] colors;\r\n        private static int bufferUnicode = -1;\r\n        private static TextBoard aux;\r\n        static DateTime last = DateTime.Now;\r\n        private static bool CanDraw;\r\n\r\n        private static void SetupGame(out GameMain gr, out TextBoard TextBoard)\r\n        {\r\n            \r\n            //Console.WriteLine(\"Setup\");\r\n            Random rnd = new Random();\r\n            RandomSupplier.Generate = () =>\r\n            {\r\n                float v = (float)rnd.NextDouble();\r\n                //Console.WriteLine(v);\r\n                return v;\r\n            };\r\n\r\n            gr = new GameMain();\r\n            TextBoard = gr.GetBoard();\r\n            aux = new TextBoard(300, 300);\r\n\r\n\r\n       \r\n        }\r\n\r\n        public class Bla\r\n        {\r\n            public int i = 3;\r\n            public BridgeBuild.App.Vector pos = new BridgeBuild.App.Vector();\r\n        }\r\n        public struct Vector\r\n        {\r\n            public float x;\r\n            public float y;\r\n        }\r\n\r\n        static List<int> keysDown = new List<int>();\r\n\r\n        public static void Main()\r\n        {\r\n            Debugger.ActiveStatic = false;\r\n            //DeepCloneHelper.debug.Active(false);\r\n            //new ReflectionTest();\r\n            TestEntitySystem();\r\n            //Console.WriteLine(\"Game Start\");\r\n            SetupGame(out gr, out TextBoard);\r\n            colors = new string[30];\r\n            for (int i = 0; i < ColorStuff.colors.Length; i++)\r\n            {\r\n\r\n                colors[i] = ColorStuff.colors[i];\r\n            }\r\n\r\n\r\n\r\n            var style = new HTMLStyleElement();\r\n            style.InnerHTML = \"html,body {font-family: Courier; background-color:#1f2526; height: 100%; color:#888;}\" + \"\\n #canvas-container {width: 100%; height: 100%; text-align:center; vertical-align: middle; } \";\r\n            Document.Head.AppendChild(style);\r\n            buffer = 9;\r\n            bufferOn = false;\r\n\r\n            Document.OnKeyUp += (KeyboardEvent a) =>\r\n            {\r\n                int code = a.KeyCode;\r\n                if (code == 0) code = a.CharCode;\r\n                int unicode = code;\r\n                if(unicode >= 65 && unicode <= 90)\r\n                {\r\n                    unicode = unicode - 65 + 97;\r\n                }\r\n                while (keysDown.Contains(unicode))\r\n                {\r\n                    //Console.WriteLine(unicode);\r\n                    keysDown.Remove(unicode);\r\n                }\r\n                \r\n                \r\n\r\n            };\r\n\r\n            Document.OnKeyDown += (KeyboardEvent a) =>\r\n            {\r\n                if (a.KeyCode >= 37 && a.KeyCode <= 40) {\r\n                    Handle(a);\r\n                    a.PreventDefault();\r\n                }\r\n                if (a.KeyCode == Unicode.Escape)\r\n                {\r\n                    Handle(a);\r\n                    a.PreventDefault();\r\n                }\r\n                if (a.KeyCode == Unicode.Enter)\r\n                {\r\n                    Handle(a);\r\n                    a.PreventDefault();\r\n                }\r\n                //Console.WriteLine(\"KD\" + a.KeyCode);\r\n                //Console.WriteLine(\"KD\"+a.CharCode);\r\n\r\n                //Console.Write(unicode);\r\n                //buffer = a.CharCode;\r\n\r\n            };\r\n\r\n\r\n            Document.OnKeyPress += (KeyboardEvent a) =>\r\n            {\r\n                if (a.KeyCode >= 37 && a.KeyCode <= 40) return;\r\n                //Console.WriteLine(a.KeyCode);\r\n                Handle(a);\r\n                a.PreventDefault();\r\n\r\n                //Console.Write(unicode);\r\n                //buffer = a.CharCode;\r\n\r\n            };\r\n\r\n            UpdateGame();\r\n\r\n            // After building (Ctrl + Shift + B) this project, \r\n            // browse to the /bin/Debug or /bin/Release folder.\r\n\r\n            // A new bridge/ folder has been created and\r\n            // contains your projects JavaScript files. \r\n\r\n            // Open the bridge/index.html file in a browser by\r\n            // Right-Click > Open With..., then choose a\r\n            // web browser from the list\r\n\r\n            // This application will then run in a browser.\r\n        }\r\n\r\n        private static void Handle(KeyboardEvent a)\r\n        {\r\n            int code = a.KeyCode;\r\n            if (code == 0) code = a.CharCode;\r\n            int unicode = code;\r\n            bufferUnicode = unicode;\r\n            keysDown.Add(unicode);\r\n            \r\n        }\r\n\r\n        private static void TestEntitySystem()\r\n        {\r\n\r\n        }\r\n\r\n        private static void UpdateGame()\r\n        {\r\n            if (CanDraw)\r\n            {\r\n                DateTime now = DateTime.Now;\r\n                var secs = (now - last).TotalSeconds;\r\n                if (secs > 0.08)\r\n                {\r\n                    //Console.WriteLine(secs);\r\n                    secs = 0.08;\r\n                }\r\n\r\n                TextBoard = gr.GetBoard();\r\n                last = now;\r\n                gr.keyDownUnicode = bufferUnicode;\r\n                bufferUnicode = -1;\r\n                var mouseX = Script.Call<int>(\"getMouseX\");\r\n                var mouseY = Script.Call<int>(\"getMouseY\");\r\n                Point2D point2D = new Point2D(mouseX, mouseY);\r\n                if (gr.Mouse.pos != point2D)\r\n                {\r\n                    //Console.WriteLine(mouseX+\"sx\");\r\n                    //Console.WriteLine(mouseY + \"sy\");\r\n                    gr.Mouse.pos = point2D;\r\n                }\r\n                gr.Keyboard.downUnicodes.Clear();\r\n                gr.Keyboard.downUnicodes.AddRange(keysDown);\r\n\r\n                gr.Draw((float)secs);\r\n                \r\n\r\n                \r\n\r\n                //;;Script.Call(\"clear\");\r\n                for (int j = 0; j < TextBoard.Height; j++)\r\n                {\r\n                    for (int i = 0; i < TextBoard.Width; i++)\r\n                    {\r\n                        if (!aux.SameAs(TextBoard, x: i, y: j))\r\n                        {\r\n                            int tcI = TextBoard.TextColor[i, j];\r\n                            string color = colors[0];\r\n                            if (tcI < 0) { }\r\n                            else\r\n                                if (tcI >= colors.Length) { }\r\n                            else {\r\n                                color = colors[tcI];\r\n                            }\r\n                                \r\n\r\n                            \r\n                            string backColor = colors[TextBoard.BackColor[i, j]];\r\n                            char @char = TextBoard.CharAt(i, j);\r\n                            Script.Call(\"draw\", i, j, color, backColor, \"\" + @char);\r\n                            aux.Copy(TextBoard, x: i, y: j);\r\n                        }\r\n                        else\r\n                        {\r\n                            //Script.Call(\"draw\", i, j, colors[TextBoard.TextColor[i, j]], colors[TextBoard.BackColor[i, j]], \"x\");\r\n                        }\r\n\r\n\r\n                    }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                CanDraw = Script.Call<bool>(\"isReadyToDraw\");\r\n            }\r\n\r\n\r\n            Window.SetTimeout((global::System.Action)UpdateGame, 15);\r\n        }\r\n    }\r\n}","using Pidroh.BaseUtils.ArrayExtensions;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Reflection;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    public static class ObjectExtensions\r\n    {\r\n        private static readonly MethodInfo CloneMethod = typeof(Object).GetMethod(\"MemberwiseClone\", BindingFlags.NonPublic | BindingFlags.Instance);\r\n\r\n        public static bool IsPrimitiveMethod(this Type type)\r\n        {\r\n            if (type == typeof(String)) return true;\r\n            if (type == typeof(int)) return true;\r\n            if (type == typeof(float)) return true;\r\n            if (type == typeof(double)) return true;\r\n            if (type == typeof(char)) return true;\r\n            //bool isPrimitive = type.IsPrimitive;\r\n            bool isValueType = type.IsValueType;\r\n            return isValueType; //& isPrimitive;\r\n        }\r\n\r\n        public static Object Copy(this Object originalObject)\r\n        {\r\n            return InternalCopy(originalObject, new Dictionary<Object, Object>(new ReferenceEqualityComparer()));\r\n        }\r\n        private static Object InternalCopy(Object originalObject, IDictionary<Object, Object> visited)\r\n        {\r\n            if (originalObject == null) return null;\r\n            var typeToReflect = originalObject.GetType();\r\n            if (IsPrimitiveMethod(typeToReflect)) return originalObject;\r\n            if (visited.ContainsKey(originalObject)) return visited[originalObject];\r\n            if (typeof(Delegate).IsAssignableFrom(typeToReflect)) return null;\r\n            var cloneObject = CloneMethod.Invoke(originalObject, new object[] { });\r\n            if (typeToReflect.IsArray)\r\n            {\r\n                var arrayType = typeToReflect.GetElementType();\r\n                if (IsPrimitiveMethod(arrayType) == false)\r\n                {\r\n                    Array clonedArray = (Array)cloneObject;\r\n                    clonedArray.ForEach((global::System.Action<global::System.Array, int[]>)((array, indices) => array.SetValue(InternalCopy(clonedArray.GetValue(indices), visited), indices)));\r\n                }\r\n\r\n            }\r\n            visited.Add(originalObject, cloneObject);\r\n            CopyFields(originalObject, visited, cloneObject, typeToReflect);\r\n            RecursiveCopyBaseTypePrivateFields(originalObject, visited, cloneObject, typeToReflect);\r\n            return cloneObject;\r\n        }\r\n\r\n        private static void RecursiveCopyBaseTypePrivateFields(object originalObject, IDictionary<object, object> visited, object cloneObject, Type typeToReflect)\r\n        {\r\n            if (typeToReflect.BaseType != null)\r\n            {\r\n                RecursiveCopyBaseTypePrivateFields(originalObject, visited, cloneObject, typeToReflect.BaseType);\r\n                CopyFields(originalObject, visited, cloneObject, typeToReflect.BaseType, BindingFlags.Instance | BindingFlags.NonPublic, (global::System.Func<global::System.Reflection.FieldInfo, bool>)(info => info.IsPrivate));\r\n            }\r\n        }\r\n\r\n        private static void CopyFields(object originalObject, IDictionary<object, object> visited, object cloneObject, Type typeToReflect, BindingFlags bindingFlags = BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.FlattenHierarchy, Func<FieldInfo, bool> filter = null)\r\n        {\r\n            foreach (FieldInfo fieldInfo in typeToReflect.GetFields(bindingFlags))\r\n            {\r\n                if (filter != null && filter(fieldInfo) == false) continue;\r\n                if (IsPrimitiveMethod(fieldInfo.FieldType)) continue;\r\n                var originalFieldValue = fieldInfo.GetValue(originalObject);\r\n                var clonedFieldValue = InternalCopy(originalFieldValue, visited);\r\n                fieldInfo.SetValue(cloneObject, clonedFieldValue);\r\n            }\r\n        }\r\n        public static T Copy<T>(this T original)\r\n        {\r\n            return (T)Copy((Object)original);\r\n        }\r\n    }\r\n\r\n    public class ReferenceEqualityComparer : EqualityComparer<Object>\r\n    {\r\n        public override bool Equals(object x, object y)\r\n        {\r\n            return ReferenceEquals(x, y);\r\n        }\r\n        public override int GetHashCode(object obj)\r\n        {\r\n            if (obj == null) return 0;\r\n            return obj.GetHashCode();\r\n        }\r\n    }\r\n\r\n    namespace ArrayExtensions\r\n    {\r\n        public static class ArrayExtensions\r\n        {\r\n            public static void ForEach(this Array array, Action<Array, int[]> action)\r\n            {\r\n                if (array.Length == 0) return;\r\n                ArrayTraverse walker = new ArrayTraverse(array);\r\n                do action(array, walker.Position);\r\n                while (walker.Step());\r\n            }\r\n        }\r\n\r\n        internal class ArrayTraverse\r\n        {\r\n            public int[] Position;\r\n            private int[] maxLengths;\r\n\r\n            public ArrayTraverse(Array array)\r\n            {\r\n                maxLengths = new int[array.Rank];\r\n                for (int i = 0; i < array.Rank; ++i)\r\n                {\r\n                    maxLengths[i] = array.GetLength(i) - 1;\r\n                }\r\n                Position = new int[array.Rank];\r\n            }\r\n\r\n            public bool Step()\r\n            {\r\n                for (int i = 0; i < Position.Length; ++i)\r\n                {\r\n                    if (Position[i] < maxLengths[i])\r\n                    {\r\n                        Position[i]++;\r\n                        for (int j = 0; j < i; j++)\r\n                        {\r\n                            Position[j] = 0;\r\n                        }\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Reflection;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    public class Debugger\r\n    {\r\n        bool debugging;\r\n        int ident;\r\n        StringBuilder stringBuilder = new StringBuilder();\r\n\r\n        public static bool ActiveStatic { get; set; }\r\n\r\n        public Debugger(bool debugging)\r\n        {\r\n            if(ActiveStatic)\r\n                this.debugging = debugging;\r\n        }\r\n\r\n        public void Print(string s)\r\n        {\r\n            if (!debugging) return;\r\n            for (int i = 0; i < ident; i++)\r\n            {\r\n                Console.Write(' ');\r\n            }\r\n            Console.WriteLine(s);\r\n        }\r\n\r\n        internal void Deident()\r\n        {\r\n            ident = ident - 2; ;\r\n        }\r\n\r\n        internal void Ident()\r\n        {\r\n            ident = ident+2;\r\n        }\r\n\r\n        internal void Active()\r\n        {\r\n            if (!ActiveStatic) return;\r\n            debugging = true;\r\n        }\r\n\r\n        internal void Active(bool v)\r\n        {\r\n            if (!ActiveStatic) return;\r\n            debugging = v;\r\n        }\r\n\r\n        public void Print(Object obj)\r\n        {\r\n            if (!debugging) return;\r\n            stringBuilder.Length = 0;\r\n            \r\n            var type = obj.GetType();\r\n            stringBuilder.Append(\"Type: \");\r\n            stringBuilder.Append(type.Name);\r\n            stringBuilder.AppendLine();\r\n            var fields = type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);\r\n            foreach (var f in fields)\r\n            {\r\n                stringBuilder.Append(' ');\r\n                stringBuilder.Append(' ');\r\n                stringBuilder.Append(f.GetValue(obj));\r\n                stringBuilder.Append(' ');\r\n                stringBuilder.Append(' ');\r\n                stringBuilder.Append(f.Name);\r\n                stringBuilder.AppendLine();\r\n            }\r\n            Console.WriteLine(stringBuilder.ToString());\r\n        }\r\n\n    \nprivate static bool __Property__Initializer__ActiveStatic=true;}\r\n}\r\n","/****************************** Module Header ******************************\\\r\nModule Name:  DeepCloneHelper.cs\r\nProject:      CSDeepCloneObject\r\nCopyright (c) Microsoft Corporation.\r\n\r\nThe class contains the methods that implement deep clone using reflection.\r\n\r\nThis source is subject to the Microsoft Public License.\r\nSee http://www.microsoft.com/en-us/openness/licenses.aspx#MPL.\r\nAll other rights reserved.\r\n\r\nTHIS CODE AND INFORMATION IS PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND, \r\nEITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED \r\nWARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.\r\n\\***************************************************************************/\r\n\r\nusing System;\r\nusing System.Reflection;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    public static class DeepCloneHelper\r\n    {\r\n\r\n        public static Debugger debug = new Debugger(false);\r\n\r\n        /// <summary>\r\n        /// Get the deep clone of an object.\r\n        /// </summary>\r\n        /// <typeparam name=\"T\">The type of the obj.</typeparam>\r\n        /// <param name=\"obj\">It is the object used to deep clone.</param>\r\n        /// <returns>Return the deep clone.</returns>\r\n        public static T DeepClone<T>(T obj)\r\n        {\r\n            if (obj == null)\r\n            {\r\n                throw new ArgumentNullException(\"Object is null\");\r\n            }\r\n            return (T)CloneProcedure(obj);\r\n        }\r\n\r\n        public static void DeepCopyPartial(Object from, Object to)\r\n        {\r\n            if (from == null)\r\n            {\r\n                throw new ArgumentNullException(\"Object is null\");\r\n            }\r\n            CopyProcedurePartial(from, to);\r\n        }\r\n\r\n        /// <summary>\r\n        /// The method implements deep clone using reflection.\r\n        /// </summary>\r\n        /// <param name=\"obj\">It is the object used to deep clone.</param>\r\n        /// <returns>Return the deep clone.</returns>\r\n        private static object CloneProcedure(Object obj)\r\n        {\r\n            \r\n            if (obj == null)\r\n            {\r\n                return null;\r\n            }\r\n\r\n            Type type = obj.GetType();\r\n            \r\n            debug.Print(\"Cloning: \" + type);\r\n            //debug.Print(type);\r\n\r\n            // If the type of object is the value type, we will always get a new object when \r\n            // the original object is assigned to another variable. So if the type of the \r\n            // object is primitive or enum, we just return the object. We will process the \r\n            // struct type subsequently because the struct type may contain the reference \r\n            // fields.\r\n            // If the string variables contain the same chars, they always refer to the same \r\n            // string in the heap. So if the type of the object is string, we also return the \r\n            // object.\r\n            if (type.IsEnum || type == typeof(string) || type == typeof(int) || type == typeof(char) || type == typeof(float) || type == typeof(double) || type == typeof(Boolean))\r\n            {\r\n                    debug.Print(type + \" \" + obj+ \" -V\");\r\n                \r\n                return obj;\r\n            }\r\n            // If the type of the object is the Array, we use the CreateInstance method to get\r\n            // a new instance of the array. We also process recursively this method in the \r\n            // elements of the original array because the type of the element may be the reference \r\n            // type.\r\n            else if (type.IsArray)\r\n            {\r\n                \r\n                //string typeName = type.FullName.Replace(\"[]\", string.Empty);\r\n                //debug.Print(typeName);\r\n                Type typeElement = type.GetElementType();\r\n                \r\n                //debug.Print(typeElement+\"ss\");\r\n                var array = obj as Array;\r\n                int length = array.Length;\r\n                Array copiedArray = Array.CreateInstance(typeElement, length);\r\n                for (int i = 0; i < array.Length; i++)\r\n                {\r\n                    // Get the deep clone of the element in the original array and assign the \r\n                    // clone to the new array.\r\n                    copiedArray.SetValue(CloneProcedure(array.GetValue(i)), i);\r\n\r\n                }\r\n                return copiedArray;\r\n            }\r\n            // If the type of the object is class or struct, it may contain the reference fields, \r\n            // so we use reflection and process recursively this method in the fields of the object \r\n            // to get the deep clone of the object. \r\n            // We use Type.IsValueType method here because there is no way to indicate directly whether \r\n            // the Type is a struct type.\r\n            else if (type.IsClass||type.IsValueType)\r\n            {\r\n                object copiedObject = Activator.CreateInstance(obj.GetType());\r\n\r\n                // Get all FieldInfo.\r\n                FieldInfo[] fields = type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);\r\n                foreach (FieldInfo field in fields)\r\n                {\r\n\r\n                        debug.Print(\"Field: \" + field.Name);\r\n                    object fieldValue = field.GetValue(obj);\r\n                    if (fieldValue != null)\r\n                    {\r\n                            debug.Print(\"Field: \" + field.Name + \" being set\");\r\n                        // Get the deep clone of the field in the original object and assign the \r\n                        // clone to the field in the new object.\r\n                        field.SetValue(copiedObject, CloneProcedure(fieldValue));\r\n                    }\r\n\r\n                }\r\n\r\n                return copiedObject;\r\n            }\r\n            else\r\n            {\r\n                throw new ArgumentException(\"The object is unknown type\");\r\n            }\r\n        }\r\n\r\n        private static object CopyProcedurePartial(Object from, Object to)\r\n        {\r\n            if (from == null)\r\n            {\r\n                return null;\r\n            }\r\n\r\n            Type type = from.GetType();\r\n\r\n            debug.Print(\"Copying \"+type);\r\n            debug.Ident();\r\n\r\n            // If the type of object is the value type, we will always get a new object when \r\n            // the original object is assigned to another variable. So if the type of the \r\n            // object is primitive or enum, we just return the object. We will process the \r\n            // struct type subsequently because the struct type may contain the reference \r\n            // fields.\r\n            // If the string variables contain the same chars, they always refer to the same \r\n            // string in the heap. So if the type of the object is string, we also return the \r\n            // object.\r\n            if (type.IsEnum || type == typeof(string) || type == typeof(int) || type == typeof(char) || type == typeof(float) || type == typeof(double))\r\n            {\r\n\r\n                    debug.Print(type + \" \"+from + \" -V\");\r\n                debug.Deident();\r\n                return from;\r\n            }\r\n            // arrays not implemented\r\n            else if (type.IsArray)\r\n            {\r\n                debug.Deident();\r\n                return null;\r\n            }\r\n            // If the type of the object is class or struct, it may contain the reference fields, \r\n            // so we use reflection and process recursively this method in the fields of the object \r\n            // to get the deep clone of the object. \r\n            // We use Type.IsValueType method here because there is no way to indicate directly whether \r\n            // the Type is a struct type.\r\n            else if (type.IsClass || type.IsValueType)\r\n            {\r\n                object copiedObject = to;\r\n\r\n                // Get all FieldInfo.\r\n                FieldInfo[] fields = type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);\r\n                foreach (FieldInfo field in fields)\r\n                {\r\n\r\n                        debug.Print(\"Field: \" + field.Name);\r\n                    object fieldValue = field.GetValue(from);\r\n                    if (fieldValue != null)\r\n                    {\r\n                        debug.Print(\"Field: \" + field.Name + \" not null, being set\");\r\n                        // Get the deep clone of the field in the original object and assign the \r\n                        // clone to the field in the new object.\r\n                        debug.Ident();\r\n                        field.SetValue(copiedObject, CloneProcedure(fieldValue));\r\n                        debug.Deident();\r\n                    }\r\n\r\n                }\r\n                debug.Deident();\r\n                return copiedObject;\r\n            }\r\n            else\r\n            {\r\n                debug.Deident();\r\n                throw new ArgumentException(\"The object is unknown type\");\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n\r\n    public static class Extensions\r\n    {\r\n        //private static Random rng = new Random();\r\n\r\n        public static void Shuffle<T>(this IList<T> list)\r\n        {\r\n            int n = list.Count;\r\n            while (n > 1)\r\n            {\r\n                n--;\r\n                int k = RandomSupplier.Next(n + 1);\r\n                T value = list[k];\r\n                list[k] = list[n];\r\n                list[n] = value;\r\n            }\r\n        }\r\n\r\n        public static T RandomElement<T>(this IList<T> list)\r\n        {\r\n            var element = RandomSupplier.Next(list.Count);\r\n            return list[element];\r\n        }\r\n    }\r\n}\r\n","#region License\r\n/*\r\nMIT License\r\nCopyright © 2006 The Mono.Xna Team\r\n\r\nAll rights reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n#endregion License\r\nusing System;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    public struct Point2D : IEquatable<Point2D>\r\n    {\r\n        #region Private Fields\r\n\r\n        private static Point2D zeroPoint = new Point2D();\r\n\r\n        #endregion Private Fields\r\n\r\n\r\n        #region Public Fields\r\n\r\n        public int X;\r\n        public int Y;\r\n\r\n        #endregion Public Fields\r\n\r\n\r\n        #region Properties\r\n\r\n        public static Point2D Zero\r\n        {\r\n            get { return zeroPoint; }\r\n        }\r\n\r\n        #endregion Properties\r\n\r\n\r\n        #region Constructors\r\n\r\n        public Point2D(int x, int y)\r\n        {\r\n            this.X = x;\r\n            this.Y = y;\r\n        }\r\n\r\n        #endregion Constructors\r\n\r\n\r\n        #region Public methods\r\n\r\n        public static bool operator ==(Point2D a, Point2D b)\r\n        {\r\n            return a.Equals(b);\r\n        }\r\n\r\n        public static bool operator !=(Point2D a, Point2D b)\r\n        {\r\n            return !a.Equals(b);\r\n        }\r\n\r\n        public bool Equals(Point2D other)\r\n        {\r\n            return ((X == other.X) && (Y == other.Y));\r\n        }\r\n\r\n        public override bool Equals(object obj)\r\n        {\r\n            return (obj is Point2D) ? Equals((Point2D)obj) : false;\r\n        }\r\n\r\n        public override int GetHashCode()\r\n        {\r\n            return X ^ Y;\r\n        }\r\n\r\n        public override string ToString()\r\n        {\r\n            return string.Format(\"{{X:{0} Y:{1}}}\", X, Y);\r\n        }\r\n\r\n        #endregion\r\n    }\r\n}\r\n\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    static public class RandomSupplier\r\n    {\r\n        public static Func<float> Generate{ get; set; }\r\n\r\n        public static int Range(int min, int max) {\r\n            return (int) (Generate() * (max-min)+min);\r\n        }\r\n\r\n        public static T RandomElement<T>(T[] array)\r\n        {\r\n            return array[Range(0, array.Length)];\r\n        }\r\n\r\n        internal static int Next(int count)\r\n        {\r\n            return Range(0, count);\r\n        }\r\n    }\r\n}\r\n","#region License\r\n/*\r\nMIT License\r\nCopyright © 2006 The Mono.Xna Team\r\n\r\nAll rights reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n#endregion License\r\n\r\nusing System;\r\nusing System.Globalization;\r\nusing System.ComponentModel;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n\r\n    public struct Rect : IEquatable<Rect>\r\n    {\r\n        #region Private Fields\r\n\r\n        private static Rect emptyRectangle = new Rect();\r\n\r\n        #endregion Private Fields\r\n\r\n\r\n        #region Public Fields\r\n\r\n        public int X;\r\n        public int Y;\r\n        public int Width;\r\n        public int Height;\r\n\r\n        #endregion Public Fields\r\n\r\n\r\n        #region Public Properties\r\n\r\n        public static Rect Empty\r\n        {\r\n            get { return emptyRectangle; }\r\n        }\r\n\r\n        public int Left\r\n        {\r\n            get { return this.X; }\r\n        }\r\n\r\n        public int Right\r\n        {\r\n            get { return (this.X + this.Width); }\r\n        }\r\n\r\n        public int Top\r\n        {\r\n            get { return this.Y; }\r\n        }\r\n\r\n        public int Bottom\r\n        {\r\n            get { return (this.Y + this.Height); }\r\n        }\r\n\r\n        #endregion Public Properties\r\n\r\n\r\n        #region Constructors\r\n\r\n        public Rect(int x, int y, int width, int height)\r\n        {\r\n            this.X = x;\r\n            this.Y = y;\r\n            this.Width = width;\r\n            this.Height = height;\r\n        }\r\n\r\n        #endregion Constructors\r\n\r\n\r\n        #region Public Methods\r\n\r\n        public static bool operator ==(Rect a, Rect b)\r\n        {\r\n            return ((a.X == b.X) && (a.Y == b.Y) && (a.Width == b.Width) && (a.Height == b.Height));\r\n        }\r\n\r\n        public bool Contains(int x, int y)\r\n        {\r\n            return ((((this.X <= x) && (x < (this.X + this.Width))) && (this.Y <= y)) && (y < (this.Y + this.Height)));\r\n        }\r\n\r\n        public bool Contains(Vector2D value)\r\n        {\r\n            return ((((this.X <= value.X) && (value.X < (this.X + this.Width))) && (this.Y <= value.Y)) && (value.Y < (this.Y + this.Height)));\r\n        }\r\n\r\n        public bool Contains(Point2D value)\r\n        {\r\n            return ((((this.X <= value.X) && (value.X < (this.X + this.Width))) && (this.Y <= value.Y)) && (value.Y < (this.Y + this.Height)));\r\n        }\r\n\r\n        public bool Contains(Rect value)\r\n        {\r\n            return ((((this.X <= value.X) && ((value.X + value.Width) <= (this.X + this.Width))) && (this.Y <= value.Y)) && ((value.Y + value.Height) <= (this.Y + this.Height)));\r\n        }\r\n\r\n        public static bool operator !=(Rect a, Rect b)\r\n        {\r\n            return !(a == b);\r\n        }\r\n\r\n        public void Offset(Point2D offset)\r\n        {\r\n            X += offset.X;\r\n            Y += offset.Y;\r\n        }\r\n\r\n        public void Offset(int offsetX, int offsetY)\r\n        {\r\n            X += offsetX;\r\n            Y += offsetY;\r\n        }\r\n\r\n        public Point2D Center\r\n        {\r\n            get\r\n            {\r\n                return new Point2D((this.X + this.Width) / 2, (this.Y + this.Height) / 2);\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        public void Inflate(int horizontalValue, int verticalValue)\r\n        {\r\n            X -= horizontalValue;\r\n            Y -= verticalValue;\r\n            Width += horizontalValue * 2;\r\n            Height += verticalValue * 2;\r\n        }\r\n\r\n        public bool IsEmpty\r\n        {\r\n            get\r\n            {\r\n                return ((((this.Width == 0) && (this.Height == 0)) && (this.X == 0)) && (this.Y == 0));\r\n            }\r\n        }\r\n\r\n        public bool Equals(Rect other)\r\n        {\r\n            return this == other;\r\n        }\r\n\r\n        public override bool Equals(object obj)\r\n        {\r\n            return (obj is Rect) ? this == ((Rect)obj) : false;\r\n        }\r\n\r\n        public override string ToString()\r\n        {\r\n            return string.Format(\"{{X:{0} Y:{1} Width:{2} Height:{3}}}\", X, Y, Width, Height);\r\n        }\r\n\r\n        public override int GetHashCode()\r\n        {\r\n            return (this.X ^ this.Y ^ this.Width ^ this.Height);\r\n        }\r\n\r\n        public bool Intersects(Rect r2)\r\n        {\r\n            return !(r2.Left > Right\r\n                     || r2.Right < Left\r\n                     || r2.Top > Bottom\r\n                     || r2.Bottom < Top\r\n                    );\r\n\r\n        }\r\n\r\n\r\n        public void Intersects(ref Rect value, out bool result)\r\n        {\r\n            result = !(value.Left > Right\r\n                     || value.Right < Left\r\n                     || value.Top > Bottom\r\n                     || value.Bottom < Top\r\n                    );\r\n\r\n        }\r\n\r\n        #endregion Public Methods\r\n    }\r\n}","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    public class TimeStamp\r\n    {\r\n        public float CurrentSnap;\r\n\r\n        public TimeStampSnap GetSnap()\r\n        {\r\n            return new TimeStampSnap(CurrentSnap);\r\n        }\r\n        \r\n        public void Advance(float delta)\r\n        {\r\n            CurrentSnap += delta;\r\n        }\r\n    }\r\n\r\n    public struct TimeStampSnap\r\n    {\r\n        public readonly float TimeSnap;\r\n\r\n        public TimeStampSnap(float snap)\r\n        {\r\n            TimeSnap = snap;\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    public static class Unicode\r\n    {\r\n        public const int Space = 32;\r\n        public const int Enter = 13;\r\n\r\n        public const int keyDown = 40;\r\n        public const int keyLeft = 37;\r\n        public const int keyUp = 38;\r\n        public const int keyRight = 39;\r\n\r\n        public const char Uparrow2 = (char)24;\r\n        public const char Downarrow2 = (char)25;\r\n        public const char Rightarrow2 = (char)26;\r\n        public const char Leftarrow2 = (char)27;\r\n        public const char Uparrow = (char)30;\r\n        public const char Downarrow = (char)31;\r\n        public const char Leftarrow = (char)17;\r\n        public const char Rightarrow = (char)16;\r\n        public const char AsciiGridHor = (char)196;\r\n        public const char AsciiGridVer = (char)179;\r\n\r\n        public static readonly char[] grids = new char[] {\r\n            AsciiGridHor,\r\n            AsciiGridVer\r\n        };\r\n        public static readonly char AsciiGridUpLeft = (char)217;\r\n        public static readonly char AsciiGridUpRight = (char) 192;\r\n        public static readonly char AsciiGridUpRightLeft = (char)193;\r\n        public static readonly char AsciiGridDownLeft = (char)191;\r\n        public static readonly char AsciiGridDownRight = (char)218;\r\n        public static readonly char AsciiGridDownRightLeft = (char)194;\r\n        public static readonly int Escape = (char)27;\r\n    }\r\n}\r\n","using System;\r\nusing System.Text;\r\n//using System.Drawing;\r\nusing System.Globalization;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n    [Serializable]\r\n    public struct Vector2D : IEquatable<Vector2D>\r\n    {\r\n        #region Private Fields\r\n\r\n        private static Vector2D zeroVector = new Vector2D(0f, 0f);\r\n        private static Vector2D unitVector = new Vector2D(1f, 1f);\r\n        private static Vector2D unitXVector = new Vector2D(1f, 0f);\r\n        private static Vector2D unitYVector = new Vector2D(0f, 1f);\r\n\r\n        #endregion Private Fields\r\n\r\n\r\n        #region Public Fields\r\n\r\n        public float X;\r\n        public float Y;\r\n\r\n        #endregion Public Fields\r\n\r\n        # region Public Properties\r\n\r\n        public int XInt { get { return (int)X; } }\r\n        public int YInt { get { return (int)Y; } }\r\n\r\n        #endregion Public Properties\r\n\r\n        #region Constants\r\n        #endregion\r\n\r\n\r\n        #region Properties\r\n\r\n        public static Vector2D Zero\r\n        {\r\n            get { return zeroVector; }\r\n        }\r\n\r\n        public static Vector2D One\r\n        {\r\n            get { return unitVector; }\r\n        }\r\n\r\n        public static Vector2D UnitX\r\n        {\r\n            get { return unitXVector; }\r\n        }\r\n\r\n        public static Vector2D UnitY\r\n        {\r\n            get { return unitYVector; }\r\n        }\r\n\r\n        #endregion Properties\r\n\r\n\r\n        #region Constructors\r\n\r\n        public Vector2D(float x, float y)\r\n        {\r\n            this.X = x;\r\n            this.Y = y;\r\n        }\r\n\r\n        public Vector2D(float value)\r\n        {\r\n            this.X = value;\r\n            this.Y = value;\r\n        }\r\n\r\n        public static Vector2D InterpolateRounded(Vector2D startPosition, Vector2D endPosition, float ratio)\r\n        {\r\n            return (startPosition * (1 - ratio) + endPosition * ratio).Round();\r\n        }\r\n\r\n        private Vector2D Round()\r\n        {\r\n            return new Vector2D((float)Math.Round(X), (float)Math.Round(Y));\r\n        }\r\n\r\n        #endregion Constructors\r\n\r\n\r\n        #region Public Methods\r\n\r\n        public static Vector2D Add(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X += value2.X;\r\n            value1.Y += value2.Y;\r\n            return value1;\r\n        }\r\n\r\n        public static void Add(ref Vector2D value1, ref Vector2D value2, out Vector2D result)\r\n        {\r\n            result.X = value1.X + value2.X;\r\n            result.Y = value1.Y + value2.Y;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        public static float Distance(Vector2D value1, Vector2D value2)\r\n        {\r\n            float v1 = value1.X - value2.X, v2 = value1.Y - value2.Y;\r\n            return (float)Math.Sqrt((v1 * v1) + (v2 * v2));\r\n        }\r\n\r\n        public static void Distance(ref Vector2D value1, ref Vector2D value2, out float result)\r\n        {\r\n            float v1 = value1.X - value2.X, v2 = value1.Y - value2.Y;\r\n            result = (float)Math.Sqrt((v1 * v1) + (v2 * v2));\r\n        }\r\n\r\n        public static float DistanceSquared(Vector2D value1, Vector2D value2)\r\n        {\r\n            float v1 = value1.X - value2.X, v2 = value1.Y - value2.Y;\r\n            return (v1 * v1) + (v2 * v2);\r\n        }\r\n\r\n        public static void DistanceSquared(ref Vector2D value1, ref Vector2D value2, out float result)\r\n        {\r\n            float v1 = value1.X - value2.X, v2 = value1.Y - value2.Y;\r\n            result = (v1 * v1) + (v2 * v2);\r\n        }\r\n\r\n        public void Set(int x, int y)\r\n        {\r\n            X = x;\r\n            Y = y;\r\n\r\n        }\r\n\r\n        public static Vector2D Divide(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X /= value2.X;\r\n            value1.Y /= value2.Y;\r\n            return value1;\r\n        }\r\n\r\n        public static void Divide(ref Vector2D value1, ref Vector2D value2, out Vector2D result)\r\n        {\r\n            result.X = value1.X / value2.X;\r\n            result.Y = value1.Y / value2.Y;\r\n        }\r\n\r\n        public static Vector2D Divide(Vector2D value1, float divider)\r\n        {\r\n            float factor = 1 / divider;\r\n            value1.X *= factor;\r\n            value1.Y *= factor;\r\n            return value1;\r\n        }\r\n\r\n        public static void Divide(ref Vector2D value1, float divider, out Vector2D result)\r\n        {\r\n            float factor = 1 / divider;\r\n            result.X = value1.X * factor;\r\n            result.Y = value1.Y * factor;\r\n        }\r\n\r\n        public static float Dot(Vector2D value1, Vector2D value2)\r\n        {\r\n            return (value1.X * value2.X) + (value1.Y * value2.Y);\r\n        }\r\n\r\n        public static void Dot(ref Vector2D value1, ref Vector2D value2, out float result)\r\n        {\r\n            result = (value1.X * value2.X) + (value1.Y * value2.Y);\r\n        }\r\n\r\n        public override bool Equals(object obj)\r\n        {\r\n            if (obj is Vector2D)\r\n            {\r\n                return Equals((Vector2D)this);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        public bool Equals(Vector2D other)\r\n        {\r\n            return (X == other.X) && (Y == other.Y);\r\n        }\r\n\r\n        public static Vector2D Reflect(Vector2D vector, Vector2D normal)\r\n        {\r\n            Vector2D result;\r\n            float val = 2.0f * ((vector.X * normal.X) + (vector.Y * normal.Y));\r\n            result.X = vector.X - (normal.X * val);\r\n            result.Y = vector.Y - (normal.Y * val);\r\n            return result;\r\n        }\r\n\r\n        public static void Reflect(ref Vector2D vector, ref Vector2D normal, out Vector2D result)\r\n        {\r\n            float val = 2.0f * ((vector.X * normal.X) + (vector.Y * normal.Y));\r\n            result.X = vector.X - (normal.X * val);\r\n            result.Y = vector.Y - (normal.Y * val);\r\n        }\r\n\r\n        public override int GetHashCode()\r\n        {\r\n            return X.GetHashCode() + Y.GetHashCode();\r\n        }\r\n\r\n\r\n        public float Length()\r\n        {\r\n            return (float)Math.Sqrt((X * X) + (Y * Y));\r\n        }\r\n\r\n        public float LengthSquared()\r\n        {\r\n            return (X * X) + (Y * Y);\r\n        }\r\n        \r\n        public static Vector2D Max(Vector2D value1, Vector2D value2)\r\n        {\r\n            return new Vector2D(value1.X > value2.X ? value1.X : value2.X,\r\n                               value1.Y > value2.Y ? value1.Y : value2.Y);\r\n        }\r\n\r\n        public static void Max(ref Vector2D value1, ref Vector2D value2, out Vector2D result)\r\n        {\r\n            result.X = value1.X > value2.X ? value1.X : value2.X;\r\n            result.Y = value1.Y > value2.Y ? value1.Y : value2.Y;\r\n        }\r\n\r\n        public static Vector2D Min(Vector2D value1, Vector2D value2)\r\n        {\r\n            return new Vector2D(value1.X < value2.X ? value1.X : value2.X,\r\n                               value1.Y < value2.Y ? value1.Y : value2.Y);\r\n        }\r\n\r\n        public static void Min(ref Vector2D value1, ref Vector2D value2, out Vector2D result)\r\n        {\r\n            result.X = value1.X < value2.X ? value1.X : value2.X;\r\n            result.Y = value1.Y < value2.Y ? value1.Y : value2.Y;\r\n        }\r\n\r\n        public static Vector2D Multiply(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X *= value2.X;\r\n            value1.Y *= value2.Y;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector2D Multiply(Vector2D value1, float scaleFactor)\r\n        {\r\n            value1.X *= scaleFactor;\r\n            value1.Y *= scaleFactor;\r\n            return value1;\r\n        }\r\n\r\n        public static void Multiply(ref Vector2D value1, float scaleFactor, out Vector2D result)\r\n        {\r\n            result.X = value1.X * scaleFactor;\r\n            result.Y = value1.Y * scaleFactor;\r\n        }\r\n\r\n        public static void Multiply(ref Vector2D value1, ref Vector2D value2, out Vector2D result)\r\n        {\r\n            result.X = value1.X * value2.X;\r\n            result.Y = value1.Y * value2.Y;\r\n        }\r\n\r\n        public static Vector2D Negate(Vector2D value)\r\n        {\r\n            value.X = -value.X;\r\n            value.Y = -value.Y;\r\n            return value;\r\n        }\r\n\r\n        public static void Negate(ref Vector2D value, out Vector2D result)\r\n        {\r\n            result.X = -value.X;\r\n            result.Y = -value.Y;\r\n        }\r\n\r\n        public void Normalize()\r\n        {\r\n            float val = 1.0f / (float)Math.Sqrt((X * X) + (Y * Y));\r\n            X *= val;\r\n            Y *= val;\r\n        }\r\n\r\n        public static Vector2D Normalize(Vector2D value)\r\n        {\r\n            float val = 1.0f / (float)Math.Sqrt((value.X * value.X) + (value.Y * value.Y));\r\n            value.X *= val;\r\n            value.Y *= val;\r\n            return value;\r\n        }\r\n\r\n        public static void Normalize(ref Vector2D value, out Vector2D result)\r\n        {\r\n            float val = 1.0f / (float)Math.Sqrt((value.X * value.X) + (value.Y * value.Y));\r\n            result.X = value.X * val;\r\n            result.Y = value.Y * val;\r\n        }\r\n\r\n\r\n\r\n        public static Vector2D Subtract(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X -= value2.X;\r\n            value1.Y -= value2.Y;\r\n            return value1;\r\n        }\r\n\r\n        public static void Subtract(ref Vector2D value1, ref Vector2D value2, out Vector2D result)\r\n        {\r\n            result.X = value1.X - value2.X;\r\n            result.Y = value1.Y - value2.Y;\r\n        }\r\n\r\n\r\n\r\n\r\n        public override string ToString()\r\n        {\r\n            CultureInfo currentCulture = CultureInfo.CurrentCulture;\r\n            return string.Format(currentCulture, \"{{X:{0} Y:{1}}}\", new object[] {\r\n                this.X.ToString(currentCulture), this.Y.ToString(currentCulture) });\r\n        }\r\n\r\n        #endregion Public Methods\r\n\r\n\r\n        #region Operators\r\n\r\n        public static Vector2D operator -(Vector2D value)\r\n        {\r\n            value.X = -value.X;\r\n            value.Y = -value.Y;\r\n            return value;\r\n        }\r\n\r\n\r\n        public static bool operator ==(Vector2D value1, Vector2D value2)\r\n        {\r\n            return value1.X == value2.X && value1.Y == value2.Y;\r\n        }\r\n\r\n\r\n        public static bool operator !=(Vector2D value1, Vector2D value2)\r\n        {\r\n            return value1.X != value2.X || value1.Y != value2.Y;\r\n        }\r\n\r\n\r\n        public static Vector2D operator +(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X += value2.X;\r\n            value1.Y += value2.Y;\r\n            return value1;\r\n        }\r\n\r\n\r\n        public static Vector2D operator -(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X -= value2.X;\r\n            value1.Y -= value2.Y;\r\n            return value1;\r\n        }\r\n\r\n\r\n        public static Vector2D operator *(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X *= value2.X;\r\n            value1.Y *= value2.Y;\r\n            return value1;\r\n        }\r\n\r\n\r\n        public static Vector2D operator *(Vector2D value, float scaleFactor)\r\n        {\r\n            value.X *= scaleFactor;\r\n            value.Y *= scaleFactor;\r\n            return value;\r\n        }\r\n\r\n\r\n        public static Vector2D operator *(float scaleFactor, Vector2D value)\r\n        {\r\n            value.X *= scaleFactor;\r\n            value.Y *= scaleFactor;\r\n            return value;\r\n        }\r\n\r\n\r\n        public static Vector2D operator /(Vector2D value1, Vector2D value2)\r\n        {\r\n            value1.X /= value2.X;\r\n            value1.Y /= value2.Y;\r\n            return value1;\r\n        }\r\n\r\n\r\n        public static Vector2D operator /(Vector2D value1, float divider)\r\n        {\r\n            float factor = 1 / divider;\r\n            value1.X *= factor;\r\n            value1.Y *= factor;\r\n            return value1;\r\n        }\r\n\r\n        #endregion Operators\r\n    }\r\n}","// MIT License - Copyright (C) The Mono.Xna Team\r\n// This file is subject to the terms and conditions defined in\r\n// file 'LICENSE.txt', which is part of this source code package.\r\n\r\nusing System;\r\nusing System.Diagnostics;\r\nusing System.Text;\r\nusing System.Runtime.Serialization;\r\n\r\nnamespace Pidroh.BaseUtils\r\n{\r\n\r\n    \r\n    public struct Vector3D : IEquatable<Vector3D>\r\n    {\r\n        #region Private Fields\r\n\r\n        private static Vector3D zero = new Vector3D(0f, 0f, 0f);\r\n        private static Vector3D one = new Vector3D(1f, 1f, 1f);\r\n        private static Vector3D unitX = new Vector3D(1f, 0f, 0f);\r\n        private static Vector3D unitY = new Vector3D(0f, 1f, 0f);\r\n        private static Vector3D unitZ = new Vector3D(0f, 0f, 1f);\r\n        private static Vector3D up = new Vector3D(0f, 1f, 0f);\r\n        private static Vector3D down = new Vector3D(0f, -1f, 0f);\r\n        private static Vector3D right = new Vector3D(1f, 0f, 0f);\r\n        private static Vector3D left = new Vector3D(-1f, 0f, 0f);\r\n        private static Vector3D forward = new Vector3D(0f, 0f, -1f);\r\n        private static Vector3D backward = new Vector3D(0f, 0f, 1f);\r\n\r\n        #endregion Private Fields\r\n\r\n\r\n        #region Public Fields\r\n\r\n        \r\n        public float X;\r\n\r\n        \r\n        public float Y;\r\n\r\n        \r\n        public float Z;\r\n\r\n        #endregion Public Fields\r\n\r\n\r\n        #region Properties\r\n\r\n        /// <summary>\r\n        /// Returns a <see>Vector3</see> with components 0, 0, 0.\r\n        /// </summary>\r\n        public static Vector3D Zero\r\n        {\r\n            get { return zero; }\r\n        }\r\n\r\n        /// <summary>\r\n        /// Returns a <see>Vector3</see> with components 1, 1, 1.\r\n        /// </summary>\r\n        public static Vector3D One\r\n        {\r\n            get { return one; }\r\n        }\r\n\r\n        /// <summary>\r\n        /// Returns a <see>Vector3</see> with components 1, 0, 0.\r\n        /// </summary>\r\n        public static Vector3D UnitX\r\n        {\r\n            get { return unitX; }\r\n        }\r\n\r\n        /// <summary>\r\n        /// Returns a <see>Vector3</see> with components 0, 1, 0.\r\n        /// </summary>\r\n        public static Vector3D UnitY\r\n        {\r\n            get { return unitY; }\r\n        }\r\n\r\n        /// <summary>\r\n        /// Returns a <see>Vector3</see> with components 0, 0, 1.\r\n        /// </summary>\r\n        public static Vector3D UnitZ\r\n        {\r\n            get { return unitZ; }\r\n        }\r\n\r\n        public static Vector3D Up\r\n        {\r\n            get { return up; }\r\n        }\r\n\r\n        public static Vector3D Down\r\n        {\r\n            get { return down; }\r\n        }\r\n\r\n        public static Vector3D Right\r\n        {\r\n            get { return right; }\r\n        }\r\n\r\n        public static Vector3D Left\r\n        {\r\n            get { return left; }\r\n        }\r\n\r\n        public static Vector3D Forward\r\n        {\r\n            get { return forward; }\r\n        }\r\n\r\n        public static Vector3D Backward\r\n        {\r\n            get { return backward; }\r\n        }\r\n\r\n        #endregion Properties\r\n\r\n\r\n        #region Constructors\r\n\r\n        public Vector3D(float x, float y, float z)\r\n        {\r\n            this.X = x;\r\n            this.Y = y;\r\n            this.Z = z;\r\n        }\r\n\r\n\r\n        public Vector3D(float value)\r\n        {\r\n            this.X = value;\r\n            this.Y = value;\r\n            this.Z = value;\r\n        }\r\n\r\n\r\n        public Vector3D(Vector2D value, float z)\r\n        {\r\n            this.X = value.X;\r\n            this.Y = value.Y;\r\n            this.Z = z;\r\n        }\r\n\r\n\r\n        #endregion Constructors\r\n\r\n\r\n        #region Public Methods\r\n\r\n        /// <summary>\r\n        /// Performs vector addition on <paramref name=\"value1\"/> and <paramref name=\"value2\"/>.\r\n        /// </summary>\r\n        /// <param name=\"value1\">The first vector to add.</param>\r\n        /// <param name=\"value2\">The second vector to add.</param>\r\n        /// <returns>The result of the vector addition.</returns>\r\n        public static Vector3D Add(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X += value2.X;\r\n            value1.Y += value2.Y;\r\n            value1.Z += value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        /// <summary>\r\n        /// Performs vector addition on <paramref name=\"value1\"/> and\r\n        /// <paramref name=\"value2\"/>, storing the result of the\r\n        /// addition in <paramref name=\"result\"/>.\r\n        /// </summary>\r\n        /// <param name=\"value1\">The first vector to add.</param>\r\n        /// <param name=\"value2\">The second vector to add.</param>\r\n        /// <param name=\"result\">The result of the vector addition.</param>\r\n        public static void Add(ref Vector3D value1, ref Vector3D value2, out Vector3D result)\r\n        {\r\n            result.X = value1.X + value2.X;\r\n            result.Y = value1.Y + value2.Y;\r\n            result.Z = value1.Z + value2.Z;\r\n        }\r\n\r\n\r\n        public static Vector3D Cross(Vector3D vector1, Vector3D vector2)\r\n        {\r\n            Cross(ref vector1, ref vector2, out vector1);\r\n            return vector1;\r\n        }\r\n\r\n        public static void Cross(ref Vector3D vector1, ref Vector3D vector2, out Vector3D result)\r\n        {\r\n            var x = vector1.Y * vector2.Z - vector2.Y * vector1.Z;\r\n            var y = -(vector1.X * vector2.Z - vector2.X * vector1.Z);\r\n            var z = vector1.X * vector2.Y - vector2.X * vector1.Y;\r\n            result.X = x;\r\n            result.Y = y;\r\n            result.Z = z;\r\n        }\r\n\r\n        public static float Distance(Vector3D vector1, Vector3D vector2)\r\n        {\r\n            float result;\r\n            DistanceSquared(ref vector1, ref vector2, out result);\r\n            return (float)Math.Sqrt(result);\r\n        }\r\n\r\n        public static void Distance(ref Vector3D value1, ref Vector3D value2, out float result)\r\n        {\r\n            DistanceSquared(ref value1, ref value2, out result);\r\n            result = (float)Math.Sqrt(result);\r\n        }\r\n\r\n        public static float DistanceSquared(Vector3D value1, Vector3D value2)\r\n        {\r\n            float result;\r\n            DistanceSquared(ref value1, ref value2, out result);\r\n            return result;\r\n        }\r\n\r\n        public static void DistanceSquared(ref Vector3D value1, ref Vector3D value2, out float result)\r\n        {\r\n            result = (value1.X - value2.X) * (value1.X - value2.X) +\r\n                     (value1.Y - value2.Y) * (value1.Y - value2.Y) +\r\n                     (value1.Z - value2.Z) * (value1.Z - value2.Z);\r\n        }\r\n\r\n        public static Vector3D Divide(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X /= value2.X;\r\n            value1.Y /= value2.Y;\r\n            value1.Z /= value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector3D Divide(Vector3D value1, float value2)\r\n        {\r\n            float factor = 1 / value2;\r\n            value1.X *= factor;\r\n            value1.Y *= factor;\r\n            value1.Z *= factor;\r\n            return value1;\r\n        }\r\n\r\n        public static void Divide(ref Vector3D value1, float divisor, out Vector3D result)\r\n        {\r\n            float factor = 1 / divisor;\r\n            result.X = value1.X * factor;\r\n            result.Y = value1.Y * factor;\r\n            result.Z = value1.Z * factor;\r\n        }\r\n\r\n        public static void Divide(ref Vector3D value1, ref Vector3D value2, out Vector3D result)\r\n        {\r\n            result.X = value1.X / value2.X;\r\n            result.Y = value1.Y / value2.Y;\r\n            result.Z = value1.Z / value2.Z;\r\n        }\r\n\r\n        public static float Dot(Vector3D vector1, Vector3D vector2)\r\n        {\r\n            return vector1.X * vector2.X + vector1.Y * vector2.Y + vector1.Z * vector2.Z;\r\n        }\r\n\r\n        public static void Dot(ref Vector3D vector1, ref Vector3D vector2, out float result)\r\n        {\r\n            result = vector1.X * vector2.X + vector1.Y * vector2.Y + vector1.Z * vector2.Z;\r\n        }\r\n\r\n        public override bool Equals(object obj)\r\n        {\r\n            if (!(obj is Vector3D))\r\n                return false;\r\n\r\n            var other = (Vector3D)obj;\r\n            return X == other.X &&\r\n                    Y == other.Y &&\r\n                    Z == other.Z;\r\n        }\r\n\r\n        public bool Equals(Vector3D other)\r\n        {\r\n            return X == other.X &&\r\n                    Y == other.Y &&\r\n                    Z == other.Z;\r\n        }\r\n\r\n        public override int GetHashCode()\r\n        {\r\n            return (int)(this.X + this.Y + this.Z);\r\n        }\r\n\r\n\r\n        public float Length()\r\n        {\r\n            float result;\r\n            DistanceSquared(ref this, ref zero, out result);\r\n            return (float)Math.Sqrt(result);\r\n        }\r\n\r\n        public float LengthSquared()\r\n        {\r\n            float result;\r\n            DistanceSquared(ref this, ref zero, out result);\r\n            return result;\r\n        }\r\n\r\n\r\n\r\n\r\n        public static Vector3D Multiply(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X *= value2.X;\r\n            value1.Y *= value2.Y;\r\n            value1.Z *= value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector3D Multiply(Vector3D value1, float scaleFactor)\r\n        {\r\n            value1.X *= scaleFactor;\r\n            value1.Y *= scaleFactor;\r\n            value1.Z *= scaleFactor;\r\n            return value1;\r\n        }\r\n\r\n        public static void Multiply(ref Vector3D value1, float scaleFactor, out Vector3D result)\r\n        {\r\n            result.X = value1.X * scaleFactor;\r\n            result.Y = value1.Y * scaleFactor;\r\n            result.Z = value1.Z * scaleFactor;\r\n        }\r\n\r\n        public static void Multiply(ref Vector3D value1, ref Vector3D value2, out Vector3D result)\r\n        {\r\n            result.X = value1.X * value2.X;\r\n            result.Y = value1.Y * value2.Y;\r\n            result.Z = value1.Z * value2.Z;\r\n        }\r\n\r\n        /// <summary>\r\n        /// Returns a <see>Vector3</see> pointing in the opposite\r\n        /// direction of <paramref name=\"value\"/>.\r\n        /// </summary>\r\n        /// <param name=\"value\">The vector to negate.</param>\r\n        /// <returns>The vector negation of <paramref name=\"value\"/>.</returns>\r\n        public static Vector3D Negate(Vector3D value)\r\n        {\r\n            value = new Vector3D(-value.X, -value.Y, -value.Z);\r\n            return value;\r\n        }\r\n\r\n        /// <summary>\r\n        /// Stores a <see>Vector3</see> pointing in the opposite\r\n        /// direction of <paramref name=\"value\"/> in <paramref name=\"result\"/>.\r\n        /// </summary>\r\n        /// <param name=\"value\">The vector to negate.</param>\r\n        /// <param name=\"result\">The vector that the negation of <paramref name=\"value\"/> will be stored in.</param>\r\n        public static void Negate(ref Vector3D value, out Vector3D result)\r\n        {\r\n            result.X = -value.X;\r\n            result.Y = -value.Y;\r\n            result.Z = -value.Z;\r\n        }\r\n\r\n        public void Normalize()\r\n        {\r\n            Normalize(ref this, out this);\r\n        }\r\n\r\n        public static Vector3D Normalize(Vector3D vector)\r\n        {\r\n            Normalize(ref vector, out vector);\r\n            return vector;\r\n        }\r\n\r\n        public static void Normalize(ref Vector3D value, out Vector3D result)\r\n        {\r\n            float factor;\r\n            Distance(ref value, ref zero, out factor);\r\n            factor = 1f / factor;\r\n            result.X = value.X * factor;\r\n            result.Y = value.Y * factor;\r\n            result.Z = value.Z * factor;\r\n        }\r\n\r\n        public static Vector3D Reflect(Vector3D vector, Vector3D normal)\r\n        {\r\n            // I is the original array\r\n            // N is the normal of the incident plane\r\n            // R = I - (2 * N * ( DotProduct[ I,N] ))\r\n            Vector3D reflectedVector;\r\n            // inline the dotProduct here instead of calling method\r\n            float dotProduct = ((vector.X * normal.X) + (vector.Y * normal.Y)) + (vector.Z * normal.Z);\r\n            reflectedVector.X = vector.X - (2.0f * normal.X) * dotProduct;\r\n            reflectedVector.Y = vector.Y - (2.0f * normal.Y) * dotProduct;\r\n            reflectedVector.Z = vector.Z - (2.0f * normal.Z) * dotProduct;\r\n\r\n            return reflectedVector;\r\n        }\r\n\r\n        public static void Reflect(ref Vector3D vector, ref Vector3D normal, out Vector3D result)\r\n        {\r\n            // I is the original array\r\n            // N is the normal of the incident plane\r\n            // R = I - (2 * N * ( DotProduct[ I,N] ))\r\n\r\n            // inline the dotProduct here instead of calling method\r\n            float dotProduct = ((vector.X * normal.X) + (vector.Y * normal.Y)) + (vector.Z * normal.Z);\r\n            result.X = vector.X - (2.0f * normal.X) * dotProduct;\r\n            result.Y = vector.Y - (2.0f * normal.Y) * dotProduct;\r\n            result.Z = vector.Z - (2.0f * normal.Z) * dotProduct;\r\n        }\r\n\r\n        /// <summary>\r\n        /// Performs vector subtraction on <paramref name=\"value1\"/> and <paramref name=\"value2\"/>.\r\n        /// </summary>\r\n        /// <param name=\"value1\">The vector to be subtracted from.</param>\r\n        /// <param name=\"value2\">The vector to be subtracted from <paramref name=\"value1\"/>.</param>\r\n        /// <returns>The result of the vector subtraction.</returns>\r\n        public static Vector3D Subtract(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X -= value2.X;\r\n            value1.Y -= value2.Y;\r\n            value1.Z -= value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        /// <summary>\r\n        /// Performs vector subtraction on <paramref name=\"value1\"/> and <paramref name=\"value2\"/>.\r\n        /// </summary>\r\n        /// <param name=\"value1\">The vector to be subtracted from.</param>\r\n        /// <param name=\"value2\">The vector to be subtracted from <paramref name=\"value1\"/>.</param>\r\n        /// <param name=\"result\">The result of the vector subtraction.</param>\r\n        public static void Subtract(ref Vector3D value1, ref Vector3D value2, out Vector3D result)\r\n        {\r\n            result.X = value1.X - value2.X;\r\n            result.Y = value1.Y - value2.Y;\r\n            result.Z = value1.Z - value2.Z;\r\n        }\r\n\r\n        internal string DebugDisplayString\r\n        {\r\n            get\r\n            {\r\n                return string.Concat(\r\n                    this.X.ToString(), \"  \",\r\n                    this.Y.ToString(), \"  \",\r\n                    this.Z.ToString()\r\n                );\r\n            }\r\n        }\r\n\r\n        public override string ToString()\r\n        {\r\n            StringBuilder sb = new StringBuilder(32);\r\n            sb.Append(\"{X:\");\r\n            sb.Append(this.X);\r\n            sb.Append(\" Y:\");\r\n            sb.Append(this.Y);\r\n            sb.Append(\" Z:\");\r\n            sb.Append(this.Z);\r\n            sb.Append(\"}\");\r\n            return sb.ToString();\r\n        }\r\n\r\n\r\n\r\n        ///// <summary>\r\n        ///// Transforms a vector by a quaternion rotation.\r\n        ///// </summary>\r\n        ///// <param name=\"vec\">The vector to transform.</param>\r\n        ///// <param name=\"quat\">The quaternion to rotate the vector by.</param>\r\n        ///// <param name=\"result\">The result of the operation.</param>\r\n        //        public static void Transform(ref Vector3 vec, ref Quaternion quat, out Vector3 result)\r\n        //        {\r\n        //\t\t// Taken from the OpentTK implementation of Vector3\r\n        //            // Since vec.W == 0, we can optimize quat * vec * quat^-1 as follows:\r\n        //            // vec + 2.0 * cross(quat.xyz, cross(quat.xyz, vec) + quat.w * vec)\r\n        //            Vector3 xyz = quat.Xyz, temp, temp2;\r\n        //            Vector3.Cross(ref xyz, ref vec, out temp);\r\n        //            Vector3.Multiply(ref vec, quat.W, out temp2);\r\n        //            Vector3.Add(ref temp, ref temp2, out temp);\r\n        //            Vector3.Cross(ref xyz, ref temp, out temp);\r\n        //            Vector3.Multiply(ref temp, 2, out temp);\r\n        //            Vector3.Add(ref vec, ref temp, out result);\r\n        //        }\r\n\r\n\r\n\r\n\r\n        #endregion Public methods\r\n\r\n\r\n        #region Operators\r\n\r\n        public static bool operator ==(Vector3D value1, Vector3D value2)\r\n        {\r\n            return value1.X == value2.X\r\n                && value1.Y == value2.Y\r\n                && value1.Z == value2.Z;\r\n        }\r\n\r\n        public static bool operator !=(Vector3D value1, Vector3D value2)\r\n        {\r\n            return !(value1 == value2);\r\n        }\r\n\r\n        public static Vector3D operator +(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X += value2.X;\r\n            value1.Y += value2.Y;\r\n            value1.Z += value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector3D operator -(Vector3D value)\r\n        {\r\n            value = new Vector3D(-value.X, -value.Y, -value.Z);\r\n            return value;\r\n        }\r\n\r\n        public static Vector3D operator -(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X -= value2.X;\r\n            value1.Y -= value2.Y;\r\n            value1.Z -= value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector3D operator *(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X *= value2.X;\r\n            value1.Y *= value2.Y;\r\n            value1.Z *= value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector3D operator *(Vector3D value, float scaleFactor)\r\n        {\r\n            value.X *= scaleFactor;\r\n            value.Y *= scaleFactor;\r\n            value.Z *= scaleFactor;\r\n            return value;\r\n        }\r\n\r\n        public static Vector3D operator *(float scaleFactor, Vector3D value)\r\n        {\r\n            value.X *= scaleFactor;\r\n            value.Y *= scaleFactor;\r\n            value.Z *= scaleFactor;\r\n            return value;\r\n        }\r\n\r\n        public static Vector3D operator /(Vector3D value1, Vector3D value2)\r\n        {\r\n            value1.X /= value2.X;\r\n            value1.Y /= value2.Y;\r\n            value1.Z /= value2.Z;\r\n            return value1;\r\n        }\r\n\r\n        public static Vector3D operator /(Vector3D value, float divider)\r\n        {\r\n            float factor = 1 / divider;\r\n            value.X *= factor;\r\n            value.Y *= factor;\r\n            value.Z *= factor;\r\n            return value;\r\n        }\r\n\r\n        #endregion\r\n    }\r\n}","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n\r\n    public class MoveData\r\n    {\r\n        string label;\r\n        internal List<Tick> units = new List<Tick>();\r\n        internal List<int> tags = new List<int>();\r\n\r\n        public MoveData(string label)\r\n        {\r\n            this.label = label;\r\n        }\r\n\r\n        public MoveData()\r\n        {\r\n        }\r\n\r\n        public static int FindByLabel(List<MoveData> moveDatas, string label)\r\n        {\r\n            for (int i = 0; i < moveDatas.Count; i++)\r\n            {\r\n                if (moveDatas[i] != null)\r\n                    if (moveDatas[i].label == label) return i;\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        internal bool HasTag(int tag)\r\n        {\r\n            return tags.Contains(tag);\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    public class Tick\r\n    {\r\n        internal Condition condition;\r\n        internal List<object> thingsToHappen = new List<object>();\r\n\r\n        public Tick(object action)\r\n        {\r\n            thingsToHappen.Add(action);\r\n        }\r\n\r\n        public Tick(object[] actions)\r\n        {\r\n            thingsToHappen.AddRange(actions);\r\n        }\r\n\r\n        public Tick()\r\n        {\r\n        }\r\n    }\r\n    public class Condition\r\n    {\r\n        internal readonly ConditionType type;\r\n        internal readonly Target target;\r\n        internal readonly BaseUtils.Vector2D vector;\r\n\r\n        public Condition(ConditionType type, Target target, BaseUtils.Vector2D vector)\r\n        {\r\n            this.type = type;\r\n            this.target = target;\r\n            this.vector = vector;\r\n        }\r\n    }\r\n\r\n    public enum ConditionType\r\n    {\r\n        CanMove\r\n    }\r\n\r\n    public class SummonEntity\r\n    {\r\n        public readonly int enemyWhich;\r\n        public readonly Vector2D preferentialRowColumn;\r\n\r\n        public SummonEntity(int enemyWhich, Vector2D preferentialRowColumn)\r\n        {\r\n            this.enemyWhich = enemyWhich;\r\n            this.preferentialRowColumn = preferentialRowColumn;\r\n        }\r\n\r\n        internal static SummonEntity Enemy(int v, Vector2D vector2D)\r\n        {\r\n            return new SummonEntity(v, vector2D);\r\n        }\r\n    }\r\n\r\n\r\n    public class Animation\r\n    {\r\n        public readonly Area area = null;\r\n        public readonly Target target = Target.None;\r\n        public readonly Pidroh.ConsoleApp.Turnbased.BattleMain.Element element = Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None;\r\n        public readonly Vector2D userRefOffset;\r\n\r\n        public Animation(Target target)\r\n        {\r\n            this.target = target;\r\n        }\r\n\r\n        public Animation(Target target, Pidroh.ConsoleApp.Turnbased.BattleMain.Element element)\r\n        {\r\n            this.element = element;\r\n            this.target = target;\r\n        }\r\n\r\n        public Animation(Area area, Pidroh.ConsoleApp.Turnbased.BattleMain.Element element = Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None, Target target = Target.None)\r\n        {\r\n            this.area = area;\r\n            this.element = element;\r\n            this.target = target;\r\n        }\r\n\r\n        public Animation(Target target, Pidroh.ConsoleApp.Turnbased.BattleMain.Element element, Vector2D userRefOffset) : this(target, element)\r\n        {\r\n            this.userRefOffset = userRefOffset;\r\n        }\r\n    }\r\n\r\n    public class MoveAction\r\n    {\r\n        public readonly Target target;\r\n        public readonly BaseUtils.Vector2D distance;\r\n\r\n        public MoveAction(Target target, BaseUtils.Vector2D amount)\r\n        {\r\n            this.target = target;\r\n            this.distance = amount;\r\n        }\r\n    }\r\n\r\n    public class DealDamageAction\r\n    {\r\n        public readonly Area area;\r\n        public readonly Target target = Target.None;\r\n        public readonly int damage;\r\n        public readonly Pidroh.ConsoleApp.Turnbased.BattleMain.Element element;\r\n        public readonly Vector2D userRefOffset;\r\n\r\n        public DealDamageAction(Area area, int damage, Pidroh.ConsoleApp.Turnbased.BattleMain.Element element)\r\n        {\r\n            this.area = area;\r\n            this.damage = damage;\r\n            this.element = element;\r\n            target = Target.Area;\r\n        }\r\n\r\n        public DealDamageAction(Target target, int damage, Pidroh.ConsoleApp.Turnbased.BattleMain.Element element)\r\n        {\r\n            this.target = target;\r\n            this.damage = damage;\r\n            this.element = element;\r\n        }\r\n\r\n        public DealDamageAction(Target target, int damage, Pidroh.ConsoleApp.Turnbased.BattleMain.Element element, Vector2D userRefOffset) : this(target, damage, element)\r\n        {\r\n            this.userRefOffset = userRefOffset;\r\n        }\r\n    }\r\n\r\n    public class Area\r\n    {\r\n        //public readonly Area area;\r\n        public readonly Target target;\r\n        public readonly List<Vector2D> points = new List<Vector2D>();\r\n\r\n        public Area(Target target)\r\n        {\r\n            this.target = target;\r\n        }\r\n    }\r\n\r\n    public enum Target\r\n    {\r\n        None, Self, ClosestTarget, ClosestTargetX, Area\r\n    }\r\n\r\n\r\n\r\n}\r\n","using System;\r\nusing System.Collections;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class AsyncTasks\r\n    {\r\n\r\n    }\r\n\r\n    public class AsyncTrack\r\n    {\r\n\r\n    }\r\n\r\n    public abstract class DelayedActions\r\n    {\r\n        List<float> times = new List<float>();\r\n        List<IList> lists = new List<IList>();\r\n\r\n        public void Update(float delta)\r\n        {\r\n            for (int i = 0; i < times.Count; i++)\r\n            {\r\n                times[i] -= delta;\r\n                if (times[i] <= 0)\r\n                {\r\n                    Execute(i);\r\n                    EndTask(i);\r\n                }\r\n            }\r\n        }\r\n\r\n        internal abstract void Execute(int i);\r\n\r\n        internal void Add(float time)\r\n        {\r\n            times.Add(time);\r\n        }\r\n\r\n        public bool IsDone()\r\n        {\r\n            return times.Count == 0;\r\n        }\r\n\r\n        internal void EndTask(int i)\r\n        {\r\n            times.RemoveAt(i);\r\n            foreach (var l in lists)\r\n            {\r\n                l.RemoveAt(i);\r\n            }\r\n        }\r\n    }\r\n\r\n    public class AsyncTaskSetter<T> : DelayedActions\r\n    {\r\n        List<T> ToValue = new List<T>();\r\n        List<Action<T>> setters = new List<Action<T>>();\r\n\r\n        public void Add(T e, Action<T> setter, float time)\r\n        {\r\n            ToValue.Add(e);\r\n            setters.Add((global::System.Action<T>)setter);\r\n            base.Add(time);\r\n        }\r\n\r\n        internal override void Execute(int i)\r\n        {\r\n            setters[i](ToValue[i]);\r\n            ToValue.RemoveAt(i);\r\n            setters.RemoveAt(i);\r\n            \r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ECS;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class BattleSetup\r\n    {\r\n        public ECSManager ecs;\r\n        public BattleMain battleMain;\r\n        public MoveCreatorProg moveCreator;\r\n        public TimeStamp timeStamp;\r\n\r\n        public BattleSetup(int mode, Entity stageEntity, ECSManager ecs, EnemyDataCreator enemyDataCreator, MoveCreatorProg mv)\r\n        {\r\n            this.ecs = ecs;\r\n            timeStamp = new TimeStamp();\r\n            ecs.CreateEntityWithComponent(timeStamp);\r\n            battleMain = new BattleMain(mode, ecs, timeStamp);\r\n\r\n            moveCreator = mv;\r\n\r\n            \r\n\r\n            var fixedAttack = stageEntity.GetComponent<FixedAttackStage>();\r\n            var playerHandPool = battleMain.playerHandPool;\r\n            if (fixedAttack != null)\r\n            {\r\n\r\n                foreach (var item in fixedAttack.moves)\r\n                {\r\n                    playerHandPool.Add((BattleMain.MoveType)item);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                playerHandPool.Add(BattleMain.MoveType.Fire);\r\n                playerHandPool.Add(BattleMain.MoveType.Ice);\r\n                playerHandPool.Add(BattleMain.MoveType.Thunder);\r\n            }\r\n\r\n            var deckManager = new DeckManager(5);\r\n            battleMain.deckManager = deckManager;\r\n            \r\n            if (fixedAttack != null)\r\n            {\r\n\r\n                foreach (var item in fixedAttack.moves)\r\n                {\r\n                    int deckId = 0;\r\n                    switch (moveCreator.moveRenders[item].element)\r\n                    {\r\n                        case BattleMain.Element.Fire:\r\n                            deckManager.SetDefaultAttack(0, (int)BattleMain.MoveType.Fire);\r\n                            break;\r\n                        case BattleMain.Element.Ice:\r\n                            \r\n                            deckManager.SetDefaultAttack(1, (int)BattleMain.MoveType.Ice);\r\n                            deckId = 1;\r\n                            break;\r\n                        case BattleMain.Element.Thunder:\r\n                            deckId = 2;\r\n                            \r\n                            deckManager.SetDefaultAttack(2, (int)BattleMain.MoveType.Thunder);\r\n                            break;\r\n                        case BattleMain.Element.None:\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    if(item != (int)BattleMain.MoveType.Fire)\r\n                        if (item != (int)BattleMain.MoveType.Ice)\r\n                            if (item != (int)BattleMain.MoveType.Thunder)\r\n                                deckManager.Add(deckId, item);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                deckManager.SetDefaultAttack(0, (int)BattleMain.MoveType.Fire);\r\n                deckManager.SetDefaultAttack(1, (int)BattleMain.MoveType.Ice);\r\n                deckManager.SetDefaultAttack(2, (int)BattleMain.MoveType.Thunder);\r\n\r\n                //deckManager.Add(0, (int)BattleMain.MoveType.Fire);\r\n                deckManager.Add(0, (int)BattleMain.MoveType.DownFire);\r\n\r\n\r\n                //deckManager.Add(1, (int)BattleMain.MoveType.Ice);   \r\n                //deckManager.Add(2, (int)BattleMain.MoveType.Thunder);\r\n\r\n                deckManager.Add(1, (int)BattleMain.MoveType.IceBomb);\r\n                deckManager.Add(2, (int)BattleMain.MoveType.ThunderBomb);\r\n            }\r\n\r\n            var stage = stageEntity.GetComponent<StageData>();\r\n            var stagesP = ecs.QuickAccessor1<StageProgressPersistence>();\r\n            //bool none = true;\r\n            //for (int i = 0; i < stagesP.Count; i++)\r\n            //{\r\n            //    if (stagesP.Comp1(i).stageId == stage.id) {\r\n            //        none = false;\r\n            //    }\r\n            //}\r\n            //if (none)\r\n            //{\r\n            //    ecs.CreateEntityWithComponent(new StageProgressPersistence(stage.id));\r\n            //}\r\n\r\n            var enmys = stage.spawnDatas;\r\n\r\n            foreach (var item in enmys)\r\n            {\r\n                ecs.CreateEntityWithComponent(item);\r\n            }\r\n\r\n            var trackBattle = new TrackBattle();\r\n            var trackInfo = stageEntity.GetComponent<TrackInfoStage>();\r\n            trackBattle.stageInfo = trackInfo;\r\n            battleMain.MoveDataExecuter = new MoveDataExecuter(battleMain, moveCreator.moveDatas, ecs, timeStamp);\r\n            battleMain.MoveDataExecuter.trackBattle = trackBattle;\r\n            battleMain.trackBattle = trackBattle;\r\n\r\n            \r\n\r\n            var enemyDatas = enemyDataCreator.enemyDatas;\r\n            var battleState = battleMain.battleState;\r\n\r\n            battleMain.BattleConfigure(stage.battleConfig);\r\n\r\n            var enemyFactory = new SpawnEntityFactory(ecs, enemyDatas, battleMain);\r\n            battleMain.ecsInteg = new ECSIntegration(enemyFactory, ecs);\r\n            //battleMain.EnemyFactory = enemyFactory;\r\n\r\n            { //AI handling code\r\n                var enemyAis = ecs.QuickAccessor2<EnemyAI, BattleMain.BattleEntity>();\r\n                var enemyAiStateless = ecs.CreateAccessor(necessary: new Type[] { typeof(EnemyAI) }, not: new Type[] { typeof(EnemyAIState) });\r\n                List<int> possibleMoves = new List<int>();\r\n                var moveDatas = moveCreator.moveDatas;\r\n                \r\n                battleMain.EnemyGenerateMoves = () =>\r\n                {\r\n                    while (enemyAiStateless.Length > 0)\r\n                    {\r\n                        enemyAiStateless.Get(0).AddComponent<EnemyAIState>();\r\n                        \r\n                    }\r\n                    \r\n                    for (int i = 0; i < enemyAis.Length; i++)\r\n                    {\r\n                        \r\n                        var ai = enemyAis.Comp1(i);\r\n                        var battler = enemyAis.Comp2(i);\r\n                        var aiState = enemyAis.Entity(i).GetComponent<EnemyAIState>();\r\n                        var moves = ai.moves;\r\n                        var posS = battler.pos;\r\n                        for (int j = 0; j < battleState.turnsPerPhase; j++)\r\n                        {\r\n                            int aiPro = (j + aiState.progress) % moves.Count;\r\n                            var move = moves[aiPro];\r\n                            int moveId = -1;\r\n                            if (move is MoveUse)\r\n                            {\r\n                                \r\n                                moveId = (move as MoveUse).move;\r\n                            }\r\n                            \r\n                            if (move is SpecialEnemyMoves)\r\n                            {\r\n                            \r\n                                var m = (SpecialEnemyMoves)move;\r\n                                if (m == SpecialEnemyMoves.SmartMove)\r\n                                {\r\n\r\n                                    possibleMoves.Clear();\r\n                                    for (int i2 = 0; i2 < moveDatas.Count; i2++) //code to add movement moves\r\n                                    {\r\n                                        var tags = moveDatas[i2].tags;\r\n                                        if (tags.Contains((int)MoveDataTags.Movement))\r\n                                        {\r\n                                            bool validMove = true;\r\n                                            var us = moveDatas[i2].units;\r\n\r\n                                            foreach (var item in us)\r\n                                            {\r\n                                                var things = item.thingsToHappen;\r\n                                                foreach (var thing in things)\r\n                                                {\r\n                                                    if (thing is MoveAction)\r\n                                                    {\r\n                                                        var ma = thing as MoveAction;\r\n                                                        var dis = ma.distance;\r\n                                                        var testPos = posS + dis;\r\n                                                        if (testPos.X < 3) {\r\n                                                            validMove = false;\r\n                                                        }\r\n                                                        if (testPos.X > 5)\r\n                                                        {\r\n                                                            validMove = false;\r\n                                                        }\r\n                                                        if (testPos.Y < 0)\r\n                                                        {\r\n                                                            validMove = false;\r\n                                                        }\r\n                                                        if (testPos.Y > 2)\r\n                                                        {\r\n                                                            validMove = false;\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            if(validMove)\r\n                                                possibleMoves.Add(i2);\r\n                                        }\r\n                                    }\r\n                                    moveId = Pidroh.BaseUtils.Extensions.RandomElement<int>(possibleMoves);\r\n                            \r\n                                    //Console.WriteLine(moveId);\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            if (moveId >= 0)\r\n                            {\r\n                                battler.moves[j] = moveId;\r\n                                var md = moveCreator.moveDatas[moveId];\r\n                                var us = md.units;\r\n                                foreach (var item in us)\r\n                                {\r\n                                    var things = item.thingsToHappen;\r\n                                    foreach (var thing in things)\r\n                                    {\r\n                                        if (thing is MoveAction)\r\n                                        {\r\n                                            var ma = thing as MoveAction;\r\n                                            var dis = ma.distance;\r\n                                            posS += dis;\r\n\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        //be.moves[j] = ;\r\n                    }\r\n                        aiState.progress += battleState.turnsPerPhase;\r\n                    }\r\n                };\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n    /// <summary>\r\n    /// data that will be a part of stagedata so each stage can have it's config\r\n    /// It will also be contained in battlemain.\r\n    /// Should be static, once created.\r\n    /// </summary>\r\n    public class BattleConfig\r\n    {\r\n        public readonly List<int> enemiesToSummon = new List<int>();\r\n        public readonly bool needKillAllEnemies = true;\r\n\r\n        public BattleConfig()\r\n        {\r\n        }\r\n\r\n        public BattleConfig(int[] enemiesToSummon)\r\n        {\r\n            this.enemiesToSummon.AddRange(enemiesToSummon);\r\n        }\r\n\r\n        public BattleConfig(bool needKillAllEnemies)\r\n        {\r\n            this.needKillAllEnemies = needKillAllEnemies;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased.Happs;\r\nusing Pidroh.ECS;\r\nusing Pidroh.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n\r\n\r\n    public class BattleMain\r\n    {\r\n        public DeckManager deckManager;\r\n        public List<BattleEntity> entities = new List<BattleEntity>();\r\n        public BattleState battleState = new BattleState();\r\n        public HappManager happManager = new HappManager();\r\n        Dictionary<MoveType, Vector2D> movementMoves = new Dictionary<MoveType, Vector2D>();\r\n        //Dictionary<MoveType, Point> attackMoves = new Dictionary<MoveType, Point>();\r\n        MoveType[] enemyMoves;\r\n        //public List<Input> inputs = new List<Turnbased.Input>();\r\n        public InputHolder inputs = new InputHolder();\r\n        public List<MoveType> playerHandFixed = new List<MoveType>();\r\n        public List<MoveType> playerHandUnfixed = new List<MoveType>();\r\n        public List<MoveType> playerHandPool = new List<MoveType>();\r\n\r\n        public float timeToChooseMax = 15f;\r\n        public float timeToChoose = -1;\r\n\r\n        public BattleResult battleResult = new BattleResult();\r\n\r\n        internal void BattleConfigure(BattleConfig battleConfig)\r\n        {\r\n            if (battleConfig == null)\r\n            {\r\n                battleConfig = new BattleConfig(needKillAllEnemies: true);\r\n            }\r\n            this.BattleConfig = battleConfig;\r\n            battleState.turnsPerPhase.Val = 3;\r\n\r\n        }\r\n\r\n        int nEnemies;\r\n        public MoveDataExecuter MoveDataExecuter;\r\n        private readonly TimeStamp timeStamp;\r\n        private QuickAccessorTwo<BattleEntity, PickupInfo> pickupAccessor;\r\n        internal ECSIntegration ecsInteg;\r\n\r\n        public Action EnemyGenerateMoves;\r\n        public TrackBattle trackBattle;\r\n\r\n        public BattleConfig BattleConfig { get; private set; }\r\n        public int BoardWidth { get; internal set; }\r\n        public int BoardHeight { get; internal set; }\r\n\r\n        public BattleMain(int mode, ECSManager ecs, TimeStamp timeStamp)\r\n        {\r\n            //this.ecs = ecs;\r\n            this.timeStamp = timeStamp;\r\n            pickupAccessor = ecs.QuickAccessor2<BattleEntity, PickupInfo>();\r\n            movementMoves.Add(MoveType.MoveUp, Vector2D.UnitY);\r\n            movementMoves.Add(MoveType.MoveDown, -Vector2D.UnitY);\r\n            movementMoves.Add(MoveType.MoveLeft, -Vector2D.UnitX);\r\n            movementMoves.Add(MoveType.MoveRight, Vector2D.UnitX);\r\n\r\n            ecs.CreateEntityWithComponent(battleState);\r\n\r\n            playerHandFixed.Clear();\r\n            playerHandFixed.Add(MoveType.MoveRight);\r\n            playerHandFixed.Add(MoveType.MoveLeft);\r\n            playerHandFixed.Add(MoveType.MoveDown);\r\n            playerHandFixed.Add(MoveType.MoveUp);\r\n\r\n            if (mode == 0)\r\n            {\r\n                playerHandUnfixed.Add(MoveType.NormalShot);\r\n                enemyMoves = new MoveType[] {\r\n                    MoveType.MoveUp,\r\n                    MoveType.MoveLeft,\r\n                    MoveType.MoveDown,\r\n                    MoveType.MoveRight,\r\n                    MoveType.NormalShot,\r\n                };\r\n            }\r\n            else\r\n            {\r\n                //playerHandUnfixed.Add(MoveType.Fire);\r\n                //playerHandUnfixed.Add(MoveType.Ice);\r\n                //playerHandUnfixed.Add(MoveType.Thunder);\r\n\r\n\r\n                enemyMoves = new MoveType[] {\r\n                    MoveType.MoveDown,\r\n                    MoveType.MoveLeft,\r\n                    MoveType.MoveUp,\r\n                    MoveType.MoveRight,\r\n                    MoveType.Fire,\r\n                    MoveType.Ice,\r\n                    MoveType.Thunder,\r\n                };\r\n            }\r\n\r\n            //playerHand.Add(MoveType.NormalShot);\r\n\r\n        }\r\n\r\n        internal bool IsVictory()\r\n        {\r\n            return battleResult.result == 1;\r\n        }\r\n\r\n\r\n        public void Init()\r\n        {\r\n\r\n            BattleEntity hero = new BattleEntity();\r\n\r\n            hero.pos.Set(1, 1);\r\n            hero.minPos.Set(0, 0);\r\n            hero.maxPos.Set(2, 2);\r\n            hero.Type = EntityType.hero;\r\n            hero.life = 2;\r\n            for (int i = 0; i < hero.moves.Length; i++)\r\n            {\r\n                hero.moves[i] = -1;\r\n            }\r\n\r\n\r\n            entities.Add(hero);\r\n            ecsInteg.HeroCreated(hero);\r\n            ecsInteg.SpawnEnemies();\r\n\r\n            {\r\n                //GameEntity pickup = new GameEntity();\r\n                //pickup.Type = EntityType.pickup;\r\n                //pickup.pos.Set(0, 2);\r\n                //pickup.life = 2;\r\n                //pickup.graphic = 4;\r\n                //entities.Add(pickup);\r\n            }\r\n            //{\r\n            //    BattleEntity panelEffect = new BattleEntity();\r\n            //    panelEffect.Type = EntityType.paneleffect;\r\n            //    panelEffect.pos.Set(0, 2);\r\n            //    panelEffect.life = 5;\r\n            //    panelEffect.graphic = 5;\r\n            //    panelEffect.randomPosition = true;\r\n            //    panelEffect.drawLife = false;\r\n            //    panelEffect.drawTurn = false;\r\n            //    RandomPosition(panelEffect);\r\n            //    entities.Add(panelEffect);\r\n            //}\r\n\r\n            //{\r\n            //    BattleEntity panelEffect = new BattleEntity();\r\n            //    panelEffect.Type = EntityType.paneleffect;\r\n            //    panelEffect.pos.Set(0, 2);\r\n            //    panelEffect.life = 5;\r\n            //    panelEffect.graphic = 5;\r\n            //    panelEffect.randomPosition = true;\r\n            //    panelEffect.drawLife = false;\r\n            //    panelEffect.drawTurn = false;\r\n            //    RandomPosition(panelEffect);\r\n            //    entities.Add(panelEffect);\r\n            //}\r\n\r\n            Reset();\r\n            ExecutePhase();\r\n        }\r\n\r\n        public BattleEntity NewBattleEntity()\r\n        {\r\n            BattleEntity battleEntity = new BattleEntity();\r\n            entities.Add(battleEntity);\r\n            return battleEntity;\r\n        }\r\n\r\n        internal void Reset()\r\n        {\r\n            for (int i = 0; i < entities.Count; i++)\r\n            {\r\n                entities[i].life = entities[i].maxLife;\r\n            }\r\n            ChangePhase(BattlePhase.EnemyMoveChoice);\r\n            battleState.turn.Val = 0;\r\n            battleState.totalTurns = 0;\r\n            battleState.actingEntity = 0;\r\n            battleState.moveTick_Now.Val = 0;\r\n            battleState.moveTick_Total = 1;\r\n            battleResult.result = 0;\r\n        }\r\n\r\n        internal bool IsOver()\r\n        {\r\n            return battleResult.result != 0;\r\n        }\r\n\r\n        public void Tick()\r\n        {\r\n            FinishPreviousTick();\r\n            bool heroAlive = false;\r\n            bool enemyAlive = false;\r\n            bool pickupObligatoryExist = false;\r\n            foreach (var item in entities)\r\n            {\r\n                if (item.Type == EntityType.enemy)\r\n                {\r\n                    if (item.life > 0)\r\n                        enemyAlive = true;\r\n                }\r\n                if (item.Type == EntityType.hero)\r\n                {\r\n                    if (item.life > 0)\r\n                        heroAlive = true;\r\n                }\r\n            }\r\n            for (int i = 0; i < this.pickupAccessor.Length; i++)\r\n            {\r\n                var pickup = pickupAccessor.Comp2(i);\r\n                if (pickup.necessaryForVictory && pickupAccessor.Comp1(i).Alive)\r\n                {\r\n                    pickupObligatoryExist = true;\r\n                }\r\n            }\r\n            if (battleState.BattleEndEnable)\r\n            {\r\n                if (!heroAlive)\r\n                {\r\n                    battleResult.result = 2;\r\n                }\r\n                else if ((!enemyAlive || !BattleConfig.needKillAllEnemies) && !pickupObligatoryExist)\r\n                {\r\n                    battleResult.result = 1;\r\n                    trackBattle.BattleEndVictory();\r\n                }\r\n            }\r\n\r\n            if (battleResult.result == 0)\r\n            {\r\n                happManager.Tick();\r\n                timeStamp.Advance(1);\r\n                ExecutePhase();\r\n            }\r\n\r\n        }\r\n\r\n        public void Update(float delta)\r\n        {\r\n            if (timeToChoose > 0 && battleState.phase == BattlePhase.PickHands)\r\n            {\r\n                timeToChoose -= delta;\r\n                if (timeToChoose <= 0)\r\n                {\r\n                    Tick();\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        internal void FinishPreviousTick()\r\n        {\r\n            BattlePhase previousPhase = battleState.phase;\r\n            switch (previousPhase)\r\n            {\r\n                case BattlePhase.EnemyMoveChoice:\r\n                    ChangePhase(BattlePhase.HandRecharge);\r\n                    break;\r\n                case BattlePhase.HandRecharge:\r\n                    ChangePhase(BattlePhase.PickHands);\r\n                    break;\r\n                case BattlePhase.PickHands:\r\n                    ChangePhase(BattlePhase.ExecuteMove);\r\n                    break;\r\n                case BattlePhase.ExecuteMove:\r\n                    if (battleState.moveTick_Now >= battleState.moveTick_Total - 1)\r\n                    {\r\n                        battleState.moveTick_Now.Val = 0;\r\n                        battleState.moveTick_Total = 1;\r\n                        bool noMoreUnitsToActThisTurn = true;\r\n                        int i_initial = battleState.actingEntity + 1;\r\n                        if (i_initial < entities.Count)\r\n                        {\r\n                            for (int i = i_initial; i < entities.Count; i++)\r\n                            {\r\n                                if (entities[i].Alive)\r\n                                {\r\n                                    battleState.actingEntity = i;\r\n                                    noMoreUnitsToActThisTurn = false;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n\r\n                        if (noMoreUnitsToActThisTurn)\r\n                        {\r\n                            if (battleState.turn >= battleState.turnsPerPhase - 1)\r\n                            {\r\n                                ChangePhase(BattlePhase.EnemyMoveChoice);\r\n                                foreach (var e in entities)\r\n                                {\r\n                                    if (e.randomPosition)\r\n                                    {\r\n                                        //Console.WriteLine(\"RANDOM POS!!\");\r\n                                        RandomPosition(e);\r\n                                    }\r\n                                }\r\n                            }\r\n                            else\r\n                            {\r\n                                battleState.actingEntity = 0;\r\n                                battleState.turn = battleState.turn + 1;\r\n                                battleState.totalTurns += 1;\r\n                            }\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        battleState.moveTick_Now.Val += 1;\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        private static void RandomPosition(BattleEntity e)\r\n        {\r\n            e.pos.X = RandomSupplier.Range(0, 5);\r\n            e.pos.Y = RandomSupplier.Range(0, 2);\r\n        }\r\n\r\n        private void ChangePhase(BattlePhase phase)\r\n        {\r\n            BattlePhase previousPhase = battleState.phase;\r\n            if (phase == previousPhase) return;\r\n            \r\n            if (phase == BattlePhase.PickHands)\r\n            {\r\n                trackBattle.Round();\r\n                if (previousPhase != BattlePhase.ConfirmInput)\r\n                {\r\n                    \r\n                    deckManager.Refresh();\r\n                    playerHandPool.Clear();\r\n                    var moves = deckManager.selection;\r\n                    for (int i = 0; i < moves.Count; i++)\r\n                    {\r\n                        playerHandPool.Add((MoveType)moves[i]);\r\n                    }\r\n                    \r\n                    //playerHandPool.Shuffle();\r\n                    playerHandUnfixed.Clear();\r\n                    int commandsToAdd = moves.Count;\r\n                    if (commandsToAdd > playerHandPool.Count)\r\n                    {\r\n                        commandsToAdd = playerHandPool.Count;\r\n                    }\r\n                    for (int i = 0; i < commandsToAdd; i++)\r\n                    {\r\n                        playerHandUnfixed.Add(playerHandPool[i]);\r\n                    }\r\n\r\n\r\n                    timeToChoose = timeToChooseMax;\r\n                }\r\n\r\n            }\r\n            if (previousPhase == BattlePhase.ExecuteMove)\r\n            {\r\n                battleState.turn.Val = 0;\r\n                battleState.actingEntity = 0;\r\n                battleState.moveTick_Now.Val = 0;\r\n                battleState.moveTick_Total = 1;\r\n                foreach (var e in entities)\r\n                {\r\n                    for (int i = 0; i < e.moves.Length; i++)\r\n                    {\r\n                        e.moves[i] = -1;\r\n                    }\r\n                }\r\n            }\r\n            battleState.phase = phase;\r\n        }\r\n\r\n        internal void ConfirmInputStart()\r\n        {\r\n            ChangePhase(BattlePhase.ConfirmInput);\r\n            inputs.Clear();\r\n            inputs.Add(new Turnbased.Input(InputType.MiscBattle, MiscBattleInput.Confirm), InputTags.MISC);\r\n            inputs.Add(new Turnbased.Input(InputType.MiscBattle, MiscBattleInput.Cancel), InputTags.MISC);\r\n        }\r\n\r\n        private void ExecutePhase()\r\n        {\r\n            var phase = battleState.phase;\r\n            switch (phase)\r\n            {\r\n                case BattlePhase.EnemyMoveChoice:\r\n                    ecsInteg.SpawnEnemies();\r\n                    EnemyGenerateMoves();\r\n                    break;\r\n                case BattlePhase.HandRecharge:\r\n                    break;\r\n                case BattlePhase.PickHands:\r\n                    PickHandInput();\r\n                    break;\r\n                case BattlePhase.ExecuteMove:\r\n                    ecsInteg.SpawnEnemies();\r\n                    ExecuteMoves();\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        private void PickHandInput()\r\n        {\r\n            //deckManager.\r\n            inputs.Clear();\r\n            inputs.inputForConfirmation = new Input(InputType.None, -1);\r\n            \r\n            foreach (var hi in playerHandFixed)\r\n            {\r\n                inputs.Add(new Turnbased.Input(InputType.Move, (int)hi), InputTags.MOVEFIX);\r\n            }\r\n            foreach (var hi in playerHandUnfixed)\r\n            {\r\n                if(hi != MoveType.DoNothing)\r\n                    inputs.Add(new Turnbased.Input(InputType.Move, (int)hi), InputTags.MOVEUNFIX);\r\n            }\r\n            inputs.Add(new Turnbased.Input(InputType.MiscBattle, MiscBattleInput.Redo), InputTags.MISC);\r\n            inputs.Add(new Turnbased.Input(InputType.MiscBattle, MiscBattleInput.Done), InputTags.MISC);\r\n            inputs.Add(new Turnbased.Input(InputType.MiscBattle, MiscBattleInput.Help), InputTags.MISC);\r\n            bool enemyExist = false;\r\n            foreach (var item in entities)\r\n            {\r\n                if (item.Type == EntityType.enemy)\r\n                {\r\n                    enemyExist = true;\r\n                }\r\n            }\r\n            //if (enemyExist)\r\n            //    inputs.Add(new Turnbased.Input(InputType.MiscBattle, MiscBattleInput.Preview), InputTags.MISC);\r\n        }\r\n\r\n        public void InputDone(Input input)\r\n        {\r\n\r\n\r\n            \r\n            if (battleState.phase == BattlePhase.ConfirmInput)\r\n            {\r\n                ProcessInput(input);\r\n            }\r\n            else\r\n            {\r\n                inputs.inputForConfirmation = input;\r\n            }\r\n\r\n        }\r\n\r\n        public void InputConfirmed()\r\n        {\r\n            ChangePhase(BattlePhase.PickHands);\r\n            Input input = inputs.inputForConfirmation;\r\n            inputs.inputForConfirmation = new Input(InputType.None, -1);\r\n            ProcessInput(input);\r\n        }\r\n\r\n        private void ProcessInput(Input input)\r\n        {\r\n            //Console.Write(\"INPUT\");\r\n            if (input.type == InputType.Move)\r\n            {\r\n                MoveType arg1 = (MoveType)input.arg1;\r\n                //Console.Write(\"INPUTTED1\");\r\n                if (playerHandFixed.Contains(arg1) || playerHandUnfixed.Contains(arg1))\r\n                {\r\n                    deckManager.InputUsed((int)arg1);\r\n                    //Console.Write(\"INPUTTED2\");\r\n                    MoveChosen(arg1);\r\n                }\r\n\r\n            }\r\n\r\n            if (input.type == InputType.MiscBattle)\r\n            {\r\n                MiscBattleInput misc = (MiscBattleInput)input.arg1;\r\n                //Console.Write(\"INPUT\"+misc);\r\n                if (misc == MiscBattleInput.Redo)\r\n                {\r\n                    foreach (var e in entities)\r\n                    {\r\n                        if (e.Type == EntityType.hero)\r\n                        {\r\n                            for (int i = 0; i < e.moves.Length; i++)\r\n                            {\r\n                                if (e.moves[i] == null)\r\n                                {\r\n                                    e.moves[i] = -1;\r\n                                }\r\n                                int value = e.moves[i];\r\n\r\n                                if (value == -1 || i == battleState.turnsPerPhase)\r\n                                {\r\n                                    if (i > 0)\r\n                                    {\r\n                                        int lostMove = e.moves[i - 1];\r\n                                        deckManager.Recover(lostMove);\r\n                                        e.moves[i - 1] = -1;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (misc == MiscBattleInput.Done)\r\n                {\r\n                    Tick();\r\n                }\r\n                if (misc == MiscBattleInput.Confirm)\r\n                {\r\n                    InputConfirmed();\r\n                    PickHandInput();\r\n                }\r\n                if (misc == MiscBattleInput.Cancel)\r\n                {\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        internal bool BattleDecided()\r\n        {\r\n            int heroes = 0;\r\n            int enemies = 0;\r\n            foreach (var e in entities)\r\n            {\r\n                if (e.Type == EntityType.hero)\r\n                {\r\n                    if (e.Alive)\r\n                        heroes++;\r\n                }\r\n                if (e.Type == EntityType.enemy)\r\n                {\r\n                    if (e.Alive)\r\n                        enemies++;\r\n                }\r\n            }\r\n            return heroes == 0 || enemies == 0;\r\n        }\r\n\r\n        public void MoveChosen(MoveType moveType)\r\n        {\r\n            foreach (var e in entities)\r\n            {\r\n                if (e.Type == EntityType.hero)\r\n                {\r\n                    for (int i = 0; i < e.moves.Length; i++)\r\n                    {\r\n\r\n                        int value = e.moves[i];\r\n\r\n                        if (value == -1)\r\n                        {\r\n\r\n                            e.moves[i] = (int)moveType;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        public void ExecuteMoves()\r\n        {\r\n\r\n            //Console.Write(\"bla\" + battleState.turn.Val);\r\n            //Console.Read();\r\n            BattleEntity attacker = entities[battleState.actingEntity];\r\n            int turn = battleState.turn;\r\n            ExecuteMove(attacker, turn);\r\n        }\r\n\r\n        public void ExecuteMove(BattleEntity actor, int turn)\r\n        {\r\n            MoveDataExecuter.ExecuteMove(actor, turn);\r\n\r\n        }\r\n\r\n        public float CalculateAttackMultiplier(BattleEntity actor)\r\n        {\r\n            var baseD = actor.damageMultiplier;\r\n            foreach (var e in entities)\r\n            {\r\n                if (e != actor)\r\n                {\r\n                    if (e.pos == actor.pos)\r\n                    {\r\n                        if (e.Type == EntityType.paneleffect)\r\n                        {\r\n                            baseD *= 3;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return baseD;\r\n        }\r\n\r\n\r\n        public float CalculateDefenderMultiplier(BattleEntity actor)\r\n        {\r\n            var baseD = 1;\r\n            foreach (var e in entities)\r\n            {\r\n                if (e != actor)\r\n                {\r\n                    if (e.pos == actor.pos)\r\n                    {\r\n                        if (e.Type == EntityType.paneleffect)\r\n                        {\r\n                            baseD *= 3;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return baseD;\r\n        }\r\n\r\n        public class BattleState\r\n        {\r\n            public Value turn = new Value();\r\n            public int totalTurns;\r\n            public Value turnsPerPhase = new Value();\r\n            public Value moveTick_Now = new Value();\r\n            public int moveTick_Total = 0;\r\n            public int actingEntity = 0;\r\n            public BattlePhase phase;\r\n            public bool BattleEndEnable = true;\r\n        }\r\n\r\n        public class BattleEntity\r\n        {\r\n            public int life;\r\n            public Vector2D pos = new Vector2D();\r\n            public Vector2D minPos = new Vector2D();\r\n            public Vector2D maxPos = new Vector2D();\r\n            public int[] moves = new int[10];\r\n            public int graphic;\r\n            public int graphicRepeatedIndex;\r\n            public float damageMultiplier = 1;\r\n            public bool drawLife = true;\r\n            public bool drawTurn = true;\r\n            public bool randomPosition = false;\r\n            public Element element = Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None;\r\n            public int maxLife = 3;\r\n\r\n            public EntityType Type = Pidroh.ConsoleApp.Turnbased.BattleMain.EntityType.hero;\r\n            public Vector2D PositionV2D { get { return new BaseUtils.Vector2D(pos.X, pos.Y); } }\r\n\r\n            public bool Dead { get { return life <= 0; } }\r\n\r\n            public bool Alive { get { return !this.Dead; } }\r\n\r\n        }\r\n\r\n        public enum MoveType\r\n        {\r\n            DoNothing,\r\n            MoveUp,\r\n            MoveLeft,\r\n            MoveDown,\r\n            MoveRight,\r\n            NormalShot,\r\n            Fire,\r\n            Ice,\r\n            Thunder,\r\n            IceBomb,\r\n            ThunderBomb,\r\n            SummonEntity,\r\n            DownFire,\r\n            TripleFire,\r\n        }\r\n\r\n        public enum HappTag\r\n        {\r\n            AttackHit,\r\n            AttackMiss,\r\n            DamageTaken,\r\n            MovementFail\r\n        }\r\n\r\n        public enum BattlePhase\r\n        {\r\n            EnemyMoveChoice,\r\n            HandRecharge,\r\n            PickHands,\r\n            ConfirmInput,\r\n            ExecuteMove,\r\n\r\n        }\r\n\r\n        public enum EntityType\r\n        {\r\n            hero, enemy, neutral, pickup, paneleffect\r\n        }\r\n\r\n        public enum Element\r\n        {\r\n            Fire, Ice, Thunder,\r\n            None\r\n        }\r\n\n    \nprivate int __Property__Initializer__BoardWidth=6;private int __Property__Initializer__BoardHeight=3;}\r\n\r\n\r\n\r\n    public class Value\r\n    {\r\n        public float Val { get; set; }\r\n\r\n        public Enum valAsEnum { set { Val = Convert.ToSingle(value); } }\r\n\r\n        internal void Set(int v)\r\n        {\r\n            Val = v;\r\n        }\r\n\r\n        public static Value operator +(Value c1, float c2)\r\n        {\r\n            c1.Val += c2;\r\n            return c1;\r\n        }\r\n\r\n        public static float operator -(Value c1, float c2)\r\n        {\r\n            return c1.Val - c2;\r\n        }\r\n\r\n        public static bool operator ==(Value c1, Value c2)\r\n        {\r\n            bool c2null = object.ReferenceEquals(c2, null);\r\n            bool c1null = object.ReferenceEquals(c1, null);\r\n            if (c2null && c1null)\r\n                return true;\r\n            if (c1null || c2null)\r\n            {\r\n                return false;\r\n            }\r\n            return c1.Val == c2.Val;\r\n        }\r\n\r\n        public static bool operator !=(Value c1, Value c2)\r\n        {\r\n            bool c2null = object.ReferenceEquals(c2, null);\r\n            bool c1null = object.ReferenceEquals(c1, null);\r\n            if (c2null && c1null)\r\n                return false;\r\n            if (c1null || c2null)\r\n            {\r\n                return true;\r\n            }\r\n            return c1.Val != c2.Val;\r\n        }\r\n\r\n        public static implicit operator float(Value d)\r\n        {\r\n            return d.Val;\r\n        }\r\n\r\n        public static implicit operator int(Value d)\r\n        {\r\n            return (int)d.Val;\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    public class BattleResult\r\n    {\r\n        public int result;\r\n    }\r\n\r\n    public struct Input\r\n    {\r\n        public readonly InputType type;\r\n        public readonly int arg1;\r\n\r\n\r\n\r\n        public Input(InputType type, int arg1)\r\n        {\r\n            this.type = type;\r\n            this.arg1 = arg1;\r\n        }\r\n\r\n        public Input(InputType type, Enum arg1)\r\n        {\r\n            this.type = type;\r\n            this.arg1 = Convert.ToInt32(arg1);\r\n        }\r\n    }\r\n\r\n    public enum InputType\r\n    {\r\n        None, Move, MiscBattle\r\n    }\r\n\r\n    public enum MiscBattleInput\r\n    {\r\n        Done,\r\n        Redo,\r\n        Preview,\r\n        Confirm,\r\n        Cancel,\r\n        Help\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class ColorStuff\r\n    {\r\n        private static readonly string GoodMain;\r\n        public static string neutralDark = \"#19013b\";\r\n        public static string neutralStrong = \"#2c3e43\";\r\n        private static readonly string GoodSub;\r\n        private static readonly string EvilMain;\r\n        public static string[] colors = new string[25];\r\n\r\n        static ColorStuff()\r\n        {\r\n            for (int i = 0; i < colors.Length; i++)\r\n            {\r\n                colors[i] = \"#400020\";\r\n            }\r\n            //colors[Colors.Hero] = \"#009c8d\";\r\n            //const string heroSub = \"#005f91\";\r\n            //colors[Colors.HeroTurn] = heroSub;\r\n            //colors[Colors.Enemy] = \"#ff0353\";\r\n            //colors[Colors.GridHero] = heroSub;\r\n            //colors[BattleRender.Colors.GridEnemy] = \"#8e0060\";\r\n            //colors[BattleRender.Colors.EnemyTurn] = \"#8e0060\";\r\n            //colors[BattleRender.Colors.Board] = \"#1e486e\";\r\n            //colors[BattleRender.Colors.inputKey] = \"#688690\";\r\n            //colors[BattleRender.Colors.WindowLabel] = \"#1e486e\";\r\n            //colors[BattleRender.Colors.FireAura] = \"#793100\";\r\n            //colors[BattleRender.Colors.IceAura] = \"#005590\";\r\n            //colors[BattleRender.Colors.ThunderAura] = \"#00583d\";\r\n\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero] = \"#8ad896\";\r\n            const string heroSub = \"#4c6d50\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.HeroTurn] = heroSub;\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Enemy] = \"#ff7694\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero] = heroSub;\r\n            const string enemysub = \"#a7464f\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridEnemy] = enemysub;\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.EnemyTurn] = enemysub;\r\n            colors[BattleRender.Colors.Board] = \"#1e486e\";\r\n            colors[BattleRender.Colors.inputKey] = \"#688690\";\r\n            colors[BattleRender.Colors.WindowLabel] = \"#1e486e\";\r\n            colors[BattleRender.Colors.FireAura] = \"#793100\";\r\n            colors[BattleRender.Colors.IceAura] = \"#005590\";\r\n            colors[BattleRender.Colors.ThunderAura] = \"#00583d\";\r\n            colors[BattleRender.Colors.FireShot] = \"#f82b36\";\r\n            colors[BattleRender.Colors.IceShot] = \"#007eff\";\r\n            colors[BattleRender.Colors.ThunderShot] = \"#a37c00\";\r\n            colors[BattleRender.Colors.BackgroundInput] = \"#080808\";\r\n\r\n\r\n            colors[BattleRender.Colors.inputKey] = \"#9E8664\";\r\n            colors[BattleRender.Colors.InputDescription] = \"#808080\";\r\n            colors[BattleRender.Colors.BackBattle] = \"#000000\";\r\n            colors[BattleRender.Colors.BackgroundInput] = \"#1A1A1A\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.HeroTurn] = \"#00B2B2\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.EnemyTurn] = \"#FF0040\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero] = \"#00468C\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridEnemy] = \"#8C0023\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero] = \"#66FFFF\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Enemy] = \"#D90036\";\r\n            \r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero] = \"#BFBFBF\";\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Enemy] = colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero];\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.HeroTurn] = colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero];\r\n            colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.EnemyTurn] = colors[Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero];\r\n            colors[BattleRender.Colors.WindowLabel] = \"#666666\";\r\n            colors[BattleRender.Colors.BackCommand] = \"#333333\";\r\n\r\n            colors[BattleRender.Colors.FireAura] = \"#FF8C66\";\r\n            colors[BattleRender.Colors.IceAura] = \"#66FFFF\";\r\n            colors[BattleRender.Colors.ThunderAura] = \"#FFFF66\";\r\n\r\n            colors[BattleRender.Colors.BackStripe] = \"#1A140D\";\r\n        }\r\n\r\n\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased.DebugExtra\r\n{\r\n    public static class DebugEx\r\n    {\r\n        static List<string> messages = new List<string>();\r\n\r\n        public static void Log(string v)\r\n        {\r\n            messages.Add(v);\r\n        }\r\n\r\n        public static void Show()\r\n        {\r\n            Console.Clear();\r\n            foreach (var item in messages)\r\n            {\r\n                Console.WriteLine(item);\r\n                \r\n            }\r\n            Console.Read();\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class DeckManager\r\n    {\r\n        List<int>[] decks = new List<int>[3];\r\n        List<int>[] decksStatic = new List<int>[3];\r\n        List<int>[] discards = new List<int>[3];\r\n        bool[] decksOk = new bool[3];\r\n        int[] defaultAttack = new int[3];\r\n        public List<int> selection = new List<int>();\r\n        List<int> decksNotEmpty = new List<int>();\r\n        bool defaultAttackAlwaysPresentAtStart = true;\r\n        public List<int> movesToRemove = new List<int>();\r\n\r\n        public DeckManager(int handSize)\r\n        {\r\n            for (int i = 0; i < handSize; i++)\r\n            {\r\n                selection.Add(0);\r\n            }\r\n            for (int i = 0; i < decks.Length; i++)\r\n            {\r\n                decks[i] = new List<int>();\r\n                decksStatic[i] = new List<int>();\r\n            }\r\n        }\r\n\r\n        public void Refresh()\r\n        {\r\n            //removes used moves from hand\r\n            foreach (var item in movesToRemove)\r\n            {\r\n                int index = selection.IndexOf(item);\r\n                if (index != -1)\r\n                {\r\n                    selection[index] = 0;\r\n                }\r\n            }\r\n            movesToRemove.Clear();\r\n            if (defaultAttackAlwaysPresentAtStart)\r\n            {\r\n                for (int i = 0; i < defaultAttack.Length; i++)\r\n                {\r\n                    selection[i] = defaultAttack[i];\r\n                }\r\n            }\r\n            RefreshDeckEmptyStatus();\r\n            for (int i = 0; i < decks.Length; i++)\r\n            {\r\n                decksOk[i] = false;\r\n                if (selection.Contains(defaultAttack[i]))\r\n                {\r\n                    decksOk[i] = true;\r\n                }\r\n                for (int j = 0; j < decksStatic[i].Count; j++)\r\n                {\r\n\r\n                    if (selection.Contains(decksStatic[i][j]))\r\n                    {\r\n                        decksOk[i] = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n\r\n\r\n            }\r\n            for (int i = 0; i < selection.Count; i++)\r\n            {\r\n                if (selection[i] > 0) continue;\r\n                bool added = false;\r\n                for (int j = 0; j < decksOk.Length; j++)\r\n                {\r\n                    if (!decksOk[j])\r\n                    {\r\n                        decksOk[j] = true;\r\n                        added = true;\r\n                        int move = defaultAttack[j];\r\n                        if (decks[j].Count != 0)\r\n                        {\r\n                            move = Draw(j);\r\n                        }\r\n\r\n                        selection[i] = move;\r\n                        RefreshDeckEmptyStatus();\r\n                        break;\r\n                    }\r\n                }\r\n                if (!added)\r\n                {\r\n                    if (decksNotEmpty.Count > 0)\r\n                    {\r\n                        int deck = Pidroh.BaseUtils.Extensions.RandomElement<int>(decksNotEmpty);\r\n                        int move = Draw(deck);\r\n                        selection[i] = move;\r\n                        RefreshDeckEmptyStatus();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        internal void SetDefaultAttack(int deckId, int move)\r\n        {\r\n            defaultAttack[deckId] = move;\r\n        }\r\n\r\n        private int Draw(int deckId)\r\n        {\r\n            var move = Pidroh.BaseUtils.Extensions.RandomElement<int>(decks[deckId]);\r\n            decks[deckId].Remove(move);\r\n            return move;\r\n        }\r\n\r\n        internal void Add(int deckId, int item)\r\n        {\r\n            decks[deckId].Add(item);\r\n            decksStatic[deckId].Add(item);\r\n        }\r\n\r\n        private void RefreshDeckEmptyStatus()\r\n        {\r\n            decksNotEmpty.Clear();\r\n            for (int i = 0; i < decks.Length; i++)\r\n            {\r\n                if (decks[i].Count > 0)\r\n                {\r\n                    decksNotEmpty.Add(i);\r\n                }\r\n            }\r\n        }\r\n\r\n        internal void InputUsed(int move)\r\n        {\r\n            movesToRemove.Add(move);\r\n            //int index = selection.IndexOf(move);\r\n            //if (index != -1)\r\n            //{\r\n            //    selection[index] = 0;\r\n            //}\r\n\r\n        }\r\n\r\n        internal void Recover(int lostMove)\r\n        {\r\n            movesToRemove.Remove(lostMove);\r\n        }\r\n    }\r\n}\r\n","using Pidroh.ECS;\r\nusing System;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    internal class ECSIntegration\r\n    {\r\n\r\n        SpawnEntityFactory enemyFactory;\r\n        ECSManager ecs;\r\n\r\n        public ECSIntegration(SpawnEntityFactory enemyFactory, ECSManager ecs)\r\n        {\r\n            this.enemyFactory = enemyFactory;\r\n            this.ecs = ecs;\r\n        }\r\n\r\n        internal void HeroCreated(BattleMain.BattleEntity hero)\r\n        {\r\n            ecs.CreateEntityWithComponent(hero);\r\n        }\r\n\r\n        internal void SpawnEnemies()\r\n        {\r\n            enemyFactory.Spawn();\r\n        }\r\n    }\r\n}","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class EnemyAI\r\n    {\r\n        public readonly List<object> moves = new List<object>();\r\n    }\r\n\r\n    public class EnemyAIState\r\n    {\r\n        public int progress;\r\n    }\r\n\r\n    public class MoveUse\r\n    {\r\n        public readonly int move;\r\n\r\n        public MoveUse()\r\n        {\r\n        }\r\n\r\n        public MoveUse(int move)\r\n        {\r\n            this.move = move;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ECS;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class SpawnEntityFactory\r\n    {\r\n\r\n        ECSManager ecs;\r\n        List<EnemyData> enemyDatas;\r\n        private readonly BattleMain battleMain;\r\n        private QuickAccessorOne<SpawnData> spawns;\r\n\r\n        public SpawnEntityFactory(ECSManager ecs, List<EnemyData> enemyDatas, BattleMain battleMain)\r\n        {\r\n            this.ecs = ecs;\r\n            //ecs.QuickAccessor1<EnemyData>();\r\n            spawns = ecs.QuickAccessor1<SpawnData>();\r\n            this.enemyDatas = enemyDatas;\r\n            this.battleMain = battleMain;\r\n        }\r\n\r\n        public void Spawn()\r\n        {\r\n            int spawned = 0;\r\n            //for (int i = 0; i < spawns.Count; i++)\r\n            while (spawns.Count > 0)\r\n            {\r\n                SpawnData spawn = spawns.Comp1(0);\r\n                spawns.Entity(0).RemoveComponent(spawn);\r\n                var id = spawn.id;\r\n                BattleMain.EntityType entType = (BattleMain.EntityType)spawn.entityType;\r\n                if(entType == BattleMain.EntityType.pickup)\r\n                {\r\n                    var be = battleMain.NewBattleEntity();\r\n                    be.Type = entType;\r\n                    PickupInfo pickup = new PickupInfo(true);\r\n                    var pickupE = ecs.CreateEntityWithComponent(pickup);\r\n                    pickupE.AddComponent(be);\r\n                    be.pos = spawn.position;\r\n                    be.life = 1;\r\n                    be.maxLife = 1;\r\n                    be.drawLife = false;\r\n                    be.drawTurn = false;\r\n                    be.graphic = 4;\r\n                    \r\n                }\r\n                if (entType == BattleMain.EntityType.neutral)\r\n                {\r\n                    var be = battleMain.NewBattleEntity();\r\n                    be.Type = entType;\r\n\r\n                    be.pos = spawn.position;\r\n                    be.life = 30;\r\n                    be.maxLife = 30;\r\n                    be.drawLife = false;\r\n                    be.drawTurn = false;\r\n                    be.graphic = 5;\r\n\r\n                }\r\n                if (entType == BattleMain.EntityType.enemy)\r\n                {\r\n                    var enemyAI = enemyDatas[id].enemyAI;\r\n                    var enemy = ecs.CreateEntityWithComponent(enemyAI);\r\n                    var be = battleMain.NewBattleEntity();\r\n                    be.pos = spawn.position;\r\n                    be.life = enemyDatas[id].hp;\r\n                    be.maxLife = be.life;\r\n                    be.graphic = enemyDatas[id].render;\r\n                    var entities = battleMain.entities;\r\n                    foreach (var item in entities)\r\n                    {\r\n                        if (item != be && item.graphic == be.graphic)\r\n                        {\r\n                            be.graphicRepeatedIndex++;\r\n                        }\r\n                    }\r\n                    be.minPos = new Vector2D(3, 0);\r\n                    be.maxPos = new Vector2D(5, 2);\r\n                    be.Type = BattleMain.EntityType.enemy;\r\n                    enemy.AddComponent(be);\r\n                    EnemyAIState enemyAiState = new EnemyAIState();\r\n                    enemyAiState.progress = spawned;\r\n                    enemy.AddComponent(enemyAiState);\r\n                    //Console.Write(\"SPAWN\");\r\n                    spawned++;\r\n                }\r\n                \r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    public class PickupInfo\r\n    {\r\n        public bool necessaryForVictory;\r\n\r\n        public PickupInfo(bool necessaryForVictory)\r\n        {\r\n            this.necessaryForVictory = necessaryForVictory;\r\n        }\r\n\r\n        public PickupInfo()\r\n        {\r\n        }\r\n    }\r\n\r\n    public class EnemyData\r\n    {\r\n        public readonly EnemyAI enemyAI;\r\n        public readonly int hp;\r\n        public readonly int render;\r\n\r\n        public EnemyData(EnemyAI enemyAI, int hp, int render)\r\n        {\r\n            this.enemyAI = enemyAI;\r\n            this.hp = hp;\r\n            this.render = render;\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class EnemyDataCreator\r\n    {\r\n        List<string> renderTexts;\r\n        public List<EnemyData> enemyDatas = new List<EnemyData>();\r\n        MoveCreatorProg moveCreatorProg;\r\n\r\n        public EnemyDataCreator(List<string> renderTexts, MoveCreatorProg moveCreatorProg)\r\n        {\r\n            renderTexts.Add(\"@\");\r\n            this.renderTexts = renderTexts;\r\n            this.moveCreatorProg = moveCreatorProg;\r\n\r\n            //comment\r\n            //AddEnemy(ai: Actions(\r\n            //    SpecialEnemyMoves.SmartMove, MoveType.MoveLeft, MoveType.MoveDown\r\n            //    ), hp: 2, renderText: \"%\");\r\n\r\n            AddEnemy(ai: Actions(\r\n                Moves(Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveLeft,Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveDown, Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Fire, Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveRight, Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveUp, Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Thunder)\r\n                ), hp:2, renderText:\"%\");\r\n            AddEnemy(ai: Actions(\r\n                Moves(Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.IceBomb, Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.DoNothing, Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.DoNothing)\r\n                ), hp: 3, renderText: \"#\");\r\n            AddEnemy(ai: Actions(\r\n               Moves(\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.IceBomb,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveLeft,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.ThunderBomb,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.MoveRight\r\n                   )\r\n               ), hp: 6, renderText: \"&\");\r\n            AddEnemy(ai: Actions(\r\n                   \r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.IceBomb,\r\n                   \"Summon\",\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveLeft,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.ThunderBomb,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveRight,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.Fire\r\n\r\n\r\n               ), hp: 45, renderText: \"$\");\r\n            AddEnemy(ai: Actions(\r\n\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveUp,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveLeft,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveRight,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveDown,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveLeft,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.MoveDown,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.MoveUp\r\n\r\n\r\n               ), hp: 3, renderText: \"H\");\r\n            AddEnemy(ai: Actions(\r\n\r\n                Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Ice,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.DoNothing,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.DoNothing\r\n\r\n\r\n\r\n               ), hp: 3, renderText: \"J\");\r\n            AddEnemy(ai: Actions(\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.DoNothing,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.DoNothing\r\n\r\n\r\n\r\n               ), hp: 3, renderText: \"L\");\r\n            AddEnemy(ai: Actions(\r\n\r\n                Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Fire,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.DoNothing,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.DoNothing\r\n\r\n\r\n\r\n               ), hp: 3, renderText: \"K\");\r\n            AddEnemy(ai: Actions(\r\n\r\n                Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.DownFire,\r\n                SpecialEnemyMoves.SmartMove,\r\n                SpecialEnemyMoves.SmartMove,\r\n                SpecialEnemyMoves.SmartMove\r\n\r\n\r\n               ), hp: 3, renderText: \"K\");\r\n            AddEnemy(ai: Actions(\r\n\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.IceBomb,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.ThunderBomb,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.ThunderBomb,\r\n                   SpecialEnemyMoves.SmartMove\r\n\r\n\r\n               ), hp: 25, renderText: \"$\");\r\n            AddEnemy(ai: Actions(\r\n\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Fire,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Thunder,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.Thunder,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   SpecialEnemyMoves.SmartMove,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType.TripleFire,\r\n                   Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType\r\n.Thunder\r\n\r\n               ), hp: 25, renderText: \"$\");\r\n\r\n            //AddEnemy(ai: Actions(), hp: 3, renderText: \"$\");\r\n            //AddEnemy(ai: Actions(), hp: 5, renderText: \"#\");\r\n\r\n        }\r\n\r\n        private EnemyAI Actions(params object[] obs)\r\n        {\r\n            var ai = new EnemyAI();\r\n            \r\n            foreach (var o in obs)\r\n            {\r\n                if (o is Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType)\r\n                {\r\n                    ai.moves.Add(new MoveUse((int)o));\r\n                    continue;\r\n                }\r\n                if (o is string)\r\n                {   \r\n                    ai.moves.Add(new MoveUse(moveCreatorProg.GetMoveId(o as string)));\r\n                    continue;\r\n                }\r\n                if (o is Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType[])\r\n                {\r\n                    foreach (var item in o as Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType[])\r\n                    {\r\n                        ai.moves.Add(new MoveUse((int)item));\r\n                    }\r\n                    continue;\r\n                }\r\n                ai.moves.Add(o);\r\n            }\r\n            return ai;\r\n        }\r\n\r\n        private Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType[] Moves(params Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType[] moves)\r\n        {\r\n            return moves;\r\n        }\r\n\r\n        private void AddEnemy(EnemyAI ai, int hp, string renderText)\r\n        {\r\n            int render = renderTexts.Count;\r\n            renderTexts.Add(renderText);\r\n            enemyDatas.Add(new EnemyData(ai, hp, render));\r\n        }\r\n\r\n       \r\n    }\r\n\r\n    public class SpecialEnemyMoves\r\n    {\r\n        public static SpecialEnemyMoves SmartMove = new SpecialEnemyMoves(0);\r\n        private int number;\r\n\r\n        public SpecialEnemyMoves(int v)\r\n        {\r\n            this.number = v;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ECS;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n\r\n    public class StageDataCreator\r\n    {\r\n        //public List<StageData> stages = new List<StageData>();\r\n        private readonly ECSManager ecs;\r\n        private StageDataGroup currentGroup;\r\n\r\n        public StageDataCreator(ECSManager ecs)\r\n        {\r\n            this.ecs = ecs;\r\n\r\n            //Add(new StageData(\r\n            //    Enemy(0, new BaseUtils.Vector2D(3, 2)),\r\n            //    Enemy(2, new BaseUtils.Vector2D(3, 1)),\r\n            //    Enemy(2, new BaseUtils.Vector2D(5, 1))\r\n            //    ));\r\n\r\n            //Add(new StageData(\r\n            //  Enemy(0, new BaseUtils.Vector2D(4, 0))\r\n            ////  Enemy(5, new BaseUtils.Vector2D(4, 1)),\r\n            ////  Enemy(7, new BaseUtils.Vector2D(3, 0))\r\n            //  ));\r\n\r\n            //Add(new StageData(\r\n            //    //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n            //    Enemy(6, new BaseUtils.Vector2D(5, 0))\r\n            //    ), new FixedAttackStage(\r\n            //        (int)BattleMain.MoveType.Fire));\r\n            StageData.ResetIdCreation();\r\n            StageDataGroup trainingGroup = new StageDataGroup();\r\n            currentGroup = trainingGroup;\r\n            AddGroup(trainingGroup);\r\n\r\n            AddStage(new StageData(\r\n                //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n                Pickup(0, new BaseUtils.Vector2D(0, 0)),\r\n                Pickup(0, new BaseUtils.Vector2D(2, 2))\r\n                ).HideLifeUI(), new FixedAttackStage());\r\n\r\n            AddStage(new StageData(\r\n                //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n                new BattleConfig(needKillAllEnemies: false),\r\n                Pickup(0, new BaseUtils.Vector2D(2, 1)),\r\n                Pickup(0, new BaseUtils.Vector2D(0, 2)),\r\n                Enemy(4, new BaseUtils.Vector2D(5, 1))\r\n                ).HideLifeUI(), new FixedAttackStage());\r\n            AddStage(new StageData(\r\n                //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n                new BattleConfig(needKillAllEnemies: false),\r\n                Pickup(0, new BaseUtils.Vector2D(2, 2)),\r\n                Pickup(0, new BaseUtils.Vector2D(1, 2)),\r\n                Pickup(0, new BaseUtils.Vector2D(0, 2)),\r\n                Enemy(5, new BaseUtils.Vector2D(5, 2))\r\n                ), new FixedAttackStage());\r\n            AddStage(new StageData(\r\n                //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n                Enemy(6, new BaseUtils.Vector2D(5, 0))\r\n                ), new FixedAttackStage(\r\n                    (int)BattleMain.MoveType.Fire));\r\n            AddStage(new StageData(\r\n               //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n               Enemy(4, new BaseUtils.Vector2D(4, 1))\r\n               ), new FixedAttackStage(\r\n                   (int)BattleMain.MoveType.Fire));\r\n            AddStage(new StageData(\r\n               //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n               Enemy(5, new BaseUtils.Vector2D(4, 1))\r\n               ), new FixedAttackStage(\r\n                   (int)BattleMain.MoveType.Fire));\r\n            AddStage(new StageData(\r\n              //Enemy(0, new BaseUtils.Vector2D(4, 0)),\r\n              Enemy(5, new BaseUtils.Vector2D(4, 1)),\r\n              Enemy(7, new BaseUtils.Vector2D(3, 0))\r\n              ), new FixedAttackStage(\r\n                  (int)BattleMain.MoveType.Fire, (int)BattleMain.MoveType.Thunder));\r\n\r\n            Add(new StageData(\r\n                Enemy(0, new BaseUtils.Vector2D(3, 0)),\r\n                Enemy(0, new BaseUtils.Vector2D(5, 2))\r\n                ));\r\n\r\n            currentGroup = new StageDataGroup();\r\n            AddGroup(currentGroup);\r\n\r\n            Add(\r\n\r\n                new StageData(\r\n                Enemy(1, new BaseUtils.Vector2D(3, 2)),\r\n                Enemy(2, new BaseUtils.Vector2D(5, 1))\r\n                )\r\n                ,\r\n                 new StageData(\r\n                Enemy(0, new BaseUtils.Vector2D(4, 1)),\r\n                Enemy(1, new BaseUtils.Vector2D(5, 1))\r\n                )\r\n                ,\r\n                new StageData(\r\n                Enemy(0, new BaseUtils.Vector2D(3, 2)),\r\n                Enemy(2, new BaseUtils.Vector2D(3, 1)),\r\n                Enemy(2, new BaseUtils.Vector2D(5, 1))\r\n                )\r\n                ,\r\n                new StageData(\r\n                    new BattleConfig(new int[] { 1 }),\r\n                    Enemy(3, new BaseUtils.Vector2D(4, 1))\r\n                )\r\n\r\n                //,\r\n\r\n                //,\r\n                //new StageData(\r\n                //new EnemySpawnData(1, new BaseUtils.Vector2D(4, 1)),\r\n                //new EnemySpawnData(1, new BaseUtils.Vector2D(5, 1)))\r\n                );\r\n\r\n            currentGroup = new StageDataGroup();\r\n            AddGroup(currentGroup);\r\n\r\n            Add(\r\n\r\n\r\n                 new StageData(\r\n                Enemy(8, new BaseUtils.Vector2D(3, 1))\r\n                )\r\n                ,\r\n                new StageData(\r\n                Enemy(8, new BaseUtils.Vector2D(4, 1)),\r\n                Enemy(5, new BaseUtils.Vector2D(5, 1))\r\n                )\r\n                ,\r\n                new StageData(\r\n                Enemy(8, new BaseUtils.Vector2D(4, 2)),\r\n                Enemy(2, new BaseUtils.Vector2D(3, 0))\r\n                )\r\n                ,\r\n                new StageData(\r\n                Enemy(8, new BaseUtils.Vector2D(3, 0)),\r\n                Enemy(1, new BaseUtils.Vector2D(4, 2)),\r\n                Enemy(1, new BaseUtils.Vector2D(5, 1))\r\n                )\r\n                ,\r\n                new StageData(\r\n                    this.Neutral(0, new BaseUtils.Vector2D(1, 2)),\r\n                Enemy(9, new BaseUtils.Vector2D(3, 0)),\r\n                Enemy(10, new BaseUtils.Vector2D(5, 2))\r\n                )\r\n\r\n\r\n                );\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        internal void InitializeProgress(List<StageProgressPersistence> persistentList)\r\n        {\r\n            var stageDatas = ecs.QuickAccessor1<StageData>();\r\n            var stageGroups = ecs.QuickAccessor1<StageDataGroup>();\r\n\r\n            for (int i = 0; i < stageDatas.Count; i++)\r\n            {\r\n                bool locked = true;\r\n                for (int j = 0; j < stageGroups.Count; j++)\r\n                {\r\n                    if (stageGroups.Comp1(j).stageDataIds[0].Equals(stageDatas.Entity(i)))\r\n                    {\r\n                        locked = false;\r\n                        break;\r\n                    }\r\n\r\n                }\r\n\r\n                StageProgressPersistence comp = null;\r\n                int id = stageDatas.Comp1(i).id;\r\n                foreach (var per in persistentList)\r\n                {\r\n                    if (per.stageId == id)\r\n                    {\r\n                        comp = per;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (comp == null)\r\n                {\r\n                    //if (true) { \r\n                    comp = new StageProgressPersistence(id);\r\n                    comp.available = !locked;\r\n                    persistentList.Add(comp);\r\n                }\r\n                else\r\n                {\r\n                    //Console.Write(\"s\");\r\n                }\r\n                stageDatas.Entity(i).AddComponent(comp);\r\n            }\r\n        }\r\n\r\n        public void CalculateTrackInfo(List<EnemyData> enemies)\r\n        {\r\n            var stageDatas = ecs.QuickAccessor1<StageData>();\r\n            for (int i = 0; i < stageDatas.Count; i++)\r\n            {\r\n                var sd = stageDatas.Comp1(i);\r\n\r\n                var spawns = sd.spawnDatas;\r\n                int totalHP = 0;\r\n                foreach (var item in spawns)\r\n                {\r\n                    if (item.entityType == (int)BattleMain.EntityType.enemy)\r\n                    {\r\n                        var enemyId = item.id;\r\n                        int hp = enemies[enemyId].hp;\r\n                        totalHP += hp;\r\n                    }\r\n                }\r\n                int target = 1;\r\n                if (totalHP == 0)\r\n                {\r\n                    target = 2;\r\n                }\r\n                if (totalHP > 3)\r\n                {\r\n                    //target = ((totalHP - 1) / 2) + 1;\r\n                    target = (int)Math.Ceiling(totalHP / 3f);\r\n                }\r\n                \r\n                if (sd.battleConfig != null &&!sd.battleConfig.needKillAllEnemies)\r\n                {\r\n                    target = 2;\r\n                }\r\n                stageDatas.Entity(i).AddComponent(new TrackInfoStage(target));\r\n            }\r\n        }\r\n\r\n        private void AddStage(params object[] comps)\r\n        {\r\n\r\n            var e = ecs.CreateEntity();\r\n            foreach (var item in comps)\r\n            {\r\n                e.AddComponent(item);\r\n            }\r\n\r\n            currentGroup.stageDataIds.Add(e);\r\n        }\r\n\r\n        private void AddGroup(StageDataGroup group)\r\n        {\r\n\r\n            var e = ecs.CreateEntity();\r\n            e.AddComponent(group);\r\n        }\r\n\r\n\r\n        private SpawnData Pickup(int v, Vector2D vector2D)\r\n        {\r\n            return new SpawnData(v, vector2D, (int)BattleMain.EntityType.pickup);\r\n        }\r\n\r\n        private SpawnData Neutral(int v, Vector2D vector2D)\r\n        {\r\n            return new SpawnData(v, vector2D, (int)BattleMain.EntityType.neutral);\r\n        }\r\n\r\n        private SpawnData Enemy(int v, Vector2D vector2D)\r\n        {\r\n            return new SpawnData(v, vector2D, (int)BattleMain.EntityType.enemy);\r\n        }\r\n\r\n        private void Add(params StageData[] stageData1)\r\n        {\r\n            foreach (var item in stageData1)\r\n            {\r\n\r\n                currentGroup.stageDataIds.Add(ecs.CreateEntityWithComponent(item));\r\n            }\r\n            //stages.AddRange(stageData1);\r\n        }\r\n    }\r\n\r\n    public class StageData\r\n    {\r\n        public List<SpawnData> spawnDatas = new List<SpawnData>();\r\n        public BattleConfig battleConfig;\r\n        public bool hideLifeUI = false;\r\n        static int staticIdHelper = -1;\r\n        public int id = -1;\r\n\r\n        public StageData()\r\n        {\r\n            staticIdHelper++;\r\n            id = staticIdHelper;\r\n        }\r\n\r\n        public StageData(params SpawnData[] spawns) : this()\r\n        {\r\n            this.spawnDatas.AddRange(spawns);\r\n        }\r\n\r\n        public StageData(BattleConfig battleConfig, params SpawnData[] spawns) : this()\r\n        {\r\n            this.spawnDatas.AddRange(spawns);\r\n            this.battleConfig = battleConfig;\r\n        }\r\n\r\n        public StageData HideLifeUI()\r\n        {\r\n            hideLifeUI = true;\r\n            return this;\r\n        }\r\n\r\n        internal static void ResetIdCreation()\r\n        {\r\n            staticIdHelper = -1;\r\n        }\r\n    }\r\n\r\n    public class StageDataGroup\r\n    {\r\n        public List<Entity> stageDataIds = new List<Entity>();\r\n\r\n    }\r\n\r\n    public class TrackInfoStage\r\n    {\r\n        public readonly int targetRounds = 0;\r\n\r\n        public TrackInfoStage()\r\n        {\r\n\r\n        }\r\n\r\n        public TrackInfoStage(int targetTurns)\r\n        {\r\n            this.targetRounds = targetTurns;\r\n        }\r\n    }\r\n\r\n    public class FixedAttackStage\r\n    {\r\n        public List<int> moves = new List<int>();\r\n\r\n\r\n        public FixedAttackStage(int move)\r\n        {\r\n            moves.Add(move);\r\n        }\r\n\r\n        public FixedAttackStage(params int[] move)\r\n        {\r\n            moves.AddRange(move);\r\n        }\r\n\r\n        public FixedAttackStage()\r\n        {\r\n        }\r\n    }\r\n\r\n    public class SpawnData\r\n    {\r\n        public readonly int id;\r\n        public readonly int entityType;\r\n        public readonly BaseUtils.Vector2D position;\r\n\r\n        public SpawnData()\r\n        {\r\n        }\r\n\r\n        public SpawnData(int id, Vector2D position, int type)\r\n        {\r\n            this.id = id;\r\n            this.position = position;\r\n            this.entityType = type;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.ConsoleApp.Turnbased.Happs;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.BaseUtils;\r\nusing Pidroh.ECS;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class MoveDataExecuter\r\n    {\r\n        BattleMain battleMain;\r\n        List<MoveData> moveDatas;\r\n        private HappManager happManager;\r\n        private List<BattleMain.BattleEntity> entities;\r\n        private readonly ECSManager ecs;\r\n        TimeStamp timeStamp;\r\n        List<Vector2D> aux = new List<Vector2D>();\r\n        internal TrackBattle trackBattle;\r\n\r\n        public MoveDataExecuter(BattleMain turnBase, List<MoveData> moveDatas, ECSManager ecs, TimeStamp timeStamp)\r\n        {\r\n            this.battleMain = turnBase;\r\n            this.moveDatas = moveDatas;\r\n            this.ecs = ecs;\r\n            this.timeStamp = timeStamp;\r\n        }\r\n\r\n        public void ExecuteMove(BattleMain.BattleEntity actor, int turn)\r\n        {\r\n\r\n\r\n            var battleState = this.battleMain.battleState;\r\n            entities = this.battleMain.entities;\r\n            int userId = entities.IndexOf(actor);\r\n\r\n            var moveId = actor.moves[turn];\r\n            if (moveId < 0) return;\r\n            var md = moveDatas[moveId];\r\n            if (md == null) return;\r\n            if (md.units.Count == 0) return;\r\n            battleState.moveTick_Total = md.units.Count;\r\n            int moveTick = battleState.moveTick_Now;\r\n            var actions = md.units[moveTick].thingsToHappen;\r\n            happManager = battleMain.happManager;\r\n\r\n\r\n\r\n            foreach (var a in actions)\r\n            {\r\n\r\n                if (a is MoveAction)\r\n                {\r\n                    MoveAction ma = a as MoveAction;\r\n                    var p = ma.distance;\r\n                    actor.pos += p;\r\n                    bool invalidMove =\r\n                        actor.pos.X < actor.minPos.X\r\n                        || actor.pos.Y < actor.minPos.Y\r\n                        || actor.pos.Y > actor.maxPos.Y\r\n                        || actor.pos.X > actor.maxPos.X;\r\n                    foreach (var e in entities)\r\n                    {\r\n                        if (e != actor && e.Alive)\r\n                        {\r\n                            if (actor.pos == e.pos)\r\n                            {\r\n                                invalidMove = true;\r\n                                if (e.Type == BattleMain.EntityType.pickup)\r\n                                {\r\n                                    e.life = 0;\r\n                                    actor.damageMultiplier = 2;\r\n                                    invalidMove = false;\r\n                                }\r\n                                if (e.Type == BattleMain.EntityType.paneleffect)\r\n                                {\r\n                                    invalidMove = false;\r\n                                }\r\n                                if (invalidMove) break;\r\n\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                    if (invalidMove)\r\n                    {\r\n                        //Console.WriteLine(\"Invalid move generate\" + battleState.moveTick_Now.Val);\r\n\r\n                        int actorId = entities.IndexOf(actor);\r\n                        Vector2D moveTo = actor.pos;\r\n                        Vector2D moveFrom = actor.pos - p;\r\n                        CreateHapp((int)MoveDataTags.Movement, new HappMoveData(actorId), new HappMovement(moveFrom, moveTo, false));\r\n\r\n\r\n                        //battleMain.happManager\r\n                        //    .Add(new Happ(BattleMain.HappTag.MovementFail))\r\n                        //    .AddAttribute(new Happ.Attribute().SetValue(actorId))\r\n                        //    .AddAttribute(new Happ.Attribute().SetValue(actor.pos.X))\r\n                        //    .AddAttribute(new Happ.Attribute().SetValue(actor.pos.Y));\r\n\r\n                        //battleState.moveTick_Total = 1;\r\n                        actor.pos -= p;\r\n                    }\r\n                    else\r\n                    {\r\n                        int actorId = entities.IndexOf(actor);\r\n                        Vector2D moveTo = actor.pos;\r\n                        Vector2D moveFrom = actor.pos - p;\r\n                        CreateHapp((int)MoveDataTags.Movement, new HappMoveData(actorId), new HappMovement(moveFrom, moveTo, true));\r\n                        //Console.WriteLine(\"MOVE HAPP SUCCESS\");\r\n                    }\r\n                }\r\n                if (a is DealDamageAction)\r\n                {\r\n                    var dda = a as DealDamageAction;\r\n                    var attackElement = dda.element;\r\n                    \r\n                    if (dda.target == Target.Area)\r\n                    {\r\n                        var area = dda.area;\r\n                        var referenceUserOfArea = ResolveTarget(actor, entities, area.target, new Vector2D(0,0));\r\n                        int mirroringX = 1;\r\n                        if (actor.Type == BattleMain.EntityType.enemy) //enemies act on opposite side\r\n                        {\r\n                            mirroringX = -1;\r\n                        }\r\n                        foreach (var point in area.points)\r\n                        {\r\n                            var searchPos = point * new BaseUtils.Vector2D(mirroringX, 1) + referenceUserOfArea.pos;\r\n                            //Console.WriteLine(\"Search point \"+searchPos);\r\n                            for (int i = 0; i < entities.Count; i++)\r\n                            {\r\n                                if (entities[i].pos == searchPos && entities[i].Alive)\r\n                                {\r\n                                    \r\n                                    DealDamage(actor, dda, entities[i]);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    else\r\n                    {\r\n                        //find target\r\n                        BattleMain.BattleEntity target = ResolveTarget(actor, entities, dda.target, dda.userRefOffset);\r\n                        if (target != null)\r\n                        {\r\n                            DealDamage(actor, dda, target);\r\n\r\n                        }\r\n                    }\r\n                }\r\n                if (a is SummonEntity)\r\n                {\r\n                    var entities = battleMain.entities;\r\n                    int battlers = 0;\r\n                    foreach (var item in entities)\r\n                    {\r\n                        if (item.drawLife)\r\n                        {\r\n                            battlers++;\r\n                        }\r\n                    }\r\n                    if (battlers < 4) {\r\n                        var se = a as SummonEntity;\r\n                        var enemyWhich = se.enemyWhich;\r\n                        var enemyId = battleMain.BattleConfig.enemiesToSummon[enemyWhich];\r\n\r\n                        var positions = GetEmptySpots(side: 1);\r\n                        if (positions.Count == 0) return;\r\n\r\n                        Vector2D summonPos = se.preferentialRowColumn;\r\n                        if (!positions.Contains(summonPos))\r\n                        {\r\n                            summonPos = positions[0];\r\n                        }\r\n                        ecs.CreateEntityWithComponent(new SpawnData(enemyId, summonPos, (int)BattleMain.EntityType.enemy));\r\n                    }\r\n                    \r\n                    \r\n                }\r\n                if (a is Animation)\r\n                {\r\n                    var anim = a as Animation;\r\n                    BattleMain.BattleEntity target = ResolveTarget(actor, entities, anim.target, anim.userRefOffset);\r\n                    var area = anim.area;\r\n                    HappArea happArea = null;\r\n                    if (area != null)\r\n                    {\r\n                        var referenceUserOfArea = ResolveTarget(actor, entities, area.target, Vector2D.Zero);\r\n\r\n                        int mirroringX = 1;\r\n                        if (actor.Type == BattleMain.EntityType.enemy) //enemies act on opposite side\r\n                        {\r\n                            mirroringX = -1;\r\n                        }\r\n                        happArea = new HappArea(area, referenceUserOfArea.pos, mirroringX);\r\n                    }\r\n                    int targetId = -1;\r\n                    if (target != null) \r\n                        targetId = entities.IndexOf(target);\r\n                    CreateHapp(md, happArea, new HappMoveData(userId, targetId, anim.element));\r\n                    if (anim.target != Target.None)\r\n                    {\r\n                        Vector2D initialPos = actor.pos + anim.userRefOffset;\r\n                        Vector2D finalPos;\r\n                        if (target != null)\r\n                        {\r\n                            finalPos = target.pos;\r\n                        }\r\n                        else{\r\n                            finalPos = initialPos;\r\n                            finalPos.X = 7;\r\n                            if (actor.Type == BattleMain.EntityType.enemy) //enemies act on opposite side\r\n                            {\r\n                                finalPos.X = -1;\r\n                            }\r\n                        }\r\n                        CreateHapp((int)MoveDataTags.Shoot, new HappShoot(initialPos, finalPos), new HappMoveData(userId, targetId, anim.element));\r\n                    }\r\n\r\n                        \r\n\r\n                    //if (anim.target != Target.None)\r\n                    //{\r\n                    //    happManager\r\n                    //    .Add(new Happ(BattleMain.HappTag.AttackHit))\r\n                    //    .AddAttribute(new Happ.Attribute().SetValue(entities.IndexOf(target)))\r\n                    //    .AddAttribute(new Happ.Attribute().SetValue(userId))\r\n                    //    .AddAttribute(new Happ.Attribute().SetValue((int)anim.element));\r\n                    //}\r\n\r\n\r\n                }\r\n            }\r\n\r\n            if (moveTick == md.units.Count - 1)\r\n            {\r\n                foreach (var item in md.units)\r\n                {\r\n                    foreach (var act in item.thingsToHappen)\r\n                    {\r\n                        if (act is DealDamageAction)\r\n                        {\r\n                            ChangeElement(actor, (act as DealDamageAction).element);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        private List<Vector2D> GetEmptySpots(int side = -1)\r\n        {\r\n            aux.Clear();\r\n            int offX = 0;\r\n            if (side == 1) offX = 3;\r\n            int width = battleMain.BoardWidth / 2;\r\n            if (side == -1)\r\n                width = battleMain.BoardWidth;\r\n            for (int i = 0; i < width; i++)\r\n            {\r\n                for (int j = 0; j < battleMain.BoardHeight; j++)\r\n                {\r\n\r\n                    aux.Add(new Vector2D(i+offX,j));\r\n                }\r\n            }\r\n            var entities = battleMain.entities;\r\n            foreach (var e in entities)\r\n            {\r\n                if (e.Alive && aux.Contains(e.pos))\r\n                {\r\n                    aux.Remove(e.pos);\r\n                }\r\n            }\r\n            return aux;\r\n            \r\n        }\r\n\r\n        private void ChangeElement(BattleMain.BattleEntity actor, BattleMain.Element element)\r\n        {\r\n            if (actor.element == element) return;\r\n            actor.element = element;\r\n            var th = new HappTags((int)MiscHappTags.ChangeElement);\r\n            ecs.CreateEntityWithComponent(th, new HappMoveData(entities.IndexOf(actor), -1, element)).AddComponent(timeStamp.GetSnap());\r\n        }\r\n\r\n        private void CreateHapp(MoveData md, object comp1, object comp2)\r\n        {\r\n            var th = new HappTags(md.tags);\r\n            var e = ecs.CreateEntityWithComponent(th, timeStamp.GetSnap());\r\n            if (comp1 != null) e.AddComponent(comp1);\r\n            if (comp2 != null) e.AddComponent(comp2);\r\n        }\r\n\r\n        private void CreateHapp(int tag, object comp1, object comp2)\r\n        {\r\n            var th = new HappTags(tag);\r\n            var e = ecs.CreateEntityWithComponent(th, timeStamp.GetSnap());\r\n            if (comp1 != null) e.AddComponent(comp1);\r\n            if (comp2 != null) e.AddComponent(comp2);\r\n        }\r\n\r\n        private void DealDamage(BattleMain.BattleEntity actor, DealDamageAction dda, BattleMain.BattleEntity target)\r\n        {\r\n            BattleMain.Element attackElement = dda.element;\r\n            bool elementalBlock = attackElement == target.element && attackElement != BattleMain.Element.None;\r\n            bool superEffective = false;\r\n            int damage = 0;\r\n            int targetId = entities.IndexOf(target);\r\n            if (elementalBlock)\r\n            {\r\n            }\r\n            {\r\n                if (!elementalBlock)\r\n                {\r\n                    var mul = battleMain.CalculateAttackMultiplier(actor);\r\n                    mul *= battleMain.CalculateDefenderMultiplier(target);\r\n                    if (attackElement == BattleMain.Element.Fire && target.element == BattleMain.Element.Ice\r\n                        || attackElement == BattleMain.Element.Thunder && target.element == BattleMain.Element.Fire\r\n                        || attackElement == BattleMain.Element.Ice && target.element == BattleMain.Element.Thunder)\r\n                    {\r\n                        mul *= 3;\r\n                        superEffective = true;\r\n                    }\r\n\r\n                    \r\n\r\n                    damage = dda.damage * (int)mul;\r\n                    target.life -= damage;\r\n                    if (target.Type == BattleMain.EntityType.hero)\r\n                        trackBattle.HeroDamage(damage);\r\n                    \r\n                    actor.damageMultiplier = 1;\r\n                    \r\n                    happManager.Add(new Happ(BattleMain.HappTag.DamageTaken))\r\n                    .AddAttribute(new Happ.Attribute().SetValue(targetId));\r\n                }\r\n            }\r\n            this.CreateHapp((int)MiscHappTags.Damage, new HappDamageData(target.element, dda.element, entities.IndexOf(target), damage, superEffective, elementalBlock), null);\r\n            if (target.life <= 0 && !superEffective)\r\n            {\r\n                CreateHapp((int)MiscHappTags.Death, new HappMoveData(targetId), null);\r\n            }\r\n        }\r\n\r\n        private static BattleMain.BattleEntity ResolveTarget(BattleMain.BattleEntity actor, List<BattleMain.BattleEntity> entities, Target targetType, Vector2D offsetReferenceUserPosition)\r\n        {\r\n            if (targetType == Target.Self) return actor;\r\n            BattleMain.BattleEntity target = null;\r\n            float minDis = 10;\r\n            Vector2D referenceUserPosition = actor.pos;\r\n            referenceUserPosition += offsetReferenceUserPosition;\r\n            foreach (var e2 in entities)\r\n            {\r\n\r\n                if (e2.Dead) continue;\r\n                if (actor.Type != e2.Type\r\n                    && e2.Type != BattleMain.EntityType.paneleffect\r\n                    && e2.Type != BattleMain.EntityType.pickup)\r\n                {\r\n                    \r\n                    bool sameHeight = referenceUserPosition.Y == e2.pos.Y;\r\n\r\n                    if (sameHeight)\r\n                    {\r\n                        float dis = referenceUserPosition.X - e2.pos.X;\r\n                        if (dis < 0) dis *= -1;\r\n                        if (dis < minDis)\r\n                        {\r\n                            minDis = dis;\r\n                            target = e2;\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n\r\n            return target;\r\n        }\r\n    }\r\n\r\n    public class HappTags\r\n    {\r\n        public List<int> tags = new List<int>();\r\n\r\n        public HappTags(List<int> tags)\r\n        {\r\n            this.tags.AddRange(tags);\r\n        }\r\n\r\n        public HappTags(int i)\r\n        {\r\n            tags.Add(i);\r\n        }\r\n\r\n        public HappTags()\r\n        {\r\n            \r\n        }\r\n    }\r\n\r\n    public enum MiscHappTags{\r\n        ChangeElement = 500,\r\n        Damage = 501,\r\n        Death = 502\r\n    }\r\n\r\n    public class HappDamageData\r\n    {\r\n        public readonly BattleMain.Element targetE, damageE;\r\n        public readonly int target;\r\n        public readonly int amount;\r\n        public readonly bool superEffective;\r\n        public readonly bool elementalBlock;\r\n\r\n        public HappDamageData()\r\n        {\r\n        }\r\n\r\n        public HappDamageData(BattleMain.Element targetE, BattleMain.Element damageE, int target, int amount, bool superEffective, bool elementalBlock)\r\n        {\r\n            this.targetE = targetE;\r\n            this.damageE = damageE;\r\n            this.target = target;\r\n            this.amount = amount;\r\n            this.superEffective = superEffective;\r\n            this.elementalBlock = elementalBlock;\r\n        }\r\n    }\r\n\r\n    public class HappMoveData\r\n    {\r\n        public readonly int user;\r\n        public readonly int target = -1;\r\n        public readonly BattleMain.Element element = BattleMain.Element.None;\r\n\r\n        public HappMoveData()\r\n        {\r\n        }\r\n\r\n        public HappMoveData(int user)\r\n        {\r\n            this.user = user;\r\n        }\r\n\r\n        public HappMoveData(int user, int target, BattleMain.Element element)\r\n        {\r\n            this.user = user;\r\n            this.target = target;\r\n            this.element = element;\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    public class HappMovement\r\n    {\r\n        public readonly Vector2D moveFrom;\r\n        public readonly Vector2D moveTo;\r\n        public readonly bool success;\r\n\r\n\r\n        public HappMovement()\r\n        {\r\n        }\r\n\r\n        public HappMovement(Vector2D moveFrom, Vector2D moveTo, bool success)\r\n        {\r\n            this.moveFrom = moveFrom;\r\n            this.moveTo = moveTo;\r\n            this.success = success;\r\n        }\r\n    }\r\n\r\n    public class HappArea\r\n    {\r\n        public readonly Area area;\r\n        public Vector2D offset = new Vector2D();\r\n        public readonly int mirroringX;\r\n\r\n        public HappArea(Area area)\r\n        {\r\n            this.area = area;\r\n        }\r\n\r\n        public HappArea()\r\n        {\r\n        }\r\n\r\n        public HappArea(Area area, Vector2D offset, int mirroringX)\r\n        {\r\n            this.area = area;\r\n            this.offset = offset;\r\n            this.mirroringX = mirroringX;\r\n        }\r\n    }\r\n\r\n    public class HappShoot\r\n    {\r\n        public readonly Vector2D start;\r\n        public readonly Vector2D end;\r\n\r\n        public HappShoot()\r\n        {\r\n        }\r\n\r\n        public HappShoot(Vector2D start, Vector2D end)\r\n        {\r\n            this.start = start;\r\n            this.end = end;\r\n        }\r\n    }\r\n\r\n}\r\n","using Pidroh.ConsoleApp.Turnbased.DebugExtra;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased.Happs\r\n{\r\n\r\n    //legacy happs\r\n    //better system on happhandling\r\n    //still used in some situations though...\r\n    public class HappManager\r\n    {\r\n        public int CurrentTime { get; private set; }\r\n        List<Happ> Happs = new List<Happ>();\r\n        List<HappHandler> handlers = new List<HappHandler>();\r\n        int latestHandled = -1;\r\n\r\n        public void AddHandler(HappHandler hh)\r\n        {\r\n            handlers.Add(hh);\r\n        }\r\n\r\n        public void TryHandle()\r\n        {\r\n            if(latestHandled != CurrentTime)\r\n                Handle();\r\n        }\r\n\r\n        private void Handle()\r\n        {\r\n            latestHandled = CurrentTime;\r\n            foreach (var h in handlers)\r\n            {\r\n                for (int i = Happs.Count - 1; i >= 0; i--)\r\n                {\r\n                    //this check assumes happs are ordered by time stamp\r\n                    //which they should be automatically\r\n                    if (Happs[i].TimeStamp != CurrentTime)\r\n                    {\r\n                        DebugEx.Log(\"Happening not equal to current time\");\r\n                        break;\r\n                    }\r\n                    bool hasTags = true;\r\n                    foreach (var tagsNeeded in h.necessaryTags)\r\n                    {\r\n                        if (!Happs[i].HasTag(tagsNeeded))\r\n                        {\r\n                            hasTags = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (hasTags)\r\n                    {\r\n                        DebugEx.Log(\"Happening handled\");\r\n                        h.Handle(Happs[i]);\r\n                    }\r\n                    else\r\n                    {\r\n                        DebugEx.Log(\"Happening tag is different\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        public Happ Add(Happ h)\r\n        {\r\n            h.TimeStamp = CurrentTime;\r\n            Happs.Add(h);\r\n            return h;\r\n        }\r\n\r\n        public void Tick()\r\n        {\r\n            CurrentTime++;\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    public class Happ\r\n    {\r\n        //public string MainTag;\r\n        public List<int> tags = new List<int>();\r\n        public int TimeStamp;\r\n        List<Attribute> attrs = new List<Attribute>();\r\n\r\n        //public Happ(IConvertible c)\r\n        //{\r\n        //    tags.Add(Convert.ToInt32(c));\r\n        //}\r\n\r\n        public Happ(object mainTag)\r\n        {\r\n            //MainTag = mainTag.ToString();\r\n            tags.Add(Convert.ToInt32(mainTag));\r\n        }\r\n\r\n        public class Attribute\r\n        {\r\n            public float Value { get; private set; }\r\n            public Attribute SetValue(float f)\r\n            {\r\n                Value = f;\r\n                return this;\r\n            }\r\n            public TagHolder tags = new TagHolder();\r\n        }\r\n\r\n        public Happ AddAttribute(Attribute a)\r\n        {\r\n            attrs.Add(a);\r\n            return this;\r\n        }\r\n\r\n        internal int GetAttribute_Int(int index)\r\n        {\r\n            return (int)attrs[index].Value;\r\n        }\r\n\r\n        internal bool HasTag(int tagsNeeded)\r\n        {\r\n            return tags.Contains(tagsNeeded);\r\n        }\r\n    }\r\n\r\n    public class HappHandler\r\n    {\r\n        public List<int> necessaryTags = new List<int>();\r\n        public Action<Happ> Handle;\r\n\r\n        public HappHandler(object mainTag, Action<Happ> handle)\r\n        {\r\n            this.necessaryTags.Add(Convert.ToInt32(mainTag));\r\n            Handle = handle;\r\n        }\r\n    }\r\n\r\n    public class TagHolder\r\n    {\r\n        public List<object> Tags { get; private set; }\r\n\r\n        public bool HasTag(object t)\r\n        {\r\n            return Tags.Contains(t);\r\n        }\r\n\r\n        internal void Add(object v)\r\n        {\r\n            Tags.Add(v);\r\n        }\r\n\n    \nprivate List<object> __Property__Initializer__Tags=new List<object>();}\r\n\r\n\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class InputHolder\r\n    {\r\n        public List<Input> inputs = new List<Input>();\r\n        List<InputTags> tags = new List<InputTags>();\r\n        public Input inputForConfirmation;\r\n\r\n        internal void Clear()\r\n        {\r\n            inputs.Clear();\r\n            tags.Clear();\r\n        }\r\n\r\n        internal void Add(Input input, InputTags tag)\r\n        {\r\n            inputs.Add(input);\r\n            tags.Add(tag);\r\n\r\n        }\r\n\r\n        internal bool TagIs(int i2, InputTags tag)\r\n        {\r\n            if (tags.Count <= i2) return false;\r\n            return tags[i2] == tag;\r\n        }\r\n\r\n        internal bool Contains(Input key)\r\n        {\r\n            foreach (var i in inputs)\r\n            {\r\n                if (i.arg1 == key.arg1 && i.type == key.type)\r\n                    return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public enum InputTags{\r\n        NONE, MOVEFIX, MOVEUNFIX, MISC\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ECS;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class MoveCreatorProg\r\n    {\r\n        internal List<MoveData> moveDatas = new List<MoveData>();\r\n        internal List<MoveMetaData> moveRenders = new List<MoveMetaData>();\r\n        AreaCreationUtils areaUtils = new AreaCreationUtils();\r\n        private readonly ECSManager ecs;\r\n\r\n        public MoveCreatorProg(ECSManager ecs)\r\n        {\r\n            this.ecs = ecs;\r\n            MoveData item = new MoveData(\"\");\r\n            moveDatas.Add(item); //do nothing\r\n            moveRenders.Add(new MoveMetaData(\"\", \"\", BattleMain.Element.None));\r\n            ecs.CreateEntityWithComponent(item);\r\n            BaseUtils.Vector2D[] directions = new BaseUtils.Vector2D[] {\r\n                \r\n                new BaseUtils.Vector2D(0, 1),\r\n                new BaseUtils.Vector2D(-1, 0),\r\n                new BaseUtils.Vector2D(0, -1),\r\n                new BaseUtils.Vector2D(1, 0), \r\n            };\r\n            string[] moveLabels = new string[] {\r\n                \"Move Up\",\r\n                \"Move Left\",\r\n                \"Move Down\",\r\n                \"Move Right\",\r\n            };\r\n            string[] moveAbrev = new string[] {\r\n                \"^\",\r\n                \"<\",\r\n                \"v\",\r\n                \">\",\r\n            };\r\n            for (int i = 0; i < directions.Length; i++)\r\n            {\r\n                NewMoveData(label:moveLabels[i], condition: new Condition(ConditionType.CanMove, Target.Self, directions[i]), action: new MoveAction(Target.Self, directions[i]), tags: TagArray(MoveDataTags.Movement,  MoveDataTags.HeroInitial));\r\n                NewMoveTextRenderData(name:moveLabels[i], abrev:moveAbrev[i]);\r\n            }\r\n            NewMoveData(\"Gun\", ticks: OneTickPerAction(new Animation(Target.ClosestTargetX), new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.None)), tags: TagArray(MoveDataTags.Shoot));\r\n            NewMoveTextRenderData(\"Gun\", \"G\");\r\n\r\n            \r\n            NewMoveData(\"Firegun\", ticks: OneTickPerAction(new Animation(Target.ClosestTargetX, BattleMain.Element.Fire), new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Fire)), tags: TagArray(MoveDataTags.Shoot));\r\n            NewMoveTextRenderData(\"Firegun\", \"FG\",  BattleMain.Element.Fire);\r\n\r\n            NewMoveData(\"Icegun\", ticks: OneTickPerAction(new Animation(Target.ClosestTargetX, BattleMain.Element.Ice), new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Ice)), tags: TagArray(MoveDataTags.Shoot));\r\n            NewMoveTextRenderData(\"Icegun\", \"IG\", BattleMain.Element.Ice);\r\n\r\n            NewMoveData(\"Thundergun\", ticks: OneTickPerAction(new Animation(Target.ClosestTargetX, BattleMain.Element.Thunder), new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Thunder)), tags: TagArray(MoveDataTags.Shoot));\r\n            NewMoveTextRenderData(\"Thundergun\", \"TG\", BattleMain.Element.Thunder);\r\n\r\n            Area area = AreaUser().RowForward(width: 1, XDis: 3);\r\n            NewMoveData(\"Icebomb\", ticks: OneTickPerAction(new Animation(area, BattleMain.Element.Ice), new DealDamageAction(area, 1, BattleMain.Element.Ice)), tags: TagArray(MoveDataTags.Bomb));\r\n            NewMoveTextRenderData(\"Icebomb\", \"IB\", BattleMain.Element.Ice);\r\n\r\n            NewMoveData(\"Thunderbomb\", ticks: OneTickPerAction(new Animation(area, BattleMain.Element.Thunder), new DealDamageAction(area, 1, BattleMain.Element.Thunder)), tags: TagArray(MoveDataTags.Bomb));\r\n            NewMoveTextRenderData(\"Thunderbomb\", \"TB\", BattleMain.Element.Thunder);\r\n\r\n            NewMoveData(\"Summon\", ticks: OneTickPerAction(SummonEntity.Enemy(0, new Vector2D(5,0))), tags: TagArray(MoveDataTags.Summon));\r\n            NewMoveTextRenderData(\"Summon\", \"SU\");\r\n\r\n            Vector2D directionMove = new Vector2D(0, -1);\r\n            NewMoveData(\"Downfire\",\r\n                ticks: TickArray(\r\n                    TickUnit(new Animation(Target.ClosestTargetX, BattleMain.Element.Fire)),\r\n\r\n                    TickUnit(new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Fire)),\r\n                    TickUnitCondition(\r\n                        new Condition(ConditionType.CanMove, Target.Self, directionMove),\r\n                        new MoveAction(Target.Self, directionMove)),\r\n                    TickUnit(new Animation(Target.ClosestTargetX, BattleMain.Element.Fire)),\r\n\r\n                    TickUnit(new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Fire))),\r\n                tags: TagArray(MoveDataTags.Shoot));\r\n            NewMoveTextRenderData(\"Downfire\", \"DF\", BattleMain.Element.Fire);\r\n\r\n            NewMoveData(\"TripleFire\", ticks:\r\n                TickArray(\r\n                    TickUnit(\r\n                        new Animation(Target.ClosestTargetX, BattleMain.Element.Fire, new Vector2D(0, -1)),\r\n                        new Animation(Target.ClosestTargetX, BattleMain.Element.Fire),\r\n                        new Animation(Target.ClosestTargetX, BattleMain.Element.Fire, new Vector2D(0, 1))\r\n                        ),\r\n                    TickUnit(\r\n\r\n                        new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Fire, new Vector2D(0, -1)),\r\n\r\n                        new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Fire),\r\n\r\n                        new DealDamageAction(Target.ClosestTargetX, 1, BattleMain.Element.Fire, new Vector2D(0, 1))\r\n                        )\r\n\r\n                    )\r\n                , tags: TagArray(MoveDataTags.Shoot));\r\n            NewMoveTextRenderData(\"TripleFire\", \"TF\", BattleMain.Element.Fire);\r\n\r\n\r\n        }\r\n\r\n        \r\n\r\n        internal int GetMoveId(string v)\r\n        {\r\n            return MoveData.FindByLabel(moveDatas, v);\r\n        }\r\n\r\n        private AreaCreationUtils AreaUser()\r\n        {\r\n            areaUtils.target = Target.Self;\r\n            return areaUtils;\r\n        }\r\n\r\n        public class AreaCreationUtils\r\n        {\r\n            public Target target;\r\n            int height = 3;\r\n\r\n            internal Area RowForward(int width, int XDis)\r\n            {\r\n                var ra = new Area(target);\r\n                int offsetY = (int)Math.Floor((float)height / 2f);\r\n                for (int i = 0; i < width; i++)\r\n                {\r\n                    for (int j = 0; j < height; j++)\r\n                    {\r\n                        \r\n                        ra.points.Add(new Vector2D(i+XDis, j-offsetY));\r\n                    }\r\n                }\r\n                return ra;\r\n            }\r\n        }\r\n\r\n\r\n        private void NewMoveTextRenderData(string name, string abrev, BattleMain.Element e = BattleMain.Element.None)\r\n        {\r\n            moveRenders.Add(new MoveMetaData(name, abrev, e));\r\n        }\r\n\r\n        private MoveData NewMoveData(string label, Tick[] ticks, object[] tags)\r\n        {\r\n            var mv = new MoveData(label);\r\n            mv.units.AddRange(ticks);\r\n            foreach (var item in tags)\r\n            {\r\n                mv.tags.Add(Convert.ToInt32(item));\r\n            }\r\n            ecs.CreateEntityWithComponent(mv);\r\n            moveDatas.Add(mv);\r\n            return mv;\r\n        }\r\n\r\n        private MoveData NewMoveData(string label, Condition condition, object action, object[] tags)\r\n        {\r\n            var mv = new MoveData(label);\r\n            Tick tick = new Tick();\r\n            tick.condition = condition;\r\n            tick.thingsToHappen.Add(action);\r\n            mv.units.Add(tick);\r\n            foreach (var item in tags)\r\n            {\r\n                mv.tags.Add(Convert.ToInt32(item));\r\n            }\r\n            ecs.CreateEntityWithComponent(mv);\r\n            moveDatas.Add(mv);\r\n            return mv;\r\n        }\r\n\r\n        private Tick[] OneTickPerAction(params object[] actions)\r\n        {\r\n            Tick[] ticks = new Tick[actions.Length];\r\n            for (int i = 0; i < ticks.Length; i++)\r\n            {\r\n                ticks[i] = new Tick(actions[i]);\r\n            }\r\n            return ticks;\r\n        }\r\n\r\n        private Tick TickUnitCondition(Condition condition, params Object[] actions)\r\n        {\r\n            Tick tick = new Tick(actions);\r\n            tick.condition = condition;\r\n            return tick;\r\n        }\r\n\r\n\r\n        private Tick TickUnit(params Object[] actions)\r\n        {\r\n            return new Tick(actions);\r\n        }\r\n\r\n        private Tick[] TickArray(params Tick[] ticks)\r\n        {\r\n            return ticks;\r\n        }\r\n\r\n        private object[] TagArray(params object[] args)\r\n        {\r\n            return args;\r\n        }\r\n    }\r\n\r\n    public class MoveMetaData\r\n    {\r\n        public string Label;\r\n        public string Abrev;\r\n        public readonly BattleMain.Element element;\r\n\r\n        public MoveMetaData(string label, string abrev, BattleMain.Element element)\r\n        {\r\n            Label = label;\r\n            Abrev = abrev;\r\n            this.element = element;\r\n        }\r\n\r\n        //public MoveMetaData(string label, string abrev)\r\n        //{\r\n        //    this.Label = label;\r\n        //    this.Abrev = abrev;\r\n        //}\r\n\r\n        public string Description { get; internal set; }\r\n    }\r\n\r\n\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class TrackBattle\r\n    {\r\n\r\n\r\n        internal TrackInfoStage stageInfo;\r\n\r\n        public StageBattleMetrics metrics = new StageBattleMetrics(true);\r\n\r\n        internal void HeroDamage(int damage)\r\n        {\r\n            if (damage > 0)\r\n            {\r\n                metrics.damage += damage;\r\n                metrics.damageTimes++;\r\n            }\r\n        }\r\n\r\n        internal void Preview()\r\n        {\r\n            metrics.previewTimes++;\r\n        }\r\n\r\n        internal void Round()\r\n        {\r\n            metrics.round++;\r\n        }\r\n\r\n        internal void BattleEndVictory()\r\n        {\r\n            metrics.rank = CalculateRank();\r\n\r\n        }\r\n\r\n        /*\r\n         * Rank formula\r\n         * Goes from 1 to 100, where 100 is S. Can go above S.\r\n         * good turns, no damage and no preview give you S\r\n         */\r\n\r\n        internal int CalculateRank()\r\n        {\r\n            int rank = 100;\r\n            int diff = stageInfo.targetRounds - metrics.round;\r\n            if (diff > 0)\r\n            {\r\n                rank += diff * (diff) * 3;\r\n            }\r\n            else\r\n            {\r\n                rank -= diff * (diff) * 3;\r\n            }\r\n\r\n            if (metrics.damageTimes > 3)\r\n            {\r\n                rank -= 10;\r\n            }\r\n            if (metrics.damageTimes > 0)\r\n            {\r\n                rank -= 10;\r\n            }\r\n            if (metrics.previewTimes > 1)\r\n            {\r\n                rank -= 5;\r\n            }\r\n            if (metrics.previewTimes > 3)\r\n            {\r\n                rank -= 5;\r\n            }\r\n            return rank;\r\n        }\r\n    }\r\n    public class StageBattleMetrics\r\n    {\r\n        public int damage = -1;\r\n        public int damageTimes = -1;\r\n        public int previewTimes = -1;\r\n        public int round = -1;\r\n        public int rank = -1;\r\n        \r\n\r\n        public StageBattleMetrics()\r\n        {\r\n           \r\n        }\r\n\r\n        public StageBattleMetrics(bool initValues)\r\n        {\r\n            this.damage = 0;\r\n            this.damageTimes = 0;\r\n            this.previewTimes = 0;\r\n            this.rank = 0;\r\n            this.round = 0;\r\n        }\r\n\r\n        internal void CopyValues(StageBattleMetrics metrics)\r\n        {\r\n            this.damage = metrics.damage;\r\n            this.damageTimes = metrics.damageTimes;\r\n            this.previewTimes = metrics.previewTimes;\r\n            this.round = metrics.round;\r\n            this.rank = metrics.rank;\r\n        }\r\n    }\r\n\r\n    public class StageProgressPersistence\r\n    {\r\n        public int stageId;\r\n        public StageBattleMetrics bestBattleMetrics = new StageBattleMetrics();\r\n        public bool available = false;\r\n\r\n        public StageProgressPersistence()\r\n        {\r\n        }\r\n\r\n        public StageProgressPersistence(int id)\r\n        {\r\n            stageId = id;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.ECS;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class StageToBattle\r\n    {\r\n        public Entity stageToUnlock;\r\n        internal Entity CurrentStage;\r\n\r\n        public void Victory()\r\n        {\r\n            if(stageToUnlock.Exist())\r\n                stageToUnlock.GetComponent<StageProgressPersistence>().available = true;\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ECS\r\n{\r\n\r\n    public class Accessor\r\n    {\r\n        public int Length { get { return SelectedEntities.Count; } }\r\n\r\n        internal Type[] TypesProhibited { get; set; }\r\n\r\n        internal Type[] TypesNecessary;\r\n        internal List<Entity> SelectedEntities = new List<Entity>();\r\n\r\n        public Accessor(params Type[] s)\r\n        {\r\n            TypesNecessary = s;\r\n        }\r\n\r\n        internal bool EntityAdded(Entity e)\r\n        {\r\n            return SelectedEntities.Contains(e);\r\n        }\r\n\r\n        public Entity Get(int i)\r\n        {\r\n            return SelectedEntities[i];\r\n        }\r\n    }\r\n\r\n    public class QuickAccessorOne<T1>\r\n    {\r\n\r\n        public QuickAccessorOne()\r\n        {\r\n            accessor = new Accessor(typeof(T1));\r\n        }\r\n\r\n        internal Accessor accessor;\r\n        public int Count { get { return accessor.Length; } }\r\n        \r\n\r\n        public T1 Comp1(int i)\r\n        {\r\n            return accessor.SelectedEntities[i].GetComponent<T1>();\r\n        }\r\n\r\n        public Entity Entity(int i)\r\n        {\r\n            return accessor.SelectedEntities[i];\r\n        }\r\n    }\r\n    public class QuickAccessorTwo<T1, T2> \r\n    {\r\n\r\n        internal Accessor accessor;\r\n        public int Length { get { return accessor.Length; } }\r\n\r\n        public T1 Comp1(int i)\r\n        {\r\n            return accessor.SelectedEntities[i].GetComponent<T1>();\r\n        }\r\n\r\n        public Entity Entity(int i)\r\n        {\r\n            return accessor.SelectedEntities[i];\r\n        }\r\n\r\n        public QuickAccessorTwo()\r\n        {\r\n            accessor = new Accessor(typeof(T1), typeof(T2));\r\n        }\r\n\r\n        \r\n\r\n        public T2 Comp2(int i)\r\n        {\r\n            return accessor.SelectedEntities[i].GetComponent<T2>();\r\n        }\r\n\r\n        \r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ECS\r\n{\r\n    public class ClonedState\r\n    {\r\n        internal Dictionary<Type, object[]> comps = new Dictionary<Type, object[]>();\r\n    }\r\n\r\n\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ECS\r\n{\r\n    public class ECSManager\r\n    {\r\n\r\n        private static ECSManager[] managers = new ECSManager[2000];\r\n        Dictionary<Type, object[]> comps = new Dictionary<Type, object[]>();\r\n        private int ECSId;\r\n        int entityIdMax = -1;\r\n        List<Accessor> accessors = new List<Accessor>();\r\n\r\n        Dictionary<Type, Action<Object, Object>> CopyMethods = new Dictionary<Type, Action<object, object>>();\r\n\r\n        private ECSManager() { }\r\n\r\n        public ProcessorAccessor CreateProcessor(Accessor accessor, Action<Accessor> action)\r\n        {\r\n\r\n            return new ProcessorAccessor(action, accessor);\r\n        }\r\n\r\n        public void AddCopyMethod(Type type, Action<object, object> copyMetho)\r\n        {\r\n            CopyMethods.Add(type, (global::System.Action<object, object>)copyMetho);\r\n        }\r\n\r\n        public Accessor CreateAccessor(Type[] necessary, Type[] not)\r\n        {\r\n            var acc = new Accessor(necessary);\r\n            acc.TypesProhibited = not;\r\n            AddAccessor(acc);\r\n            return acc;\r\n\r\n        }\r\n\r\n        public QuickAccessorTwo<T1, T2> QuickAccessor2<T1, T2>()\r\n        {\r\n            QuickAccessorTwo<T1, T2> accessor = new QuickAccessorTwo<T1, T2>();\r\n            AddAccessor(accessor.accessor);\r\n            return accessor;\r\n        }\r\n\r\n        public QuickAccessorOne<T1> QuickAccessor1<T1>()\r\n        {\r\n            QuickAccessorOne<T1> accessor = new QuickAccessorOne<T1>();\r\n            AddAccessor(accessor.accessor);\r\n            return accessor;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        #region static methods\r\n\r\n\r\n        internal static ECSManager GetInstance(Entity e)\r\n        {\r\n            return managers[e.ecs];\r\n        }\r\n\r\n        public static ECSManager Create()\r\n        {\r\n\r\n            for (int i = 0; i < managers.Length; i++)\r\n            {\r\n                if (managers[i] == null)\r\n                {\r\n                    managers[i] = new ECSManager();\r\n                    managers[i].ECSId = i;\r\n                    return managers[i];\r\n                }\r\n\r\n            }\r\n            return null;\r\n        }\r\n\r\n\r\n        #endregion\r\n\r\n        public Entity CreateEntityWithComponent(object v)\r\n        {\r\nEntity e;\n            CreateEntity(out e);\r\n            AddComponent(e, v);\r\n            return e;\r\n        }\r\n\r\n        public Entity CreateEntityWithComponent(object v, object v2)\r\n        {\r\nEntity e;\n            CreateEntity(out e);\r\n            AddComponent(e, v);\r\n            AddComponent(e, v2);\r\n            return e;\r\n        }\r\n\r\n        public void DeleteAllEntitiesThatDoNotHave(Type[] componentTypes)\r\n        {\r\n            var acs = new Accessor();\r\n\r\n        }\r\n\r\n        public Entity CreateEntity(out Entity e)\r\n        {\r\n            entityIdMax++;\r\n            Entity entity = new Entity(this.ECSId, entityIdMax);\r\n            e = entity;\r\n            return entity;\r\n        }\r\n\r\n        public Entity CreateEntity()\r\n        {\r\n            entityIdMax++;\r\n            Entity entity = new Entity(this.ECSId, entityIdMax);\r\n            return entity;\r\n        }\r\n\r\n\r\n        public ProcessorFlex<T1, T2> QuickProcessorFlex<T1, T2>(Action<QuickAccessorTwo<T1, T2>> p)\r\n        {\r\n            ProcessorFlex<T1, T2> processorFlex = new ProcessorFlex<T1, T2>(p);\r\n            QuickAccessorTwo<T1, T2> accessor = processorFlex.accessor;\r\n            Accessor accessor1 = accessor.accessor;\r\n            AddAccessor(accessor1);\r\n            return processorFlex;\r\n        }\r\n\r\n        private void AddAccessor(Accessor accessor1)\r\n        {\r\n            accessors.Add(accessor1);\r\n            for (int i = 0; i <= entityIdMax; i++)\r\n            {\r\n                UpdateAccessorEntity(accessor1, i);\r\n            }\r\n\r\n        }\r\n\r\n        private void UpdateAccessorEntity(Accessor accessor, int entityId)\r\n        {\r\n            Entity entity = new Entity(ECSId, entityId);\r\n            bool belong = HasAllComps(accessor.TypesNecessary, entityId) && HasNoneOfTheseComps(accessor.TypesProhibited, entityId);\r\n            bool member = accessor.EntityAdded(entity);\r\n\r\n            if (belong != member)\r\n            {\r\n                if (belong)\r\n                {\r\n                    accessor.SelectedEntities.Add(entity);\r\n                }\r\n                else\r\n                {\r\n                    //Console.WriteLine(\"REMOVED ENTITY \"+accessor.TypesNecessary[0]);\r\n                    accessor.SelectedEntities.Remove(entity);\r\n                    //Console.WriteLine(accessor.EntityAdded(entity)+\" BELONG\");\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        public void CloneState(ClonedState cs)\r\n        {\r\n            var comps = this.comps;\r\n            Dictionary<Type, object[]> comps2 = cs.comps;\r\n            Copy(comps, comps2);\r\n        }\r\n\r\n        public void RestoreState(ClonedState cs)\r\n        {\r\n            var comps = this.comps;\r\n            Dictionary<Type, object[]> comps2 = cs.comps;\r\n            Copy(comps2, comps);\r\n\r\n            for (int i = 0; i <=\r\n\r\n\r\n                entityIdMax; i++)\r\n            {\r\n                foreach (var item in accessors)\r\n                {\r\n                    UpdateAccessorEntity(item, i);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        List<Type> aux = new List<Type>();\r\n\r\n        private void Copy(Dictionary<Type, object[]> from, Dictionary<Type, object[]> to)\r\n        {\r\n            aux.Clear();\r\n\r\n            foreach (var c in from)\r\n            {\r\n                Type type = c.Key;\r\n\r\n                //UNCOMMENT THIS TO CHECK FOR PARAMETERLESS CONSTRUCTORS\r\n                //if (type.GetConstructor(Type.EmptyTypes) == null)\r\n                //{\r\n                //    Console.WriteLine(\"NO PARAMETERLESS \" + type);\r\n                //}\r\n\r\n\r\n                aux.Add(type);\r\n                if (!to.ContainsKey(type))\r\n                {\r\n                    to.Add(type, new object[300]);\r\n                }\r\n                var toArray = to[type];\r\n                var origin = c.Value;\r\n                Copy(to, type, toArray, origin);\r\n            }\r\n            foreach (var c in to) //checks types in to, so it can be through\r\n            {\r\n                Type type = c.Key;\r\n                if (!aux.Contains(type))\r\n                {\r\n                    aux.Add(type);\r\n                    var toArray = c.Value; //access inverted when compared to previous\r\n                    //var origin = from[type];\r\n                    for (int i = 0; i < toArray.Length; i++)\r\n                    {\r\n                        toArray[i] = null;\r\n                        //Console.WriteLine(\"Removing entity\");\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        private void Copy(Dictionary<Type, object[]> to, Type type, object[] toArray, object[] origin)\r\n        {\r\n            Action<Object, Object> copyMethod = null;\r\n            CopyMethods.TryGetValue(type, out copyMethod);\r\n\r\n            for (int i = 0; i < origin.Length; i++)\r\n            {\r\n                if (origin[i] == null)\r\n                {\r\n                    if (toArray[i] != null)\r\n                    {\r\n                        //Console.WriteLine(\"Removing entity\");\r\n                        toArray[i] = null;\r\n                    }\r\n\r\n                }\r\n                else\r\n                {\r\n                    //Console.WriteLine(type);\r\n                    if (toArray[i] == null)\r\n                        toArray[i] = Activator.CreateInstance(type);\r\n                    if (copyMethod != null)\r\n                        copyMethod(origin[i], toArray[i]);\r\n\r\n                    //DeepCloneHelper.DeepCopyPartial(origin[i], toArray[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        internal T AddComponent<T>(Entity e) where T : new()\r\n        {\r\n            T t = new T();\r\n            AddComponent(e, t);\r\n\r\n            return t;\r\n        }\r\n\r\n        public void AddComponent(Entity e, object t)\r\n        {\r\n            Type type = t.GetType();\r\n            if (!comps.ContainsKey(type))\r\n            {\r\n                comps.Add(type, new object[300]);\r\n            }\r\n            comps[type][e.id] = t;\r\n            foreach (var item in accessors)\r\n            {\r\n                UpdateAccessorEntity(item, e.id);\r\n\r\n            }\r\n        }\r\n\r\n        public void RemoveComponent(Entity e, object t)\r\n        {\r\n            Type type = t.GetType();\r\n            if (!comps.ContainsKey(type))\r\n            {\r\n                comps.Add(type, new object[300]);\r\n            }\r\n            comps[type][e.id] = null;\r\n            foreach (var item in accessors)\r\n            {\r\n                UpdateAccessorEntity(item, e.id);\r\n\r\n            }\r\n        }\r\n\r\n        private bool HasAllComponents(Entity e, Type[] typesNecessary)\r\n        {\r\n            int id = e.id;\r\n            return HasAllComps(typesNecessary, id);\r\n        }\r\n\r\n        private bool HasAllComps(Type[] typesNecessary, int id)\r\n        {\r\n            foreach (var type in typesNecessary)\r\n            {\r\n                if (!comps.ContainsKey(type))\r\n                {\r\n                    return false;\r\n                }\r\n\r\n                if (comps[type][id] == null)\r\n                    return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\n        private bool HasNoneOfTheseComps(Type[] typesProhibited, int id)\r\n        {\r\n            if (typesProhibited == null) return true;\r\n            foreach (var type in typesProhibited)\r\n            {\r\n                if (comps.ContainsKey(type))\r\n                {\r\n                    if (comps[type][id] != null)\r\n                        return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        internal T GetComponent<T>(Entity e)\r\n        {\r\n            Type type = typeof(T);\r\n            if (!comps.ContainsKey(type))\r\n            {\r\n                //comps.Add(type, new object[300]);\r\n                return default(T);\r\n            }\r\n            return (T)comps[type][e.id];\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ECS\r\n{\r\n    public struct Entity : IEquatable<Entity>\r\n    {\r\n        public static Entity None = new Entity(-1,-1);\r\n        readonly internal int ecs;\r\n        readonly internal int id;\r\n\r\n        public Entity(int ecs, int id)\r\n        {\r\n            this.ecs = ecs;\r\n            this.id = id;\r\n        }\r\n\r\n        public bool Exist()\r\n        {\r\n            return id != -1;\r\n        }\r\n\r\n        public bool Equals(Entity other)\r\n        {\r\n            return other.id == this.id && other.ecs == this.ecs;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public static class ExtensionMethods\r\n    {\r\n\r\n        public static void RemoveComponent(this Entity e, object comp)\r\n        {\r\n            ECSManager.GetInstance(e).RemoveComponent(e, comp);\r\n        }\r\n\r\n        public static T AddComponent<T>(this Entity e) where T: new()\r\n        {\r\n            return ECSManager.GetInstance(e).AddComponent<T>(e);\r\n        }\r\n        public static void AddComponent(this Entity e, object comp)\r\n        {\r\n            ECSManager.GetInstance(e).AddComponent(e, comp);\r\n        }\r\n        public static T GetComponent<T>(this Entity e)\r\n        {\r\n            return ECSManager.GetInstance(e).GetComponent<T>(e);\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ECS\r\n{\r\n    public class ProcessorFlex<T1, T2>\r\n    {\r\n        private Action<QuickAccessorTwo<T1, T2>> p;\r\n        internal QuickAccessorTwo<T1, T2> accessor;\r\n\r\n        public ProcessorFlex(Action<QuickAccessorTwo<T1, T2>> p)\r\n        {\r\n            this.p = p;\r\n            accessor = new QuickAccessorTwo<T1, T2>();\r\n        }\r\n\r\n        public void Run()\r\n        {\r\n            p(accessor);\r\n        }\r\n    }\r\n\r\n    public class ProcessorAccessor\r\n    {\r\n        private Action<Accessor> p;\r\n\r\n        Accessor a;\r\n\r\n        public ProcessorAccessor(Action<Accessor> p, Accessor a)\r\n        {\r\n            this.p = p;\r\n            this.a = a;\r\n        }\r\n\r\n        public void Run()\r\n        {\r\n            p(a);\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering\r\n{\r\n    public class TextWorld\r\n    {\r\n        public Palette palette = DefaultPalettes.C4KiroKaze;\r\n        List<TextEntity> activeAgents = new List<TextEntity>();\r\n        List<TextEntity> freeBoards = new List<TextEntity>();\r\n        List<TextAnimation> animations = new List<TextAnimation>();\r\n        public TextBoard mainBoard;\r\n        int latestId = -1;\r\n\r\n        public T AddAnimation<T>(T ta) where T : TextAnimation\r\n        {\r\n            animations.Add(ta);\r\n            ta.RegisterLists();\r\n            return ta;\r\n        }\r\n\r\n        public void Init(int width, int height)\r\n        {\r\n            mainBoard = new TextBoard(width, height);\r\n\r\n        }\r\n\r\n        public void Draw()\r\n        {\r\n            mainBoard.Reset();\r\n            DrawChildren();\r\n        }\r\n\r\n        public void DrawChildren()\r\n        {\r\n            for (int i = 0; i < activeAgents.Count; i++)\r\n            {\r\n                activeAgents[i].ResetAnimation();\r\n                foreach (var anim in animations)\r\n                {\r\n                    anim.Modify(activeAgents[i]);\r\n                }\r\n                if (activeAgents[i].freeIfIdle && !activeAgents[i].animating)\r\n                {\r\n                    freeBoards.Add(activeAgents[i]);\r\n                    activeAgents.Remove(activeAgents[i]);\r\n                    i--;\r\n                }\r\n                else\r\n                {\r\n                    mainBoard.Insert(activeAgents[i].Animation);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        public TextEntity GetFreeEntity(int w, int h)\r\n        {\r\n            TextEntity te;\r\n            if (freeBoards.Count > 0)\r\n            {\r\n                te = freeBoards[freeBoards.Count - 1];\r\n                freeBoards.RemoveAt(freeBoards.Count - 1);\r\n            }\r\n            else\r\n            {\r\n                te = new TextEntity();\r\n                te.id = ++latestId;\r\n\r\n            }\r\n\r\n            activeAgents.Add(te);\r\n            te.freeIfIdle = false;\r\n            te.SetSize(w, h);\r\n            te.ResetFull();\r\n            return te;\r\n        }\r\n\r\n        public TextEntity GetTempEntity(int w, int h)\r\n        {\r\n            var te = GetFreeEntity(w, h);\r\n            te.freeIfIdle = true;\r\n            return te;\r\n        }\r\n\r\n        public void AdvanceTime(float v)\r\n        {\r\n            foreach (var anim in animations)\r\n            {\r\n                anim.Update(v);\r\n            }\r\n        }\r\n\r\n        public void TryEndAnimations()\r\n        {\r\n            foreach (var anim in animations)\r\n            {\r\n                anim.TryEnd();\r\n            }\r\n        }\r\n\r\n        internal void Free(List<TextEntity> entities)\r\n        {\r\n            \r\n            freeBoards.AddRange(entities);\r\n            foreach (var item in entities)\r\n            {\r\n                activeAgents.Remove(item);\r\n            }\r\n        }\r\n\r\n        public bool IsDone()\r\n        {\r\n            foreach (var anim in animations)\r\n            {\r\n                if (!anim.IsDone()) return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public class TextEntity\r\n    {\r\n        public int id;\r\n        public TextBoard Origin;\r\n        public TextBoard Animation;\r\n        public bool freeIfIdle = false;\r\n        internal bool animating;\r\n\r\n        public int Height { get { return Origin.Height; } }\r\n        public int Width { get { return Origin.Width; } }\r\n\r\n        public TextAnimation.BaseData AnimBase(float length)\r\n        {\r\n            return new TextAnimation.BaseData(length, 0, id);\r\n        }\r\n\r\n        internal Vector2D GetPosition()\r\n        {\r\n            return Origin.Position;\r\n        }\r\n\r\n        internal void ResetAnimation()\r\n        {\r\n            animating = false;\r\n            Animation.Set(Origin);\r\n        }\r\n\r\n        internal void ResetFull()\r\n        {\r\n            Origin.ResetInvisible();\r\n        }\r\n\r\n        internal void SetPosition(int x, int y)\r\n        {\r\n            Origin.Position = new Vector2D(x,y);\r\n        }\r\n\r\n        internal void SetPosition(Vector2D vector2D)\r\n        {\r\n            Origin.Position = vector2D;\r\n        }\r\n\r\n        internal void SetPosition(Point2D point)\r\n        {\r\n            Origin.Position = new Vector2D(point.X, point.Y);\r\n        }\r\n\r\n        internal void SetSize(int w, int h)\r\n        {\r\n            if (Origin == null)\r\n            {\r\n                Origin = new TextBoard(w, h);\r\n                Animation = new TextBoard(w, h);\r\n            }\r\n            Origin.Resize(w, h);\r\n            Animation.Resize(w, h);\r\n\r\n        }\r\n    }\r\n\r\n    public class DelaysAnimation : TextAnimation\r\n    {\r\n        protected override void RequestRegisterLists()\r\n        {\r\n            \r\n        }\r\n\r\n        internal void Delay(float v)\r\n        {\r\n            Add(new BaseData(v, 0, -1));\r\n        }\r\n    }\r\n\r\n\r\n    public class PositionAnimation : TextAnimation<PositionAnimation.PositionData>\r\n    {\r\n\r\n        public override void Modify(TextEntity entity, PositionData mainData, float progress, float length)\r\n        {\r\n            base.Modify(entity, mainData, progress, length);\r\n            TextBoard target = entity.Animation;\r\n            if (mainData.permanent)\r\n                target = entity.Origin;\r\n            target.Position = Vector2D.InterpolateRounded(mainData.startPosition, mainData.endPosition, progress / length);\r\n\r\n        }\r\n\r\n        public struct PositionData\r\n        {\r\n            public readonly bool permanent;\r\n            public readonly Vector2D startPosition, endPosition;\r\n\r\n            public PositionData(Vector2D startPosition, Vector2D endPosition, bool perm = false)\r\n            {\r\n                this.startPosition = startPosition;\r\n                this.endPosition = endPosition;\r\n                this.permanent = perm;\r\n            }\r\n        }\r\n    }\r\n\r\n    public abstract class TextAnimation<T> : TextAnimation\r\n    {\r\n        protected List<T> mainData = new List<T>();\r\n        protected override void RequestRegisterLists()\r\n        {\r\n            base.RegisterList(mainData);\r\n        }\r\n\r\n        public void Add(BaseData baseData, T mainD)\r\n        {\r\n            base.Add(baseData);\r\n            mainData.Add(mainD);\r\n        }\r\n\r\n        public override void Modify(TextEntity entity, int index, float progress, float length)\r\n        {\r\n            Modify(entity, mainData[index], progress, length);\r\n        }\r\n\r\n        public virtual void Modify(TextEntity entity, T mainData, float progress, float length)\r\n        {\r\n        }\r\n\r\n        //internal override void Execute(int index, BaseData baseData)\r\n        //{\r\n        //    this.Execute(mainData[index], baseData);\r\n        //}\r\n\r\n        //public abstract void Execute(T mainData, BaseData baseData);\r\n    }\r\n\r\n    public abstract class TextAnimation\r\n    {\r\n\r\n        public struct BaseData\r\n        {\r\n            public readonly float length;\r\n            public readonly float progress;\r\n            public readonly int target;\r\n\r\n            public BaseData(float length, float progress, int target)\r\n            {\r\n                this.length = length;\r\n                this.progress = progress;\r\n                this.target = target;\r\n            }\r\n        }\r\n        List<float> length = new List<float>();\r\n        List<float> progress = new List<float>();\r\n        List<int> targets = new List<int>();\r\n        List<IList> lists = new List<IList>();\r\n\r\n        public void RegisterLists()\r\n        {\r\n            lists.Add(length);\r\n            lists.Add(progress);\r\n            lists.Add(targets);\r\n            RequestRegisterLists();\r\n        }\r\n\r\n        protected abstract void RequestRegisterLists();\r\n\r\n        public void Update(float delta)\r\n        {\r\n            for (int i = 0; i < progress.Count; i++)\r\n            {\r\n                progress[i] += delta;\r\n                if (progress[i] >= length[i])\r\n                {\r\n                    progress[i] = length[i];\r\n                }\r\n                else\r\n                {\r\n                    //Execute(i, new BaseData(length[i],progress[i], targets[i]));\r\n                }\r\n            }\r\n        }\r\n\r\n        //internal abstract void Execute(int index, BaseData baseData);\r\n\r\n        internal void Add(BaseData bd)\r\n        {\r\n            progress.Add(bd.progress);\r\n            targets.Add(bd.target);\r\n            length.Add(bd.length);\r\n        }\r\n\r\n        public bool IsDone()\r\n        {\r\n            foreach (var item in lists)\r\n            {\r\n                if (item.Count != progress.Count)\r\n                {\r\n                    string s = null;\r\n                    s.Trim();\r\n                }\r\n            }\r\n            return progress.Count == 0;\r\n        }\r\n\r\n        internal void EndTask(int i)\r\n        {\r\n            foreach (var l in lists)\r\n            {\r\n\r\n                l.RemoveAt(i);\r\n            }\r\n        }\r\n\r\n        internal void RegisterList(IList mainData)\r\n        {\r\n            lists.Add(mainData);\r\n        }\r\n\r\n        internal void Modify(TextEntity a)\r\n        {\r\n            for (int i = 0; i < progress.Count; i++)\r\n            {\r\n                if (a.id == targets[i])\r\n                {\r\n                    Modify(a, i, progress[i], length[i]);\r\n                    a.animating = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        public virtual void Modify(TextEntity entity, int index, float progress, float length)\r\n        {\r\n        }\r\n\r\n        internal void TryEnd()\r\n        {\r\n            for (int i = 0; i < progress.Count; i++)\r\n            {\r\n                if (progress[i] >= length[i])\r\n                {\r\n                    EndTask(i);\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering\r\n{\r\n    public class Palette\r\n    {\r\n        public string[] HtmlColors;\r\n\r\n\r\n        public Palette(params string[] colors)\r\n        {\r\n            HtmlColors = colors;\r\n        }\r\n    }\r\n\r\n    public class DefaultPalettes\r\n    {\r\n        public static Palette C4KiroKaze = new Palette(\"#332c50\", \"#46878f\", \"#94e344\", \"#e2f3e4\");\r\n        public static Palette C4Reader = new Palette(\"#262626\", \"#8b8cba\", \"#8bba91\", \"#649f8d\");\r\n        public static Palette C4Novel = new Palette(\"#262626\", \"#342d41\", \"#b8b8b8\", \"#8b8cba\");\r\n        public const int C4Black = 0;\r\n        public const int C4BlackNeutral = 1;\r\n        public const int C4WhiteNeutral = 2;\r\n        public const int C4White = 3;\r\n\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering.GameScreen\r\n{\r\n    public class KeyboardIO\r\n    {\r\n        public List<int> downUnicodes = new List<int>();\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering.GameScreen\r\n{\r\n    public struct MouseHover\r\n    {\r\n        public Rect rect;\r\n        public int type;\r\n        public int id;\r\n\r\n        public MouseHover(Rect rect, int type, int id)\r\n        {\r\n            this.rect = rect;\r\n            this.type = type;\r\n            this.id = id;\r\n        }\r\n    }\r\n\r\n    public class MouseHoverManager\r\n    {\r\n        public List<MouseHover> mouseHovers = new List<MouseHover>();\r\n        public List<MouseHover> mouseHoversActive = new List<MouseHover>();\r\n        public List<MouseHover> mouseHoversClickDown = new List<MouseHover>();\r\n        public MouseIO mouseIO;\r\n\r\n        public MouseHoverManager(MouseIO mouseIO)\r\n        {\r\n            this.mouseIO = mouseIO;\r\n        }\r\n\r\n        public void Update()\r\n        {\r\n            mouseHoversActive.Clear();\r\n            mouseHoversClickDown.Clear();\r\n            foreach (var item in mouseHovers)\r\n            {\r\n                if (item.rect.Contains(mouseIO.pos))\r\n                {\r\n                    mouseHoversActive.Add(item);\r\n                    if (mouseIO.mouseClickHappen)\r\n                    {\r\n                        mouseHoversClickDown.Add(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering.GameScreen\r\n{\r\n    public class UnicodeRemap\r\n    {\r\n\r\n        Dictionary<int, int> remaps = new Dictionary<int, int>();\r\n\r\n        public UnicodeRemap()\r\n        {\r\n            remaps.Add(Unicode.keyUp, 'w');\r\n            remaps.Add(Unicode.keyDown, 's');\r\n            remaps.Add(Unicode.keyLeft, 'a');\r\n            remaps.Add(Unicode.keyRight, 'd');\r\n\r\n            remaps.Add(Unicode.Enter, Unicode.Space);\r\n\r\n            remaps.Add('i', '1');\r\n\r\n        }\r\n\r\n        public int Remap(int unicode)\r\n        {\r\n            int result;\r\n            if (remaps.TryGetValue(unicode, out result))\r\n            {\r\n                return result;\r\n            }\r\n            return unicode;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering\r\n{\r\n    public class TextBoard\r\n    {\r\n        public const char NOCHANGECHAR = (char)1;\r\n        public const char INVISIBLECHAR = (char)2;\r\n        public const int NOCHANGECOLOR = -2;\r\n        public const int INVISIBLECOLOR = -1;\r\n        char[,] chars;\r\n        public int[,] TextColor { get; private set; }\r\n        public int[,] BackColor { get; private set; }\r\n        //StringBuilder stringBuilder = new StringBuilder();\r\n        int cursorX = 0;\r\n        int cursorY = 0;\r\n        public Vector2D Position { get; set; }\r\n\r\n\r\n        public TextBoard(int width, int height)\r\n        {\r\n            //SetMaxSize(width, height);\r\n            Resize(width, height);\r\n        }\r\n\r\n        public void DrawOnCenter(string message, int color, int xOff = 0, int yOff = 0, bool alignString = true)\r\n        {\r\n            int x = (Width) / 2;\r\n            if (alignString) x -= message.Length / 2;\r\n            int y = Height / 2;\r\n            Draw(message, x + xOff, y + yOff, color);\r\n        }\r\n\r\n        public void DrawOnCenterHorizontal(string message, int color, int xOff = 0, int y = 0, bool alignString = true)\r\n        {\r\n            int x = (Width) / 2;\r\n            if (alignString) x -= message.Length / 2;\r\n            Draw(message, x + xOff, y, color);\r\n        }\r\n\r\n\r\n        private void SetMaxSize(int width, int height)\r\n        {\r\n            chars = new char[width, height];\r\n            TextColor = new int[width, height];\r\n            BackColor = new int[width, height];\r\n        }\r\n\r\n        public void Reset()\r\n        {\r\n            DrawRepeated(' ', 0, 0, Width, Height, 0, 0);\r\n        }\r\n\r\n        public void ResetInvisible()\r\n        {\r\n            DrawRepeated(INVISIBLECHAR, 0, 0, Width, Height, INVISIBLECOLOR, INVISIBLECOLOR);\r\n        }\r\n\r\n\r\n        public int Width { get; private set; }\r\n\r\n        public void Insert(TextBoard secondBoard)\r\n        {\r\n            for (int i = 0; i < secondBoard.Width; i++)\r\n            {\r\n                for (int j = 0; j < secondBoard.Height; j++)\r\n                {\r\n                    int x = (int)secondBoard.Position.X + i;\r\n                    int y = (int)secondBoard.Position.Y + j;\r\n                    if (x < 0 || y < 0) continue;\r\n                    if (x >= Width || y >= Height) continue;\r\n                    if (secondBoard.chars[i, j] != INVISIBLECHAR)\r\n                        chars[x, y] = secondBoard.chars[i, j];\r\n                    if (secondBoard.TextColor[i, j] != INVISIBLECOLOR)\r\n                        TextColor[x, y] = secondBoard.TextColor[i, j];\r\n                    if (secondBoard.BackColor[i, j] != INVISIBLECOLOR)\r\n                        BackColor[x, y] = secondBoard.BackColor[i, j];\r\n                }\r\n            }\r\n        }\r\n\r\n        internal void DrawHorizontalLine(char c, int y, int color)\r\n        {\r\n            DrawRepeated(c, 0, y, Width, 1, color);\r\n        }\r\n\r\n        internal void DrawRect(char c, int x, int y, int w, int h, int textColor, int backColor)\r\n        {\r\n            DrawRepeated(c, x,      y,   1, h, textColor, backColor);\r\n            DrawRepeated(c, x+w-1,  y,   1, h, textColor, backColor);\r\n            DrawRepeated(c, x,      y,   w, 1, textColor, backColor);\r\n            DrawRepeated(c, x,      y+h-1, w, 1, textColor, backColor);\r\n        }\r\n\r\n        public int Height { get; private set; }\r\n        public int CursorX\r\n        {\r\n            get { return cursorX; }\r\n            set\r\n            {\r\n                cursorX = value;\r\n            }\r\n        }\r\n        public int CursorY { get { return cursorY; }\r\n            set\r\n            {\r\n                cursorY = value;\r\n            }\r\n        }\r\n\r\n        public void DrawOneDigit(int i, int x, int y, int color = NOCHANGECOLOR, int background = NOCHANGECOLOR)\r\n        {\r\n            char c = (char)(i + '0');\r\n            DrawChar(c, x, y, color, background);\r\n        }\r\n\r\n        public void DrawTwoDigits(int i, int x, int y, int color = NOCHANGECOLOR, int background = NOCHANGECOLOR)\r\n        {\r\n            DrawOneDigit(i/10,x,y,color,background);\r\n            DrawOneDigit(i %10, x+1, y, color, background);\r\n        }\r\n\r\n        internal bool SameAs(TextBoard textBoard, int x, int y)\r\n        {\r\n            return this.chars[x, y] == textBoard.chars[x, y]\r\n                && this.BackColor[x,y] == textBoard.BackColor[x,y]\r\n                && this.TextColor[x,y] == textBoard.TextColor[x,y];\r\n        }\r\n\r\n        internal void Copy(TextBoard textBoard, int x, int y)\r\n        {\r\n            this.chars[x, y] = textBoard.chars[x, y];\r\n            this.TextColor[x, y] = textBoard.TextColor[x, y];\r\n            this.BackColor[x, y] = textBoard.BackColor[x, y];\r\n        }\r\n\r\n        internal void Draw_Cursor_UnicodeLabel(int v, int color)\r\n        {\r\n            int len = DrawUnicodeLabel(v, cursorX, cursorY, color);\r\n            for (int i = 0; i < len; i++)\r\n            {\r\n                AdvanceCursor();\r\n            }\r\n            \r\n        }\r\n\r\n        internal int DrawUnicodeLabel(int unicode, int x, int y, int color)\r\n        {\r\n            if (unicode >= 'a' && unicode <= 'z') {\r\n                DrawChar((char)(unicode + 'A' - 'a'), x, y, color);\r\n                return 1;\r\n            }\r\n            if (unicode >= '0' && unicode <= '9')\r\n            {\r\n                DrawChar((char)(unicode), x, y, color);\r\n                return 1;\r\n            }\r\n            string label = \"\";\r\n            if (unicode == 32)\r\n            {\r\n                label = \"SPACE\";\r\n            }\r\n            if (unicode == Unicode.Escape)\r\n            {\r\n                label = \"ESCAPE\";\r\n            }\r\n            Draw(label, x, y, color);\r\n            return label.Length;\r\n        }\r\n\r\n        internal void Set(TextBoard origin)\r\n        {\r\n            this.Position = origin.Position;\r\n            for (int i = 0; i < Width; i++)\r\n            {\r\n                for (int j = 0; j < Height; j++)\r\n                {\r\n                    this.chars[i, j] = origin.chars[i, j];\r\n                    this.BackColor[i, j] = origin.BackColor[i, j];\r\n                    this.TextColor[i, j] = origin.TextColor[i, j];\r\n                }\r\n            }\r\n        }\r\n\r\n        internal void Resize(int w, int h)\r\n        {\r\n            if (chars == null || w > chars.GetLength(0) || h > chars.GetLength(1))\r\n            {\r\n                SetMaxSize(w, h);\r\n            }\r\n            Width = w;\r\n            Height = h;\r\n\r\n        }\r\n\r\n        public char CharAt(int i, int j)\r\n        {\r\n            return chars[i, j];\r\n        }\r\n\r\n        public void SetCursorAt(int x, int y)\r\n        {\r\n            cursorX = x;\r\n            cursorY = y;\r\n        }\r\n\r\n        public void Draw_Cursor(string v)\r\n        {\r\n            foreach (var c in v)\r\n            {\r\n                Draw_Cursor(c);\r\n            }\r\n        }\r\n\r\n        public void Draw_Cursor(string v, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n            foreach (var c in v)\r\n            {\r\n                Draw_Cursor(c, color, backColor);\r\n            }\r\n        }\r\n\r\n        internal bool CanDraw_Cursor_SmartLineBreak(string v)\r\n        {\r\n            int currentX = cursorX;\r\n            int currentY = cursorY;\r\n\r\n            for (int i = 0; i < v.Length; i++)\r\n            {\r\n                bool lineBreak = false;\r\n                bool shouldCheckForLineBreaks = (i == 0 || v[i] == ' ') && i != v.Length - 1;\r\n                if (shouldCheckForLineBreaks)\r\n                {\r\n                    for (int j = 1; j < v.Length - i; j++)\r\n                    {\r\n                        if (j + currentX >= Width) //reach end of the line without ending the word, should line break\r\n                        {\r\n                            if (v[i] == ' ')\r\n                            {\r\n                                i++; //skip through the space if it's a new line\r\n                            }\r\n                            lineBreak = true;\r\n                            break;\r\n                        }\r\n                        if (v[i + j] == ' ') //new word begins so no need to line break\r\n                        {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (lineBreak)\r\n                {\r\n                    currentY++;\r\n                    currentX = 0;\r\n                }\r\n                currentX++;\r\n                if (currentX >= Width)\r\n                {\r\n                    currentY++;\r\n                    currentX = 0;\r\n                }\r\n                if (currentX >= Width || currentY >= Height) return false;\r\n                \r\n                \r\n            }\r\n            return true;\r\n        }\r\n\r\n        public DrawCursorResult Draw_Cursor_SmartLineBreak(string v, int color)\r\n        {\r\n            int offStart = 0;\r\n            int offEnd = v.Length - 1;\r\n            return Draw_Cursor_SmartLineBreak(v, color, offStart, offEnd);\r\n        }\r\n\r\n        public DrawCursorResult Draw_Cursor_SmartLineBreak(string v, int color, int offStart, int offEnd, int xNewline = 0)\r\n        {\r\n            \r\n            Vector2D start = new Vector2D(CursorX, CursorY);\r\n            int endIndex = offEnd + 1;\r\n            for (int i = offStart; i < endIndex; i++)\r\n            {\r\n                int originX = cursorX;\r\n                bool lineBreak = false;\r\n                bool shouldCheckForLineBreaks = (i == 0 || v[i] == ' ') && i != endIndex - 1;\r\n                if (shouldCheckForLineBreaks)\r\n                {\r\n                    for (int j = 1; j < endIndex - i; j++)\r\n                    {\r\n                        if (j + originX >= Width) //reach end of the line without ending the word, should line break\r\n                        {\r\n                            if (v[i] == ' ')\r\n                            {\r\n                                i++; //skip through the space if it's a new line\r\n                            }\r\n                            lineBreak = true;\r\n                            break;\r\n                        }\r\n                        if (v[i + j] == ' ') //new word begins so no need to line break\r\n                        {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (lineBreak)\r\n                {\r\n                    CursorNewLine(xNewline);\r\n                }\r\n                Draw_Cursor(v[i], color);\r\n            }\r\n            Vector2D end = new Vector2D(CursorX, CursorY);\r\n            return new DrawCursorResult(PositionToIndex(start), PositionToIndex(end), start, end);\r\n        }\r\n\r\n        internal void AutoFixGridding()\r\n        {\r\n            for (int i = 0; i < Width; i++)\r\n            {\r\n                for (int j = 0; j < Height; j++)\r\n                {\r\n                    if (IsGrid(i, j))\r\n                    {\r\n                        int mask = 0;\r\n                        if (IsGrid(i - 1, j))\r\n                        {\r\n                            mask += 1;\r\n                        }\r\n                        if (IsGrid(i + 1, j))\r\n                        {\r\n                            mask += 2;\r\n                        }\r\n                        if (IsGrid(i, j - 1))\r\n                        {\r\n                            mask += 4;\r\n                        }\r\n                        if (IsGrid(i, j + 1))\r\n                        {\r\n                            mask += 8;\r\n                        }\r\n                        switch (mask)\r\n                        {\r\n                            case 1:\r\n                            case 2:\r\n                            case 3:\r\n                                chars[i, j] = Unicode.AsciiGridHor;\r\n                                break;\r\n                            case 4:\r\n                            case 8:\r\n                            case 12:\r\n                                chars[i, j] = Unicode.AsciiGridVer;\r\n                                break;\r\n                            case 5:\r\n                                chars[i, j] = Unicode.AsciiGridUpLeft;\r\n                                break;\r\n                            case 6:\r\n                                chars[i, j] = Unicode.AsciiGridUpRight;\r\n                                break;\r\n                            case 7:\r\n                                chars[i, j] = Unicode.AsciiGridUpRightLeft;\r\n                                break;\r\n                            case 9:\r\n                                chars[i, j] = Unicode.AsciiGridDownLeft;\r\n                                break;\r\n                            case 10:\r\n                                chars[i, j] = Unicode.AsciiGridDownRight;\r\n                                break;\r\n                            case 11:\r\n                                chars[i, j] = Unicode.AsciiGridDownRightLeft;\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                    \r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        private bool IsGrid(int x, int y)\r\n        {\r\n            if(x <0 || y <0 || x>= Width || y>= Height){\r\n                return false;\r\n            }\r\n            char c = chars[x, y];\r\n            foreach (var item in Unicode.grids)\r\n            {\r\n                if (c == item) return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        internal void DrawLines(int hero, params Vector2D[] points)\r\n        {\r\n            for (int i = 0; i < points.Length-1; i++)\r\n            {\r\n                DrawLine(points[i], points[i+1], hero);\r\n            }\r\n            \r\n        }\r\n\r\n        private void DrawLine(Vector2D pos1, Vector2D pos2, int color)\r\n        {\r\n            char c = Unicode.AsciiGridHor;\r\n            if (pos1.Y != pos2.Y) c = Unicode.AsciiGridVer;\r\n            int height = pos2.YInt - pos1.YInt;\r\n            //if (height <= 0) height = 1;\r\n            int width = pos2.XInt - pos1.XInt;\r\n            //if (width <= 0) width = 1;\r\n            DrawRepeated(c, pos1.XInt, pos1.YInt, width+1, height+1, color);\r\n        }\r\n\r\n        private int PositionToIndex(Vector2D start)\r\n        {\r\n            return (int)(start.X + start.Y * Width);\r\n        }\r\n\r\n        public void DrawOneDigit_Cursor(int i)\r\n        {\r\n            Draw_Cursor((char)(i + '0'));\r\n        }\r\n\r\n        public void Draw_Cursor(char c)\r\n        {\r\n\r\n            DrawChar(c, cursorX, cursorY);\r\n            AdvanceCursor();\r\n        }\r\n\r\n        public void Draw_Cursor(char c, int color, int backColor= NOCHANGECOLOR)\r\n        {\r\n\r\n            DrawChar(c, cursorX, cursorY, color, backColor);\r\n            AdvanceCursor();\r\n        }\r\n\r\n\r\n        public void AdvanceCursor()\r\n        {\r\n            cursorX++;\r\n            if (cursorX >= Width)\r\n            {\r\n                cursorX = 0;\r\n                cursorY++;\r\n            }\r\n        }\r\n\r\n        public void CursorNewLine(int x)\r\n        {\r\n            cursorY++;\r\n            cursorX = x;\r\n        }\r\n\r\n        public void DrawChar(char v, int x, int y)\r\n        {\r\n            \r\n            if (v != NOCHANGECHAR) {\r\n                chars[x, y] = v;\r\n\r\n            }\r\n                \r\n        }\r\n\r\n        public void DrawChar(char v, int x, int y, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n\r\n            DrawChar(v, x, y);\r\n            SetColor(color, x, y);\r\n            SetBackColor(backColor, x, y);\r\n        }\r\n\r\n        internal void SetAll(char text, int textColor = NOCHANGECOLOR, int backColor= NOCHANGECOLOR)\r\n        {\r\n            DrawRepeated(text, 0, 0, Width, Height, textColor, backColor);\r\n        }\r\n\r\n        internal void SetAllIfVisible(char text, int textColor = NOCHANGECOLOR, int backColor = NOCHANGECOLOR)\r\n        {\r\n            DrawRepeatedIfVisible(text, 0, 0, Width, Height, textColor, backColor);\r\n        }\r\n\r\n\r\n\r\n        public void DrawWithGrid(string text, int x, int y, int gridColor, int textColor)\r\n        {\r\n            int width = text.Length;\r\n            DrawGrid(x, y, width + 2, 3, gridColor);\r\n            Draw(text, x + 1, y + 1, textColor);\r\n        }\r\n\r\n        public void Draw(string v, int x, int y, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n            for (int i = 0; i < v.Length; i++)\r\n            {\r\n                int x2 = x + i;\r\n                int y2 = y;\r\n                if(x2 >= Width)\r\n                {\r\n                    x2 -= Width;\r\n                    y2++;\r\n                }\r\n                DrawChar(v[i], x2, y2, color, backColor);\r\n            }\r\n        }\r\n\r\n        public void DrawWithLinebreaks(string v, int x, int y, int newlineX, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n            int linebreaks = 0;\r\n            int xOffsetnewlines = 0;\r\n            for (int i = 0; i < v.Length; i++)\r\n            {\r\n                int x2 = x + i+ xOffsetnewlines;\r\n                int y2 = y;\r\n                \r\n                while (x2 >= Width)\r\n                {\r\n                    x2 = x2-Width+newlineX;\r\n                    y2++;\r\n                }\r\n\r\n                //\r\n                if (v[i] == '\\n')\r\n                {\r\n                    linebreaks++;\r\n                    xOffsetnewlines += newlineX - x2-1;\r\n                }\r\n                else{\r\n                    DrawChar(v[i], x2, y2 + linebreaks, color, backColor);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        public void Draw(IEnumerable<char> v, int x, int y, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n            for (int i = 0; i < System.Linq.Enumerable.Count<char>(v); i++)\r\n            {\r\n                DrawChar(System.Linq.Enumerable.ElementAt<char>(v,i), x + i, y, color, backColor);\r\n            }\r\n        }\r\n\r\n        public void DrawGrid(int x, int y, int width, int height, int color)\r\n        {\r\n\r\n            DrawRepeated(Unicode.AsciiGridVer, x, y, 1, height, color);\r\n            DrawRepeated(Unicode.AsciiGridVer, x + width - 1, y, 1, height, color);\r\n            DrawRepeated(Unicode.AsciiGridHor, x, y, width, 1, color);\r\n            DrawRepeated(Unicode.AsciiGridHor, x, y + height - 1, width, 1, color);\r\n\r\n            DrawRepeated((char)218, x, y, 1, 1, color);\r\n            DrawRepeated((char)192, x,              y+height-1, 1, 1, color);\r\n            DrawRepeated((char)217, x+width-1,      y+ height - 1, 1, 1, color);\r\n            DrawRepeated((char)191, x + width - 1,  y, 1, 1, color);\r\n        }\r\n\r\n        public void DrawRepeated(char c, int x, int y, int width, int height, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n            for (int i = x; i < x + width; i++)\r\n            {\r\n                for (int j = y; j < y + height; j++)\r\n                {\r\n                    DrawChar(c, i, j, color);\r\n\r\n                    SetBackColor(backColor, i, j);\r\n                }\r\n            }\r\n        }\r\n\r\n        public void DrawRepeatedIfVisible(char c, int x, int y, int width, int height, int color, int backColor = NOCHANGECOLOR)\r\n        {\r\n            for (int i = x; i < x + width; i++)\r\n            {\r\n                for (int j = y; j < y + height; j++)\r\n                {\r\n                    if (chars[i, j] != TextBoard.INVISIBLECHAR || TextColor[i,j] != INVISIBLECOLOR)\r\n                        DrawChar(c, i, j, color);\r\n                    if(BackColor[i,j] != TextBoard.INVISIBLECOLOR)\r\n                        SetBackColor(backColor, i, j);\r\n                }\r\n            }\r\n        }\r\n\r\n        public void SetColor(int color, int x, int y)\r\n        {\r\n            if (color != NOCHANGECOLOR)\r\n                TextColor[x, y] = color;\r\n        }\r\n\r\n        public void SetBackColor(int color, int x, int y)\r\n        {\r\n            if (color != NOCHANGECOLOR)\r\n            {\r\n                BackColor[x, y] = color;\r\n            }\r\n        }\r\n\r\n        public void Draw(string v, int x2, int y2, object input)\r\n        {\r\n            throw new NotImplementedException();\r\n        }\r\n\r\n        public void DrawGrid(int v1, int v2, int v3, int v4, object board)\r\n        {\r\n            throw new NotImplementedException();\r\n        }\r\n\r\n        public struct DrawCursorResult\r\n        {\r\n            public int StartIndex;\r\n            public int EndIndex;\r\n            public Vector2D StartPosition;\r\n            public Vector2D EndPosition;\r\n\r\n            public DrawCursorResult(int startIndex, int endIndex, Vector2D startPosition, Vector2D endPosition)\r\n            {\r\n                StartIndex = startIndex;\r\n                EndIndex = endIndex;\r\n                StartPosition = startPosition;\r\n                EndPosition = endPosition;\r\n            }\r\n        }\r\n    }\r\n}\r\n","using Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering\r\n{\r\n    public class TextScreenN : ITextScreen, IMouseInput, IKeyboardInput\r\n    {\r\n        public TextWorld TextWorld;\r\n\r\n        public virtual void Update(float f) { }\r\n\r\n        public TextScreenN()\r\n        {\r\n        }\r\n\r\n        public TextScreenN(TextWorld textWorld)\r\n        {\r\n            TextWorld = textWorld;\r\n        }\r\n\r\n        public  void Init(int w, int h)\r\n        {\r\n            TextWorld = new TextWorld();\r\n            TextWorld.Init(w, h);\r\n\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return TextWorld.mainBoard;\r\n        }\r\n\r\n\r\n\r\n        public void MouseEvent(MouseEvents mouseDown, int v1, int v2)\r\n        {\r\n            \r\n        }\r\n\r\n        public int InputUnicode { set; get; }\r\n        int InputAsNumber\r\n        {\r\n            get\r\n            {\r\n                return InputUnicode - 48;\r\n            }\r\n        }\r\n\r\n        public MouseIO mouseIO { get; private set; }\r\n\n    \nprivate MouseIO __Property__Initializer__mouseIO=new MouseIO();}\r\n\r\n    public interface ITextScreen\r\n    {\r\n        \r\n        TextBoard GetBoard();\r\n        \r\n        void Update(float f);\r\n        \r\n    }\r\n\r\n    public interface IMouseInput\r\n    {\r\n        void MouseEvent(MouseEvents eventType, int v1, int v2);\r\n        MouseIO mouseIO { get; private set; }\r\n    }\r\n\r\n    public interface IKeyboardInput\r\n    {\r\n        int InputUnicode { set; }\r\n    }\r\n\r\n    public enum MouseEvents\r\n    { \r\n        MouseDown,\r\n        None\r\n    }\r\n\r\n    public class TextScreenHolder\r\n    {\r\n        public ITextScreen Screen { get; set; }\r\n        public IMouseInput Mouse { get; set; }\r\n        public IKeyboardInput Key { get; set; }\r\n\r\n        internal void SetAll(object dns)\r\n        {\r\n            Screen = dns as ITextScreen;\r\n            Mouse = dns as IMouseInput;\r\n            Key = dns as IKeyboardInput;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.ECS;\r\nusing Pidroh.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    class AttackPreview\r\n    {\r\n        ECSManager ecs;\r\n        private readonly BattleRender render;\r\n        private QuickAccessorOne<MoveData> moveDatas;\r\n        List<TextEntity> entities = new List<TextEntity>();\r\n        private int currentMoveId;\r\n\r\n        public AttackPreview(ECSManager ecs, BattleRender render)\r\n        {\r\n            this.ecs = ecs;\r\n            this.render = render;\r\n            this.render.attackPreview = this;\r\n            moveDatas = ecs.QuickAccessor1<MoveData>();\r\n            \r\n        }\r\n\r\n        public void ShowPreview(int user, int moveId)\r\n        {\r\n            if (moveId == currentMoveId) return;\r\n            End();\r\n            currentMoveId = moveId;\r\n            //Console.WriteLine(\"START\");\r\n\r\n            //Console.WriteLine(\"move \"+moveId);\r\n            var moveData = moveDatas.Comp1(moveId);\r\n            Vector2D pos = render.EntityScreenPosition(user);\r\n            Rect gridRect = render.GetGridRect();\r\n\r\n            foreach (var item in moveData.units)\r\n            {\r\n                var items = item.thingsToHappen;\r\n                foreach (var thing in items)\r\n                {\r\n                    if (thing is DealDamageAction)\r\n                    {\r\n                        var da = thing as DealDamageAction;\r\n                        var target = da.target;\r\n                        switch (target)\r\n                        {\r\n                            case Target.None:\r\n                                break;\r\n                            case Target.Self:\r\n                                break;\r\n                            case Target.ClosestTarget:\r\n                                break;\r\n                            case Target.ClosestTargetX:\r\n                                var freeEntity = render.textWorld.GetFreeEntity(gridRect.X+gridRect.Width - pos.XInt,1);\r\n                                entities.Add(freeEntity);\r\n                                freeEntity.SetPosition(pos);\r\n                                freeEntity.Origin.SetAll(TextBoard.INVISIBLECHAR, TextBoard.INVISIBLECOLOR, 1);\r\n                                break;\r\n                            case Target.Area:\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        internal void End()\r\n        {\r\n            \r\n            if (currentMoveId >= 0) {\r\n                //Console.WriteLine(\"END\");\r\n                currentMoveId = -1;\r\n                render.textWorld.Free(entities);\r\n            }\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.ECS;\r\nusing Pidroh.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class HappHandling\r\n    {\r\n        BattleRender battleRender;\r\n        ECSManager ecs;\r\n        public Action Handle;\r\n        List<HappHandler> handlers = new List<HappHandler>();\r\n        private QuickAccessorTwo<HappTags, TimeStampSnap> happs;\r\n        private float highestHandled\r\n        {\r\n            get { return handleState.highestHandled; }\r\n            set { handleState.highestHandled = value; }\r\n        }\r\n        private HappHandleState handleState = new HappHandleState();\r\n\r\n        public HappHandling(BattleRender battleRender, BattleSetup battleSetup)\r\n        {\r\n            this.battleRender = battleRender;\r\n            var world = battleRender.textWorld;\r\n            var posAnim = world.AddAnimation<global::Pidroh.TextRendering.PositionAnimation>(new PositionAnimation());\r\n            var blinkAnim = world.AddAnimation<global::Pidroh.TextRendering.BlinkAnim>(new BlinkAnim());\r\n            var delayAnim = world.AddAnimation<global::Pidroh.TextRendering.DelaysAnimation>(new DelaysAnimation());\r\n            this.ecs = battleSetup.ecs;\r\n            this.ecs.CreateEntityWithComponent(handleState);\r\n            var battleMain = battleSetup.battleMain;\r\n            var time = battleSetup.timeStamp;\r\n            battleRender.HappHandling = this;\r\n            happs = ecs.QuickAccessor2<HappTags, TimeStampSnap>();\r\n            highestHandled = -1;\r\n\r\n\r\n            handlers.Add(new HappHandler((e) =>\r\n            {\r\n\r\n\r\n\r\n                var damage = e.GetComponent<HappDamageData>();\r\n\r\n                var amount = damage.amount;\r\n\r\n\r\n                \r\n\r\n\r\n                string message;\r\n                if (damage.elementalBlock)\r\n                {\r\n\r\n                    {\r\n                        string text = damage.damageE.ToString().ToUpper() + \" BLOCK \" + damage.targetE.ToString().ToUpper();\r\n                        var message2 = battleRender.textWorld.GetTempEntity(text.Length, 1);\r\n                        int colorE = BattleRender.ElementToProjColor(damage.damageE);\r\n                        message2.Origin.Draw(text, 0, 0, colorE);\r\n\r\n                        blinkAnim.Add(message2.AnimBase(0.6f), BlinkAnim.BlinkData.FrontColor(colorE, 0.2f));\r\n                        int offset = (int)Math.Floor(-text.Length / 2f);\r\n                        message2.SetPosition(battleRender.battlerRenders[damage.target].GetPosition() + new Vector2D(+1 + offset, -3));\r\n                        delayAnim.Delay(0.65f);\r\n                    }\r\n                    {\r\n                        var pos = battleRender.BattleEntityToScreenPosition(battleMain.entities[damage.target].pos);\r\n                        var blast = battleRender.textWorld.GetTempEntity(5, 5);\r\n                        blast.SetPosition(pos + new Vector2D(-2, -2));\r\n\r\n                        blast.Origin.DrawRect(' ', 0, 0, 5, 5, TextBoard.INVISIBLECOLOR, BattleRender.ElementToProjColor(damage.damageE));\r\n                        //blast.Origin.DrawRepeated(' ', 1, 1, 3, 3, TextBoard.INVISIBLECOLOR, BattleRender.ElementToProjColor(damage.damageE));\r\n                        blinkAnim.Add(blast.AnimBase(0.2f), BlinkAnim.BlinkData.BackColor(BattleRender.Colors.inputKey, 0.05f, false));\r\n                    }\r\n                    message = damage.damageE + \" absorbs \" + damage.targetE + \"\\n\";\r\n                    message += battleRender.GetEntityName(damage.target) + \" is unafectted.\";\r\n                }\r\n                else\r\n                {\r\n\r\n                    //message = battleRender.GetEntityName(damage.target) + \" gets hit!\";\r\n                    if (damage.superEffective)\r\n                    {\r\n\r\n                        {\r\n                            string text = damage.damageE.ToString().ToUpper() + \" BREAK \" + damage.targetE.ToString().ToUpper();\r\n                            var message2 = battleRender.textWorld.GetTempEntity(text.Length, 1);\r\n                            int colorE = BattleRender.ElementToProjColor(damage.damageE);\r\n                            message2.Origin.Draw(text, 0, 0, colorE);\r\n\r\n                            blinkAnim.Add(message2.AnimBase(0.45f), BlinkAnim.BlinkData.FrontColor(colorE, 0.2f));\r\n                            int offset = (int)Math.Floor(-text.Length / 2f);\r\n                            message2.SetPosition(battleRender.battlerRenders[damage.target].GetPosition() + new Vector2D(+1 + offset, -2));\r\n                            delayAnim.Delay(0.65f);\r\n                        }\r\n\r\n                        message = null;\r\n                        //message = damage.damageE + \" ravages \" + damage.targetE + \"\\n\";\r\n                        //message += battleRender.GetEntityName(damage.target)+\" takes a heavy hit!\";\r\n                        {\r\n                            var pos = battleRender.BattleEntityToScreenPosition(battleMain.entities[damage.target].pos);\r\n                            var blast = battleRender.textWorld.GetTempEntity(5, 5);\r\n                            blast.SetPosition(pos + new Vector2D(-2, -2));\r\n\r\n                            blast.Origin.DrawRepeated(' ', 1, 1, 3, 3, TextBoard.INVISIBLECOLOR, BattleRender.Colors.Enemy);\r\n                            blinkAnim.Add(blast.AnimBase(0.2f), BlinkAnim.BlinkData.BackColor(BattleRender.ElementToProjColor(damage.damageE), 0.05f));\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        //message = battleRender.GetEntityName(damage.target) + \" gets hurt\";\r\n                        message = null;\r\n                    }\r\n                }\r\n\r\n                {\r\n                    var pos = battleRender.BattleEntityToScreenPosition(battleMain.entities[damage.target].pos);\r\n                    var number = battleRender.textWorld.GetTempEntity(1, 1);\r\n\r\n                    Vector2D initialPos = pos + new Vector2D(0, 0);\r\n                    number.SetPosition(initialPos);\r\n\r\n                    number.Origin.DrawOneDigit(amount, 0, 0, BattleRender.Colors.Hero);\r\n                    posAnim.Add(number.AnimBase(0.6f), new PositionAnimation.PositionData(initialPos, initialPos + new Vector2D(0, -3)));\r\n                    //blinkAnim.Add(number.AnimBase(1f), BlinkAnim.BlinkData.Char(' ', 5f));\r\n                }\r\n\r\n                if (message != null)\r\n                    battleRender.ShowMessage(message);\r\n\r\n                var defender = battleRender.battlerRenders[damage.target];\r\n\r\n                //var fe = battleRender.textWorld.GetTempEntity(defender.Width, defender.Height);\r\n                if (!damage.superEffective && !damage.elementalBlock \r\n                //&& battleMain.entities[damage.target].Alive\r\n                )\r\n                {\r\n                    var fe = battleRender.textWorld.GetTempEntity(3, 3);\r\n                    var backColor = BattleRender.ElementToProjColor(damage.damageE);\r\n                    backColor = 0;\r\n                    int xColor = BattleRender.ElementToProjColor(damage.damageE);\r\n                    const char damageChar = 'X';\r\n                    fe.Origin.DrawChar(damageChar, 1, 0, xColor, backColor);\r\n                    fe.Origin.DrawChar(damageChar, 1, 1, xColor, backColor);\r\n                    fe.Origin.DrawChar(damageChar, 1, 2, xColor, backColor);\r\n                    fe.Origin.DrawChar(damageChar, 0, 1, xColor, backColor);\r\n                    fe.Origin.DrawChar(damageChar, 2, 1, xColor, backColor);\r\n                    //fe.Origin.DrawChar(TextBoard.NOCHANGECHAR, 0, 0);\r\n                    fe.Origin.Position = defender.GetPosition() + new Vector2D(-1, -1);\r\n\r\n                    blinkAnim.Add(fe.AnimBase(0.35f), BlinkAnim.BlinkData.Char('Z', 0.05f));\r\n                    //blinkAnim.Add(fe.AnimBase(0.35f), BlinkAnim.BlinkData.BackColor(BattleRender.Colors.Hero, 0.05f));\r\n                }\r\n\r\n                //Console.Write(\"CHANGE ELE\");\r\n\r\n            }, MiscHappTags.Damage));\r\n            handlers.Add(new HappHandler((e) =>\r\n            {\r\n                var hmd = e.GetComponent<HappMoveData>();\r\n\r\n\r\n                string text = hmd.element.ToString();\r\n                var message = battleRender.textWorld.GetTempEntity(text.Length, 1);\r\n                message.Origin.Draw(text, 0, 0, BattleRender.Colors.Hero);\r\n                blinkAnim.Add(message.AnimBase(0.5f), BlinkAnim.BlinkData.FrontColor(BattleRender.Colors.InputDescription, 0.15f));\r\n                int offset = (int)Math.Floor(-text.Length / 2f);\r\n                message.SetPosition(battleRender.battlerRenders[hmd.user].GetPosition() + new Vector2D(+1 + offset, -1));\r\n\r\n            }, MiscHappTags.ChangeElement));\r\n            handlers.Add(new HappHandler((e) =>\r\n            {\r\n                var hmd = e.GetComponent<HappMoveData>();\r\n                //var defender = battleRender.battlerRenders[hmd.target];\r\n                var pos = battleRender.BattleEntityToScreenPosition(battleMain.entities[hmd.user].pos);\r\n                var blast = battleRender.textWorld.GetTempEntity(3, 3);\r\n                blast.SetPosition(pos + new Vector2D(-1, -1));\r\n\r\n                blast.Origin.DrawRepeated(' ', 1, 1, 1, 1, TextBoard.INVISIBLECOLOR, BattleRender.Colors.Enemy);\r\n                blinkAnim.Add(blast.AnimBase(0.2f), BlinkAnim.BlinkData.BackColor(BattleRender.Colors.Hero, 0.05f));\r\n                //delayAnim.Delay(5);\r\n                //Console.Write(\"DEATH\");\r\n                //Console.Write(\"CHANGE ELE\");\r\n\r\n            }, MiscHappTags.Death));\r\n            Action<Entity> moveHandle = (e) =>\r\n            {\r\n                //Console.WriteLine(\"HANDLE!3\");\r\n                var hmd = e.GetComponent<HappMoveData>();\r\n                var hmf = e.GetComponent<HappMovement>();\r\n                int eId = hmd.user;\r\n                var mover = battleMain.entities[eId];\r\n\r\n                var pos = mover.PositionV2D;\r\n                var pos2 = hmf.moveTo;\r\n                var posF = (pos + pos2) / 2;\r\n\r\n                var fe = battleRender.battlerRenders[eId];\r\n                //Console.WriteLine(\"Move fail\");\r\n                //Console.WriteLine(\"HAPP MOVE HANDLE\");\r\n                if (hmf.success)\r\n                {\r\n                    Vector2D finalPosScreen = battleRender.BattleEntityToScreenPosition(hmf.moveTo);\r\n                    posAnim.Add(fe.AnimBase(0.2f), new PositionAnimation.PositionData(\r\n                    battleRender.BattleEntityToScreenPosition(hmf.moveFrom),\r\n                    finalPosScreen));\r\n                    fe.SetPosition(finalPosScreen);\r\n                }\r\n                else\r\n                {\r\n                    posAnim.Add(fe.AnimBase(0.2f), new PositionAnimation.PositionData(\r\n                    battleRender.BattleEntityToScreenPosition(hmf.moveFrom),\r\n                    battleRender.BattleEntityToScreenPosition(posF)));\r\n                }\r\n                \r\n            };\r\n            handlers.Add(new HappHandler(moveHandle, MoveDataTags.Movement));\r\n\r\n            handlers.Add(new HappHandler((e) =>\r\n            {\r\n                var ha = e.GetComponent<HappArea>();\r\n                var hmd = e.GetComponent<HappMoveData>();\r\n                int eId = hmd.user;\r\n                var mover = battleMain.entities[eId];\r\n                //var userRender = battleRender.battlerEntities[eId];\r\n                var area = ha.area;\r\n                var points = area.points;\r\n\r\n                var useEffect = world.GetTempEntity(1, 1);\r\n                useEffect.SetPosition(battleRender.BattleEntityToScreenPosition(mover.pos));\r\n                blinkAnim.Add(useEffect.AnimBase(0.5f), BlinkAnim.BlinkData.BackColor(BattleRender.ElementToProjColor(hmd.element), 0.15f));\r\n                foreach (var item in points)\r\n                {\r\n                    var entity = world.GetTempEntity(1, 1);\r\n                    var finalPos = item * new Vector2D(ha.mirroringX, 1) + ha.offset;\r\n                    if (finalPos.X < 0) continue;\r\n                    if (finalPos.Y < 0) continue;\r\n                    if (finalPos.X > 5) continue;\r\n                    if (finalPos.Y > 2) continue;\r\n                    //Console.Write(finalPos.XInt);\r\n                    //Console.Write(finalPos.YInt);\r\n                    var pos = battleRender.BattleEntityToScreenPosition(finalPos);\r\n                    entity.SetPosition(pos.XInt, pos.YInt);\r\n                    blinkAnim.Add(entity.AnimBase(0.5f), BlinkAnim.BlinkData.BackColor(BattleRender.ElementToProjColor(hmd.element), 0.15f));\r\n                }\r\n            }, MoveDataTags.Bomb));\r\n            handlers.Add(new HappHandler((e) =>\r\n            {\r\n                var ha = e.GetComponent<HappShoot>();\r\n                var md = e.GetComponent<HappMoveData>();\r\n                if (ha != null)\r\n                {\r\n                    \r\n                    BattleMain.Element element = md.element;\r\n                    TextEntity fe = battleRender.GetProjTextEntity(element);\r\n                    var pos = ha.start;\r\n                    var pos2 = ha.end;\r\n                    var xDis = Math.Abs(pos.X - pos2.X);\r\n                    float timeV = (float)xDis * 0.1f;\r\n                    posAnim.Add(fe.AnimBase(timeV), new PositionAnimation.PositionData(\r\n                            battleRender.BattleEntityToScreenPosition(pos),\r\n                            battleRender.BattleEntityToScreenPosition(pos2)));\r\n\r\n\r\n                }\r\n\r\n            }, MoveDataTags.Shoot));\r\n\r\n            Handle = () =>\r\n            {\r\n                //Console.WriteLine(\"HANDLE!\");\r\n                float newHighestHandled = highestHandled;\r\n                for (int i = 0; i < happs.Length; i++)\r\n                {\r\n                    //Console.Write(\"ADV\"+battleRender.CanAdvanceGraphics());\r\n                    if (!battleRender.CanAdvanceGraphics()) break;\r\n                    var tags = happs.Comp1(i);\r\n                    //if (happs.Comp2(i).TimeSnap > highestHandled)\r\n                    if (i > highestHandled)\r\n                    {\r\n                        //newHighestHandled = happs.Comp2(i).TimeSnap;\r\n                        newHighestHandled = i;\r\n                        //Console.Write(\"Handled\"+i);\r\n                        //Console.WriteLine(\"HANDLE!\");\r\n                        bool handled = false;\r\n                        foreach (var han in handlers)\r\n                        {\r\n                            //Console.WriteLine(\"HANDLE!x\");\r\n                            if (han.CanHandle(tags.tags))\r\n                            {\r\n                                //Console.Write(\"HandledX\" + i);\r\n                                handled = true;\r\n                                //Console.WriteLine(happs.Comp2(i).TimeSnap + \" - \" + time.CurrentSnap);\r\n                                //Console.WriteLine(\"HANDLE!2\");\r\n                                han.Handler(happs.Entity(i));\r\n                            }\r\n                        }\r\n                        if (!handled)\r\n                        {\r\n                            foreach (var t in tags.tags)\r\n                            {\r\n                                //Console.WriteLine(\"Not handled tag \" + t);\r\n                            }\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        //Console.WriteLine(happs.Comp2(i).TimeSnap+\" - \"+ time.CurrentSnap);\r\n                    }\r\n                }\r\n                highestHandled = newHighestHandled;\r\n            };\r\n\r\n        }\r\n\r\n        public class HappHandleState\r\n        {\r\n            public float highestHandled;\r\n        }\r\n\r\n        public class HappHandler\r\n        {\r\n            internal List<int> necessaryTags = new List<int>();\r\n            internal Action<Entity> Handler;\r\n\r\n            public HappHandler(Action<Entity> handler, params object[] tags)\r\n            {\r\n                foreach (var t in tags)\r\n                {\r\n                    necessaryTags.Add(Convert.ToInt32(t));\r\n                }\r\n                this.Handler = handler;\r\n            }\r\n\r\n            internal bool CanHandle(List<int> tags)\r\n            {\r\n                foreach (var item in necessaryTags)\r\n                {\r\n                    if (!tags.Contains(item))\r\n                    {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n\r\n        internal bool IsDone()\r\n        {\r\n            return highestHandled >= happs.Length - 1;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.ConsoleApp.Turnbased;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class HelpScreenIntegration\r\n    {\r\n        public bool showRequest;\r\n        internal ITextScreen_ caller;\r\n\r\n        internal void Show(ITextScreen_ screen)\r\n        {\r\n            showRequest = true;\r\n            caller = screen;\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    class HelpScreen : ITextScreen_\r\n    {\r\n        public int Input { set; get; }\r\n        public int keyDownUnicode { set; get; }\r\n        public KeyboardIO Keyboard { set; get; }\r\n        public MouseIO Mouse { set; get; }\r\n        TextWorld textWorld;\r\n        private readonly HelpScreenModel model;\r\n        private readonly List<MoveMetaData> moveRenders;\r\n        private readonly List<MoveData> moveDatas;\r\n        char LeaveButton;\r\n        public bool wannaLeave;\r\n        private TextEntity explanationEntity;\r\n\r\n        public HelpScreen(HelpScreenModel helpModel, List<MoveMetaData> moveRenders, List<MoveData> moveDatas)\r\n        {\r\n            this.textWorld = new TextWorld();\r\n            textWorld.Init(GameMain.Width, GameMain.Height);\r\n            model = helpModel;\r\n            this.moveRenders = moveRenders;\r\n            this.moveDatas = moveDatas;\r\n            textWorld.mainBoard.SetAll(TextBoard.INVISIBLECHAR, BattleRender.Colors.BackCommand, BattleRender.Colors.BackCommand);\r\n            explanationEntity = textWorld.GetFreeEntity(GameMain.Width-4, 35);\r\n            explanationEntity.SetPosition(2, 4);\r\n            //explanationEntity.Origin.Draw(\"SSS__SSSSDASDASDAS\", 0,0, BattleRender.Colors.InputDescription);\r\n        }\r\n\r\n        public void Draw(float f)\r\n        {\r\n            var input = keyDownUnicode;\r\n            if (input == LeaveButton) wannaLeave = true;\r\n            if (input == 'H') wannaLeave = true;\r\n            if (input == 'h') wannaLeave = true;\r\n            if (input == Unicode.Escape) wannaLeave = true;\r\n\r\n            \r\n            //textWorld.mainBoard.Reset();\r\n            int pos = 0;\r\n            //textWorld.mainBoard.DrawWithLinebreaks(\"Input your commands and watch the turn play out. You can see everything your enemies will do\\n\\nAttacks have three elements, Fire, Thunder and Ice. Fire beats Ice, Ice beats Thunder, Thunder beats Fire.\\nThe element of the attacker changes upon attacking. Attackers are immune to attacks of the same element!\", 2, pos, 0, BattleRender.Colors.inputKey, TextBoard.INVISIBLECOLOR);\r\n            explanationEntity.Origin.SetCursorAt(0, 0);\r\n            //if (!model.battleIntroMode){\r\n            if (false) { \r\n                explanationEntity.Origin.Draw_Cursor_SmartLineBreak(\"Input your commands and watch the turn play out. Plan your moves based on what the enemy will do!\", BattleRender.Colors.InputDescription);\r\n                explanationEntity.Origin.CursorNewLine(0);\r\n                explanationEntity.Origin.CursorNewLine(0);\r\n                explanationEntity.Origin.Draw_Cursor_SmartLineBreak(\"Attacks have three elements, Fire, Thunder and Ice. Fire beats Ice, Ice beats Thunder, Thunder beats Fire.\", BattleRender.Colors.InputDescription);\r\n                explanationEntity.Origin.CursorNewLine(0);\r\n                explanationEntity.Origin.CursorNewLine(0);\r\n\r\n                explanationEntity.Origin.Draw_Cursor_SmartLineBreak(\"The element of the attacker changes upon attacking. Attackers are immune to attacks of the same element!\", BattleRender.Colors.InputDescription);\r\n                pos += 18;\r\n            }\r\n            else{\r\n                pos = 5;\r\n            }\r\n\r\n            textWorld.Draw();\r\n            textWorld.mainBoard.SetAll(' ', TextBoard.NOCHANGECOLOR, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.BackgroundInput);\r\n\r\n            //textWorld.mainBoard.DrawWithLinebreaks(\"Input your commands and watch the turn play out. You can see everything your enemies will do\\n\", 2, pos, 2, BattleRender.Colors.InputDescription);\r\n\r\n\r\n            textWorld.mainBoard.Draw(\"YOUR COMMANDS\", 2, pos-2, BattleRender.Colors.WindowLabel);\r\n            string menuTitle = \"HELP\";\r\n            string leaveLabel = \"EXIT\";\r\n            if (model.battleIntroMode)\r\n            {\r\n                leaveLabel = \"START\";\r\n                menuTitle = \"BATTLE INTRO\";\r\n                LeaveButton = (char)Unicode.Space;\r\n            }\r\n            else\r\n            {\r\n                LeaveButton = 'x';\r\n            }\r\n            textWorld.mainBoard.DrawOnCenterHorizontal(menuTitle, BattleRender.Colors.WindowLabel, 0, 1);\r\n\r\n            List<int> commandList = model.commandsHero;\r\n            pos = ShowCommands(pos, commandList);\r\n            pos += 4;\r\n            textWorld.mainBoard.Draw(\"ENEMY COMMANDS\", 2, pos, BattleRender.Colors.WindowLabel);\r\n            pos += 2;\r\n            pos = ShowCommands(pos, model.commandsEnemy);\r\n\r\n            GameMain.DrawInput(1, pos + 3, LeaveButton, leaveLabel, textWorld.mainBoard);\r\n            \r\n\r\n        }\r\n\r\n        private int ShowCommands(int pos, List<int> commandList)\r\n        {\r\n            for (int i = 0; i < commandList.Count; i++)\r\n            {\r\n                //Console.Write(\"DRAWWW\");\r\n\r\n                int command = commandList[i];\r\n                bool drawFlag = CheckDrawCommand(command);\r\n                if (drawFlag)\r\n                {\r\n                    textWorld.mainBoard.Draw(moveRenders[command].Abrev, 2, pos, BattleRender.Colors.HeroTurn);\r\n                    textWorld.mainBoard.Draw(moveRenders[command].Label.ToUpper(), 5, pos, BattleRender.Colors.HeroTurn);\r\n                    textWorld.mainBoard.SetCursorAt(3, pos + 1);\r\n                    textWorld.mainBoard.Draw_Cursor_SmartLineBreak(moveRenders[command].Description,BattleRender.Colors.InputDescription, 0, moveRenders[command].Description.Length-1, 3);\r\n                    //textWorld.mainBoard.Draw(moveRenders[command].Description, 3, pos + 1, BattleRender.Colors.InputDescription);\r\n                    pos += 3;\r\n                }\r\n\r\n            }\r\n\r\n            return pos;\r\n        }\r\n\r\n        private bool IsShowingCommandInList(List<int> commandList)\r\n        {\r\n            for (int i = 0; i < commandList.Count; i++)\r\n            {\r\n                //Console.Write(\"DRAWWW\");\r\n\r\n                int command = commandList[i];\r\n                if (CheckDrawCommand(command)) return true;\r\n\r\n\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        private bool CheckDrawCommand(int command)\r\n        {\r\n            bool drawFlag = false;\r\n            if (command >= 0)\r\n            {\r\n                //Console.WriteLine(command);\r\n                //Console.WriteLine();\r\n                var md = moveDatas[command];\r\n                if (!md.HasTag((int)MoveDataTags.Movement))\r\n                {\r\n                    drawFlag = moveRenders[command].Label.Length != 0;\r\n                }\r\n\r\n\r\n            }\r\n\r\n            return drawFlag;\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return textWorld.mainBoard;\r\n        }\r\n\r\n        internal void Show()\r\n        {\r\n            model.RefreshData();\r\n        }\r\n\r\n        internal void HelpMode()\r\n        {\r\n            model.battleIntroMode = false;\r\n        }\r\n\r\n        internal bool IsWannaShowIntro()\r\n        {\r\n            model.RefreshData();\r\n            return IsShowingCommandInList(model.commandsEnemy) || IsShowingCommandInList(model.commandsHero);\r\n            //return model.commandsEnemy.Count != 0 || model.commandsHero.Count != 0;\r\n        }\r\n\n    \nprivate MouseIO __Property__Initializer__Mouse=new MouseIO();}\r\n\r\n    public class HelpScreenModel\r\n    {\r\n        BattleMain battleMain;\r\n        public List<int> commandsHero = new List<int>();\r\n        public List<int> commandsEnemy = new List<int>();\r\n        public bool battleIntroMode = false;\r\n\r\n        public HelpScreenModel(BattleMain battleMain)\r\n        {\r\n            this.battleMain = battleMain;\r\n\r\n        }\r\n\r\n        public void RefreshData()\r\n        {\r\n            commandsHero.Clear();\r\n            AddAll(battleMain.playerHandFixed, commandsHero);\r\n            AddAll(battleMain.playerHandUnfixed, commandsHero);\r\n            AddAll(battleMain.playerHandPool, commandsHero);\r\n            foreach (var item in battleMain.entities)\r\n            {\r\n                AddAllArray(item.moves, commandsEnemy);\r\n            }\r\n\r\n        }\r\n\r\n        private void AddAll(List<BattleMain.MoveType> moves, List<int> commands)\r\n        {\r\n            foreach (var m in moves)\r\n            {\r\n                int a = (int) m;\r\n                if (a < 0) continue;\r\n                if (!commands.Contains(a))\r\n                {\r\n                    commands.Add(a);\r\n                }\r\n            }\r\n        }\r\n\r\n        private void AddAllArray(int[] moves, List<int> commands)\r\n        {\r\n            foreach (var a in moves)\r\n            {\r\n                if (a < 0) continue;\r\n                if (!commands.Contains(a))\r\n                {\r\n                    commands.Add(a);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class InputHandling\r\n    {\r\n        int[] unfixedCommandKeys = {'1', '2','3','4', '5' };\r\n        Dictionary<Input, int> fixedMoveButtons = global::Bridge.Script.CallFor(new Dictionary<Input, int>(),(_o1)=>{_o1.Add(new Input(InputType.Move, BattleMain.MoveType.NormalShot),'g');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.Fire),'f');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.Ice),'i');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.IceBomb),'b');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.ThunderBomb),'y');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.Thunder),'t');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.MoveRight),'d');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.MoveUp),'w');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.MoveDown),'s');_o1.Add(new Input(InputType.Move, BattleMain.MoveType.MoveLeft),'a');_o1.Add(new Input(InputType.MiscBattle, MiscBattleInput.Done),Unicode.Space);_o1.Add(new Input(InputType.MiscBattle, MiscBattleInput.Redo),'r');_o1.Add(new Input(InputType.MiscBattle, MiscBattleInput.Preview),'p');_o1.Add(new Input(InputType.MiscBattle, MiscBattleInput.Help),'h');_o1.Add(new Input(InputType.MiscBattle, MiscBattleInput.Cancel),'r');_o1.Add(new Input(InputType.MiscBattle, MiscBattleInput.Confirm),Unicode.Space);return _o1;});\r\n\r\n        public int GetFixedMoveUnicode(Input input)\r\n        {\r\n            int value;\r\n            if (fixedMoveButtons.TryGetValue(input, out value))\r\n            {\r\n\r\n            }\r\n            else\r\n            {\r\n                value = -1;\r\n            }\r\n            return value;\r\n        }\r\n\r\n        public Input Inputted(int unicodeKey, InputHolder input)\r\n        {\r\n            //Console.WriteLine(\" input + \"+(char)unicodeKey);\r\n            foreach (var item in fixedMoveButtons)\r\n            {\r\n                if (item.Value == unicodeKey)\r\n                {\r\n                    if(input.Contains(item.Key))\r\n                        return item.Key;\r\n                }\r\n            }\r\n            for (int i = 0; i < unfixedCommandKeys.Length; i++)\r\n            {\r\n                if (unfixedCommandKeys[i] == unicodeKey)\r\n                {\r\n                    int unfixedCommandPos = 0;\r\n                    for (int i2 = 0; i2 < input.inputs.Count; i2++)\r\n                    {\r\n                        if (input.TagIs(i2, InputTags.MOVEUNFIX))\r\n                        {\r\n                            if (unfixedCommandPos == i)\r\n                            {\r\n                                return input.inputs[i2];\r\n                            }\r\n                            unfixedCommandPos++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return default(Input);\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class MessageOnPosition\r\n    {\r\n        BattleRender battleRender;\r\n        private TextWorld textWorld;\r\n        private BlinkAnim blinkAnim;\r\n\r\n        public MessageOnPosition(BattleRender battleRender)\r\n        {\r\n            textWorld = battleRender.textWorld;\r\n            blinkAnim = textWorld.AddAnimation<global::Pidroh.TextRendering.BlinkAnim>(new BlinkAnim());\r\n        }\r\n\r\n        public void MessageOnPos(Vector2D pos, string v)\r\n        {\r\n            var entity = textWorld.GetTempEntity(v.Length + 2, 6);\r\n            blinkAnim.Add(entity.AnimBase(2f), new BlinkAnim.BlinkData(TextBoard.NOCHANGECHAR, TextBoard.NOCHANGECOLOR, TextBoard.NOCHANGECOLOR, 0.35f, 0.35f));\r\n            var xOff = (v.Length - 3) / 2;\r\n            if (xOff < 0) xOff = 0;\r\n            var lineStart = new Vector2D(xOff, 0);\r\n            entity.SetPosition(pos + new Vector2D(1 - xOff, 0));\r\n            //Console.Write(pos);\r\n            //entity.Origin.Draw(v, 1, 5);\r\n            entity.Origin.DrawWithGrid(v, 0, 3, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero);\r\n\r\n            entity.Origin.DrawLines(Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero, lineStart, lineStart + new Vector2D(2, 0), lineStart + new Vector2D(2, 2));\r\n            entity.Origin.AutoFixGridding();\r\n        }\r\n    }\r\n}\r\n","using Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class MouseHoverText\r\n    {\r\n        public string[][] texts = new string[3][];\r\n        public MouseHoverManager hoverManager;\r\n        public TextEntity entity;\r\n\r\n        public MouseHoverText(MouseHoverManager hoverManager, TextEntity entity, string[] moveDescriptions)\r\n        {\r\n            this.hoverManager = hoverManager;\r\n            this.entity = entity;\r\n            //texts[0] = new string[Enum.GetValues(typeof(BattleMain.MoveType)).Length];\r\n\r\n            texts[0] = moveDescriptions;\r\n            //Done,\r\n        //    Redo,\r\n        //Preview,\r\n        //Confirm,\r\n        //Cancel\r\n            texts[1] = new string[] {\r\n                \"Starts command execution\",\r\n                \"Removes the last inputted command\",\r\n                \"Preview moves of the opponents\",\r\n                \"Inputs move\",\r\n                \"Returns\",\r\n                \"Shows helpful information\",\r\n            };\r\n            texts[2] = new string[] {\r\n                \"Moves in the corresponding direction\",\r\n            };\r\n        }\r\n\r\n\r\n        public void Update()\r\n        {\r\n            entity.ResetFull();\r\n            hoverManager.Update();\r\n            var active = hoverManager.mouseHoversActive;\r\n            if (active.Count > 0)\r\n            {\r\n                //Console.Write(\"HOVER\");\r\n                int id = active[0].id;\r\n                if(id >= 0)\r\n                {\r\n                    string text = texts[active[0].type][id];\r\n                    //entity.Origin.Draw(text, 0, 0, 2, BattleRender.Colors.BackBattle);\r\n                    entity.Origin.SetCursorAt(0,0);\r\n                    entity.Origin.Draw_Cursor_SmartLineBreak(text, 2);\r\n                    \r\n                    int x = active[0].rect.X + 1 - text.Length/2;\r\n                    if (x < 0) x = 1;\r\n                    entity.SetPosition(x, active[0].rect.Y -2);\r\n                }\r\n\r\n                \r\n            }\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class NavigationKeyboard\r\n    {\r\n        List<Point2D> points = new List<Point2D>();\r\n        public int currentPoint = 0;\r\n        private TextWorld textWorld;\r\n        private TextEntity cursor;\r\n        public int chosenOption = -1;\r\n        public bool showEscape = true;\r\n        public bool wantToEscape = false;\r\n        \r\n\r\n        public NavigationKeyboard(TextWorld textWorld)\r\n        {\r\n            this.textWorld = textWorld;\r\n            cursor = textWorld.GetFreeEntity(1, 1);\r\n            cursor.Origin.DrawChar('@', 0, 0, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.Hero);\r\n            //UpdatePoint();\r\n        }\r\n\r\n        //int inputUnicode;\r\n\r\n        public void CheckInput(int inputUnicode)\r\n        {\r\n\r\n            //Console.WriteLine(inputUnicode);\r\n            if (inputUnicode == Unicode.Space)\r\n            {\r\n                chosenOption = currentPoint;\r\n            }\r\n            if (inputUnicode == 's' || inputUnicode == 'd')\r\n            {\r\n                Move(1);\r\n            }\r\n            if (inputUnicode == 'w' || inputUnicode == 'a')\r\n            {\r\n                Move(-1);\r\n            }\r\n            if(inputUnicode == Unicode.Escape && showEscape)\r\n            {\r\n                wantToEscape = true;\r\n            }\r\n        }\r\n\r\n        private void Move(int v)\r\n        {\r\n            currentPoint += v;\r\n            if (currentPoint >= points.Count)\r\n            {\r\n                currentPoint = 0;\r\n            }\r\n            if (currentPoint < 0)\r\n            {\r\n                currentPoint = points.Count - 1;\r\n            }\r\n            UpdatePoint();\r\n        }\r\n\r\n        private void UpdatePoint()\r\n        {\r\n            if (currentPoint < points.Count)\r\n                cursor.SetPosition(points[currentPoint]);\r\n        }\r\n\r\n        public void DrawControls()\r\n        {\r\n            int y = 30;\r\n            UIReusable.DrawControlsLabel(textWorld, y);\r\n            {\r\n                var forceInputLabel = UIReusable.WASD;\r\n                var forceCommandLabel = UIReusable.arrows;\r\n                \r\n                BattleRender.DrawInput(7, y+2, forceInputLabel, forceCommandLabel, textWorld.mainBoard);\r\n                GameMain.DrawInput(7, y+4, Unicode.Space, \"SELECT\", textWorld.mainBoard);\r\n                if(showEscape)\r\n                    GameMain.DrawInput(7, y+6, Unicode.Escape, \"RETURN\", textWorld.mainBoard);\r\n            }\r\n            \r\n\r\n        }\r\n\r\n        internal void Clear()\r\n        {\r\n            points.Clear();\r\n        }\r\n\r\n        internal void ResetChoice()\r\n        {\r\n            chosenOption = -1;\r\n            wantToEscape = false;\r\n        }\r\n\r\n        internal void Add(int x, int y)\r\n        {\r\n            points.Add(new Point2D(x, y));\r\n            UpdatePoint();\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\nusing Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.ECS;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class PreviewSystem\r\n    {\r\n        private ECSManager ecs;\r\n        private BattleMain battleMain;\r\n        public bool previewActive = false;\r\n        private ClonedState clonedState;\r\n        private QuickAccessorOne<BattleMain.BattleEntity> battleEntity;\r\n        Debugger debug = new Debugger(true);\r\n\r\n        public PreviewSystem(ECSManager ecs, BattleMain battleMain)\r\n        {\r\n            this.ecs = ecs;\r\n            ecs.AddCopyMethod(typeof(BattleMain.BattleEntity), (global::System.Action<object, object>)((o1, o2)=> {\r\n                var to = o2 as BattleMain.BattleEntity;\r\n                var from = o1 as BattleMain.BattleEntity;\r\n                to.pos = from.pos;\r\n                to.life = from.life;\r\n                to.maxLife = from.maxLife;\r\n                to.element = from.element;\r\n                for (int i = 0; i < to.moves.Length; i++)\r\n                {\r\n                    to.moves[i] = from.moves[i];\r\n                }\r\n            }));\r\n            ecs.AddCopyMethod(typeof(BattleMain.BattleState), (global::System.Action<object, object>)((o1, o2) => {\r\n                var to = o2 as BattleMain.BattleState;\r\n                var from = o1 as BattleMain.BattleState;\r\n                to.actingEntity = from.actingEntity;\r\n                to.BattleEndEnable = from.BattleEndEnable;\r\n                to.moveTick_Now = from.moveTick_Now;\r\n                to.moveTick_Total = from.moveTick_Total;\r\n                to.phase = from.phase;\r\n                to.turn = from.turn;\r\n                to.turnsPerPhase = from.turnsPerPhase;\r\n                to.totalTurns = from.totalTurns;\r\n            }));\r\n            ecs.AddCopyMethod(typeof(TimeStamp), (global::System.Action<object, object>)((o1, o2) => {\r\n                var to = o2 as TimeStamp;\r\n                var from = o1 as TimeStamp;\r\n                to.CurrentSnap = from.CurrentSnap;\r\n            }));\r\n            ecs.AddCopyMethod(typeof(HappHandling.HappHandleState), (global::System.Action<object, object>)((o1, o2) => {\r\n                var to = o2 as HappHandling.HappHandleState;\r\n                var from = o1 as HappHandling.HappHandleState;\r\n                to.highestHandled = from.highestHandled;\r\n            }));\r\n            this.battleMain = battleMain;\r\n            clonedState = new ClonedState();\r\n            battleEntity = ecs.QuickAccessor1<BattleMain.BattleEntity>();\r\n        }\r\n\r\n        internal void StartPreview()\r\n        {\r\n            battleMain.trackBattle.Preview();\r\n            foreach (var item in battleMain.entities)\r\n            {\r\n                debug.Print(\"ALL ENTITIES BEFORE PREVIEW\");\r\n                debug.Print(item);\r\n                debug.Print(item.randomPosition + \" RANDOM POS\");\r\n                debug.Print(item.Type + \" type\");\r\n                debug.Print(item.drawTurn + \" draw turn\");\r\n                debug.Print(\"END\");\r\n            }\r\n            ecs.CloneState(clonedState);\r\n            battleMain.battleState.BattleEndEnable = false;\r\n            previewActive = true;\r\n            \r\n            foreach (var item in battleMain.entities)\r\n            {\r\n                if (item.Type == BattleMain.EntityType.hero)\r\n                {\r\n                    item.life = 0;\r\n                    for (int i = 0; i < item.moves.Length; i++)\r\n                    {\r\n                        item.moves[i] = -1;\r\n                    }\r\n                }\r\n            }\r\n            battleMain.Tick();\r\n\r\n        }\r\n\r\n        internal void EndPreview()\r\n        {\r\n            //Console.Write(\"End preview\");\r\n            //   Console.ReadKey();\r\n            previewActive = false;\r\n            //Console.WriteLine(battleMain.entities.Contains(battleEntity.Comp1(0))+\"XXXS\");\r\n            \r\n            ecs.RestoreState(clonedState);\r\n            battleMain.battleState.phase = BattleMain.BattlePhase.PickHands;\r\n\r\n            foreach (var item in battleMain.entities)\r\n            {\r\n                debug.Print(\"ALL ENTITIES AFTER PREVIEW\");\r\n                debug.Print(item);\r\n                debug.Print(item.randomPosition+\" RANDOM POS\");\r\n                debug.Print(item.Type + \" type\");\r\n                debug.Print(item.drawTurn + \" draw turn\");\r\n                debug.Print(\"END\");\r\n            }\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class ReflectionTest\r\n    {\r\n\r\n        public ReflectionTest() {\r\n            var debug = new Debugger(true);\r\n            \r\n            BattleMain.BattleEntity be = new ConsoleApp.Turnbased.BattleMain.BattleEntity();\r\n            var type = be.GetType();\r\n            BattleMain.BattleEntity be2 = new BattleMain.BattleEntity();\r\n            be2.randomPosition = true;\r\n            debug.Print(type.GetField(\"randomPosition\").GetValue(be2).ToString());\r\n            debug.Print(be2.randomPosition + \"\");\r\n            debug.Print(be);\r\n            DeepCloneHelper.DeepCopyPartial(be, be2);\r\n            DeepCloneHelper.DeepCopyPartial(be2, be);\r\n            debug.Print(be);\r\n            debug.Print(be2);\r\n            \r\n\r\n            debug.Print(type.GetField(\"randomPosition\").GetValue(be2).ToString());\r\n            debug.Print(be2.randomPosition+\"\");\r\n\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n\r\n    \r\n\r\n    public class UIReusable\r\n    {\r\n        public static string WASD = \"WASD\";\r\n        public static string arrows = \"\" + Unicode.Uparrow2 + Unicode.Leftarrow2 + Unicode.Downarrow2 + Unicode.Rightarrow2;\r\n        public static void DrawControlsLabel(TextWorld textWorld, int y)\r\n        {\r\n            textWorld.mainBoard.DrawOnCenterHorizontal(\"Controls\", BattleRender.Colors.WindowLabel, 0, y);\r\n\r\n        }\r\n    }\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing Pidroh.TurnBased.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class BattleRender : ITextScreen_\r\n    {\r\n        internal AttackPreview attackPreview;\r\n        public KeyboardIO Keyboard { set; get; }\r\n        private BattleMain turnBaseTry;\r\n        private readonly StageData stageData;\r\n        private readonly PreviewSystem previewSystem;\r\n        private PositionAnimation posAnim;\r\n        private CharByCharAnimation charByCharAnim;\r\n        private DelaysAnimation delayAnim;\r\n\r\n        public TextWorld textWorld;\r\n        public TextBoard TextBoard { get; set; }\r\n        List<Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase> inputPhases = global::Bridge.Script.CallFor(new List<Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase>(),(_o1)=>{_o1.Add(Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase.PickHands);_o1.Add(Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase .ConfirmInput);return _o1;});\r\n\r\n        internal Vector2D EntityScreenPosition(int user)\r\n        {\r\n            return BattleEntityToScreenPosition(turnBaseTry.entities[user].pos);\r\n        }\r\n\r\n        internal Rect GetGridRect()\r\n        {\r\n            return new Rect(gridOffsetx, gridOffsety, gridScale * 6, gridScale * 3);\r\n        }\r\n\r\n        int input;\r\n        public int Input\r\n        {\r\n            get { return input; }\r\n            set\r\n            {\r\n                input = value; //Console.WriteLine(value);\r\n            }\r\n        }\r\n\r\n        public HappHandling HappHandling { get; internal set; }\r\n        public int keyDownUnicode { set; get; }\r\n        public MouseIO Mouse { set; get; }\r\n        public MouseHoverManager mouseHover;\r\n\r\n        //public List<DelayedActions> tasks = new List<DelayedActions>();\r\n        Dictionary<object, string> moveChars;\r\n        Dictionary<object, string> moveDescriptions = new Dictionary<object, string>();\r\n        Dictionary<MiscBattleInput, string> miscDescriptions = global::Bridge.Script.CallFor(new Dictionary<MiscBattleInput, string>(),(_o2)=>{_o2.Add(MiscBattleInput.Done,\"DONE\");_o2.Add(MiscBattleInput.Redo,\"REDO\");_o2.Add(MiscBattleInput.Help,\"HELP\");_o2.Add(MiscBattleInput.Preview,\"PREVIEW\");_o2.Add(MiscBattleInput.Confirm,\"CONFIRM\");_o2.Add(MiscBattleInput.Cancel,\"CANCEL\");return _o2;});\r\n        private Dictionary<Input, string> moveButtons;\r\n\r\n        private bool debugOn = true;\r\n        private int gridScale = 5;\r\n        private int gridOffsetx = 2;\r\n        private int gridOffsety = 1;\r\n        internal List<TextEntity> battlerRenders;\r\n\r\n        char[][] entitiesChars;\r\n        private bool MessageDoNotHide;\r\n        string message = null;\r\n        private bool waitingForMessageInput;\r\n        private Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase lastPhase;\r\n        private TextEntity messageEnt;\r\n\r\n        public InputHandling inputH = new InputHandling();\r\n        //public bool helpVisualizeRequest;\r\n        public HelpScreenIntegration help;\r\n        private bool attackMenu = false;\r\n\r\n        public BattleRender(BattleMain battleLogic, StageData stageData, PreviewSystem PreviewSystem)\r\n        {\r\n\r\n\r\n            string[] entityTexts = { \"@\", \"&\", \"%\", \"$\", \"O\", \"X\", \"J\", \"Y\", \"Z\", \"M\",\"C\", \"D\", \"E\" };\r\n            entitiesChars = new char[entityTexts.Length][];\r\n            for (int i = 0; i < entityTexts.Length; i++)\r\n            {\r\n                entitiesChars[i] = entityTexts[i].ToCharArray();\r\n            }\r\n\r\n            turnBaseTry = battleLogic;\r\n            this.stageData = stageData;\r\n            previewSystem = PreviewSystem;\r\n            textWorld = new TextWorld();\r\n            posAnim = textWorld.AddAnimation<global::Pidroh.TextRendering.PositionAnimation>(new PositionAnimation());\r\n            charByCharAnim = textWorld.AddAnimation<global::Pidroh.TextRendering.CharByCharAnimation>(new CharByCharAnimation());\r\n            delayAnim = textWorld.AddAnimation<global::Pidroh.TextRendering.DelaysAnimation>(new DelaysAnimation());\r\n            textWorld.Init(GameMain.Width, GameMain.Height);\r\n            TextBoard = textWorld.mainBoard;\r\n            //TextBoard = new TextBoard(70, 25);\r\n\r\n            //var posAnim = textWorld.AddAnimation(new PositionAnimation());\r\n            var blinkAnim = textWorld.AddAnimation<global::Pidroh.TextRendering.BlinkAnim>(new BlinkAnim());\r\n\r\n            battlerRenders = new List<TextEntity>();\r\n            UpdateBattleRenderCount();\r\n\r\n\r\n\r\n\r\n            messageEnt = textWorld.GetFreeEntity(40, 4);\r\n\r\n            turnBaseTry.happManager.AddHandler(new Happs.HappHandler(Pidroh.ConsoleApp.Turnbased.BattleMain.HappTag.AttackHit, (h) =>\r\n            {\r\n                var attacker = turnBaseTry.entities[h.GetAttribute_Int(1)];\r\n                int defenderEID = h.GetAttribute_Int(0);\r\n                Pidroh.ConsoleApp.Turnbased.BattleMain.BattleEntity defender = null;\r\n                if (defenderEID >= 0)\r\n                    defender = turnBaseTry.entities[defenderEID];\r\n                Pidroh.ConsoleApp.Turnbased.BattleMain.Element element = (Pidroh.ConsoleApp.Turnbased.BattleMain.Element)h.GetAttribute_Int(2);\r\n                TextEntity fe = GetProjTextEntity(element);\r\n\r\n                if (defender != null)\r\n                {\r\n                    var pos = attacker.PositionV2D;\r\n                    var pos2 = defender.PositionV2D;\r\n                    var xDis = Math.Abs(pos.X - pos2.X);\r\n                    float time = (float)xDis * 0.1f;\r\n\r\n\r\n                    posAnim.Add(fe.AnimBase(time), new PositionAnimation.PositionData(\r\n                        BattleEntityToScreenPosition(attacker.PositionV2D),\r\n                        BattleEntityToScreenPosition(defender.PositionV2D)));\r\n                }\r\n                else\r\n                {\r\n                    var pos = attacker.PositionV2D;\r\n                    var pos2 = pos;\r\n                    if (attacker.Type == BattleMain.EntityType.enemy)\r\n                        pos2.X = -1;\r\n                    else\r\n                        pos2.X = 6;\r\n                    var xDis = Math.Abs(pos.X - pos2.X);\r\n                    float time = (float)xDis * 0.1f;\r\n                    posAnim.Add(fe.AnimBase(time), new PositionAnimation.PositionData(\r\n                        BattleEntityToScreenPosition(pos),\r\n                        BattleEntityToScreenPosition(pos2)));\r\n                }\r\n\r\n\r\n\r\n\r\n            }));\r\n\r\n            turnBaseTry.happManager.AddHandler(new Happs.HappHandler(BattleMain.HappTag.AttackMiss, (h) =>\r\n            {\r\n\r\n                var attacker = turnBaseTry.entities[h.GetAttribute_Int(0)];\r\n                Pidroh.ConsoleApp.Turnbased.BattleMain.Element element = (Pidroh.ConsoleApp.Turnbased.BattleMain.Element)h.GetAttribute_Int(1);\r\n                TextEntity fe = GetProjTextEntity(element);\r\n                var pos = attacker.PositionV2D;\r\n                var pos2 = pos;\r\n                if (attacker.Type == BattleMain.EntityType.enemy)\r\n                    pos2.X = -1;\r\n                else\r\n                    pos2.X = 6;\r\n                var xDis = Math.Abs(pos.X - pos2.X);\r\n                float time = (float)xDis * 0.1f;\r\n                posAnim.Add(fe.AnimBase(time), new PositionAnimation.PositionData(\r\n                    BattleEntityToScreenPosition(pos),\r\n                    BattleEntityToScreenPosition(pos2)));\r\n            }));\r\n\r\n\r\n            moveChars = global::Bridge.Script.CallFor(new Dictionary<object, string>(),(_o3)=>{_o3.Add(BattleMain.MoveType.Fire,\"F\");_o3.Add(BattleMain.MoveType.Ice,\"I\");_o3.Add(BattleMain.MoveType.Thunder,\"T\");_o3.Add(BattleMain.MoveType.NormalShot,\"G\");_o3.Add(BattleMain.MoveType.MoveRight,Unicode.Rightarrow2+\"\");_o3.Add(BattleMain.MoveType.MoveUp,Unicode.Uparrow2+\"\");_o3.Add(BattleMain.MoveType.MoveDown,Unicode.Downarrow2+\"\");_o3.Add(BattleMain.MoveType.MoveLeft,Unicode.Leftarrow2+\"\");_o3.Add(BattleMain.MoveType.IceBomb,\"IB\");_o3.Add(BattleMain.MoveType.ThunderBomb,\"TB\");_o3.Add(BattleMain.MoveType.SummonEntity,\"SU\");_o3.Add(BattleMain.MoveType.DoNothing,\" \");_o3.Add(BattleMain.MoveType.DownFire,\"FD\");_o3.Add(BattleMain.MoveType.TripleFire,\"TF\");return _o3;});\r\n\r\n            moveDescriptions = global::Bridge.Script.CallFor(new Dictionary<object, string>(),(_o4)=>{_o4.Add(BattleMain.MoveType.Ice,\"Ice Shot\");_o4.Add(BattleMain.MoveType.Fire,\"Fire Shot\");_o4.Add(BattleMain.MoveType.Thunder,\"Thunder Shot\");_o4.Add(BattleMain.MoveType.IceBomb,\"Ice Bomb\");_o4.Add(BattleMain.MoveType.NormalShot,\"Gun\");_o4.Add(BattleMain.MoveType.MoveRight,Unicode.Rightarrow2+\"\");_o4.Add(BattleMain.MoveType.MoveUp,Unicode.Uparrow2+\"\");_o4.Add(BattleMain.MoveType.MoveDown,Unicode.Downarrow2+\"\");_o4.Add(BattleMain.MoveType.MoveLeft,Unicode.Leftarrow2+\"\");_o4.Add(BattleMain.MoveType.ThunderBomb,\"Thunder Bomb\");_o4.Add(BattleMain.MoveType.SummonEntity,\"Summon\");return _o4;});\r\n\r\n            var mesOnPos = new MessageOnPosition(this);\r\n\r\n            for (int i = 0; i < turnBaseTry.entities.Count; i++)\r\n            {\r\n                var e = turnBaseTry.entities[i];\r\n                if (e.Type == Pidroh.ConsoleApp.Turnbased.BattleMain.EntityType.hero)\r\n                {\r\n                    var pos = battlerRenders[i].GetPosition();\r\n                    //mesOnPos.MessageOnPos(BattleEntityToScreenPosition(turnBaseTry.entities[i].pos), \"YOU\");\r\n                    //MessageOnPos(Vector2D.Zero, \"YOU\");\r\n                }\r\n            }\r\n\r\n\r\n            //Console.ReadLine();\r\n        }\r\n\r\n\r\n\r\n        private void UpdateBattleRenderCount()\r\n        {\r\n            while (battlerRenders.Count < this.turnBaseTry.entities.Count)\r\n            {\r\n                TextEntity item = textWorld.GetFreeEntity(2, 2);\r\n                battlerRenders.Add(item);\r\n                item.SetPosition(BattleEntityToScreenPosition(turnBaseTry.entities[battlerRenders.Count - 1].pos));\r\n\r\n            }\r\n        }\r\n\r\n        internal string GetEntityName(int user)\r\n        {\r\n            Pidroh.ConsoleApp.Turnbased.BattleMain.BattleEntity gameEntity = turnBaseTry.entities[user];\r\n            var chars = GetChar(gameEntity);\r\n            string name = new string(chars);\r\n            if (gameEntity.graphicRepeatedIndex > 0)\r\n            {\r\n                return name + (gameEntity.graphicRepeatedIndex + 1);\r\n            }\r\n            else\r\n            {\r\n                return name;\r\n            }\r\n\r\n\r\n        }\r\n\r\n        public TextEntity GetProjTextEntity(Pidroh.ConsoleApp.Turnbased.BattleMain.Element element)\r\n        {\r\n            var fe = textWorld.GetTempEntity(1, 1);\r\n            fe.Origin.DrawChar(TextBoard.INVISIBLECHAR, 0, 0);\r\n            int elementColor = ElementToProjColor(element);\r\n            fe.Origin.SetBackColor(elementColor, 0, 0);\r\n            return fe;\r\n        }\r\n\r\n        public void Draw(float delta)\r\n        {\r\n\r\n            InputKey input = (InputKey)Input;\r\n            if (input != InputKey.NONE && waitingForMessageInput)\r\n            {\r\n                waitingForMessageInput = false;\r\n                message = null;\r\n            }\r\n            //if (input != InputKey.NONE) Console.WriteLine(input);\r\n            //int inputNumber = input - '0';\r\n            //if (debugOn && input == 'k')\r\n            //{\r\n            //    DebugExtra.DebugEx.Show();\r\n            //}\r\n\r\n            if (lastPhase != turnBaseTry.battleState.phase)\r\n            {\r\n                if (turnBaseTry.battleState.phase == Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase.PickHands)\r\n                {\r\n                    //ShowMessage(\"Pick your commands\", false, true);\r\n                    //TextBoard.SetAll(TextBoard.NOCHANGECHAR, TextBoard.NOCHANGECOLOR, Colors.FireAura);\r\n\r\n                }\r\n                if (lastPhase == Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase.PickHands)\r\n                {\r\n                    //Console.Write(\"X__X\");\r\n                    HideMessage();\r\n                    //TextBoard.SetAll(TextBoard.NOCHANGECHAR, TextBoard.NOCHANGECOLOR, 0);\r\n                }\r\n            }\r\n            lastPhase = turnBaseTry.battleState.phase;\r\n            if (inputPhases.Contains(turnBaseTry.battleState.phase))\r\n            {\r\n                if (keyDownUnicode >= 0)\r\n                {\r\n                    if (keyDownUnicode == 'p')\r\n                    {\r\n                        //Console.WriteLine(\"PREVIEW\");\r\n                        previewSystem.StartPreview();\r\n                        return;\r\n                    }\r\n                    if (keyDownUnicode == 'e' && HasAttacks())\r\n                    {\r\n                        attackMenu = !attackMenu;\r\n\r\n                    }\r\n                    \r\n                    if (attackMenu && keyDownUnicode == Unicode.Escape) {\r\n                        attackMenu = false;\r\n                    }\r\n                    var inputX = inputH.Inputted(keyDownUnicode, turnBaseTry.inputs);\r\n                    if (inputX.type == InputType.MiscBattle && inputX.arg1 == (int)MiscBattleInput.Help)\r\n                    {\r\n                        //helpVisualizeRequest = true;\r\n                        help.Show(this);\r\n                    }\r\n\r\n                    if (inputX.type != InputType.None) {\r\n                        \r\n                        turnBaseTry.InputDone(inputX);\r\n                    }\r\n                        \r\n                }\r\n                if (Keyboard.downUnicodes.Contains('c'))\r\n                {\r\n                    attackMenu = false;\r\n                }\r\n                else\r\n                {\r\n                    attackMenu = true;\r\n                }\r\n                if (turnBaseTry.inputs.inputForConfirmation.type != InputType.None)\r\n                {\r\n                    if (false)\r\n                    //if (turnBaseTry.inputs.inputForConfirmation.type == InputType.Move)\r\n                    {\r\n                        attackPreview.ShowPreview(0, turnBaseTry.inputs.inputForConfirmation.arg1);\r\n                        turnBaseTry.ConfirmInputStart();\r\n                    }\r\n                    else\r\n                    {\r\n                        attackPreview.End();\r\n                        turnBaseTry.InputConfirmed();\r\n                    }\r\n\r\n                }\r\n                else\r\n                {\r\n                    attackPreview.End();\r\n                }\r\n\r\n\r\n                //foreach (var item in moveKeys)\r\n                //{\r\n                //    if (item.Value == input)\r\n                //    {\r\n                //        turnBaseTry.InputDone(item.Key);\r\n                //    }\r\n                //}\r\n            }\r\n            UpdateBattleRenderCount();\r\n            DrawGraphics(delta);\r\n            if (CanAdvance_Logic())\r\n            {\r\n                if (turnBaseTry.battleState.phase != Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase .ExecuteMove && previewSystem.previewActive)\r\n                {\r\n                    previewSystem.EndPreview();\r\n                }\r\n                switch (turnBaseTry.battleState.phase)\r\n                {\r\n                    case BattleMain.BattlePhase.EnemyMoveChoice:\r\n                        turnBaseTry.Tick();\r\n                        break;\r\n                    case BattleMain.BattlePhase.HandRecharge:\r\n                        turnBaseTry.Tick();\r\n                        break;\r\n                    case BattleMain.BattlePhase.PickHands:\r\n\r\n                        break;\r\n                    case BattleMain.BattlePhase.ExecuteMove:\r\n                        //System.Threading.Thread.Sleep(300);\r\n                        turnBaseTry.Tick();\r\n                        break;\r\n                    default:\r\n\r\n                        break;\r\n                }\r\n            }\r\n            //UpdateBattleRenderCount();\r\n            //DrawGraphics(delta);\r\n\r\n        }\r\n\r\n        public bool CanAdvanceGraphics()\r\n        {\r\n            return textWorld.IsDone() && !waitingForMessageInput;\r\n        }\r\n\r\n        private bool CanAdvance_Logic()\r\n        {\r\n            return CanAdvanceGraphics() && HappHandling.IsDone();\r\n        }\r\n\r\n        public void ShowMessage(string s, bool waitForInput = true, bool doNotHide = false)\r\n        {\r\n            this.MessageDoNotHide = doNotHide;\r\n            message = s;\r\n            messageEnt.Origin.ResetInvisible();\r\n            float timeToWrite = message.Length * 0.015f;\r\n            if (timeToWrite > 0.4f) timeToWrite = 0.4f;\r\n            charByCharAnim.Add(messageEnt.AnimBase(timeToWrite), new CharByCharAnimation.CharByCharData(0, message.Length + 1));\r\n            delayAnim.Delay(timeToWrite + 0.8f);\r\n\r\n            //waitingForMessageInput = waitForInput;\r\n            //Console.Write(\"M: \"+s);\r\n        }\r\n\r\n        public void HideMessage()\r\n        {\r\n            message = null;\r\n            waitingForMessageInput = false;\r\n            //Console.Write(\"M: \"+s);\r\n        }\r\n\r\n        public void ShowBattleMessage(string s)\r\n        {\r\n            if (!turnBaseTry.BattleDecided())\r\n                ShowMessage(s);\r\n            //Console.Write(\"M: \"+s);\r\n        }\r\n\r\n        public void DrawGraphics(float delta)\r\n        {\r\n            mouseHover.mouseHovers.Clear();\r\n            turnBaseTry.Update(delta);\r\n            //clear grid\r\n            TextBoard.Reset();\r\n\r\n            if (inputPhases.Contains(turnBaseTry.battleState.phase))\r\n            {\r\n                TextBoard.SetAll(TextBoard.NOCHANGECHAR, TextBoard.NOCHANGECOLOR, Colors.BackgroundInput);\r\n            }\r\n\r\n            int controlsY = gridScale * 3 + 10 + 3 + 2;\r\n\r\n            int enemyGridOffX = gridScale * 3;\r\n            bool drawDot = false;\r\n            TextBoard.DrawRepeated(' ', gridOffsetx, gridOffsety, gridScale * 6, gridScale * 3, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n            for (int i = 0; i < 3 * gridScale; i++)\r\n            {\r\n                for (int j = 0; j < 3 * gridScale; j++)\r\n                {\r\n                    if (drawDot)\r\n                    {\r\n                        TextBoard.DrawChar(\r\n                        '.',\r\n                        gridOffsetx + i,\r\n                        gridOffsety + j, Colors.GridHero);\r\n                        TextBoard.DrawChar(\r\n                            '.',\r\n                            gridOffsetx + i + enemyGridOffX,\r\n                            gridOffsety + j, Colors.GridEnemy);\r\n                    }\r\n                    if (i % gridScale == 0 && j % gridScale == 0)\r\n                    {\r\n\r\n                        TextBoard.DrawGrid(i + gridOffsetx + enemyGridOffX, j + gridOffsety, gridScale, gridScale, Colors.GridEnemy);\r\n                        TextBoard.DrawGrid(i + gridOffsetx, j + gridOffsety, gridScale, gridScale, Colors.GridHero);\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (int i = 0; i < turnBaseTry.entities.Count; i++)\r\n            {\r\n\r\n                BattleMain.BattleEntity gameEntity = turnBaseTry.entities[i];\r\n\r\n                var ec = GetChar(gameEntity);\r\n\r\n                var pos = gameEntity.PositionV2D;\r\n                var screenPos = BattleEntityToScreenPosition((BaseUtils.Vector2D)pos);\r\n                if (gameEntity.Type == Pidroh.ConsoleApp.Turnbased.BattleMain.EntityType.paneleffect)\r\n                {\r\n                    screenPos.Y = screenPos.Y + 1;\r\n                    screenPos.X = screenPos.X - 1;\r\n                }\r\n                if(textWorld.IsDone() && HappHandling.IsDone())\r\n                    battlerRenders[i].Origin.Position = screenPos;\r\n                if (battlerRenders[i].Origin.Position != screenPos && textWorld.IsDone())\r\n                {\r\n                    //battlerRenders[i].Origin.Position = screenPos;\r\n                    //float time = 0.15f;\r\n                    ////time = 5;\r\n                    //posAnim.Add(battlerRenders[i].AnimBase(time), new PositionAnimation.PositionData(battlerRenders[i].Origin.Position, screenPos, true));\r\n                }\r\n\r\n                var c = Colors.Hero;\r\n                if (gameEntity.Type == Pidroh.ConsoleApp.Turnbased.BattleMain.EntityType.enemy) c = Colors.Enemy;\r\n                if (gameEntity.Type == Pidroh.ConsoleApp.Turnbased.BattleMain.EntityType.pickup) c = Colors.inputKey;\r\n                if (gameEntity.Dead)\r\n                    c = TextBoard.INVISIBLECOLOR;\r\n                int bc = TextBoard.INVISIBLECOLOR;\r\n\r\n                if (gameEntity.Alive)\r\n                {\r\n                    Pidroh.ConsoleApp.Turnbased.BattleMain.Element element = gameEntity.element;\r\n                    if (element != Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None)\r\n                        c = ElementToAuraColor(element);\r\n\r\n                }\r\n                if (gameEntity.Dead)\r\n                {\r\n                    for (int j = 0; j < ec.Length + 1; j++)\r\n                    {\r\n                        battlerRenders[i].Origin.DrawChar(TextBoard.INVISIBLECHAR, j, 0, c, bc);\r\n                    }\r\n\r\n                }\r\n                else\r\n                {\r\n                    battlerRenders[i].Origin.Draw(ec, 0, 0, c, bc);\r\n                    if (gameEntity.graphicRepeatedIndex > 0)\r\n                        battlerRenders[i].Origin.DrawOneDigit(gameEntity.graphicRepeatedIndex + 1, 0 + ec.Length, 0, c, bc);\r\n                }\r\n\r\n\r\n            }\r\n\r\n\r\n            int textBoardHeight = 3 * gridScale;\r\n\r\n            {\r\n                //int y = 2;\r\n                //int x = 6 * gridScale + 20;\r\n\r\n                int x = 3;\r\n\r\n                if (inputPhases.Contains(turnBaseTry.battleState.phase))\r\n                {\r\n                    DrawControls(controlsY, 7);\r\n                    if (turnBaseTry.timeToChoose > 0)\r\n                    {\r\n                        float ratio = turnBaseTry.timeToChoose / turnBaseTry.timeToChooseMax;\r\n                        TextBoard.DrawRepeated(' ', x, controlsY + 16, (int)(ratio * 15), 1, Colors.Board, Colors.GridHero);\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    TextBoard.DrawRepeated(' ', x - 1, controlsY - 1, 15, 15, Colors.Board);\r\n                }\r\n            }\r\n\r\n            int turnOrderX = 6 * gridScale + 5;\r\n            int turnOrderY = 2;\r\n            turnOrderX = 2;\r\n            turnOrderY = 3 * gridScale + 1;\r\n            if (inputPhases.Contains(turnBaseTry.battleState.phase))\r\n                turnOrderY += 3;\r\n\r\n            DrawTurnOrder(turnOrderX, turnOrderY);\r\n            if (!stageData.hideLifeUI)\r\n            {\r\n                DrawLife(turnOrderX + 14, turnOrderY);\r\n            }\r\n\r\n            {\r\n                const int X = 2;\r\n                //const int Y = 16;\r\n                messageEnt.SetPosition(X, controlsY - 2);\r\n                if (message != null && (!CanAdvanceGraphics()))\r\n                {\r\n                    //TextBoard.DrawGrid(\r\n                    //    messageEnt.Origin.Position.XInt, messageEnt.Origin.Position.YInt, \r\n                    //    messageEnt.Width, messageEnt.Height, Colors.Board);\r\n                    //messageEnt.Origin.DrawGrid(0, 0, 40, 4, Colors.Board);\r\n                    messageEnt.Origin.DrawWithLinebreaks(message, 1, 0, 1, Colors.HeroTurn);\r\n                }\r\n                else\r\n                {\r\n                    if (!MessageDoNotHide)\r\n                    {\r\n                        message = null;\r\n                        messageEnt.Origin.SetAll(TextBoard.INVISIBLECHAR);\r\n                    }\r\n\r\n                    //TextBoard.DrawRepeated(' ',X, Y, 40, 4, Colors.Board);\r\n                }\r\n            }\r\n            TextBoard.CursorNewLine(1);\r\n            TextBoard.CursorNewLine(1);\r\n            //textBoard.Draw_Cursor(turnBaseTry.battleState.phase.ToString());\r\n\r\n\r\n            textWorld.DrawChildren();\r\n            textWorld.TryEndAnimations();\r\n            textWorld.AdvanceTime(delta);\r\n\r\n            if (CanAdvanceGraphics())\r\n            {\r\n                HappHandling.Handle();\r\n                if (CanAdvanceGraphics())\r\n                {\r\n                    turnBaseTry.happManager.TryHandle();\r\n                }\r\n            }\r\n            //if (CanAdvance())\r\n            //{\r\n\r\n            //}\r\n        }\r\n\r\n        public static int ElementToAuraColor(Pidroh.ConsoleApp.Turnbased.BattleMain.Element element)\r\n        {\r\n            int bc = TextBoard.INVISIBLECOLOR;\r\n            if (element == Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Fire)\r\n            {\r\n                bc = Colors.FireAura;\r\n            }\r\n            if (element == Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Ice)\r\n            {\r\n                bc = Colors.IceAura;\r\n            }\r\n            if (element == Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Thunder)\r\n            {\r\n                bc = Colors.ThunderAura;\r\n            }\r\n\r\n            return bc;\r\n        }\r\n\r\n        public static int ElementToProjColor(Pidroh.ConsoleApp.Turnbased.BattleMain.Element element)\r\n        {\r\n            int bc = Colors.inputKey;\r\n            if (element == Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Fire)\r\n            {\r\n                bc = Colors.FireShot;\r\n            }\r\n            if (element == Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Ice)\r\n            {\r\n                bc = Colors.IceAura;\r\n            }\r\n            if (element == Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Thunder)\r\n            {\r\n                bc = Colors.ThunderAura;\r\n            }\r\n\r\n            return bc;\r\n        }\r\n\r\n        public Vector2D BattleEntityToScreenPosition(BaseUtils.Vector2D pos)\r\n        {\r\n            var x = pos.X;\r\n            var y = pos.Y;\r\n            var screenPos = new BaseUtils.Vector2D(x * gridScale + gridScale / 2 + gridOffsetx, 2 * gridScale - y * gridScale + gridScale / 2 + gridOffsety);\r\n            return screenPos;\r\n        }\r\n\r\n        private void DrawControls(int y, int x)\r\n        {\r\n            //TextBoard.DrawGrid(x - 2, y - 1, 20, 15, Colors.Board);\r\n            //TextBoard.Draw(\"Controls\", x, y, );\r\n            TextBoard.SetCursorAt(x+5, y);\r\n            TextBoard.Draw_Cursor(\"Controls\", Colors.WindowLabel);\r\n            TextBoard.CursorNewLine(x);\r\n\r\n\r\n            //InputTags inputTag = InputTags.MOVEFIX;\r\n            int yOff = 0;\r\n\r\n            if (!attackMenu) {\r\n                yOff = DrawInputs_Fix(y, x, InputTags.MOVEFIX, yOff);\r\n\r\n                //if (HasAttacks())\r\n                //    GameMain.DrawInput(x, y + 2 + yOff, 'e', \"ATTACK\", TextBoard);\r\n                //else\r\n                //    DrawInput(x, y + 2 + yOff, \"\", \"\", TextBoard);\r\n                //yOff += 2;\r\n\r\n                if(PreviewVisible())\r\n                    GameMain.DrawInput(x, y + 2 + yOff, 'p', \"PREVIEW\", TextBoard);\r\n                else\r\n                    DrawInput(x, y + 2 + yOff, \"\", \"\", TextBoard);\r\n                yOff += 2;\r\n\r\n                //yOff++;\r\n                yOff = DrawInputs_Fix(y, x, InputTags.MISC, yOff);\r\n                //yOff++;\r\n                //yOff = DrawInputs_Fix(y, x, InputTags.MOVEUNFIX, yOff);\r\n                return;\r\n            }\r\n\r\n            \r\n\r\n            int attackNumber = 1;\r\n            for (int i = 0; i < turnBaseTry.inputs.inputs.Count; i++)\r\n            {\r\n                int x2 = x;\r\n                int y2 = y + 2 + yOff;\r\n                var input = turnBaseTry.inputs.inputs[i];\r\n\r\n                if (turnBaseTry.inputs.TagIs(i, InputTags.MOVEUNFIX))\r\n                {\r\n                    yOff++;\r\n                    yOff++;\r\n                    int unicode = '0' + attackNumber;\r\n                    attackNumber++;\r\n                    mouseHover.mouseHovers.Add(new MouseHover(new Rect(x2 - 2, y2, 20, 1), 0, input.arg1));\r\n                    //TextBoard.DrawChar('[', x2 - 1, y2, Colors.HeroTurn);\r\n\r\n                    //TextBoard.DrawChar(']', x2 + lengthBname, y2, Colors.HeroTurn);\r\n\r\n                    string description = string.Empty;\r\n                    if (input.type == InputType.Move)\r\n                    {\r\n                        Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType m = (Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType)input.arg1;\r\n                        moveDescriptions.TryGetValue(m, out description);\r\n                        if (description == null)\r\n                        {\r\n                            description = m.ToString();\r\n                        }\r\n\r\n                    }\r\n                    if (input.type == InputType.MiscBattle)\r\n                    {\r\n                        MiscBattleInput arg1 = (MiscBattleInput)input.arg1;\r\n                        description = miscDescriptions[arg1];\r\n                    }\r\n                    var TextBoard = this.TextBoard;\r\n                    GameMain.DrawInput(x2, y2, unicode, description, TextBoard);\r\n\r\n                }\r\n\r\n                //var c = moveChars[move];\r\n                //DrawMove(move, Colors.HeroTurn);\r\n                //TextBoard.Draw(c, x2 + 3, y2, Colors.HeroTurn);\r\n                //TextBoard.DrawWithGrid(c+\"\", x2, y + 2, Colors.HeroTurn);\r\n            }\r\n            GameMain.DrawInput(x, y + 2 + yOff, 'c', \"CONTROLS\", TextBoard);\r\n        }\r\n\r\n        private bool HasAttacks()\r\n        {\r\n            for (int i = 0; i < turnBaseTry.inputs.inputs.Count; i++)\r\n            {\r\n                if (turnBaseTry.inputs.TagIs(i, InputTags.MOVEUNFIX)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private bool PreviewVisible()\r\n        {\r\n            foreach (var e in turnBaseTry.entities)\r\n            {\r\n                if (e.Type == Pidroh.ConsoleApp.Turnbased.BattleMain.EntityType.enemy) return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private int DrawInputs_Fix(int y, int x, InputTags inputTag, int yOff)\r\n        {\r\n\r\n            for (int i = 0; i < turnBaseTry.inputs.inputs.Count; i++)\r\n            {\r\n                int x2 = x;\r\n                int y2 = y + 2 + yOff;\r\n                var input = turnBaseTry.inputs.inputs[i];\r\n\r\n                if (turnBaseTry.inputs.TagIs(i, inputTag))\r\n                {\r\n                    var unicode = inputH.GetFixedMoveUnicode(input);\r\n                    string forceInputLabel = null;\r\n                    string forceCommandLabel = null;\r\n                    bool movementCommand = unicode == 'w';\r\n                    if (movementCommand)\r\n                    {\r\n                        forceInputLabel = UIReusable.WASD;\r\n                        forceCommandLabel = UIReusable.arrows;\r\n                    }\r\n                    if (unicode == 'a' || unicode == 's' || unicode == 'd')\r\n                    {\r\n                        continue;\r\n                    }\r\n                    yOff++;\r\n                    yOff++;\r\n\r\n\r\n\r\n                    //TextBoard.DrawChar('[', x2 - 1, y2, Colors.HeroTurn);\r\n\r\n                    //TextBoard.DrawChar(']', x2 + lengthBname, y2, Colors.HeroTurn);\r\n\r\n                    string description = string.Empty;\r\n                    if (input.type == InputType.Move)\r\n                    {\r\n                        if (forceCommandLabel != null)\r\n                        {\r\n                            description = forceCommandLabel;\r\n                        }\r\n                        else\r\n                        {\r\n                            Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType m = (Pidroh.ConsoleApp.Turnbased.BattleMain.MoveType)input.arg1;\r\n                            moveDescriptions.TryGetValue(m, out description);\r\n                            if (description == null)\r\n                            {\r\n                                description = m.ToString();\r\n                            }\r\n                        }\r\n\r\n\r\n                    }\r\n                    if (input.type == InputType.MiscBattle)\r\n                    {\r\n                        MiscBattleInput arg1 = (MiscBattleInput)input.arg1;\r\n                        description = miscDescriptions[arg1];\r\n                        mouseHover.mouseHovers.Add(new MouseHover(new Rect(x2 - 2, y2, 20, 1), 1, input.arg1));\r\n                    }\r\n                    else\r\n                    {\r\n                        if (movementCommand)\r\n                            mouseHover.mouseHovers.Add(new MouseHover(new Rect(x2 - 2, y2, 20, 1), 2, 0));\r\n                        else\r\n                            mouseHover.mouseHovers.Add(new MouseHover(new Rect(x2 - 2, y2, 20, 1), 0, input.arg1));\r\n                    }\r\n                    var TextBoard = this.TextBoard;\r\n                    if (forceInputLabel == null)\r\n                    {\r\n                        DrawInput(x2, y2, unicode, description, TextBoard);\r\n                    }\r\n                    else\r\n                    {\r\n                        DrawInput(x2, y2, forceInputLabel, description, TextBoard);\r\n                    }\r\n                    \r\n\r\n                }\r\n\r\n                //var c = moveChars[move];\r\n                //DrawMove(move, Colors.HeroTurn);\r\n                //TextBoard.Draw(c, x2 + 3, y2, Colors.HeroTurn);\r\n                //TextBoard.DrawWithGrid(c+\"\", x2, y + 2, Colors.HeroTurn);\r\n            }\r\n\r\n            return yOff;\r\n        }\r\n\r\n        public static void DrawInput(int x2, int y2, int keyUnicode, string description, TextBoard TextBoard)\r\n        {\r\n            int x3 = DrawInpCommon(x2, y2, description, TextBoard);\r\n\r\n            TextBoard.DrawUnicodeLabel(keyUnicode, x3, y2, Colors.inputKey);\r\n            //TextBoard.DrawRect(TextBoard.NOCHANGECHAR, barx, y2, 6+x3-barx, 1, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n            //TextBoard.DrawRect(TextBoard.NOCHANGECHAR, x2, y2, 6 + x3 - x2, 1, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n        }\r\n\r\n        private static int DrawInpCommon(int x2, int y2, string description, TextBoard TextBoard)\r\n        {\r\n            DrawBrownStripe(y2, TextBoard);\r\n            TextBoard.Draw(description, x2, y2, Colors.InputDescription);\r\n            int x3 = x2 + 14;\r\n\r\n            //int offb = 7;\r\n            int barx = x2 + description.Length;\r\n            TextBoard.DrawRect(TextBoard.NOCHANGECHAR, x3, y2, 6, 1, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n            return x3;\r\n        }\r\n\r\n        \r\n\r\n        public static void DrawStrippedText(int x, int y, string description, TextBoard TextBoard)\r\n        {\r\n            DrawBrownStripe(y, TextBoard);\r\n            TextBoard.Draw(description, x, y, Colors.InputDescription);\r\n        }\r\n\r\n        public static void DrawSubText(int x, int y, string description, TextBoard TextBoard)\r\n        {\r\n            TextBoard.DrawRect(TextBoard.NOCHANGECHAR, x, y, 6, 1, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n            TextBoard.Draw(description, x+1, y, Colors.inputKey);\r\n        }\r\n\r\n        public static void DrawInput(int x2, int y2, string keyLabel, string description, TextBoard TextBoard)\r\n        {\r\n            int x3 = DrawInpCommon(x2, y2, description, TextBoard);\r\n            TextBoard.Draw(keyLabel, x3, y2, Colors.inputKey);\r\n            //TextBoard.DrawRect(TextBoard.NOCHANGECHAR, barx, y2, 6 + x3 - barx, 1, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n            //TextBoard.DrawRect(TextBoard.NOCHANGECHAR, x2, y2, 6 + x3 - x2, 1, TextBoard.NOCHANGECOLOR, Colors.BackBattle);\r\n\r\n        }\r\n\r\n        private void DrawLife(int turnOrderX, int turnOrderY)\r\n        {\r\n            //TextBoard.DrawGrid(turnOrderX - 1, turnOrderY - 1, 20, 9, Colors.WindowLabel);\r\n            TextBoard.SetCursorAt(turnOrderX + 1, turnOrderY);\r\n            if (turnBaseTry.battleState.phase == Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase.PickHands)\r\n                TextBoard.Draw_Cursor(\"Life\", Colors.WindowLabel);\r\n            TextBoard.SetCursorAt(turnOrderX + 8, turnOrderY);\r\n            if (turnBaseTry.battleState.phase == Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase.PickHands)\r\n                TextBoard.Draw_Cursor(\"Element\", Colors.WindowLabel);\r\n            int index = -1; //using this because not all units get drawn\r\n            for (int i = 0; i < 4; i++)\r\n            {\r\n                int xOff = turnOrderX + 1;\r\n                int yOff = turnOrderY + 2 + i * 2;\r\n                TextBoard.DrawRect(TextBoard.NOCHANGECHAR, xOff, yOff, 4, 1, TextBoard.NOCHANGECOLOR, BattleRender.Colors.BackBattle);\r\n                TextBoard.DrawRect(TextBoard.NOCHANGECHAR, xOff+7, yOff, 8, 1, TextBoard.NOCHANGECOLOR, BattleRender.Colors.BackBattle);\r\n            }\r\n            for (int i = 0; i < turnBaseTry.entities.Count; i++)\r\n            {\r\n                if (i >= turnBaseTry.entities.Count)\r\n                {\r\n                    continue;\r\n                }\r\n                BattleMain.BattleEntity e = turnBaseTry.entities[i];\r\n                if (!e.drawLife)\r\n                {\r\n                    continue;\r\n                }\r\n                if (!e.Dead)\r\n                {\r\n                    index++;\r\n                    int xOff = turnOrderX + 1;\r\n                    int yOff = turnOrderY + 2 + index * 2;\r\n                    int color = Colors.HeroTurn;\r\n                    if (e.Type == BattleMain.EntityType.enemy)\r\n                    {\r\n                        color = Colors.EnemyTurn;\r\n                    }\r\n                    if (e.element != Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None)\r\n                        color = ElementToAuraColor(e.element);\r\n                    //TextBoard.DrawOneDigit_Cursor((int)e.life.Val);\r\n\r\n                    //DrawEntityChar(e, color, xOff, yOff);\r\n                    //TextBoard.DrawChar(GetChar(e), xOff, turnOrderY + 2, color);\r\n                    TextBoard.DrawTwoDigits((int)e.life, xOff, yOff, color);\r\n                    string element = string.Empty;\r\n                    switch (e.element)\r\n                    {\r\n                        case Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Fire:\r\n                            element = \"Fire\";\r\n                            break;\r\n                        case Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Ice:\r\n                            element = \"Ice\";\r\n                            break;\r\n                        case Pidroh.ConsoleApp.Turnbased.BattleMain.Element.Thunder:\r\n                            element = \"Thunder\";\r\n                            break;\r\n                        case Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None:\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    var eColor = ElementToAuraColor(e.element);\r\n\r\n                    TextBoard.Draw(element, xOff + 7, yOff, eColor);\r\n                }\r\n\r\n                //TextBoard.DrawOneDigit_Cursor((int)e.life.Val);\r\n\r\n                //TextBoard.CursorNewLine(x: 1);\r\n            }\r\n        }\r\n\r\n        private void DrawBrownStripe(int yOff)\r\n        {\r\n            DrawBrownStripe(yOff, TextBoard);\r\n        }\r\n\r\n        static private void DrawBrownStripe(int yOff, TextBoard textBoard)\r\n        {\r\n            textBoard.DrawRect(TextBoard.NOCHANGECHAR, 0, yOff, textBoard.Width, 1, TextBoard.NOCHANGECOLOR, BattleRender.Colors.BackStripe);\r\n        }\r\n\r\n        private void DrawTurnOrder(int turnOrderX, int turnOrderY, bool horizontal = true)\r\n        {\r\n            Value turnsPerPhase = turnBaseTry.battleState.turnsPerPhase;\r\n            TextBoard.SetCursorAt(turnOrderX + 3, turnOrderY);\r\n            if (turnBaseTry.battleState.phase == Pidroh.ConsoleApp.Turnbased.BattleMain.BattlePhase.PickHands)\r\n                TextBoard.Draw_Cursor(\"Turn\", Colors.WindowLabel);\r\n\r\n            int drawingId = -1;\r\n            for (int i = 0; i < 4; i++)\r\n            {\r\n                int yOff = turnOrderY + 2 + i * 2;\r\n                DrawBrownStripe(yOff, TextBoard);\r\n                for (int j = 0; j < 3; j++)\r\n                {\r\n                    int xOff = turnOrderX + j * 3 + 3;\r\n                    \r\n\r\n                    TextBoard.DrawRect(TextBoard.NOCHANGECHAR, xOff, yOff, 2, 1, TextBoard.NOCHANGECOLOR, BattleRender.Colors.BackBattle);\r\n                }\r\n            }\r\n            for (int i = 0; i < turnBaseTry.entities.Count; i++)\r\n            {\r\n\r\n                BattleMain.BattleEntity e = turnBaseTry.entities[i];\r\n                if (!e.drawTurn)\r\n                {\r\n                    continue;\r\n                }\r\n                if (!e.Dead)\r\n                {\r\n                    drawingId++;\r\n                    int color = Colors.HeroTurn;\r\n                    if (e.Type == BattleMain.EntityType.enemy)\r\n                    {\r\n                        color = Colors.EnemyTurn;\r\n                    }\r\n                    if (e.element != Pidroh.ConsoleApp.Turnbased.BattleMain.Element.None)\r\n                        color = ElementToAuraColor(e.element);\r\n\r\n                    //TextBoard.DrawOneDigit_Cursor((int)e.life.Val);\r\n                    int xOff = turnOrderX + 1 + drawingId * 3;\r\n                    int yEntity = turnOrderY + 2;\r\n                    int yFirstMove = turnOrderY + 3;\r\n                    int xFirstMove = xOff;\r\n                    if (horizontal)\r\n                    {\r\n                        xOff = turnOrderX;\r\n                        yEntity = turnOrderY + 2 + drawingId * 2;\r\n                        yFirstMove = yEntity;\r\n                        xFirstMove = turnOrderX + 3;\r\n                    }\r\n                    DrawEntityChar(e, color, xOff, yEntity);\r\n\r\n                    TextBoard.SetCursorAt(xFirstMove, yFirstMove);\r\n\r\n                    for (int i2 = 0; i2 < turnsPerPhase; i2++)\r\n                    {\r\n                        int color2 = color;\r\n                        int backColor = Colors.BackCommand;\r\n                        if (turnBaseTry.battleState.phase == BattleMain.BattlePhase.ExecuteMove)\r\n                        {\r\n                            if (drawingId == turnBaseTry.battleState.actingEntity && i2 == turnBaseTry.battleState.turn)\r\n                            {\r\n                            }\r\n                            //color2 = Colors.Hero;\r\n                            else\r\n                            {\r\n                                backColor = Colors.BackBattle;\r\n                                color2 = Colors.InputDescription;\r\n                            }\r\n\r\n                        }\r\n\r\n                        if (i2 < turnsPerPhase)\r\n                        {\r\n                            string c = GetCharOfMove(e, i2);\r\n                            mouseHover.mouseHovers.Add(new MouseHover(new Rect(\r\n                                TextBoard.CursorX,\r\n                                TextBoard.CursorY,\r\n                                c.Length,\r\n                                1\r\n                                ),\r\n                                0, e.moves[i2])); //add here...? @_@\r\n\r\n                            TextBoard.Draw_Cursor(c, color2);\r\n                            if (horizontal)\r\n                            {\r\n                                for (int j = c.Length; j < 3; j++)\r\n                                {\r\n                                    TextBoard.AdvanceCursor();\r\n                                }\r\n\r\n\r\n\r\n\r\n                            }\r\n\r\n                            //TextBoard.Draw_Cursor(' ');\r\n                        }\r\n                        else\r\n                        {\r\n                            TextBoard.Draw_Cursor(' ', color, Colors.BackCommand);\r\n                        }\r\n                        if (horizontal)\r\n                        {\r\n\r\n                        }\r\n                        else\r\n                        {\r\n                            TextBoard.CursorNewLine(x: xFirstMove);\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n                //TextBoard.CursorNewLine(x: 1);\r\n            }\r\n        }\r\n\r\n        private void DrawEntityChar(Pidroh.ConsoleApp.Turnbased.BattleMain.BattleEntity e, int color, int x, int y)\r\n        {\r\n            char[] chars = GetChar(e);\r\n\r\n            TextBoard.Draw(chars, x, y, color);\r\n            if (e.graphicRepeatedIndex > 0)\r\n            {\r\n                TextBoard.DrawOneDigit(e.graphicRepeatedIndex + 1, x + chars.Length, y, color);\r\n            }\r\n        }\r\n\r\n        private string GetCharOfMove(BattleMain.BattleEntity e, int i2)\r\n        {\r\n\r\n\r\n            float val = e.moves[i2];\r\n            if (val >= 0)\r\n                return moveChars[(BattleMain.MoveType)val];\r\n            else\r\n                return \" \";\r\n        }\r\n\r\n        public char[] GetChar(BattleMain.BattleEntity gameEntity)\r\n        {\r\n            return entitiesChars[gameEntity.graphic];\r\n\r\n        }\r\n\r\n        private void DrawMove(Value move, int color)\r\n        {\r\n            if (move.Val >= 0)\r\n            {\r\n                BattleMain.MoveType m = (BattleMain.MoveType)move.Val;\r\n                DrawMove(m, color);\r\n            }\r\n            else\r\n            {\r\n                TextBoard.Draw_Cursor(' ');\r\n            }\r\n\r\n        }\r\n\r\n        private void DrawMove(BattleMain.MoveType move, int color)\r\n        {\r\n            var c = moveChars[move];\r\n            TextBoard.Draw_Cursor(c, color);\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return TextBoard;\r\n        }\r\n\r\n        public static class Colors\r\n        {\r\n            public const int GridHero = 1;\r\n            public const int GridEnemy = 2;\r\n            public const int Hero = 3;\r\n            public const int Enemy = 4;\r\n            public const int HeroTurn = 5;\r\n            public const int EnemyTurn = 6;\r\n            public const int inputKey = 7;\r\n            public const int Board = 8;\r\n            public const int WindowLabel = 9;\r\n            internal static int FireAura = 10;\r\n            internal static int IceAura = 11;\r\n            internal static int ThunderAura = 12;\r\n            internal static int FireShot = 13;\r\n            internal static int IceShot = 14;\r\n            internal static int ThunderShot = 15;\r\n            public const int BackgroundInput = 16;\r\n            public const int InputDescription = 17;\r\n            internal static int BackBattle = 18;\r\n            internal static int BackCommand = 19;\r\n            internal const int BackStripe = 20;\r\n        }\r\n\r\n        public enum InputKey\r\n        {\r\n            NONE, LEFT, RIGHT, DOWN, UP, FIRE, REDO, DONE,\r\n            ICE,\r\n            THUNDER,\r\n            NORMALSHOT\r\n        }\r\n\n\r\n\r\n    \nprivate int __Property__Initializer__keyDownUnicode=-1;}\r\n\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\nusing Pidroh.BaseUtils;\r\nusing Pidroh.ECS;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing Pidroh.TurnBased.TextRendering;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class GameMain : ITextScreen_\r\n    {\r\n        private BattleMain battleMain;\r\n        private BattleRender battleRender;\r\n        private ModeSelectionScreen modeSelectionScreen;\r\n        ITextScreen_ mainDraw;\r\n        private HelpScreen helpScreen;\r\n        HelpScreenIntegration helpInt = new HelpScreenIntegration();\r\n        private ResultScreen resultScreen;\r\n        int stageId;\r\n        int stageGroupId = -1;\r\n        //int stageGroup = 0;\r\n        int[] enemyAmount = new int[] { 1, 1, 2, 1, 2, 3, 2, 3, 1, 2, 3, 3 };\r\n        int[] turnAmount = new int[] { 2, 4, 2, 6, 4, 2, 6, 4, 8, 8, 6, 8 };\r\n        private MouseHoverText mouseHover;\r\n        public StageToBattle stageToBattle = new StageToBattle();\r\n        List<StageProgressPersistence> stageProgressPersistence = new List<StageProgressPersistence>();\r\n        public KeyboardIO Keyboard { set; get; }\r\n\r\n        public GameMain()\r\n        {\r\n            modeSelectionScreen = new ModeSelectionScreen();\r\n            stageSelecScreen = new StageSelectionScreen();\r\n            stageGroupSelection = new StageGroupSelectionScreen();\r\n\r\n            Reset();\r\n            modeSelectionScreen.mode = 1;\r\n            modeSelectionScreen.wannaLeave = 1;\r\n            mainDraw = modeSelectionScreen;\r\n\r\n            \r\n\r\n\r\n\r\n            //Reset();\r\n        }\r\n\r\n        private void Reset()\r\n        {\r\n            //var moveRenderInfo = new MoveRenderInfo();\r\n            //moveRenderInfo.AddMoveNames();\r\n            string[] moveDescriptions = new string[] {\r\n                \"\",\r\n                \"Move up\",\r\n                \"Move left\",\r\n                \"Move down\",\r\n                \"Move right\",\r\n                \"Shoots forward\",\r\n                \"Shoots fire forward\",\r\n                \"Shoots ice forward\",\r\n                \"Shoots thunder forward\",\r\n                \"Throws ice bomb three squares forward\",\r\n                \"Throws thunder bomb three squares forward\",\r\n                \"Summons another enemy\",\r\n                \"Shoot, down, shoot\",\r\n                \"Shoots in three lines around user\",\r\n            };\r\n\r\n            int mode = modeSelectionScreen.mode;\r\n            bool timeAttack = modeSelectionScreen.timeAttack;\r\n\r\n            var ecs = ECSManager.Create();\r\n\r\n            StageDataCreator sdc = new StageDataCreator(ecs);\r\n\r\n            //var stages = ecs.QuickAccessor1<StageData>();\r\n            var groups = ecs.QuickAccessor1<StageDataGroup>();\r\n            var group = groups.Comp1(0);\r\n            if (stageGroupId >= 0)\r\n            {\r\n                group = groups.Comp1(stageGroupId);\r\n            }\r\n\r\n            stageSelecScreen.stageGroup = group;\r\n\r\n            stageId = stageSelecScreen.chosenStage;\r\n            if (stageSelecScreen.chosenStage < 0)\r\n            {\r\n                stageId = 0;\r\n            }\r\n            int d = stageId;\r\n            if (group.stageDataIds.Count <= d)\r\n            {\r\n                mainDraw = modeSelectionScreen;\r\n                modeSelectionScreen.Reset();\r\n                stageId = 0;\r\n                stageGroupId = -1;\r\n                Reset();\r\n                return;\r\n            }\r\n\r\n            StageData stageData = group.stageDataIds[stageId].GetComponent<StageData>();\r\n\r\n            //d = 200;\r\n            if (d >= enemyAmount.Length) d = enemyAmount.Length - 1;\r\n            int nEnemies = enemyAmount[d];\r\n            List<string> entityRenderTexts = new List<string>();\r\n            var moveCreator = new MoveCreatorProg(ecs);\r\n\r\n            EnemyDataCreator enemyData = new EnemyDataCreator(entityRenderTexts, moveCreator);\r\n            sdc.CalculateTrackInfo(enemyData.enemyDatas);\r\n            sdc.InitializeProgress(stageProgressPersistence);\r\n            stageEntity = group.stageDataIds[stageId];\r\n            if (group.stageDataIds.Count > stageId + 1)\r\n            {\r\n                stageToBattle.stageToUnlock = group.stageDataIds[stageId + 1];\r\n            }\r\n            else {\r\n                stageToBattle.stageToUnlock = Entity.None;\r\n            }\r\n            stageToBattle.CurrentStage = stageEntity;\r\n            \r\n            BattleSetup battleSetup = new BattleSetup(mode, stageEntity, ecs, enemyData, moveCreator);\r\n            battleMain = battleSetup.battleMain;\r\n            List<MoveMetaData> moveRenders = moveCreator.moveRenders;\r\n            for (int i = 0; i < moveRenders.Count; i++)\r\n            {\r\n                moveRenders[i].Description = moveDescriptions[i];\r\n                //Console.WriteLine(\"{0} {1}\", moveRenders[i].Label, moveRenders[i].Description);\r\n            }\r\n            HelpScreenModel helpModel = new HelpScreenModel(battleMain);\r\n            helpScreen = new HelpScreen(helpModel, moveRenders, moveCreator.moveDatas);\r\n\r\n            var ps = new PreviewSystem(ecs, battleMain);\r\n\r\n\r\n\r\n            //ecs.CreateEntityWithComponent(new EnemySpawnData(0, new BaseUtils.Vector2D(4, 1)));\r\n            //ecs.CreateEntityWithComponent(new EnemySpawnData(1, new BaseUtils.Vector2D(5, 1)));\r\n\r\n\r\n            float timeToChoose = -1;\r\n            if (timeAttack)\r\n            {\r\n                timeToChoose = (5f * turnAmount[d]) * nEnemies;\r\n\r\n            }\r\n            battleMain.timeToChooseMax = timeToChoose;\r\n            battleMain.Init();\r\n\r\n            battleRender = new BattleRender(battleMain, stageData: stageData, PreviewSystem: ps);\r\n            battleRender.help = helpInt;\r\n            new AttackPreview(ecs, battleRender);\r\n            new HappHandling(battleRender, battleSetup);\r\n            //\r\n\r\n            if (helpScreen.IsWannaShowIntro())\r\n            {\r\n                helpScreen.Show();\r\n                mainDraw = helpScreen;\r\n                helpModel.battleIntroMode = true;\r\n            }\r\n            else\r\n            {\r\n                mainDraw = battleRender;\r\n            }\r\n\r\n            //helpScreen.\r\n            resultScreen = new ResultScreen(battleMain.trackBattle);\r\n\r\n            resultScreen.battleResult = battleMain.battleResult;\r\n\r\n            MouseHoverManager hoverManager = new MouseHoverManager(Mouse);\r\n            hoverManager.mouseHovers.Add(new MouseHover(new BaseUtils.Rect(5, 5, 5, 5), 0, 0));\r\n\r\n\r\n            mouseHover = new MouseHoverText(hoverManager, battleRender.textWorld.GetFreeEntity(battleRender.textWorld.mainBoard.Width - 2, 3), moveDescriptions);\r\n\r\n            battleRender.mouseHover = hoverManager;\r\n            if (stageSelecScreen.chosenStage < 0)\r\n            {\r\n                mainDraw = stageSelecScreen;\r\n\r\n            }\r\n            if (stageGroupId == -1)\r\n            {\r\n\r\n                stageGroupSelection.SetECS(ecs);\r\n                mainDraw = stageGroupSelection;\r\n                return;\r\n            }\r\n        }\r\n\r\n        public int Input { set { mainDraw.Input = value; } get { return 'c'; } }\r\n        public int keyDownUnicode { set { value = remap.Remap(value); mainDraw.keyDownUnicode = value; } get { return 'c'; } }\r\n\r\n        public MouseIO Mouse { set; get; }\r\n        UnicodeRemap remap = new UnicodeRemap();\r\n        private StageGroupSelectionScreen stageGroupSelection;\r\n        private StageSelectionScreen stageSelecScreen;\r\n        private Entity stageEntity;\r\n        public static readonly int Width = 35;\r\n        public static readonly int Height = 46;\r\n\r\n        public static void DrawInput(int x2, int y2, int unicode, string description, TextBoard textBoard)\r\n        {\r\n            //TextBoard.DrawUnicodeLabel(unicode, x2, y2, BattleRender.Colors.inputKey);\r\n            //TextBoard.Draw(description, x2 + 2 + 5, y2, BattleRender.Colors.InputDescription);\r\n            BattleRender.DrawInput(x2, y2, unicode, description, textBoard);\r\n        }\r\n\r\n        public void Draw(float f)\r\n        {\r\n            mouseHover.Update();\r\n            mainDraw.Draw(f);\r\n            mainDraw.Mouse = Mouse;\r\n            mainDraw.Keyboard = Keyboard;\r\n            if (mainDraw == stageSelecScreen && stageSelecScreen.chosenStage >= 0)\r\n            {\r\n                Reset();\r\n            }\r\n            if (stageGroupSelection != null && stageGroupSelection.wantedGroup >= 0)\r\n            {\r\n                stageGroupId = stageGroupSelection.wantedGroup;\r\n                stageGroupSelection.ResetChoice();\r\n                Reset();\r\n            }\r\n            if (stageSelecScreen.wantToReturn)\r\n            {\r\n                stageGroupSelection.ResetChoice();\r\n                stageSelecScreen.ResetChoice();\r\n                stageGroupSelection.wantedGroup = -1;\r\n                stageGroupId = -1;\r\n                Reset();\r\n            }\r\n            if (helpScreen.wannaLeave == true)\r\n            {\r\n                helpScreen.wannaLeave = false;\r\n                mainDraw = battleRender;\r\n\r\n            }\r\n            if (helpInt.showRequest){\r\n                helpScreen.Show();\r\n                helpInt.showRequest = false;\r\n                mainDraw = helpScreen;\r\n                helpScreen.HelpMode();\r\n            }\r\n            if (mainDraw == battleRender)\r\n            {\r\n\r\n                //if (battleRender.helpVisualizeRequest)\r\n                //{\r\n                //    helpScreen.Show();\r\n                //    mainDraw = helpScreen;\r\n                //    //battleRender.helpVisualizeRequest = false;\r\n                //    helpScreen.HelpMode();\r\n                //}\r\n                if (battleMain.IsOver())\r\n                {\r\n                    if (battleMain.IsVictory())\r\n                    {\r\n\r\n                        stageId++;\r\n                        stageToBattle.Victory();\r\n                        stageSelecScreen.ResetChoice();\r\n                        stageToBattle.CurrentStage.GetComponent<StageProgressPersistence>().bestBattleMetrics.CopyValues(battleMain.trackBattle.metrics);\r\n                    }\r\n                    resultScreen.Enter();\r\n                    mainDraw = resultScreen;\r\n                }\r\n            }\r\n            if (mainDraw == resultScreen)\r\n            {\r\n                if (resultScreen.wannaLeave == 1)\r\n                {\r\n                    Reset();\r\n                }\r\n            }\r\n            if (mainDraw == modeSelectionScreen)\r\n            {\r\n                if (modeSelectionScreen.wannaLeave == 1)\r\n                {\r\n                    Reset();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return mainDraw.GetBoard();\r\n        }\r\n\n    \nprivate KeyboardIO __Property__Initializer__Keyboard=new KeyboardIO();private MouseIO __Property__Initializer__Mouse=new MouseIO();}\r\n}\r\n","using Pidroh.BaseUtils;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class ResultScreen : ITextScreen_\r\n    {\r\n        private TextWorld textWorld;\r\n        string youWin = \"You Win\";\r\n        public MouseIO Mouse { set; get; }\r\n        string youLose = \"You lose\";\r\n        public BattleResult battleResult;\r\n        public TrackBattle trackBattle;\r\n        public KeyboardIO Keyboard { set; get; }\r\n\r\n        public ResultScreen(TrackBattle trackBattle)\r\n        {\r\n            textWorld = new TextWorld();\r\n            textWorld.Init(GameMain.Width, GameMain.Height);\r\n            this.trackBattle = trackBattle;\r\n        }\r\n\r\n        public int wannaLeave;\r\n\r\n        public int Input { set; get; }\r\n        public int keyDownUnicode { set; get; }\r\n\r\n        public void Enter()\r\n        {\r\n            wannaLeave = 0;\r\n        }\r\n\r\n        public void Draw(float f)\r\n        {\r\n            if (keyDownUnicode > 0)\r\n            {\r\n                wannaLeave = 1;\r\n            }\r\n            textWorld.mainBoard.SetAll(' ', TextBoard.NOCHANGECOLOR, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.BackgroundInput);\r\n            string message = youWin;\r\n            if (battleResult.result == 2) message = youLose;\r\n            textWorld.mainBoard.DrawOnCenter(message, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.ThunderShot);\r\n\r\n            int x = 3;\r\n            int y = 3;\r\n            BattleRender.DrawStrippedText(x,y, \"TURNS\", textWorld.mainBoard);\r\n            var metrics = this.trackBattle.metrics;\r\n            BattleRender.DrawSubText(x+14, y, metrics.round+\"\", textWorld.mainBoard);\r\n            BattleRender.DrawStrippedText(x, y+2, \"TIMES HIT\", textWorld.mainBoard);\r\n            BattleRender.DrawSubText(x + 14, y+2, metrics.damageTimes + \"\", textWorld.mainBoard);\r\n            BattleRender.DrawStrippedText(x, y + 4, \"PREVIEWS\", textWorld.mainBoard);\r\n            BattleRender.DrawSubText(x + 14, y + 4, metrics.previewTimes + \"\", textWorld.mainBoard);\r\n\r\n            BattleRender.DrawStrippedText(x, y + 10, \"RANK\", textWorld.mainBoard);\r\n            BattleRender.DrawSubText(x + 14, y + 10, metrics.rank + \"\", textWorld.mainBoard);\r\n\r\n            textWorld.mainBoard.DrawHorizontalLine(Unicode.AsciiGridHor, y + 7, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.InputDescription);\r\n            textWorld.mainBoard.DrawHorizontalLine(Unicode.AsciiGridHor, y + 13, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.InputDescription);\r\n\r\n            //textWorld.mainBoard.DrawOneDigit(trackBattle.round, 3,3, Colors.Hero);\r\n            //textWorld.mainBoard.Draw(\"TURNS\", x, y, Colors.WindowLabel);\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return textWorld.mainBoard;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n","using Pidroh.ECS;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing Pidroh.TurnBased.TextRendering;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.ConsoleApp.Turnbased\r\n{\r\n    public class StageGroupSelectionScreen : ITextScreen_\r\n    {\r\n        private QuickAccessorOne<StageDataGroup> stageGroups;\r\n        private TextWorld textWorld;\r\n        public MouseIO Mouse { set; get; }\r\n        public KeyboardIO Keyboard { set; get; }\r\n\r\n        public int wantedGroup = -1;\r\n\r\n        public StageGroupSelectionScreen()\r\n        {\r\n            \r\n            textWorld = new TextWorld();\r\n            textWorld.Init(GameMain.Width, GameMain.Height);\r\n            navKey = new NavigationKeyboard(textWorld);\r\n            navKey.showEscape = false;\r\n            textWorld.mainBoard.SetAll(TextBoard.NOCHANGECHAR, TextBoard.NOCHANGECOLOR, BattleRender.Colors.BackgroundInput);\r\n\r\n            textWorld.mainBoard.DrawOnCenterHorizontal(\"Stage Selection\", BattleRender.Colors.Hero, 0, 1);\r\n\r\n            textWorld.mainBoard.DrawOnCenterHorizontal(\"Controls\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.WindowLabel, 0, 6);\r\n            \r\n\r\n        }\r\n\r\n        public void SetECS(ECSManager ecs)\r\n        {\r\n            stageGroups = ecs.QuickAccessor1<StageDataGroup>();\r\n\r\n            \r\n        }\r\n\r\n        public int wannaLeave;\r\n        private NavigationKeyboard navKey;\r\n\r\n        public int Input { set; get; }\r\n        public int keyDownUnicode { set; get; }\r\n\r\n        public void Enter()\r\n        {\r\n            wannaLeave = 0;\r\n        }\r\n\r\n        public void Draw(float f)\r\n        {\r\n            navKey.Clear();\r\n            textWorld.mainBoard.Reset();\r\n            textWorld.mainBoard.SetAll(' ', TextBoard.NOCHANGECOLOR, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.BackgroundInput);\r\n            textWorld.DrawChildren();\r\n            //textWorld.mainBoard.DrawOnCenterHorizontal(\"Controls\", Colors.WindowLabel, 0, 6);\r\n            textWorld.mainBoard.DrawOnCenterHorizontal(\"Stage Selection\", BattleRender.Colors.Hero, 0, 1);\r\n\r\n            for (int i = 0; i < stageGroups.Count; i++)\r\n            {\r\n                int x = 5;\r\n                int y = 5 + i * 2;\r\n                textWorld.mainBoard.Draw(\"World \" + (i + 1), x, y, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.WindowLabel);\r\n                navKey.Add(x - 2, y);\r\n            }\r\n\r\n            if (keyDownUnicode >= 0)\r\n            {\r\n                navKey.CheckInput(keyDownUnicode);\r\n            }\r\n\r\n            wantedGroup = navKey.chosenOption;\r\n            navKey.DrawControls();\r\n            //wantToReturn = navKey.wantToEscape;\r\n\r\n            //int inp = InputUnicode - '1';\r\n            //if(inp >= 0 && inp< 9) {\r\n            //    wantedGroup = inp;\r\n                \r\n            //}\r\n            \r\n            //textWorld.mainBoard.Draw(\"Stage \" + i, 2, i * 2 + 3, BattleRender.Colors.Hero);\r\n            \r\n        }\r\n\r\n        internal void ResetChoice()\r\n        {\r\n            wantedGroup = -1;\r\n            navKey.ResetChoice();\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return textWorld.mainBoard;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering\r\n{\r\n    public class TestGame : ITextGame\r\n    {\r\n        public TextScreenHolder ScreenHolder { get; private set; }\r\n        public Palette palette = DefaultPalettes.C4Novel;\r\n\r\n        public Palette GetPalette()\r\n        {\r\n            return palette;\r\n        }\r\n\r\n        public void Init(int w, int h)\r\n        {\r\n            TextScreenN screen = new TestScreen();\r\n            ScreenHolder.SetAll(screen);\r\n            screen.Init(w, h);\r\n            screen.GetBoard().Draw(\"Test\", 0,0, 2);\r\n        }\r\n\r\n        public void Update(float delta)\r\n        {\r\n            \r\n        }\r\n\n    \nprivate TextScreenHolder __Property__Initializer__ScreenHolder=new TextScreenHolder();}\r\n\r\n    public class TestScreen : TextScreenN\r\n    {\r\n        public override void Update(float f)\r\n        {\r\n            \r\n        }\r\n    }\r\n}\r\n","using Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class ModeSelectionScreen : ITextScreen_\r\n    {\r\n        private TextWorld textWorld;\r\n        public MouseIO Mouse { set; get; }\r\n        int selection;\r\n        public BattleResult battleResult;\r\n        public KeyboardIO Keyboard { set; get; }\r\n        public ModeSelectionScreen()\r\n        {\r\n            textWorld = new TextWorld();\r\n            textWorld.Init(70, 25);\r\n        }\r\n        public int wannaLeave;\r\n        public int mode;\r\n        public bool timeAttack = false;\r\n        public int screenStage;\r\n\r\n        public int Input { set; get; }\r\n        public int keyDownUnicode { set; get; }\r\n\r\n        public void Enter()\r\n        {\r\n            wannaLeave = 0;\r\n        }\r\n\r\n        public void Draw(float f)\r\n        {\r\n            textWorld.mainBoard.Reset();\r\n            Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey ik = (Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey) Input;\r\n            mode = -1;\r\n            textWorld.mainBoard.Draw(\"ProgBattle Prototype v0.3\", 1, 1, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero);\r\n            textWorld.mainBoard.Draw(\"A game by Pidroh\", 1, 2, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero);\r\n            if (screenStage == 0)\r\n            {\r\n                switch (ik)\r\n                {\r\n\r\n                    case Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey.LEFT:\r\n                        screenStage = 1;\r\n                        timeAttack = false;\r\n                        break;\r\n                    case Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey.RIGHT:\r\n                        screenStage = 1;\r\n                        timeAttack = true;\r\n                        break;\r\n                    case Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey.DOWN:\r\n                        timeAttack = true;\r\n                        mode = 0;\r\n                        break;\r\n                    case Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey.UP:\r\n                        mode = 0;\r\n                        timeAttack = false;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                textWorld.mainBoard.DrawOnCenter(\"[w] Vanilla\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 4, alignString: false);\r\n                textWorld.mainBoard.DrawOnCenter(\"[a] Elemental\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 5, alignString: false);\r\n                textWorld.mainBoard.DrawOnCenter(\"[s] Vanilla Time Attack\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 6, alignString: false);\r\n                textWorld.mainBoard.DrawOnCenter(\"[d] Elemental Time Attack\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 7, alignString: false);\r\n            }\r\n            if (screenStage == 1)\r\n            {\r\n                if (ik == Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey.UP)\r\n                {\r\n                    mode = 1;\r\n                    \r\n                }\r\n                if (ik == Pidroh.ConsoleApp.Turnbased.BattleRender.InputKey.DOWN)\r\n                {\r\n                    screenStage = 0;\r\n                }\r\n                textWorld.mainBoard.DrawOnCenter(\"Elemental Mode\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: -5);\r\n                textWorld.mainBoard.DrawOnCenter(\"Fire beats Ice, Ice beats Thunder, Thunder beats fire\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: -2);\r\n                textWorld.mainBoard.DrawOnCenter(\"Same element = no damage\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 0);\r\n                textWorld.mainBoard.DrawOnCenter(\"It is best to have had some experience with vanilla mode\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 1);\r\n                textWorld.mainBoard.DrawOnCenter(\"[w] Start Elemental Mode\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 4, alignString: false);\r\n                textWorld.mainBoard.DrawOnCenter(\"[s] Go back\", Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.GridHero, yOff: 5, alignString: false);\r\n            }\r\n\r\n\r\n            if (mode >= 0)\r\n            {\r\n                wannaLeave = 1;\r\n            }\r\n\r\n            \r\n            \r\n\r\n            //string message = youWin;\r\n            //if (battleResult.result == 2) message = youLose;\r\n            //textWorld.mainBoard.DrawOnCenter(message, Colors.Board);\r\n        }\r\n\r\n        internal void Reset()\r\n        {\r\n            mode = -1;\r\n            wannaLeave = 0;\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return textWorld.mainBoard;\r\n        }\r\n\r\n    }\r\n}\r\n","using Pidroh.ConsoleApp.Turnbased;\r\nusing Pidroh.ECS;\r\nusing Pidroh.TextRendering;\r\nusing Pidroh.TextRendering.GameScreen;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TurnBased.TextRendering\r\n{\r\n    public class StageSelectionScreen : ITextScreen_\r\n    {\r\n        public StageDataGroup stageGroup;\r\n\r\n        public int Input { set; get; }\r\n        public int keyDownUnicode { set; get; }\r\n        public MouseIO Mouse { set; get; }\r\n        public KeyboardIO Keyboard { set; get; }\r\n        TextWorld textWorld;\r\n        private NavigationKeyboard navKey;\r\n        public int chosenStage = -1;\r\n        public bool wantToReturn;\r\n\r\n        public StageSelectionScreen()\r\n        {\r\n            textWorld = new TextWorld();\r\n            textWorld.Init(GameMain.Width, GameMain.Height);\r\n            navKey = new NavigationKeyboard(textWorld);\r\n        }\r\n\r\n        public void Draw(float f)\r\n        {\r\n            navKey.Clear();\r\n            textWorld.mainBoard.Reset();\r\n            textWorld.mainBoard.SetAll(' ', TextBoard.NOCHANGECOLOR, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.BackgroundInput);\r\n            textWorld.DrawChildren();\r\n            //textWorld.mainBoard.DrawOnCenterHorizontal(\"Controls\", Colors.WindowLabel, 0, 6);\r\n            textWorld.mainBoard.DrawOnCenterHorizontal(\"Stage Selection\", BattleRender.Colors.Hero, 0, 1);\r\n\r\n            for (int i = 0; i < stageGroup.stageDataIds.Count; i++)\r\n            {\r\n                int x = 5;\r\n                int y = 5 + i * 3;\r\n                Entity e = stageGroup.stageDataIds[i];\r\n                StageProgressPersistence stageProgressPersistence = e.GetComponent<StageProgressPersistence>();\r\n                if (stageProgressPersistence.available) {\r\n                    textWorld.mainBoard.Draw(\"Stage \" + (i + 1), x, y, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.inputKey);\r\n                    int rank = stageProgressPersistence.bestBattleMetrics.rank;\r\n                    if (rank >= 0)\r\n                    {\r\n                        textWorld.mainBoard.Draw(\"Best Rank: \" + rank, x+2, y+1, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.WindowLabel);\r\n                    }\r\n                }\r\n                else\r\n                    textWorld.mainBoard.Draw(\"???\", x, y, Pidroh.ConsoleApp.Turnbased.BattleRender.Colors.WindowLabel);\r\n                navKey.Add(x - 2, y);\r\n            }\r\n            if (keyDownUnicode >= 0)\r\n            {\r\n                navKey.CheckInput(keyDownUnicode);\r\n            }\r\n\r\n            chosenStage = navKey.chosenOption;\r\n            if (chosenStage >= 0)\r\n            {\r\n                if (!stageGroup.stageDataIds[chosenStage].GetComponent<StageProgressPersistence>().available) {\r\n                    chosenStage = -1;\r\n                    navKey.chosenOption = -1;\r\n                }\r\n                \r\n            }\r\n            navKey.DrawControls();\r\n            wantToReturn = navKey.wantToEscape;\r\n        }\r\n\r\n        public TextBoard GetBoard()\r\n        {\r\n            return textWorld.mainBoard;\r\n        }\r\n\r\n        internal void ResetChoice()\r\n        {\r\n            chosenStage = -1;\r\n            navKey.ResetChoice();\r\n            wantToReturn = false;\r\n        }\r\n    }\r\n}\r\n","using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Text;\r\n\r\nnamespace Pidroh.TextRendering\r\n{\r\n    public class BlinkAnim : TextAnimation<BlinkAnim.BlinkData>\r\n    {\r\n        public override void Modify(TextEntity entity, BlinkData mainData, float progress, float length)\r\n        {\r\n            base.Modify(entity, mainData, progress, length);\r\n            float aux = progress;\r\n            bool blink = true;\r\n            while (true)\r\n            {\r\n                if (blink)\r\n                {\r\n                    aux -= mainData.blinkActiveTime;\r\n                }\r\n                else\r\n                {\r\n                    aux -= mainData.blinkInactive;\r\n                }\r\n                if (aux < 0)\r\n                {\r\n                    break;\r\n                }\r\n                else\r\n                {\r\n                    blink = !blink;\r\n                }\r\n            }\r\n            if (!blink)\r\n            {\r\n                if (mainData.changeInvisible)\r\n                {\r\n                    entity.Animation.SetAll(mainData.text, mainData.textColor, mainData.backColor);\r\n                }\r\n                else {\r\n                    entity.Animation.SetAllIfVisible(mainData.text, mainData.textColor, mainData.backColor);\r\n                }\r\n                \r\n            }\r\n        }\r\n\r\n\r\n        public struct BlinkData\r\n        {\r\n            public readonly char text;\r\n            public readonly int backColor, textColor;\r\n            public readonly float blinkActiveTime;\r\n            public readonly float blinkInactive;\r\n            public readonly bool changeInvisible;\r\n\r\n            public BlinkData(char text, int backColor, int textColor, float blinkActiveTime, float blinkInactive, bool changeNoChangeColor = true)\r\n            {\r\n                this.text = text;\r\n                this.backColor = backColor;\r\n                this.textColor = textColor;\r\n                this.blinkActiveTime = blinkActiveTime;\r\n                this.blinkInactive = blinkInactive;\r\n                this.changeInvisible = true;\r\n            }\r\n\r\n            public static BlinkData BackColor(int backColor, float blinkDuration, bool changeNoChangeColor = true)\r\n            {\r\n                return new BlinkData(TextBoard.NOCHANGECHAR, backColor, TextBoard.NOCHANGECOLOR, blinkDuration, blinkDuration, changeNoChangeColor);\r\n            }\r\n\r\n            public static BlinkData FrontColor(int frontColor, float blinkDuration)\r\n            {\r\n                return new BlinkData(TextBoard.NOCHANGECHAR, TextBoard.NOCHANGECOLOR, frontColor,  blinkDuration, blinkDuration);\r\n            }\r\n\r\n            public static BlinkData Char(char c, float blinkDuration)\r\n            {\r\n                return new BlinkData(c, TextBoard.NOCHANGECOLOR, TextBoard.NOCHANGECOLOR, blinkDuration, blinkDuration);\r\n            }\r\n        }\r\n    }\r\n}\r\n","namespace Pidroh.TextRendering\r\n{\r\n    public class CharByCharAnimation : TextAnimation<CharByCharAnimation.CharByCharData>\r\n    {\r\n        public override void Modify(TextEntity entity, CharByCharData mainData, float progress, float length)\r\n        {\r\n            base.Modify(entity, mainData, progress, length);\r\n            float ratio = progress / length;\r\n            float lengthText = mainData.charEnd - mainData.charStart;\r\n            int lineBreaks = 0;\r\n            int offsetedPerm = 0;\r\n            for (int i = mainData.charStart; i < mainData.charEnd; i++)\r\n            {\r\n                int offseted = i + offsetedPerm;\r\n                int line = 0;\r\n                var tb = entity.Animation;\r\n                \r\n\r\n                while (offseted >= tb.Width)\r\n                {\r\n                    line++;\r\n                    offseted -= tb.Width;\r\n                }\r\n                if (entity.Origin.CharAt(offseted, line + lineBreaks) == '\\n')\r\n                {\r\n                    lineBreaks++;\r\n                    offsetedPerm -= offseted;\r\n                    offseted = 0;\r\n                }\r\n                if (i > ((lengthText * ratio) + mainData.charStart))\r\n                {\r\n                    tb.DrawChar(' ', offseted, line + lineBreaks);\r\n                    //tb.Draw(\"\" + i, 6, 5, 1);\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        public class CharByCharData\r\n        {\r\n            internal int charStart;\r\n            internal int charEnd;\r\n\r\n            public CharByCharData(int charStart, int charEnd)\r\n            {\r\n                this.charStart = charStart;\r\n                this.charEnd = charEnd;\r\n            }\r\n        }\r\n    }\r\n}\r\n"]
}

2018-10-12T09:31:31:168 	Trace		Base64 SourceMap for C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js
2018-10-12T09:31:31:168 	Trace		//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJCcmlkZ2VCdWlsZC5qcyIsCiAgInNvdXJjZVJvb3QiOiAiIiwKICAic291cmNlcyI6IFsiQXBwLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9CYXNlVXRpbHMvT2JqZWN0Q2xvbmVyLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9CYXNlVXRpbHMvRGVidWdnZXIuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL0Jhc2VVdGlscy9EZWVwQ2xvbmVIZWxwZXIuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL0Jhc2VVdGlscy9FeHRlbnNpb25zLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9CYXNlVXRpbHMvUG9pbnQuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL0Jhc2VVdGlscy9SYW5kb21TdXBwbGllci5jcyIsIi4uLy4uL1JldXNhYmxlUGlkcm9oVlMvQmFzZVV0aWxzL1JlY3RhbmdsZS5jcyIsIi4uLy4uL1JldXNhYmxlUGlkcm9oVlMvQmFzZVV0aWxzL1RpbWVTdGFtcC5jcyIsIi4uLy4uL1JldXNhYmxlUGlkcm9oVlMvQmFzZVV0aWxzL1VuaWNvZGUuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL0Jhc2VVdGlscy9WZWN0b3IyRC5jcyIsIi4uLy4uL1JldXNhYmxlUGlkcm9oVlMvQmFzZVV0aWxzL1ZlY3RvcjNELmNzIiwiLi4vVHVybkJhc2VkTG9naWMvTW92ZURhdGEuY3MiLCIuLi9UdXJuQmFzZWRUZXh0UmVuZGVyaW5nL0FzeW5jVGFza3MuY3MiLCIuLi9UdXJuQmFzZWRMb2dpYy9CYXR0bGVTZXR1cC5jcyIsIi4uL1R1cm5CYXNlZExvZ2ljL0JhdHRsZU1haW4uY3MiLCIuLi9UdXJuQmFzZWRUZXh0UmVuZGVyaW5nL0NvbG9yU3R1ZmYuY3MiLCIuLi9UdXJuQmFzZWRMb2dpYy9EZWJ1Z0V4dHJhL0RlYnVnRXguY3MiLCIuLi9UdXJuQmFzZWRMb2dpYy9EZWNrTWFuYWdlci5jcyIsIi4uL1R1cm5CYXNlZExvZ2ljL0VDU0ludGVncmF0aW9uLmNzIiwiLi4vVHVybkJhc2VkTG9naWMvRW5lbXlBSS5jcyIsIi4uL1R1cm5CYXNlZExvZ2ljL1NwYXduRmFjdG9yeS5jcyIsIi4uL1R1cm5CYXNlZExvZ2ljL0VuZW15RGF0YUNyZWF0b3IuY3MiLCIuLi9UdXJuQmFzZWRMb2dpYy9TdGFnZURhdGEuY3MiLCIuLi9UdXJuQmFzZWRMb2dpYy9Nb3ZlRGF0YUV4ZWN1dGVyLmNzIiwiLi4vVHVybkJhc2VkTG9naWMvSGFwcHMvSGFwcC5jcyIsIi4uL1R1cm5CYXNlZExvZ2ljL0lucHV0SG9sZGVyLmNzIiwiLi4vVHVybkJhc2VkTG9naWMvTW92ZUNyZWF0b3JQcm9nLmNzIiwiLi4vVHVybkJhc2VkTG9naWMvVHJhY2tCYXR0bGUuY3MiLCIuLi9UdXJuQmFzZWRMb2dpYy9TdGFnZVRvQmF0dGxlLmNzIiwiLi4vLi4vVmlzdWFsU3R1ZGlvU29sdXRpb25SbWsvRUNTL0FjY2Vzc29yLmNzIiwiLi4vLi4vVmlzdWFsU3R1ZGlvU29sdXRpb25SbWsvRUNTL0Nsb25lZFN0YXRlLmNzIiwiLi4vLi4vVmlzdWFsU3R1ZGlvU29sdXRpb25SbWsvRUNTL0VDU01hbmFnZXIuY3MiLCIuLi8uLi9WaXN1YWxTdHVkaW9Tb2x1dGlvblJtay9FQ1MvRW50aXR5LmNzIiwiLi4vLi4vVmlzdWFsU3R1ZGlvU29sdXRpb25SbWsvRUNTL1Byb2Nlc3NvckZsZXguY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL1RleHRSZW5kZXJpbmdMb2dpYy9UZXh0V29ybGQuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL1RleHRSZW5kZXJpbmdMb2dpYy9QYWxldHRlLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9UZXh0UmVuZGVyaW5nTG9naWMvR2FtZVNjcmVlbi9LZXlib2FyZElPLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9UZXh0UmVuZGVyaW5nTG9naWMvR2FtZVNjcmVlbi9Nb3VzZUhvdmVyLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9UZXh0UmVuZGVyaW5nTG9naWMvR2FtZVNjcmVlbi9Vbmljb2RlUmVtYXAuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL1RleHRSZW5kZXJpbmdMb2dpYy9UZXh0Qm9hcmQuY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL1RleHRSZW5kZXJpbmdMb2dpYy9HYW1lU2NyZWVuL0lUZXh0U2NyZWVuTi5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvQXR0YWNrUHJldmlldy5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvSGFwcEhhbmRsaW5nLmNzIiwiLi4vVHVybkJhc2VkVGV4dFJlbmRlcmluZy9IZWxwU2NyZWVuSW50ZWdyYXRpb24uY3MiLCIuLi9UdXJuQmFzZWRUZXh0UmVuZGVyaW5nL0hlbHBTY3JlZW4uY3MiLCIuLi9UdXJuQmFzZWRUZXh0UmVuZGVyaW5nL0lucHV0SGFuZGxpbmcuY3MiLCIuLi9UdXJuQmFzZWRUZXh0UmVuZGVyaW5nL01lc3NhZ2VPblBvc2l0aW9uLmNzIiwiLi4vVHVybkJhc2VkVGV4dFJlbmRlcmluZy9Nb3VzZUhvdmVyVGV4dC5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvTmF2aWdhdGlvbktleWJvYXJkLmNzIiwiLi4vVHVybkJhc2VkVGV4dFJlbmRlcmluZy9QcmV2aWV3U3lzdGVtLmNzIiwiLi4vVHVybkJhc2VkVGV4dFJlbmRlcmluZy9SZWZsZWN0aW9uVGVzdC5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvVUlSZXVzYWJsZS5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvQmF0dGxlUmVuZGVyLmNzIiwiLi4vVHVybkJhc2VkVGV4dFJlbmRlcmluZy9HYW1lTWFpbi5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvUmVzdWx0U2NyZWVuLmNzIiwiLi4vVHVybkJhc2VkVGV4dFJlbmRlcmluZy9TdGFnZUdyb3VwU2VsZWN0aW9uU2NyZWVuLmNzIiwiLi4vLi4vUmV1c2FibGVQaWRyb2hWUy9UZXh0UmVuZGVyaW5nTG9naWMvR2FtZVNjcmVlbi9UZXN0R2FtZS5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvTW9kZVNlbGVjdGlvblNjcmVlbi5jcyIsIi4uL1R1cm5CYXNlZFRleHRSZW5kZXJpbmcvU3RhZ2VTZWxlY3Rpb25TY3JlZW4uY3MiLCIuLi8uLi9SZXVzYWJsZVBpZHJvaFZTL1RleHRSZW5kZXJpbmdMb2dpYy9CbGlua0FuaW1hdGlvbi5jcyIsIi4uLy4uL1JldXNhYmxlUGlkcm9oVlMvVGV4dFJlbmRlcmluZ0xvZ2ljL0NoYXJCeUNoYXJBbmltYXRpb24uY3MiXSwKICAibmFtZXMiOiBbIiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7O1lBZ0VZQTs7O1lBR0FBOztZQUVBQSxxQ0FBY0EsbUNBQVFBO1lBQ3RCQSx5QkFBU0E7WUFDVEEsS0FBS0EsV0FBV0EsSUFBSUEsc0RBQTBCQTs7Z0JBRzFDQSwwQ0FBT0EsR0FBUEEsMkJBQVlBLGlFQUFrQkEsR0FBbEJBOzs7OztZQUtoQkEsWUFBWUE7WUFDWkEsa0JBQWtCQTtZQUNsQkEsMEJBQTBCQTtZQUMxQkE7WUFDQUE7O1lBRUFBLHVEQUFvQkEsVUFBQ0E7Z0JBRWpCQSxXQUFXQTtnQkFDWEEsSUFBSUE7b0JBQVdBLE9BQU9BOztnQkFDdEJBLGNBQWNBO2dCQUNkQSxJQUFHQSxpQkFBaUJBO29CQUVoQkEsVUFBVUE7O2dCQUVkQSxPQUFPQSxrQ0FBa0JBOztvQkFHckJBLGdDQUFnQkE7Ozs7Ozs7WUFPeEJBLDJEQUFzQkEsVUFBQ0E7Z0JBRW5CQSxJQUFJQSxtQkFBbUJBO29CQUNuQkEsdUJBQU9BO29CQUNQQTs7Z0JBRUpBLElBQUlBLGNBQWFBO29CQUViQSx1QkFBT0E7b0JBQ1BBOztnQkFFSkEsSUFBSUEsY0FBYUE7b0JBRWJBLHVCQUFPQTtvQkFDUEE7Ozs7Ozs7Ozs7O1lBV1JBLDZEQUF1QkEsVUFBQ0E7Z0JBRXBCQSxJQUFJQSxtQkFBbUJBO29CQUFpQkE7OztnQkFFeENBLHVCQUFPQTtnQkFDUEE7Ozs7Ozs7WUFPSkE7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QUtBLFFBQVFBLG9CQUFvQkEsSUFBSUEsa0JBQWtCQTtvQkFFbkRBLGVBQWVBLEtBQUlBO29CQUNuQkE7b0JBQ0FBLFNBQVNBOzs7b0JBR1RBLE9BQU9BLFlBQVlBO3dCQUVmQTt3QkFDQUEsdUJBQVlBOztvQkFFaEJBLElBQUlBLHFCQUFxQkEsVUFBVUEsU0FBT0E7d0JBRXRDQTt3QkFDQUEsK0JBQWdCQTt3QkFDaEJBOztvQkFFSkEsSUFBSUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsYUFBYUEsU0FBU0E7d0JBRTVCQSxnQkFBaUJBLFVBQVVBLFNBQU9BOzs7Ozs7Ozs7Ozs7Z0MxQjJLbEJBLFFBQW1CQSxVQUF1QkEsVUFBZ0JBO2dCQUVsRkEsd0hBQVlBLFFBQVFBLFVBQVVBLFVBQVVBO2dCQUN4Q0EsYUFBbUJBO2dCQUNuQkEsSUFBSUE7b0JBQ0FBLFNBQVNBOztnQkFDYkEsa0JBQWtCQSw2Q0FBNEJBLGlDQUF3QkEsK0JBQXNCQSxXQUFXQSIsCiAgInNvdXJjZXNDb250ZW50IjogWyJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuLy91c2luZyBFQ1M7XHJcbnVzaW5nIE5ld3RvbnNvZnQuSnNvbjtcclxudXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZztcclxudXNpbmcgUGlkcm9oLlR1cm5CYXNlZC5UZXh0UmVuZGVyaW5nO1xyXG4vL3VzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZDtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQnJpZGdlQnVpbGRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFwcFxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludCBidWZmZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYm9vbCBidWZmZXJPbjtcclxuICAgICAgICAvL3ByaXZhdGUgc3RhdGljIEhUTUxQcmVFbGVtZW50IHRleHQ7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgR2FtZU1haW4gZ3I7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVGV4dEJvYXJkIFRleHRCb2FyZDtcclxuICAgICAgICAvL3ByaXZhdGUgc3RhdGljIFN0cmluZ0J1aWxkZXIgc2I7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc3RyaW5nW10gY29sb3JzO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludCBidWZmZXJVbmljb2RlID0gLTE7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVGV4dEJvYXJkIGF1eDtcclxuICAgICAgICBzdGF0aWMgRGF0ZVRpbWUgbGFzdCA9IERhdGVUaW1lLk5vdztcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBib29sIENhbkRyYXc7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgU2V0dXBHYW1lKG91dCBHYW1lTWFpbiBnciwgb3V0IFRleHRCb2FyZCBUZXh0Qm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIlNldHVwXCIpO1xyXG4gICAgICAgICAgICBSYW5kb20gcm5kID0gbmV3IFJhbmRvbSgpO1xyXG4gICAgICAgICAgICBSYW5kb21TdXBwbGllci5HZW5lcmF0ZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHYgPSAoZmxvYXQpcm5kLk5leHREb3VibGUoKTtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUodik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGdyID0gbmV3IEdhbWVNYWluKCk7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZCA9IGdyLkdldEJvYXJkKCk7XHJcbiAgICAgICAgICAgIGF1eCA9IG5ldyBUZXh0Qm9hcmQoMzAwLCAzMDApO1xyXG5cclxuXHJcbiAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBCbGFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgaSA9IDM7XHJcbiAgICAgICAgICAgIHB1YmxpYyBCcmlkZ2VCdWlsZC5BcHAuVmVjdG9yIHBvcyA9IG5ldyBCcmlkZ2VCdWlsZC5BcHAuVmVjdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJ1Y3QgVmVjdG9yXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgZmxvYXQgeDtcclxuICAgICAgICAgICAgcHVibGljIGZsb2F0IHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxpbnQ+IGtleXNEb3duID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWFpbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZWJ1Z2dlci5BY3RpdmVTdGF0aWMgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy9EZWVwQ2xvbmVIZWxwZXIuZGVidWcuQWN0aXZlKGZhbHNlKTtcclxuICAgICAgICAgICAgLy9uZXcgUmVmbGVjdGlvblRlc3QoKTtcclxuICAgICAgICAgICAgVGVzdEVudGl0eVN5c3RlbSgpO1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiR2FtZSBTdGFydFwiKTtcclxuICAgICAgICAgICAgU2V0dXBHYW1lKG91dCBnciwgb3V0IFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBzdHJpbmdbMzBdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IENvbG9yU3R1ZmYuY29sb3JzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JzW2ldID0gQ29sb3JTdHVmZi5jb2xvcnNbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHN0eWxlID0gbmV3IEhUTUxTdHlsZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgc3R5bGUuSW5uZXJIVE1MID0gXCJodG1sLGJvZHkge2ZvbnQtZmFtaWx5OiBDb3VyaWVyOyBiYWNrZ3JvdW5kLWNvbG9yOiMxZjI1MjY7IGhlaWdodDogMTAwJTsgY29sb3I6Izg4ODt9XCIgKyBcIlxcbiAjY2FudmFzLWNvbnRhaW5lciB7d2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgdGV4dC1hbGlnbjpjZW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0gXCI7XHJcbiAgICAgICAgICAgIERvY3VtZW50LkhlYWQuQXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgICAgICBidWZmZXIgPSA5O1xyXG4gICAgICAgICAgICBidWZmZXJPbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgRG9jdW1lbnQuT25LZXlVcCArPSAoS2V5Ym9hcmRFdmVudCBhKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgY29kZSA9IGEuS2V5Q29kZTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlID09IDApIGNvZGUgPSBhLkNoYXJDb2RlO1xyXG4gICAgICAgICAgICAgICAgaW50IHVuaWNvZGUgPSBjb2RlO1xyXG4gICAgICAgICAgICAgICAgaWYodW5pY29kZSA+PSA2NSAmJiB1bmljb2RlIDw9IDkwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaWNvZGUgPSB1bmljb2RlIC0gNjUgKyA5NztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdoaWxlIChrZXlzRG93bi5Db250YWlucyh1bmljb2RlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKHVuaWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGtleXNEb3duLlJlbW92ZSh1bmljb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgRG9jdW1lbnQuT25LZXlEb3duICs9IChLZXlib2FyZEV2ZW50IGEpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLktleUNvZGUgPj0gMzcgJiYgYS5LZXlDb2RlIDw9IDQwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgSGFuZGxlKGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGEuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhLktleUNvZGUgPT0gVW5pY29kZS5Fc2NhcGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgSGFuZGxlKGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGEuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhLktleUNvZGUgPT0gVW5pY29kZS5FbnRlcilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBIYW5kbGUoYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIktEXCIgKyBhLktleUNvZGUpO1xyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIktEXCIrYS5DaGFyQ29kZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlKHVuaWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgLy9idWZmZXIgPSBhLkNoYXJDb2RlO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICBEb2N1bWVudC5PbktleVByZXNzICs9IChLZXlib2FyZEV2ZW50IGEpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLktleUNvZGUgPj0gMzcgJiYgYS5LZXlDb2RlIDw9IDQwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKGEuS2V5Q29kZSk7XHJcbiAgICAgICAgICAgICAgICBIYW5kbGUoYSk7XHJcbiAgICAgICAgICAgICAgICBhLlByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlKHVuaWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgLy9idWZmZXIgPSBhLkNoYXJDb2RlO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFVwZGF0ZUdhbWUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFmdGVyIGJ1aWxkaW5nIChDdHJsICsgU2hpZnQgKyBCKSB0aGlzIHByb2plY3QsIFxyXG4gICAgICAgICAgICAvLyBicm93c2UgdG8gdGhlIC9iaW4vRGVidWcgb3IgL2Jpbi9SZWxlYXNlIGZvbGRlci5cclxuXHJcbiAgICAgICAgICAgIC8vIEEgbmV3IGJyaWRnZS8gZm9sZGVyIGhhcyBiZWVuIGNyZWF0ZWQgYW5kXHJcbiAgICAgICAgICAgIC8vIGNvbnRhaW5zIHlvdXIgcHJvamVjdHMgSmF2YVNjcmlwdCBmaWxlcy4gXHJcblxyXG4gICAgICAgICAgICAvLyBPcGVuIHRoZSBicmlkZ2UvaW5kZXguaHRtbCBmaWxlIGluIGEgYnJvd3NlciBieVxyXG4gICAgICAgICAgICAvLyBSaWdodC1DbGljayA+IE9wZW4gV2l0aC4uLiwgdGhlbiBjaG9vc2UgYVxyXG4gICAgICAgICAgICAvLyB3ZWIgYnJvd3NlciBmcm9tIHRoZSBsaXN0XHJcblxyXG4gICAgICAgICAgICAvLyBUaGlzIGFwcGxpY2F0aW9uIHdpbGwgdGhlbiBydW4gaW4gYSBicm93c2VyLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBIYW5kbGUoS2V5Ym9hcmRFdmVudCBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGNvZGUgPSBhLktleUNvZGU7XHJcbiAgICAgICAgICAgIGlmIChjb2RlID09IDApIGNvZGUgPSBhLkNoYXJDb2RlO1xyXG4gICAgICAgICAgICBpbnQgdW5pY29kZSA9IGNvZGU7XHJcbiAgICAgICAgICAgIGJ1ZmZlclVuaWNvZGUgPSB1bmljb2RlO1xyXG4gICAgICAgICAgICBrZXlzRG93bi5BZGQodW5pY29kZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBUZXN0RW50aXR5U3lzdGVtKClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBVcGRhdGVHYW1lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChDYW5EcmF3KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEYXRlVGltZSBub3cgPSBEYXRlVGltZS5Ob3c7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VjcyA9IChub3cgLSBsYXN0KS5Ub3RhbFNlY29uZHM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjcyA+IDAuMDgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShzZWNzKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWNzID0gMC4wODtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBUZXh0Qm9hcmQgPSBnci5HZXRCb2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgbGFzdCA9IG5vdztcclxuICAgICAgICAgICAgICAgIGdyLmtleURvd25Vbmljb2RlID0gYnVmZmVyVW5pY29kZTtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlclVuaWNvZGUgPSAtMTtcclxuICAgICAgICAgICAgICAgIHZhciBtb3VzZVggPSBTY3JpcHQuQ2FsbDxpbnQ+KFwiZ2V0TW91c2VYXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vdXNlWSA9IFNjcmlwdC5DYWxsPGludD4oXCJnZXRNb3VzZVlcIik7XHJcbiAgICAgICAgICAgICAgICBQb2ludDJEIHBvaW50MkQgPSBuZXcgUG9pbnQyRChtb3VzZVgsIG1vdXNlWSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3IuTW91c2UucG9zICE9IHBvaW50MkQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShtb3VzZVgrXCJzeFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKG1vdXNlWSArIFwic3lcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3IuTW91c2UucG9zID0gcG9pbnQyRDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdyLktleWJvYXJkLmRvd25Vbmljb2Rlcy5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgZ3IuS2V5Ym9hcmQuZG93blVuaWNvZGVzLkFkZFJhbmdlKGtleXNEb3duKTtcclxuXHJcbiAgICAgICAgICAgICAgICBnci5EcmF3KChmbG9hdClzZWNzKTtcclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIC8vOztTY3JpcHQuQ2FsbChcImNsZWFyXCIpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBUZXh0Qm9hcmQuSGVpZ2h0OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBUZXh0Qm9hcmQuV2lkdGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXV4LlNhbWVBcyhUZXh0Qm9hcmQsIHg6IGksIHk6IGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgdGNJID0gVGV4dEJvYXJkLlRleHRDb2xvcltpLCBqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBjb2xvciA9IGNvbG9yc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Y0kgPCAwKSB7IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGNJID49IGNvbG9ycy5MZW5ndGgpIHsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBjb2xvcnNbdGNJXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBiYWNrQ29sb3IgPSBjb2xvcnNbVGV4dEJvYXJkLkJhY2tDb2xvcltpLCBqXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyIEBjaGFyID0gVGV4dEJvYXJkLkNoYXJBdChpLCBqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjcmlwdC5DYWxsKFwiZHJhd1wiLCBpLCBqLCBjb2xvciwgYmFja0NvbG9yLCBcIlwiICsgQGNoYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LkNvcHkoVGV4dEJvYXJkLCB4OiBpLCB5OiBqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2NyaXB0LkNhbGwoXCJkcmF3XCIsIGksIGosIGNvbG9yc1tUZXh0Qm9hcmQuVGV4dENvbG9yW2ksIGpdXSwgY29sb3JzW1RleHRCb2FyZC5CYWNrQ29sb3JbaSwgal1dLCBcInhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENhbkRyYXcgPSBTY3JpcHQuQ2FsbDxib29sPihcImlzUmVhZHlUb0RyYXdcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBXaW5kb3cuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKVVwZGF0ZUdhbWUsIDE1KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBQaWRyb2guQmFzZVV0aWxzLkFycmF5RXh0ZW5zaW9ucztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlJlZmxlY3Rpb247XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5CYXNlVXRpbHNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBPYmplY3RFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgTWV0aG9kSW5mbyBDbG9uZU1ldGhvZCA9IHR5cGVvZihPYmplY3QpLkdldE1ldGhvZChcIk1lbWJlcndpc2VDbG9uZVwiLCBCaW5kaW5nRmxhZ3MuTm9uUHVibGljIHwgQmluZGluZ0ZsYWdzLkluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzUHJpbWl0aXZlTWV0aG9kKHRoaXMgVHlwZSB0eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKFN0cmluZykpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSB0eXBlb2YoaW50KSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihmbG9hdCkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSB0eXBlb2YoZG91YmxlKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihjaGFyKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIC8vYm9vbCBpc1ByaW1pdGl2ZSA9IHR5cGUuSXNQcmltaXRpdmU7XHJcbiAgICAgICAgICAgIGJvb2wgaXNWYWx1ZVR5cGUgPSB0eXBlLklzVmFsdWVUeXBlO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNWYWx1ZVR5cGU7IC8vJiBpc1ByaW1pdGl2ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IENvcHkodGhpcyBPYmplY3Qgb3JpZ2luYWxPYmplY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW50ZXJuYWxDb3B5KG9yaWdpbmFsT2JqZWN0LCBuZXcgRGljdGlvbmFyeTxPYmplY3QsIE9iamVjdD4obmV3IFJlZmVyZW5jZUVxdWFsaXR5Q29tcGFyZXIoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBPYmplY3QgSW50ZXJuYWxDb3B5KE9iamVjdCBvcmlnaW5hbE9iamVjdCwgSURpY3Rpb25hcnk8T2JqZWN0LCBPYmplY3Q+IHZpc2l0ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxPYmplY3QgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIHZhciB0eXBlVG9SZWZsZWN0ID0gb3JpZ2luYWxPYmplY3QuR2V0VHlwZSgpO1xyXG4gICAgICAgICAgICBpZiAoSXNQcmltaXRpdmVNZXRob2QodHlwZVRvUmVmbGVjdCkpIHJldHVybiBvcmlnaW5hbE9iamVjdDtcclxuICAgICAgICAgICAgaWYgKHZpc2l0ZWQuQ29udGFpbnNLZXkob3JpZ2luYWxPYmplY3QpKSByZXR1cm4gdmlzaXRlZFtvcmlnaW5hbE9iamVjdF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoRGVsZWdhdGUpLklzQXNzaWduYWJsZUZyb20odHlwZVRvUmVmbGVjdCkpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgY2xvbmVPYmplY3QgPSBDbG9uZU1ldGhvZC5JbnZva2Uob3JpZ2luYWxPYmplY3QsIG5ldyBvYmplY3RbXSB7IH0pO1xyXG4gICAgICAgICAgICBpZiAodHlwZVRvUmVmbGVjdC5Jc0FycmF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXlUeXBlID0gdHlwZVRvUmVmbGVjdC5HZXRFbGVtZW50VHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKElzUHJpbWl0aXZlTWV0aG9kKGFycmF5VHlwZSkgPT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkgY2xvbmVkQXJyYXkgPSAoQXJyYXkpY2xvbmVPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkQXJyYXkuRm9yRWFjaCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkFycmF5LCBpbnRbXT4pKChhcnJheSwgaW5kaWNlcykgPT4gYXJyYXkuU2V0VmFsdWUoSW50ZXJuYWxDb3B5KGNsb25lZEFycmF5LkdldFZhbHVlKGluZGljZXMpLCB2aXNpdGVkKSwgaW5kaWNlcykpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlzaXRlZC5BZGQob3JpZ2luYWxPYmplY3QsIGNsb25lT2JqZWN0KTtcclxuICAgICAgICAgICAgQ29weUZpZWxkcyhvcmlnaW5hbE9iamVjdCwgdmlzaXRlZCwgY2xvbmVPYmplY3QsIHR5cGVUb1JlZmxlY3QpO1xyXG4gICAgICAgICAgICBSZWN1cnNpdmVDb3B5QmFzZVR5cGVQcml2YXRlRmllbGRzKG9yaWdpbmFsT2JqZWN0LCB2aXNpdGVkLCBjbG9uZU9iamVjdCwgdHlwZVRvUmVmbGVjdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZU9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgUmVjdXJzaXZlQ29weUJhc2VUeXBlUHJpdmF0ZUZpZWxkcyhvYmplY3Qgb3JpZ2luYWxPYmplY3QsIElEaWN0aW9uYXJ5PG9iamVjdCwgb2JqZWN0PiB2aXNpdGVkLCBvYmplY3QgY2xvbmVPYmplY3QsIFR5cGUgdHlwZVRvUmVmbGVjdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlVG9SZWZsZWN0LkJhc2VUeXBlICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJlY3Vyc2l2ZUNvcHlCYXNlVHlwZVByaXZhdGVGaWVsZHMob3JpZ2luYWxPYmplY3QsIHZpc2l0ZWQsIGNsb25lT2JqZWN0LCB0eXBlVG9SZWZsZWN0LkJhc2VUeXBlKTtcclxuICAgICAgICAgICAgICAgIENvcHlGaWVsZHMob3JpZ2luYWxPYmplY3QsIHZpc2l0ZWQsIGNsb25lT2JqZWN0LCB0eXBlVG9SZWZsZWN0LkJhc2VUeXBlLCBCaW5kaW5nRmxhZ3MuSW5zdGFuY2UgfCBCaW5kaW5nRmxhZ3MuTm9uUHVibGljLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5SZWZsZWN0aW9uLkZpZWxkSW5mbywgYm9vbD4pKGluZm8gPT4gaW5mby5Jc1ByaXZhdGUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBDb3B5RmllbGRzKG9iamVjdCBvcmlnaW5hbE9iamVjdCwgSURpY3Rpb25hcnk8b2JqZWN0LCBvYmplY3Q+IHZpc2l0ZWQsIG9iamVjdCBjbG9uZU9iamVjdCwgVHlwZSB0eXBlVG9SZWZsZWN0LCBCaW5kaW5nRmxhZ3MgYmluZGluZ0ZsYWdzID0gQmluZGluZ0ZsYWdzLkluc3RhbmNlIHwgQmluZGluZ0ZsYWdzLk5vblB1YmxpYyB8IEJpbmRpbmdGbGFncy5QdWJsaWMgfCBCaW5kaW5nRmxhZ3MuRmxhdHRlbkhpZXJhcmNoeSwgRnVuYzxGaWVsZEluZm8sIGJvb2w+IGZpbHRlciA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoIChGaWVsZEluZm8gZmllbGRJbmZvIGluIHR5cGVUb1JlZmxlY3QuR2V0RmllbGRzKGJpbmRpbmdGbGFncykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIgIT0gbnVsbCAmJiBmaWx0ZXIoZmllbGRJbmZvKSA9PSBmYWxzZSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoSXNQcmltaXRpdmVNZXRob2QoZmllbGRJbmZvLkZpZWxkVHlwZSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsRmllbGRWYWx1ZSA9IGZpZWxkSW5mby5HZXRWYWx1ZShvcmlnaW5hbE9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVkRmllbGRWYWx1ZSA9IEludGVybmFsQ29weShvcmlnaW5hbEZpZWxkVmFsdWUsIHZpc2l0ZWQpO1xyXG4gICAgICAgICAgICAgICAgZmllbGRJbmZvLlNldFZhbHVlKGNsb25lT2JqZWN0LCBjbG9uZWRGaWVsZFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgQ29weTxUPih0aGlzIFQgb3JpZ2luYWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKFQpQ29weSgoT2JqZWN0KW9yaWdpbmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFJlZmVyZW5jZUVxdWFsaXR5Q29tcGFyZXIgOiBFcXVhbGl0eUNvbXBhcmVyPE9iamVjdD5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IHgsIG9iamVjdCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlZmVyZW5jZUVxdWFscyh4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZShvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgcmV0dXJuIG9iai5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuYW1lc3BhY2UgQXJyYXlFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjbGFzcyBBcnJheUV4dGVuc2lvbnNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBGb3JFYWNoKHRoaXMgQXJyYXkgYXJyYXksIEFjdGlvbjxBcnJheSwgaW50W10+IGFjdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5Lkxlbmd0aCA9PSAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBBcnJheVRyYXZlcnNlIHdhbGtlciA9IG5ldyBBcnJheVRyYXZlcnNlKGFycmF5KTtcclxuICAgICAgICAgICAgICAgIGRvIGFjdGlvbihhcnJheSwgd2Fsa2VyLlBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh3YWxrZXIuU3RlcCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgY2xhc3MgQXJyYXlUcmF2ZXJzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGludFtdIFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBwcml2YXRlIGludFtdIG1heExlbmd0aHM7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgQXJyYXlUcmF2ZXJzZShBcnJheSBhcnJheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWF4TGVuZ3RocyA9IG5ldyBpbnRbYXJyYXkuUmFua107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFycmF5LlJhbms7ICsraSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhMZW5ndGhzW2ldID0gYXJyYXkuR2V0TGVuZ3RoKGkpIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFBvc2l0aW9uID0gbmV3IGludFthcnJheS5SYW5rXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgU3RlcCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgUG9zaXRpb24uTGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFBvc2l0aW9uW2ldIDwgbWF4TGVuZ3Roc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uW2ldKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgaTsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NpdGlvbltqXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5SZWZsZWN0aW9uO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQmFzZVV0aWxzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBEZWJ1Z2dlclxyXG4gICAge1xyXG4gICAgICAgIGJvb2wgZGVidWdnaW5nO1xyXG4gICAgICAgIGludCBpZGVudDtcclxuICAgICAgICBTdHJpbmdCdWlsZGVyIHN0cmluZ0J1aWxkZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQWN0aXZlU3RhdGljIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIERlYnVnZ2VyKGJvb2wgZGVidWdnaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoQWN0aXZlU3RhdGljKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z2dpbmcgPSBkZWJ1Z2dpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQcmludChzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZGVidWdnaW5nKSByZXR1cm47XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaWRlbnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZSgnICcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBEZWlkZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkZW50ID0gaWRlbnQgLSAyOyA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIElkZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkZW50ID0gaWRlbnQrMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQWN0aXZlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghQWN0aXZlU3RhdGljKSByZXR1cm47XHJcbiAgICAgICAgICAgIGRlYnVnZ2luZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIEFjdGl2ZShib29sIHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIUFjdGl2ZVN0YXRpYykgcmV0dXJuO1xyXG4gICAgICAgICAgICBkZWJ1Z2dpbmcgPSB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUHJpbnQoT2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZGVidWdnaW5nKSByZXR1cm47XHJcbiAgICAgICAgICAgIHN0cmluZ0J1aWxkZXIuTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gb2JqLkdldFR5cGUoKTtcclxuICAgICAgICAgICAgc3RyaW5nQnVpbGRlci5BcHBlbmQoXCJUeXBlOiBcIik7XHJcbiAgICAgICAgICAgIHN0cmluZ0J1aWxkZXIuQXBwZW5kKHR5cGUuTmFtZSk7XHJcbiAgICAgICAgICAgIHN0cmluZ0J1aWxkZXIuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRzID0gdHlwZS5HZXRGaWVsZHMoQmluZGluZ0ZsYWdzLlB1YmxpYyB8IEJpbmRpbmdGbGFncy5Ob25QdWJsaWMgfCBCaW5kaW5nRmxhZ3MuSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZiBpbiBmaWVsZHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZ0J1aWxkZXIuQXBwZW5kKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmdCdWlsZGVyLkFwcGVuZCgnICcpO1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nQnVpbGRlci5BcHBlbmQoZi5HZXRWYWx1ZShvYmopKTtcclxuICAgICAgICAgICAgICAgIHN0cmluZ0J1aWxkZXIuQXBwZW5kKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmdCdWlsZGVyLkFwcGVuZCgnICcpO1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nQnVpbGRlci5BcHBlbmQoZi5OYW1lKTtcclxuICAgICAgICAgICAgICAgIHN0cmluZ0J1aWxkZXIuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHN0cmluZ0J1aWxkZXIuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG5cbiAgICBcbnByaXZhdGUgc3RhdGljIGJvb2wgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX0FjdGl2ZVN0YXRpYz10cnVlO31cclxufVxyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIE1vZHVsZSBIZWFkZXIgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXFxcclxuTW9kdWxlIE5hbWU6ICBEZWVwQ2xvbmVIZWxwZXIuY3NcclxuUHJvamVjdDogICAgICBDU0RlZXBDbG9uZU9iamVjdFxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblRoZSBjbGFzcyBjb250YWlucyB0aGUgbWV0aG9kcyB0aGF0IGltcGxlbWVudCBkZWVwIGNsb25lIHVzaW5nIHJlZmxlY3Rpb24uXHJcblxyXG5UaGlzIHNvdXJjZSBpcyBzdWJqZWN0IHRvIHRoZSBNaWNyb3NvZnQgUHVibGljIExpY2Vuc2UuXHJcblNlZSBodHRwOi8vd3d3Lm1pY3Jvc29mdC5jb20vZW4tdXMvb3Blbm5lc3MvbGljZW5zZXMuYXNweCNNUEwuXHJcbkFsbCBvdGhlciByaWdodHMgcmVzZXJ2ZWQuXHJcblxyXG5USElTIENPREUgQU5EIElORk9STUFUSU9OIElTIFBST1ZJREVEIFwiQVMgSVNcIiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBcclxuRUlUSEVSIEVYUFJFU1NFRCBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBJTVBMSUVEIFxyXG5XQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQvT1IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuXHJcblxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQmFzZVV0aWxzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRGVlcENsb25lSGVscGVyXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGVidWdnZXIgZGVidWcgPSBuZXcgRGVidWdnZXIoZmFsc2UpO1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEdldCB0aGUgZGVlcCBjbG9uZSBvZiBhbiBvYmplY3QuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHR5cGVwYXJhbSBuYW1lPVwiVFwiPlRoZSB0eXBlIG9mIHRoZSBvYmouPC90eXBlcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib2JqXCI+SXQgaXMgdGhlIG9iamVjdCB1c2VkIHRvIGRlZXAgY2xvbmUuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+UmV0dXJuIHRoZSBkZWVwIGNsb25lLjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgRGVlcENsb25lPFQ+KFQgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG9iaiA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiT2JqZWN0IGlzIG51bGxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChUKUNsb25lUHJvY2VkdXJlKG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVlcENvcHlQYXJ0aWFsKE9iamVjdCBmcm9tLCBPYmplY3QgdG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZnJvbSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiT2JqZWN0IGlzIG51bGxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQ29weVByb2NlZHVyZVBhcnRpYWwoZnJvbSwgdG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBUaGUgbWV0aG9kIGltcGxlbWVudHMgZGVlcCBjbG9uZSB1c2luZyByZWZsZWN0aW9uLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib2JqXCI+SXQgaXMgdGhlIG9iamVjdCB1c2VkIHRvIGRlZXAgY2xvbmUuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+UmV0dXJuIHRoZSBkZWVwIGNsb25lLjwvcmV0dXJucz5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvYmplY3QgQ2xvbmVQcm9jZWR1cmUoT2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAob2JqID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBUeXBlIHR5cGUgPSBvYmouR2V0VHlwZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGVidWcuUHJpbnQoXCJDbG9uaW5nOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAvL2RlYnVnLlByaW50KHR5cGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHR5cGUgb2Ygb2JqZWN0IGlzIHRoZSB2YWx1ZSB0eXBlLCB3ZSB3aWxsIGFsd2F5cyBnZXQgYSBuZXcgb2JqZWN0IHdoZW4gXHJcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QgaXMgYXNzaWduZWQgdG8gYW5vdGhlciB2YXJpYWJsZS4gU28gaWYgdGhlIHR5cGUgb2YgdGhlIFxyXG4gICAgICAgICAgICAvLyBvYmplY3QgaXMgcHJpbWl0aXZlIG9yIGVudW0sIHdlIGp1c3QgcmV0dXJuIHRoZSBvYmplY3QuIFdlIHdpbGwgcHJvY2VzcyB0aGUgXHJcbiAgICAgICAgICAgIC8vIHN0cnVjdCB0eXBlIHN1YnNlcXVlbnRseSBiZWNhdXNlIHRoZSBzdHJ1Y3QgdHlwZSBtYXkgY29udGFpbiB0aGUgcmVmZXJlbmNlIFxyXG4gICAgICAgICAgICAvLyBmaWVsZHMuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBzdHJpbmcgdmFyaWFibGVzIGNvbnRhaW4gdGhlIHNhbWUgY2hhcnMsIHRoZXkgYWx3YXlzIHJlZmVyIHRvIHRoZSBzYW1lIFxyXG4gICAgICAgICAgICAvLyBzdHJpbmcgaW4gdGhlIGhlYXAuIFNvIGlmIHRoZSB0eXBlIG9mIHRoZSBvYmplY3QgaXMgc3RyaW5nLCB3ZSBhbHNvIHJldHVybiB0aGUgXHJcbiAgICAgICAgICAgIC8vIG9iamVjdC5cclxuICAgICAgICAgICAgaWYgKHR5cGUuSXNFbnVtIHx8IHR5cGUgPT0gdHlwZW9mKHN0cmluZykgfHwgdHlwZSA9PSB0eXBlb2YoaW50KSB8fCB0eXBlID09IHR5cGVvZihjaGFyKSB8fCB0eXBlID09IHR5cGVvZihmbG9hdCkgfHwgdHlwZSA9PSB0eXBlb2YoZG91YmxlKSB8fCB0eXBlID09IHR5cGVvZihCb29sZWFuKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnLlByaW50KHR5cGUgKyBcIiBcIiArIG9iaisgXCIgLVZcIik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHR5cGUgb2YgdGhlIG9iamVjdCBpcyB0aGUgQXJyYXksIHdlIHVzZSB0aGUgQ3JlYXRlSW5zdGFuY2UgbWV0aG9kIHRvIGdldFxyXG4gICAgICAgICAgICAvLyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYXJyYXkuIFdlIGFsc28gcHJvY2VzcyByZWN1cnNpdmVseSB0aGlzIG1ldGhvZCBpbiB0aGUgXHJcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG9mIHRoZSBvcmlnaW5hbCBhcnJheSBiZWNhdXNlIHRoZSB0eXBlIG9mIHRoZSBlbGVtZW50IG1heSBiZSB0aGUgcmVmZXJlbmNlIFxyXG4gICAgICAgICAgICAvLyB0eXBlLlxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlLklzQXJyYXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy9zdHJpbmcgdHlwZU5hbWUgPSB0eXBlLkZ1bGxOYW1lLlJlcGxhY2UoXCJbXVwiLCBzdHJpbmcuRW1wdHkpO1xyXG4gICAgICAgICAgICAgICAgLy9kZWJ1Zy5QcmludCh0eXBlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBUeXBlIHR5cGVFbGVtZW50ID0gdHlwZS5HZXRFbGVtZW50VHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL2RlYnVnLlByaW50KHR5cGVFbGVtZW50K1wic3NcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBvYmogYXMgQXJyYXk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoID0gYXJyYXkuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkgY29waWVkQXJyYXkgPSBBcnJheS5DcmVhdGVJbnN0YW5jZSh0eXBlRWxlbWVudCwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYXJyYXkuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBkZWVwIGNsb25lIG9mIHRoZSBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBhcnJheSBhbmQgYXNzaWduIHRoZSBcclxuICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZSB0byB0aGUgbmV3IGFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgIGNvcGllZEFycmF5LlNldFZhbHVlKENsb25lUHJvY2VkdXJlKGFycmF5LkdldFZhbHVlKGkpKSwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcGllZEFycmF5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSB0eXBlIG9mIHRoZSBvYmplY3QgaXMgY2xhc3Mgb3Igc3RydWN0LCBpdCBtYXkgY29udGFpbiB0aGUgcmVmZXJlbmNlIGZpZWxkcywgXHJcbiAgICAgICAgICAgIC8vIHNvIHdlIHVzZSByZWZsZWN0aW9uIGFuZCBwcm9jZXNzIHJlY3Vyc2l2ZWx5IHRoaXMgbWV0aG9kIGluIHRoZSBmaWVsZHMgb2YgdGhlIG9iamVjdCBcclxuICAgICAgICAgICAgLy8gdG8gZ2V0IHRoZSBkZWVwIGNsb25lIG9mIHRoZSBvYmplY3QuIFxyXG4gICAgICAgICAgICAvLyBXZSB1c2UgVHlwZS5Jc1ZhbHVlVHlwZSBtZXRob2QgaGVyZSBiZWNhdXNlIHRoZXJlIGlzIG5vIHdheSB0byBpbmRpY2F0ZSBkaXJlY3RseSB3aGV0aGVyIFxyXG4gICAgICAgICAgICAvLyB0aGUgVHlwZSBpcyBhIHN0cnVjdCB0eXBlLlxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlLklzQ2xhc3N8fHR5cGUuSXNWYWx1ZVR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdCBjb3BpZWRPYmplY3QgPSBBY3RpdmF0b3IuQ3JlYXRlSW5zdGFuY2Uob2JqLkdldFR5cGUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBGaWVsZEluZm8uXHJcbiAgICAgICAgICAgICAgICBGaWVsZEluZm9bXSBmaWVsZHMgPSB0eXBlLkdldEZpZWxkcyhCaW5kaW5nRmxhZ3MuUHVibGljIHwgQmluZGluZ0ZsYWdzLk5vblB1YmxpYyB8IEJpbmRpbmdGbGFncy5JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChGaWVsZEluZm8gZmllbGQgaW4gZmllbGRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcuUHJpbnQoXCJGaWVsZDogXCIgKyBmaWVsZC5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QgZmllbGRWYWx1ZSA9IGZpZWxkLkdldFZhbHVlKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChcIkZpZWxkOiBcIiArIGZpZWxkLk5hbWUgKyBcIiBiZWluZyBzZXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZGVlcCBjbG9uZSBvZiB0aGUgZmllbGQgaW4gdGhlIG9yaWdpbmFsIG9iamVjdCBhbmQgYXNzaWduIHRoZSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgdG8gdGhlIGZpZWxkIGluIHRoZSBuZXcgb2JqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5TZXRWYWx1ZShjb3BpZWRPYmplY3QsIENsb25lUHJvY2VkdXJlKGZpZWxkVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb3BpZWRPYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJUaGUgb2JqZWN0IGlzIHVua25vd24gdHlwZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb2JqZWN0IENvcHlQcm9jZWR1cmVQYXJ0aWFsKE9iamVjdCBmcm9tLCBPYmplY3QgdG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZnJvbSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVHlwZSB0eXBlID0gZnJvbS5HZXRUeXBlKCk7XHJcblxyXG4gICAgICAgICAgICBkZWJ1Zy5QcmludChcIkNvcHlpbmcgXCIrdHlwZSk7XHJcbiAgICAgICAgICAgIGRlYnVnLklkZW50KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgdHlwZSBvZiBvYmplY3QgaXMgdGhlIHZhbHVlIHR5cGUsIHdlIHdpbGwgYWx3YXlzIGdldCBhIG5ldyBvYmplY3Qgd2hlbiBcclxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdCBpcyBhc3NpZ25lZCB0byBhbm90aGVyIHZhcmlhYmxlLiBTbyBpZiB0aGUgdHlwZSBvZiB0aGUgXHJcbiAgICAgICAgICAgIC8vIG9iamVjdCBpcyBwcmltaXRpdmUgb3IgZW51bSwgd2UganVzdCByZXR1cm4gdGhlIG9iamVjdC4gV2Ugd2lsbCBwcm9jZXNzIHRoZSBcclxuICAgICAgICAgICAgLy8gc3RydWN0IHR5cGUgc3Vic2VxdWVudGx5IGJlY2F1c2UgdGhlIHN0cnVjdCB0eXBlIG1heSBjb250YWluIHRoZSByZWZlcmVuY2UgXHJcbiAgICAgICAgICAgIC8vIGZpZWxkcy5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHN0cmluZyB2YXJpYWJsZXMgY29udGFpbiB0aGUgc2FtZSBjaGFycywgdGhleSBhbHdheXMgcmVmZXIgdG8gdGhlIHNhbWUgXHJcbiAgICAgICAgICAgIC8vIHN0cmluZyBpbiB0aGUgaGVhcC4gU28gaWYgdGhlIHR5cGUgb2YgdGhlIG9iamVjdCBpcyBzdHJpbmcsIHdlIGFsc28gcmV0dXJuIHRoZSBcclxuICAgICAgICAgICAgLy8gb2JqZWN0LlxyXG4gICAgICAgICAgICBpZiAodHlwZS5Jc0VudW0gfHwgdHlwZSA9PSB0eXBlb2Yoc3RyaW5nKSB8fCB0eXBlID09IHR5cGVvZihpbnQpIHx8IHR5cGUgPT0gdHlwZW9mKGNoYXIpIHx8IHR5cGUgPT0gdHlwZW9mKGZsb2F0KSB8fCB0eXBlID09IHR5cGVvZihkb3VibGUpKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnLlByaW50KHR5cGUgKyBcIiBcIitmcm9tICsgXCIgLVZcIik7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Zy5EZWlkZW50KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhcnJheXMgbm90IGltcGxlbWVudGVkXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUuSXNBcnJheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVidWcuRGVpZGVudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgdGhlIHR5cGUgb2YgdGhlIG9iamVjdCBpcyBjbGFzcyBvciBzdHJ1Y3QsIGl0IG1heSBjb250YWluIHRoZSByZWZlcmVuY2UgZmllbGRzLCBcclxuICAgICAgICAgICAgLy8gc28gd2UgdXNlIHJlZmxlY3Rpb24gYW5kIHByb2Nlc3MgcmVjdXJzaXZlbHkgdGhpcyBtZXRob2QgaW4gdGhlIGZpZWxkcyBvZiB0aGUgb2JqZWN0IFxyXG4gICAgICAgICAgICAvLyB0byBnZXQgdGhlIGRlZXAgY2xvbmUgb2YgdGhlIG9iamVjdC4gXHJcbiAgICAgICAgICAgIC8vIFdlIHVzZSBUeXBlLklzVmFsdWVUeXBlIG1ldGhvZCBoZXJlIGJlY2F1c2UgdGhlcmUgaXMgbm8gd2F5IHRvIGluZGljYXRlIGRpcmVjdGx5IHdoZXRoZXIgXHJcbiAgICAgICAgICAgIC8vIHRoZSBUeXBlIGlzIGEgc3RydWN0IHR5cGUuXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUuSXNDbGFzcyB8fCB0eXBlLklzVmFsdWVUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QgY29waWVkT2JqZWN0ID0gdG87XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBGaWVsZEluZm8uXHJcbiAgICAgICAgICAgICAgICBGaWVsZEluZm9bXSBmaWVsZHMgPSB0eXBlLkdldEZpZWxkcyhCaW5kaW5nRmxhZ3MuUHVibGljIHwgQmluZGluZ0ZsYWdzLk5vblB1YmxpYyB8IEJpbmRpbmdGbGFncy5JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoIChGaWVsZEluZm8gZmllbGQgaW4gZmllbGRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcuUHJpbnQoXCJGaWVsZDogXCIgKyBmaWVsZC5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QgZmllbGRWYWx1ZSA9IGZpZWxkLkdldFZhbHVlKGZyb20pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChcIkZpZWxkOiBcIiArIGZpZWxkLk5hbWUgKyBcIiBub3QgbnVsbCwgYmVpbmcgc2V0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGRlZXAgY2xvbmUgb2YgdGhlIGZpZWxkIGluIHRoZSBvcmlnaW5hbCBvYmplY3QgYW5kIGFzc2lnbiB0aGUgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIHRvIHRoZSBmaWVsZCBpbiB0aGUgbmV3IG9iamVjdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcuSWRlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuU2V0VmFsdWUoY29waWVkT2JqZWN0LCBDbG9uZVByb2NlZHVyZShmaWVsZFZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnLkRlaWRlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVidWcuRGVpZGVudCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcGllZE9iamVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnLkRlaWRlbnQoKTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIlRoZSBvYmplY3QgaXMgdW5rbm93biB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQmFzZVV0aWxzXHJcbntcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEV4dGVuc2lvbnNcclxuICAgIHtcclxuICAgICAgICAvL3ByaXZhdGUgc3RhdGljIFJhbmRvbSBybmcgPSBuZXcgUmFuZG9tKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaHVmZmxlPFQ+KHRoaXMgSUxpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgICAgICBpbnQgayA9IFJhbmRvbVN1cHBsaWVyLk5leHQobiArIDEpO1xyXG4gICAgICAgICAgICAgICAgVCB2YWx1ZSA9IGxpc3Rba107XHJcbiAgICAgICAgICAgICAgICBsaXN0W2tdID0gbGlzdFtuXTtcclxuICAgICAgICAgICAgICAgIGxpc3Rbbl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUIFJhbmRvbUVsZW1lbnQ8VD4odGhpcyBJTGlzdDxUPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBSYW5kb21TdXBwbGllci5OZXh0KGxpc3QuQ291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdFtlbGVtZW50XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiI3JlZ2lvbiBMaWNlbnNlXHJcbi8qXHJcbk1JVCBMaWNlbnNlXHJcbkNvcHlyaWdodCDCqSAyMDA2IFRoZSBNb25vLlhuYSBUZWFtXHJcblxyXG5BbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5cclxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxyXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcclxuU09GVFdBUkUuXHJcbiovXHJcbiNlbmRyZWdpb24gTGljZW5zZVxyXG51c2luZyBTeXN0ZW07XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkJhc2VVdGlsc1xyXG57XHJcbiAgICBwdWJsaWMgc3RydWN0IFBvaW50MkQgOiBJRXF1YXRhYmxlPFBvaW50MkQ+XHJcbiAgICB7XHJcbiAgICAgICAgI3JlZ2lvbiBQcml2YXRlIEZpZWxkc1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBQb2ludDJEIHplcm9Qb2ludCA9IG5ldyBQb2ludDJEKCk7XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gUHJpdmF0ZSBGaWVsZHNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIEZpZWxkc1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFg7XHJcbiAgICAgICAgcHVibGljIGludCBZO1xyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFB1YmxpYyBGaWVsZHNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFBvaW50MkQgWmVyb1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHplcm9Qb2ludDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAgICAgICBwdWJsaWMgUG9pbnQyRChpbnQgeCwgaW50IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlggPSB4O1xyXG4gICAgICAgICAgICB0aGlzLlkgPSB5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFBvaW50MkQgYSwgUG9pbnQyRCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuRXF1YWxzKGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KFBvaW50MkQgYSwgUG9pbnQyRCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICFhLkVxdWFscyhiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhQb2ludDJEIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoWCA9PSBvdGhlci5YKSAmJiAoWSA9PSBvdGhlci5ZKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAob2JqIGlzIFBvaW50MkQpID8gRXF1YWxzKChQb2ludDJEKW9iaikgOiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFggXiBZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInt7WDp7MH0gWTp7MX19fVwiLCBYLCBZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgIH1cclxufVxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5CYXNlVXRpbHNcclxue1xyXG4gICAgc3RhdGljIHB1YmxpYyBjbGFzcyBSYW5kb21TdXBwbGllclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRnVuYzxmbG9hdD4gR2VuZXJhdGV7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFJhbmdlKGludCBtaW4sIGludCBtYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpIChHZW5lcmF0ZSgpICogKG1heC1taW4pK21pbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgUmFuZG9tRWxlbWVudDxUPihUW10gYXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYXJyYXlbUmFuZ2UoMCwgYXJyYXkuTGVuZ3RoKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgaW50IE5leHQoaW50IGNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJhbmdlKDAsIGNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiI3JlZ2lvbiBMaWNlbnNlXHJcbi8qXHJcbk1JVCBMaWNlbnNlXHJcbkNvcHlyaWdodCDCqSAyMDA2IFRoZSBNb25vLlhuYSBUZWFtXHJcblxyXG5BbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5cclxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxyXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcclxuU09GVFdBUkUuXHJcbiovXHJcbiNlbmRyZWdpb24gTGljZW5zZVxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjtcclxudXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5CYXNlVXRpbHNcclxue1xyXG5cclxuICAgIHB1YmxpYyBzdHJ1Y3QgUmVjdCA6IElFcXVhdGFibGU8UmVjdD5cclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFByaXZhdGUgRmllbGRzXHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFJlY3QgZW1wdHlSZWN0YW5nbGUgPSBuZXcgUmVjdCgpO1xyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFByaXZhdGUgRmllbGRzXHJcblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBGaWVsZHNcclxuXHJcbiAgICAgICAgcHVibGljIGludCBYO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgWTtcclxuICAgICAgICBwdWJsaWMgaW50IFdpZHRoO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgSGVpZ2h0O1xyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFB1YmxpYyBGaWVsZHNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIFByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBSZWN0IEVtcHR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZW1wdHlSZWN0YW5nbGU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTGVmdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRoaXMuWDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBSaWdodFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuICh0aGlzLlggKyB0aGlzLldpZHRoKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBUb3BcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB0aGlzLlk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQm90dG9tXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gKHRoaXMuWSArIHRoaXMuSGVpZ2h0KTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG5cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgICAgICAgcHVibGljIFJlY3QoaW50IHgsIGludCB5LCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlggPSB4O1xyXG4gICAgICAgICAgICB0aGlzLlkgPSB5O1xyXG4gICAgICAgICAgICB0aGlzLldpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFJlY3QgYSwgUmVjdCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoYS5YID09IGIuWCkgJiYgKGEuWSA9PSBiLlkpICYmIChhLldpZHRoID09IGIuV2lkdGgpICYmIChhLkhlaWdodCA9PSBiLkhlaWdodCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoKCh0aGlzLlggPD0geCkgJiYgKHggPCAodGhpcy5YICsgdGhpcy5XaWR0aCkpKSAmJiAodGhpcy5ZIDw9IHkpKSAmJiAoeSA8ICh0aGlzLlkgKyB0aGlzLkhlaWdodCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKFZlY3RvcjJEIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoKCh0aGlzLlggPD0gdmFsdWUuWCkgJiYgKHZhbHVlLlggPCAodGhpcy5YICsgdGhpcy5XaWR0aCkpKSAmJiAodGhpcy5ZIDw9IHZhbHVlLlkpKSAmJiAodmFsdWUuWSA8ICh0aGlzLlkgKyB0aGlzLkhlaWdodCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKFBvaW50MkQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKCgoKHRoaXMuWCA8PSB2YWx1ZS5YKSAmJiAodmFsdWUuWCA8ICh0aGlzLlggKyB0aGlzLldpZHRoKSkpICYmICh0aGlzLlkgPD0gdmFsdWUuWSkpICYmICh2YWx1ZS5ZIDwgKHRoaXMuWSArIHRoaXMuSGVpZ2h0KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoUmVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKCgodGhpcy5YIDw9IHZhbHVlLlgpICYmICgodmFsdWUuWCArIHZhbHVlLldpZHRoKSA8PSAodGhpcy5YICsgdGhpcy5XaWR0aCkpKSAmJiAodGhpcy5ZIDw9IHZhbHVlLlkpKSAmJiAoKHZhbHVlLlkgKyB2YWx1ZS5IZWlnaHQpIDw9ICh0aGlzLlkgKyB0aGlzLkhlaWdodCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShSZWN0IGEsIFJlY3QgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKGEgPT0gYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPZmZzZXQoUG9pbnQyRCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBYICs9IG9mZnNldC5YO1xyXG4gICAgICAgICAgICBZICs9IG9mZnNldC5ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT2Zmc2V0KGludCBvZmZzZXRYLCBpbnQgb2Zmc2V0WSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFggKz0gb2Zmc2V0WDtcclxuICAgICAgICAgICAgWSArPSBvZmZzZXRZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBvaW50MkQgQ2VudGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQb2ludDJEKCh0aGlzLlggKyB0aGlzLldpZHRoKSAvIDIsICh0aGlzLlkgKyB0aGlzLkhlaWdodCkgLyAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW5mbGF0ZShpbnQgaG9yaXpvbnRhbFZhbHVlLCBpbnQgdmVydGljYWxWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFggLT0gaG9yaXpvbnRhbFZhbHVlO1xyXG4gICAgICAgICAgICBZIC09IHZlcnRpY2FsVmFsdWU7XHJcbiAgICAgICAgICAgIFdpZHRoICs9IGhvcml6b250YWxWYWx1ZSAqIDI7XHJcbiAgICAgICAgICAgIEhlaWdodCArPSB2ZXJ0aWNhbFZhbHVlICogMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRW1wdHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCgoKHRoaXMuV2lkdGggPT0gMCkgJiYgKHRoaXMuSGVpZ2h0ID09IDApKSAmJiAodGhpcy5YID09IDApKSAmJiAodGhpcy5ZID09IDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFJlY3Qgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcyA9PSBvdGhlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChvYmogaXMgUmVjdCkgPyB0aGlzID09ICgoUmVjdClvYmopIDogZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwie3tYOnswfSBZOnsxfSBXaWR0aDp7Mn0gSGVpZ2h0OnszfX19XCIsIFgsIFksIFdpZHRoLCBIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuWCBeIHRoaXMuWSBeIHRoaXMuV2lkdGggXiB0aGlzLkhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJbnRlcnNlY3RzKFJlY3QgcjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIShyMi5MZWZ0ID4gUmlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgfHwgcjIuUmlnaHQgPCBMZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgIHx8IHIyLlRvcCA+IEJvdHRvbVxyXG4gICAgICAgICAgICAgICAgICAgICB8fCByMi5Cb3R0b20gPCBUb3BcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBJbnRlcnNlY3RzKHJlZiBSZWN0IHZhbHVlLCBvdXQgYm9vbCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQgPSAhKHZhbHVlLkxlZnQgPiBSaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZS5SaWdodCA8IExlZnRcclxuICAgICAgICAgICAgICAgICAgICAgfHwgdmFsdWUuVG9wID4gQm90dG9tXHJcbiAgICAgICAgICAgICAgICAgICAgIHx8IHZhbHVlLkJvdHRvbSA8IFRvcFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkJhc2VVdGlsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGltZVN0YW1wXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGZsb2F0IEN1cnJlbnRTbmFwO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGltZVN0YW1wU25hcCBHZXRTbmFwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZVN0YW1wU25hcChDdXJyZW50U25hcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkdmFuY2UoZmxvYXQgZGVsdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDdXJyZW50U25hcCArPSBkZWx0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0cnVjdCBUaW1lU3RhbXBTbmFwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZsb2F0IFRpbWVTbmFwO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGltZVN0YW1wU25hcChmbG9hdCBzbmFwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGltZVNuYXAgPSBzbmFwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQmFzZVV0aWxzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVW5pY29kZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBpbnQgU3BhY2UgPSAzMjtcclxuICAgICAgICBwdWJsaWMgY29uc3QgaW50IEVudGVyID0gMTM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdCBpbnQga2V5RG93biA9IDQwO1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBpbnQga2V5TGVmdCA9IDM3O1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBpbnQga2V5VXAgPSAzODtcclxuICAgICAgICBwdWJsaWMgY29uc3QgaW50IGtleVJpZ2h0ID0gMzk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdCBjaGFyIFVwYXJyb3cyID0gKGNoYXIpMjQ7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGNoYXIgRG93bmFycm93MiA9IChjaGFyKTI1O1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBjaGFyIFJpZ2h0YXJyb3cyID0gKGNoYXIpMjY7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGNoYXIgTGVmdGFycm93MiA9IChjaGFyKTI3O1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBjaGFyIFVwYXJyb3cgPSAoY2hhcikzMDtcclxuICAgICAgICBwdWJsaWMgY29uc3QgY2hhciBEb3duYXJyb3cgPSAoY2hhcikzMTtcclxuICAgICAgICBwdWJsaWMgY29uc3QgY2hhciBMZWZ0YXJyb3cgPSAoY2hhcikxNztcclxuICAgICAgICBwdWJsaWMgY29uc3QgY2hhciBSaWdodGFycm93ID0gKGNoYXIpMTY7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGNoYXIgQXNjaWlHcmlkSG9yID0gKGNoYXIpMTk2O1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBjaGFyIEFzY2lpR3JpZFZlciA9IChjaGFyKTE3OTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBjaGFyW10gZ3JpZHMgPSBuZXcgY2hhcltdIHtcclxuICAgICAgICAgICAgQXNjaWlHcmlkSG9yLFxyXG4gICAgICAgICAgICBBc2NpaUdyaWRWZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgY2hhciBBc2NpaUdyaWRVcExlZnQgPSAoY2hhcikyMTc7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBjaGFyIEFzY2lpR3JpZFVwUmlnaHQgPSAoY2hhcikgMTkyO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgY2hhciBBc2NpaUdyaWRVcFJpZ2h0TGVmdCA9IChjaGFyKTE5MztcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGNoYXIgQXNjaWlHcmlkRG93bkxlZnQgPSAoY2hhcikxOTE7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBjaGFyIEFzY2lpR3JpZERvd25SaWdodCA9IChjaGFyKTIxODtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGNoYXIgQXNjaWlHcmlkRG93blJpZ2h0TGVmdCA9IChjaGFyKTE5NDtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGludCBFc2NhcGUgPSAoY2hhcikyNztcclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG4vL3VzaW5nIFN5c3RlbS5EcmF3aW5nO1xyXG51c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQmFzZVV0aWxzXHJcbntcclxuICAgIFtTZXJpYWxpemFibGVdXHJcbiAgICBwdWJsaWMgc3RydWN0IFZlY3RvcjJEIDogSUVxdWF0YWJsZTxWZWN0b3IyRD5cclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIFByaXZhdGUgRmllbGRzXHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFZlY3RvcjJEIHplcm9WZWN0b3IgPSBuZXcgVmVjdG9yMkQoMGYsIDBmKTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBWZWN0b3IyRCB1bml0VmVjdG9yID0gbmV3IFZlY3RvcjJEKDFmLCAxZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yMkQgdW5pdFhWZWN0b3IgPSBuZXcgVmVjdG9yMkQoMWYsIDBmKTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBWZWN0b3IyRCB1bml0WVZlY3RvciA9IG5ldyBWZWN0b3IyRCgwZiwgMWYpO1xyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFByaXZhdGUgRmllbGRzXHJcblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBGaWVsZHNcclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFg7XHJcbiAgICAgICAgcHVibGljIGZsb2F0IFk7XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gUHVibGljIEZpZWxkc1xyXG5cclxuICAgICAgICAjIHJlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFhJbnQgeyBnZXQgeyByZXR1cm4gKGludClYOyB9IH1cclxuICAgICAgICBwdWJsaWMgaW50IFlJbnQgeyBnZXQgeyByZXR1cm4gKGludClZOyB9IH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQdWJsaWMgUHJvcGVydGllc1xyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnN0YW50c1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjJEIFplcm9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB6ZXJvVmVjdG9yOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjJEIE9uZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHVuaXRWZWN0b3I7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMkQgVW5pdFhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB1bml0WFZlY3RvcjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBVbml0WVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHVuaXRZVmVjdG9yOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFByb3BlcnRpZXNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IyRChmbG9hdCB4LCBmbG9hdCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5YID0geDtcclxuICAgICAgICAgICAgdGhpcy5ZID0geTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IyRChmbG9hdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuWCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLlkgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMkQgSW50ZXJwb2xhdGVSb3VuZGVkKFZlY3RvcjJEIHN0YXJ0UG9zaXRpb24sIFZlY3RvcjJEIGVuZFBvc2l0aW9uLCBmbG9hdCByYXRpbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoc3RhcnRQb3NpdGlvbiAqICgxIC0gcmF0aW8pICsgZW5kUG9zaXRpb24gKiByYXRpbykuUm91bmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgVmVjdG9yMkQgUm91bmQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyRCgoZmxvYXQpTWF0aC5Sb3VuZChYKSwgKGZsb2F0KU1hdGguUm91bmQoWSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIE1ldGhvZHNcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBBZGQoVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZTEuWCArPSB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgdmFsdWUxLlkgKz0gdmFsdWUyLlk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQWRkKHJlZiBWZWN0b3IyRCB2YWx1ZTEsIHJlZiBWZWN0b3IyRCB2YWx1ZTIsIG91dCBWZWN0b3IyRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlMS5YICsgdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUxLlkgKyB2YWx1ZTIuWTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZsb2F0IERpc3RhbmNlKFZlY3RvcjJEIHZhbHVlMSwgVmVjdG9yMkQgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmxvYXQgdjEgPSB2YWx1ZTEuWCAtIHZhbHVlMi5YLCB2MiA9IHZhbHVlMS5ZIC0gdmFsdWUyLlk7XHJcbiAgICAgICAgICAgIHJldHVybiAoZmxvYXQpTWF0aC5TcXJ0KCh2MSAqIHYxKSArICh2MiAqIHYyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGlzdGFuY2UocmVmIFZlY3RvcjJEIHZhbHVlMSwgcmVmIFZlY3RvcjJEIHZhbHVlMiwgb3V0IGZsb2F0IHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IHYxID0gdmFsdWUxLlggLSB2YWx1ZTIuWCwgdjIgPSB2YWx1ZTEuWSAtIHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXN1bHQgPSAoZmxvYXQpTWF0aC5TcXJ0KCh2MSAqIHYxKSArICh2MiAqIHYyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZsb2F0IERpc3RhbmNlU3F1YXJlZChWZWN0b3IyRCB2YWx1ZTEsIFZlY3RvcjJEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IHYxID0gdmFsdWUxLlggLSB2YWx1ZTIuWCwgdjIgPSB2YWx1ZTEuWSAtIHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXR1cm4gKHYxICogdjEpICsgKHYyICogdjIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERpc3RhbmNlU3F1YXJlZChyZWYgVmVjdG9yMkQgdmFsdWUxLCByZWYgVmVjdG9yMkQgdmFsdWUyLCBvdXQgZmxvYXQgcmVzdWx0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmxvYXQgdjEgPSB2YWx1ZTEuWCAtIHZhbHVlMi5YLCB2MiA9IHZhbHVlMS5ZIC0gdmFsdWUyLlk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9ICh2MSAqIHYxKSArICh2MiAqIHYyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldChpbnQgeCwgaW50IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBYID0geDtcclxuICAgICAgICAgICAgWSA9IHk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBEaXZpZGUoVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZTEuWCAvPSB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgdmFsdWUxLlkgLz0gdmFsdWUyLlk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGl2aWRlKHJlZiBWZWN0b3IyRCB2YWx1ZTEsIHJlZiBWZWN0b3IyRCB2YWx1ZTIsIG91dCBWZWN0b3IyRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlMS5YIC8gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUxLlkgLyB2YWx1ZTIuWTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMkQgRGl2aWRlKFZlY3RvcjJEIHZhbHVlMSwgZmxvYXQgZGl2aWRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEgLyBkaXZpZGVyO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWCAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEaXZpZGUocmVmIFZlY3RvcjJEIHZhbHVlMSwgZmxvYXQgZGl2aWRlciwgb3V0IFZlY3RvcjJEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEgLyBkaXZpZGVyO1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlMS5YICogZmFjdG9yO1xyXG4gICAgICAgICAgICByZXN1bHQuWSA9IHZhbHVlMS5ZICogZmFjdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBmbG9hdCBEb3QoVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHZhbHVlMS5YICogdmFsdWUyLlgpICsgKHZhbHVlMS5ZICogdmFsdWUyLlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERvdChyZWYgVmVjdG9yMkQgdmFsdWUxLCByZWYgVmVjdG9yMkQgdmFsdWUyLCBvdXQgZmxvYXQgcmVzdWx0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gKHZhbHVlMS5YICogdmFsdWUyLlgpICsgKHZhbHVlMS5ZICogdmFsdWUyLlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob2JqIGlzIFZlY3RvcjJEKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRXF1YWxzKChWZWN0b3IyRCl0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFZlY3RvcjJEIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChYID09IG90aGVyLlgpICYmIChZID09IG90aGVyLlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBSZWZsZWN0KFZlY3RvcjJEIHZlY3RvciwgVmVjdG9yMkQgbm9ybWFsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVmVjdG9yMkQgcmVzdWx0O1xyXG4gICAgICAgICAgICBmbG9hdCB2YWwgPSAyLjBmICogKCh2ZWN0b3IuWCAqIG5vcm1hbC5YKSArICh2ZWN0b3IuWSAqIG5vcm1hbC5ZKSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmVjdG9yLlggLSAobm9ybWFsLlggKiB2YWwpO1xyXG4gICAgICAgICAgICByZXN1bHQuWSA9IHZlY3Rvci5ZIC0gKG5vcm1hbC5ZICogdmFsKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWZsZWN0KHJlZiBWZWN0b3IyRCB2ZWN0b3IsIHJlZiBWZWN0b3IyRCBub3JtYWwsIG91dCBWZWN0b3IyRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCB2YWwgPSAyLjBmICogKCh2ZWN0b3IuWCAqIG5vcm1hbC5YKSArICh2ZWN0b3IuWSAqIG5vcm1hbC5ZKSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmVjdG9yLlggLSAobm9ybWFsLlggKiB2YWwpO1xyXG4gICAgICAgICAgICByZXN1bHQuWSA9IHZlY3Rvci5ZIC0gKG5vcm1hbC5ZICogdmFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFguR2V0SGFzaENvZGUoKSArIFkuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgTGVuZ3RoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZmxvYXQpTWF0aC5TcXJ0KChYICogWCkgKyAoWSAqIFkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBMZW5ndGhTcXVhcmVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoWCAqIFgpICsgKFkgKiBZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBNYXgoVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHZhbHVlMS5YID4gdmFsdWUyLlggPyB2YWx1ZTEuWCA6IHZhbHVlMi5YLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUxLlkgPiB2YWx1ZTIuWSA/IHZhbHVlMS5ZIDogdmFsdWUyLlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE1heChyZWYgVmVjdG9yMkQgdmFsdWUxLCByZWYgVmVjdG9yMkQgdmFsdWUyLCBvdXQgVmVjdG9yMkQgcmVzdWx0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0LlggPSB2YWx1ZTEuWCA+IHZhbHVlMi5YID8gdmFsdWUxLlggOiB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZTEuWSA+IHZhbHVlMi5ZID8gdmFsdWUxLlkgOiB2YWx1ZTIuWTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMkQgTWluKFZlY3RvcjJEIHZhbHVlMSwgVmVjdG9yMkQgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyRCh2YWx1ZTEuWCA8IHZhbHVlMi5YID8gdmFsdWUxLlggOiB2YWx1ZTIuWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlMS5ZIDwgdmFsdWUyLlkgPyB2YWx1ZTEuWSA6IHZhbHVlMi5ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNaW4ocmVmIFZlY3RvcjJEIHZhbHVlMSwgcmVmIFZlY3RvcjJEIHZhbHVlMiwgb3V0IFZlY3RvcjJEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmFsdWUxLlggPCB2YWx1ZTIuWCA/IHZhbHVlMS5YIDogdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUxLlkgPCB2YWx1ZTIuWSA/IHZhbHVlMS5ZIDogdmFsdWUyLlk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjJEIE11bHRpcGx5KFZlY3RvcjJEIHZhbHVlMSwgVmVjdG9yMkQgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggKj0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZICo9IHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBNdWx0aXBseShWZWN0b3IyRCB2YWx1ZTEsIGZsb2F0IHNjYWxlRmFjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZICo9IHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE11bHRpcGx5KHJlZiBWZWN0b3IyRCB2YWx1ZTEsIGZsb2F0IHNjYWxlRmFjdG9yLCBvdXQgVmVjdG9yMkQgcmVzdWx0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0LlggPSB2YWx1ZTEuWCAqIHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICByZXN1bHQuWSA9IHZhbHVlMS5ZICogc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTXVsdGlwbHkocmVmIFZlY3RvcjJEIHZhbHVlMSwgcmVmIFZlY3RvcjJEIHZhbHVlMiwgb3V0IFZlY3RvcjJEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmFsdWUxLlggKiB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZTEuWSAqIHZhbHVlMi5ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBOZWdhdGUoVmVjdG9yMkQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZS5YID0gLXZhbHVlLlg7XHJcbiAgICAgICAgICAgIHZhbHVlLlkgPSAtdmFsdWUuWTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE5lZ2F0ZShyZWYgVmVjdG9yMkQgdmFsdWUsIG91dCBWZWN0b3IyRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IC12YWx1ZS5YO1xyXG4gICAgICAgICAgICByZXN1bHQuWSA9IC12YWx1ZS5ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTm9ybWFsaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IHZhbCA9IDEuMGYgLyAoZmxvYXQpTWF0aC5TcXJ0KChYICogWCkgKyAoWSAqIFkpKTtcclxuICAgICAgICAgICAgWCAqPSB2YWw7XHJcbiAgICAgICAgICAgIFkgKj0gdmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBOb3JtYWxpemUoVmVjdG9yMkQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCB2YWwgPSAxLjBmIC8gKGZsb2F0KU1hdGguU3FydCgodmFsdWUuWCAqIHZhbHVlLlgpICsgKHZhbHVlLlkgKiB2YWx1ZS5ZKSk7XHJcbiAgICAgICAgICAgIHZhbHVlLlggKj0gdmFsO1xyXG4gICAgICAgICAgICB2YWx1ZS5ZICo9IHZhbDtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE5vcm1hbGl6ZShyZWYgVmVjdG9yMkQgdmFsdWUsIG91dCBWZWN0b3IyRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCB2YWwgPSAxLjBmIC8gKGZsb2F0KU1hdGguU3FydCgodmFsdWUuWCAqIHZhbHVlLlgpICsgKHZhbHVlLlkgKiB2YWx1ZS5ZKSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmFsdWUuWCAqIHZhbDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZS5ZICogdmFsO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjJEIFN1YnRyYWN0KFZlY3RvcjJEIHZhbHVlMSwgVmVjdG9yMkQgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggLT0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZIC09IHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFN1YnRyYWN0KHJlZiBWZWN0b3IyRCB2YWx1ZTEsIHJlZiBWZWN0b3IyRCB2YWx1ZTIsIG91dCBWZWN0b3IyRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlMS5YIC0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUxLlkgLSB2YWx1ZTIuWTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ3VsdHVyZUluZm8gY3VycmVudEN1bHR1cmUgPSBDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoY3VycmVudEN1bHR1cmUsIFwie3tYOnswfSBZOnsxfX19XCIsIG5ldyBvYmplY3RbXSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlguVG9TdHJpbmcoY3VycmVudEN1bHR1cmUpLCB0aGlzLlkuVG9TdHJpbmcoY3VycmVudEN1bHR1cmUpIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQdWJsaWMgTWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPcGVyYXRvcnNcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBvcGVyYXRvciAtKFZlY3RvcjJEIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUuWCA9IC12YWx1ZS5YO1xyXG4gICAgICAgICAgICB2YWx1ZS5ZID0gLXZhbHVlLlk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxLlggPT0gdmFsdWUyLlggJiYgdmFsdWUxLlkgPT0gdmFsdWUyLlk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yICE9KFZlY3RvcjJEIHZhbHVlMSwgVmVjdG9yMkQgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMS5YICE9IHZhbHVlMi5YIHx8IHZhbHVlMS5ZICE9IHZhbHVlMi5ZO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMkQgb3BlcmF0b3IgKyhWZWN0b3IyRCB2YWx1ZTEsIFZlY3RvcjJEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YICs9IHZhbHVlMi5YO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSArPSB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjJEIG9wZXJhdG9yIC0oVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZTEuWCAtPSB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgdmFsdWUxLlkgLT0gdmFsdWUyLlk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBvcGVyYXRvciAqKFZlY3RvcjJEIHZhbHVlMSwgVmVjdG9yMkQgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggKj0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZICo9IHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMkQgb3BlcmF0b3IgKihWZWN0b3IyRCB2YWx1ZSwgZmxvYXQgc2NhbGVGYWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZS5YICo9IHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICB2YWx1ZS5ZICo9IHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBvcGVyYXRvciAqKGZsb2F0IHNjYWxlRmFjdG9yLCBWZWN0b3IyRCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlLlggKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlLlkgKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjJEIG9wZXJhdG9yIC8oVmVjdG9yMkQgdmFsdWUxLCBWZWN0b3IyRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZTEuWCAvPSB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgdmFsdWUxLlkgLz0gdmFsdWUyLlk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyRCBvcGVyYXRvciAvKFZlY3RvcjJEIHZhbHVlMSwgZmxvYXQgZGl2aWRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEgLyBkaXZpZGVyO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWCAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gT3BlcmF0b3JzXHJcbiAgICB9XHJcbn0iLCIvLyBNSVQgTGljZW5zZSAtIENvcHlyaWdodCAoQykgVGhlIE1vbm8uWG5hIFRlYW1cclxuLy8gVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIGRlZmluZWQgaW5cclxuLy8gZmlsZSAnTElDRU5TRS50eHQnLCB3aGljaCBpcyBwYXJ0IG9mIHRoaXMgc291cmNlIGNvZGUgcGFja2FnZS5cclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQmFzZVV0aWxzXHJcbntcclxuXHJcbiAgICBcclxuICAgIHB1YmxpYyBzdHJ1Y3QgVmVjdG9yM0QgOiBJRXF1YXRhYmxlPFZlY3RvcjNEPlxyXG4gICAge1xyXG4gICAgICAgICNyZWdpb24gUHJpdmF0ZSBGaWVsZHNcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgemVybyA9IG5ldyBWZWN0b3IzRCgwZiwgMGYsIDBmKTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBWZWN0b3IzRCBvbmUgPSBuZXcgVmVjdG9yM0QoMWYsIDFmLCAxZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgdW5pdFggPSBuZXcgVmVjdG9yM0QoMWYsIDBmLCAwZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgdW5pdFkgPSBuZXcgVmVjdG9yM0QoMGYsIDFmLCAwZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgdW5pdFogPSBuZXcgVmVjdG9yM0QoMGYsIDBmLCAxZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgdXAgPSBuZXcgVmVjdG9yM0QoMGYsIDFmLCAwZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgZG93biA9IG5ldyBWZWN0b3IzRCgwZiwgLTFmLCAwZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgcmlnaHQgPSBuZXcgVmVjdG9yM0QoMWYsIDBmLCAwZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgbGVmdCA9IG5ldyBWZWN0b3IzRCgtMWYsIDBmLCAwZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgZm9yd2FyZCA9IG5ldyBWZWN0b3IzRCgwZiwgMGYsIC0xZik7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVmVjdG9yM0QgYmFja3dhcmQgPSBuZXcgVmVjdG9yM0QoMGYsIDBmLCAxZik7XHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gUHJpdmF0ZSBGaWVsZHNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHVibGljIEZpZWxkc1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgZmxvYXQgWDtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFk7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBaO1xyXG5cclxuICAgICAgICAjZW5kcmVnaW9uIFB1YmxpYyBGaWVsZHNcclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFJldHVybnMgYSA8c2VlPlZlY3RvcjM8L3NlZT4gd2l0aCBjb21wb25lbnRzIDAsIDAsIDAuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIFplcm9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB6ZXJvOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFJldHVybnMgYSA8c2VlPlZlY3RvcjM8L3NlZT4gd2l0aCBjb21wb25lbnRzIDEsIDEsIDEuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIE9uZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIG9uZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBSZXR1cm5zIGEgPHNlZT5WZWN0b3IzPC9zZWU+IHdpdGggY29tcG9uZW50cyAxLCAwLCAwLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IzRCBVbml0WFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHVuaXRYOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFJldHVybnMgYSA8c2VlPlZlY3RvcjM8L3NlZT4gd2l0aCBjb21wb25lbnRzIDAsIDEsIDAuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIFVuaXRZXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gdW5pdFk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUmV0dXJucyBhIDxzZWU+VmVjdG9yMzwvc2VlPiB3aXRoIGNvbXBvbmVudHMgMCwgMCwgMS5cclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0QgVW5pdFpcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB1bml0WjsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IzRCBVcFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHVwOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIERvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBkb3duOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIFJpZ2h0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gcmlnaHQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0QgTGVmdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGxlZnQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0QgRm9yd2FyZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGZvcndhcmQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0QgQmFja3dhcmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBiYWNrd2FyZDsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG5cclxuICAgICAgICAjcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAgICAgICBwdWJsaWMgVmVjdG9yM0QoZmxvYXQgeCwgZmxvYXQgeSwgZmxvYXQgeilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuWCA9IHg7XHJcbiAgICAgICAgICAgIHRoaXMuWSA9IHk7XHJcbiAgICAgICAgICAgIHRoaXMuWiA9IHo7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIFZlY3RvcjNEKGZsb2F0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5YID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuWSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLlogPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgVmVjdG9yM0QoVmVjdG9yMkQgdmFsdWUsIGZsb2F0IHopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlggPSB2YWx1ZS5YO1xyXG4gICAgICAgICAgICB0aGlzLlkgPSB2YWx1ZS5ZO1xyXG4gICAgICAgICAgICB0aGlzLlogPSB6O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG5cclxuICAgICAgICAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUGVyZm9ybXMgdmVjdG9yIGFkZGl0aW9uIG9uIDxwYXJhbXJlZiBuYW1lPVwidmFsdWUxXCIvPiBhbmQgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZTJcIi8+LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWUxXCI+VGhlIGZpcnN0IHZlY3RvciB0byBhZGQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZTJcIj5UaGUgc2Vjb25kIHZlY3RvciB0byBhZGQuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+VGhlIHJlc3VsdCBvZiB0aGUgdmVjdG9yIGFkZGl0aW9uLjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIEFkZChWZWN0b3IzRCB2YWx1ZTEsIFZlY3RvcjNEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YICs9IHZhbHVlMi5YO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSArPSB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgdmFsdWUxLlogKz0gdmFsdWUyLlo7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFBlcmZvcm1zIHZlY3RvciBhZGRpdGlvbiBvbiA8cGFyYW1yZWYgbmFtZT1cInZhbHVlMVwiLz4gYW5kXHJcbiAgICAgICAgLy8vIDxwYXJhbXJlZiBuYW1lPVwidmFsdWUyXCIvPiwgc3RvcmluZyB0aGUgcmVzdWx0IG9mIHRoZVxyXG4gICAgICAgIC8vLyBhZGRpdGlvbiBpbiA8cGFyYW1yZWYgbmFtZT1cInJlc3VsdFwiLz4uXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZTFcIj5UaGUgZmlyc3QgdmVjdG9yIHRvIGFkZC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZhbHVlMlwiPlRoZSBzZWNvbmQgdmVjdG9yIHRvIGFkZC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInJlc3VsdFwiPlRoZSByZXN1bHQgb2YgdGhlIHZlY3RvciBhZGRpdGlvbi48L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBZGQocmVmIFZlY3RvcjNEIHZhbHVlMSwgcmVmIFZlY3RvcjNEIHZhbHVlMiwgb3V0IFZlY3RvcjNEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmFsdWUxLlggKyB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZTEuWSArIHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXN1bHQuWiA9IHZhbHVlMS5aICsgdmFsdWUyLlo7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IzRCBDcm9zcyhWZWN0b3IzRCB2ZWN0b3IxLCBWZWN0b3IzRCB2ZWN0b3IyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ3Jvc3MocmVmIHZlY3RvcjEsIHJlZiB2ZWN0b3IyLCBvdXQgdmVjdG9yMSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2ZWN0b3IxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIENyb3NzKHJlZiBWZWN0b3IzRCB2ZWN0b3IxLCByZWYgVmVjdG9yM0QgdmVjdG9yMiwgb3V0IFZlY3RvcjNEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gdmVjdG9yMS5ZICogdmVjdG9yMi5aIC0gdmVjdG9yMi5ZICogdmVjdG9yMS5aO1xyXG4gICAgICAgICAgICB2YXIgeSA9IC0odmVjdG9yMS5YICogdmVjdG9yMi5aIC0gdmVjdG9yMi5YICogdmVjdG9yMS5aKTtcclxuICAgICAgICAgICAgdmFyIHogPSB2ZWN0b3IxLlggKiB2ZWN0b3IyLlkgLSB2ZWN0b3IyLlggKiB2ZWN0b3IxLlk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0geDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB5O1xyXG4gICAgICAgICAgICByZXN1bHQuWiA9IHo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZsb2F0IERpc3RhbmNlKFZlY3RvcjNEIHZlY3RvcjEsIFZlY3RvcjNEIHZlY3RvcjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCByZXN1bHQ7XHJcbiAgICAgICAgICAgIERpc3RhbmNlU3F1YXJlZChyZWYgdmVjdG9yMSwgcmVmIHZlY3RvcjIsIG91dCByZXN1bHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gKGZsb2F0KU1hdGguU3FydChyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERpc3RhbmNlKHJlZiBWZWN0b3IzRCB2YWx1ZTEsIHJlZiBWZWN0b3IzRCB2YWx1ZTIsIG91dCBmbG9hdCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEaXN0YW5jZVNxdWFyZWQocmVmIHZhbHVlMSwgcmVmIHZhbHVlMiwgb3V0IHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IChmbG9hdClNYXRoLlNxcnQocmVzdWx0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZmxvYXQgRGlzdGFuY2VTcXVhcmVkKFZlY3RvcjNEIHZhbHVlMSwgVmVjdG9yM0QgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmxvYXQgcmVzdWx0O1xyXG4gICAgICAgICAgICBEaXN0YW5jZVNxdWFyZWQocmVmIHZhbHVlMSwgcmVmIHZhbHVlMiwgb3V0IHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGlzdGFuY2VTcXVhcmVkKHJlZiBWZWN0b3IzRCB2YWx1ZTEsIHJlZiBWZWN0b3IzRCB2YWx1ZTIsIG91dCBmbG9hdCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQgPSAodmFsdWUxLlggLSB2YWx1ZTIuWCkgKiAodmFsdWUxLlggLSB2YWx1ZTIuWCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAodmFsdWUxLlkgLSB2YWx1ZTIuWSkgKiAodmFsdWUxLlkgLSB2YWx1ZTIuWSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAodmFsdWUxLlogLSB2YWx1ZTIuWikgKiAodmFsdWUxLlogLSB2YWx1ZTIuWik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIERpdmlkZShWZWN0b3IzRCB2YWx1ZTEsIFZlY3RvcjNEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YIC89IHZhbHVlMi5YO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSAvPSB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgdmFsdWUxLlogLz0gdmFsdWUyLlo7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIERpdmlkZShWZWN0b3IzRCB2YWx1ZTEsIGZsb2F0IHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEgLyB2YWx1ZTI7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgdmFsdWUxLlkgKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWiAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGl2aWRlKHJlZiBWZWN0b3IzRCB2YWx1ZTEsIGZsb2F0IGRpdmlzb3IsIG91dCBWZWN0b3IzRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCBmYWN0b3IgPSAxIC8gZGl2aXNvcjtcclxuICAgICAgICAgICAgcmVzdWx0LlggPSB2YWx1ZTEuWCAqIGZhY3RvcjtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZTEuWSAqIGZhY3RvcjtcclxuICAgICAgICAgICAgcmVzdWx0LlogPSB2YWx1ZTEuWiAqIGZhY3RvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEaXZpZGUocmVmIFZlY3RvcjNEIHZhbHVlMSwgcmVmIFZlY3RvcjNEIHZhbHVlMiwgb3V0IFZlY3RvcjNEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmFsdWUxLlggLyB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZTEuWSAvIHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXN1bHQuWiA9IHZhbHVlMS5aIC8gdmFsdWUyLlo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZsb2F0IERvdChWZWN0b3IzRCB2ZWN0b3IxLCBWZWN0b3IzRCB2ZWN0b3IyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZlY3RvcjEuWCAqIHZlY3RvcjIuWCArIHZlY3RvcjEuWSAqIHZlY3RvcjIuWSArIHZlY3RvcjEuWiAqIHZlY3RvcjIuWjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEb3QocmVmIFZlY3RvcjNEIHZlY3RvcjEsIHJlZiBWZWN0b3IzRCB2ZWN0b3IyLCBvdXQgZmxvYXQgcmVzdWx0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdmVjdG9yMS5YICogdmVjdG9yMi5YICsgdmVjdG9yMS5ZICogdmVjdG9yMi5ZICsgdmVjdG9yMS5aICogdmVjdG9yMi5aO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgVmVjdG9yM0QpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG90aGVyID0gKFZlY3RvcjNEKW9iajtcclxuICAgICAgICAgICAgcmV0dXJuIFggPT0gb3RoZXIuWCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIFkgPT0gb3RoZXIuWSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIFogPT0gb3RoZXIuWjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhWZWN0b3IzRCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBYID09IG90aGVyLlggJiZcclxuICAgICAgICAgICAgICAgICAgICBZID09IG90aGVyLlkgJiZcclxuICAgICAgICAgICAgICAgICAgICBaID09IG90aGVyLlo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KSh0aGlzLlggKyB0aGlzLlkgKyB0aGlzLlopO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBMZW5ndGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmxvYXQgcmVzdWx0O1xyXG4gICAgICAgICAgICBEaXN0YW5jZVNxdWFyZWQocmVmIHRoaXMsIHJlZiB6ZXJvLCBvdXQgcmVzdWx0KTtcclxuICAgICAgICAgICAgcmV0dXJuIChmbG9hdClNYXRoLlNxcnQocmVzdWx0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBMZW5ndGhTcXVhcmVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IHJlc3VsdDtcclxuICAgICAgICAgICAgRGlzdGFuY2VTcXVhcmVkKHJlZiB0aGlzLCByZWYgemVybywgb3V0IHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIE11bHRpcGx5KFZlY3RvcjNEIHZhbHVlMSwgVmVjdG9yM0QgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggKj0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZICo9IHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWiAqPSB2YWx1ZTIuWjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0QgTXVsdGlwbHkoVmVjdG9yM0QgdmFsdWUxLCBmbG9hdCBzY2FsZUZhY3RvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YICo9IHNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSAqPSBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFsdWUxLlogKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTXVsdGlwbHkocmVmIFZlY3RvcjNEIHZhbHVlMSwgZmxvYXQgc2NhbGVGYWN0b3IsIG91dCBWZWN0b3IzRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlMS5YICogc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUxLlkgKiBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgcmVzdWx0LlogPSB2YWx1ZTEuWiAqIHNjYWxlRmFjdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE11bHRpcGx5KHJlZiBWZWN0b3IzRCB2YWx1ZTEsIHJlZiBWZWN0b3IzRCB2YWx1ZTIsIG91dCBWZWN0b3IzRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlMS5YICogdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUxLlkgKiB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgcmVzdWx0LlogPSB2YWx1ZTEuWiAqIHZhbHVlMi5aO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBSZXR1cm5zIGEgPHNlZT5WZWN0b3IzPC9zZWU+IHBvaW50aW5nIGluIHRoZSBvcHBvc2l0ZVxyXG4gICAgICAgIC8vLyBkaXJlY3Rpb24gb2YgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZVwiLz4uXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZVwiPlRoZSB2ZWN0b3IgdG8gbmVnYXRlLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPlRoZSB2ZWN0b3IgbmVnYXRpb24gb2YgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZVwiLz4uPC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0QgTmVnYXRlKFZlY3RvcjNEIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBuZXcgVmVjdG9yM0QoLXZhbHVlLlgsIC12YWx1ZS5ZLCAtdmFsdWUuWik7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gU3RvcmVzIGEgPHNlZT5WZWN0b3IzPC9zZWU+IHBvaW50aW5nIGluIHRoZSBvcHBvc2l0ZVxyXG4gICAgICAgIC8vLyBkaXJlY3Rpb24gb2YgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZVwiLz4gaW4gPHBhcmFtcmVmIG5hbWU9XCJyZXN1bHRcIi8+LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWVcIj5UaGUgdmVjdG9yIHRvIG5lZ2F0ZS48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInJlc3VsdFwiPlRoZSB2ZWN0b3IgdGhhdCB0aGUgbmVnYXRpb24gb2YgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZVwiLz4gd2lsbCBiZSBzdG9yZWQgaW4uPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTmVnYXRlKHJlZiBWZWN0b3IzRCB2YWx1ZSwgb3V0IFZlY3RvcjNEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gLXZhbHVlLlg7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gLXZhbHVlLlk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5aID0gLXZhbHVlLlo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBOb3JtYWxpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9ybWFsaXplKHJlZiB0aGlzLCBvdXQgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIE5vcm1hbGl6ZShWZWN0b3IzRCB2ZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb3JtYWxpemUocmVmIHZlY3Rvciwgb3V0IHZlY3Rvcik7XHJcbiAgICAgICAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTm9ybWFsaXplKHJlZiBWZWN0b3IzRCB2YWx1ZSwgb3V0IFZlY3RvcjNEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IGZhY3RvcjtcclxuICAgICAgICAgICAgRGlzdGFuY2UocmVmIHZhbHVlLCByZWYgemVybywgb3V0IGZhY3Rvcik7XHJcbiAgICAgICAgICAgIGZhY3RvciA9IDFmIC8gZmFjdG9yO1xyXG4gICAgICAgICAgICByZXN1bHQuWCA9IHZhbHVlLlggKiBmYWN0b3I7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ZID0gdmFsdWUuWSAqIGZhY3RvcjtcclxuICAgICAgICAgICAgcmVzdWx0LlogPSB2YWx1ZS5aICogZmFjdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IzRCBSZWZsZWN0KFZlY3RvcjNEIHZlY3RvciwgVmVjdG9yM0Qgbm9ybWFsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gSSBpcyB0aGUgb3JpZ2luYWwgYXJyYXlcclxuICAgICAgICAgICAgLy8gTiBpcyB0aGUgbm9ybWFsIG9mIHRoZSBpbmNpZGVudCBwbGFuZVxyXG4gICAgICAgICAgICAvLyBSID0gSSAtICgyICogTiAqICggRG90UHJvZHVjdFsgSSxOXSApKVxyXG4gICAgICAgICAgICBWZWN0b3IzRCByZWZsZWN0ZWRWZWN0b3I7XHJcbiAgICAgICAgICAgIC8vIGlubGluZSB0aGUgZG90UHJvZHVjdCBoZXJlIGluc3RlYWQgb2YgY2FsbGluZyBtZXRob2RcclxuICAgICAgICAgICAgZmxvYXQgZG90UHJvZHVjdCA9ICgodmVjdG9yLlggKiBub3JtYWwuWCkgKyAodmVjdG9yLlkgKiBub3JtYWwuWSkpICsgKHZlY3Rvci5aICogbm9ybWFsLlopO1xyXG4gICAgICAgICAgICByZWZsZWN0ZWRWZWN0b3IuWCA9IHZlY3Rvci5YIC0gKDIuMGYgKiBub3JtYWwuWCkgKiBkb3RQcm9kdWN0O1xyXG4gICAgICAgICAgICByZWZsZWN0ZWRWZWN0b3IuWSA9IHZlY3Rvci5ZIC0gKDIuMGYgKiBub3JtYWwuWSkgKiBkb3RQcm9kdWN0O1xyXG4gICAgICAgICAgICByZWZsZWN0ZWRWZWN0b3IuWiA9IHZlY3Rvci5aIC0gKDIuMGYgKiBub3JtYWwuWikgKiBkb3RQcm9kdWN0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlZmxlY3RlZFZlY3RvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZWZsZWN0KHJlZiBWZWN0b3IzRCB2ZWN0b3IsIHJlZiBWZWN0b3IzRCBub3JtYWwsIG91dCBWZWN0b3IzRCByZXN1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBJIGlzIHRoZSBvcmlnaW5hbCBhcnJheVxyXG4gICAgICAgICAgICAvLyBOIGlzIHRoZSBub3JtYWwgb2YgdGhlIGluY2lkZW50IHBsYW5lXHJcbiAgICAgICAgICAgIC8vIFIgPSBJIC0gKDIgKiBOICogKCBEb3RQcm9kdWN0WyBJLE5dICkpXHJcblxyXG4gICAgICAgICAgICAvLyBpbmxpbmUgdGhlIGRvdFByb2R1Y3QgaGVyZSBpbnN0ZWFkIG9mIGNhbGxpbmcgbWV0aG9kXHJcbiAgICAgICAgICAgIGZsb2F0IGRvdFByb2R1Y3QgPSAoKHZlY3Rvci5YICogbm9ybWFsLlgpICsgKHZlY3Rvci5ZICogbm9ybWFsLlkpKSArICh2ZWN0b3IuWiAqIG5vcm1hbC5aKTtcclxuICAgICAgICAgICAgcmVzdWx0LlggPSB2ZWN0b3IuWCAtICgyLjBmICogbm9ybWFsLlgpICogZG90UHJvZHVjdDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2ZWN0b3IuWSAtICgyLjBmICogbm9ybWFsLlkpICogZG90UHJvZHVjdDtcclxuICAgICAgICAgICAgcmVzdWx0LlogPSB2ZWN0b3IuWiAtICgyLjBmICogbm9ybWFsLlopICogZG90UHJvZHVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUGVyZm9ybXMgdmVjdG9yIHN1YnRyYWN0aW9uIG9uIDxwYXJhbXJlZiBuYW1lPVwidmFsdWUxXCIvPiBhbmQgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZTJcIi8+LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWUxXCI+VGhlIHZlY3RvciB0byBiZSBzdWJ0cmFjdGVkIGZyb20uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZTJcIj5UaGUgdmVjdG9yIHRvIGJlIHN1YnRyYWN0ZWQgZnJvbSA8cGFyYW1yZWYgbmFtZT1cInZhbHVlMVwiLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+VGhlIHJlc3VsdCBvZiB0aGUgdmVjdG9yIHN1YnRyYWN0aW9uLjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIFN1YnRyYWN0KFZlY3RvcjNEIHZhbHVlMSwgVmVjdG9yM0QgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggLT0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZIC09IHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWiAtPSB2YWx1ZTIuWjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUGVyZm9ybXMgdmVjdG9yIHN1YnRyYWN0aW9uIG9uIDxwYXJhbXJlZiBuYW1lPVwidmFsdWUxXCIvPiBhbmQgPHBhcmFtcmVmIG5hbWU9XCJ2YWx1ZTJcIi8+LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmFsdWUxXCI+VGhlIHZlY3RvciB0byBiZSBzdWJ0cmFjdGVkIGZyb20uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ2YWx1ZTJcIj5UaGUgdmVjdG9yIHRvIGJlIHN1YnRyYWN0ZWQgZnJvbSA8cGFyYW1yZWYgbmFtZT1cInZhbHVlMVwiLz4uPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJyZXN1bHRcIj5UaGUgcmVzdWx0IG9mIHRoZSB2ZWN0b3Igc3VidHJhY3Rpb24uPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU3VidHJhY3QocmVmIFZlY3RvcjNEIHZhbHVlMSwgcmVmIFZlY3RvcjNEIHZhbHVlMiwgb3V0IFZlY3RvcjNEIHJlc3VsdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5YID0gdmFsdWUxLlggLSB2YWx1ZTIuWDtcclxuICAgICAgICAgICAgcmVzdWx0LlkgPSB2YWx1ZTEuWSAtIHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICByZXN1bHQuWiA9IHZhbHVlMS5aIC0gdmFsdWUyLlo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBzdHJpbmcgRGVidWdEaXNwbGF5U3RyaW5nXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Db25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5YLlRvU3RyaW5nKCksIFwiICBcIixcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlkuVG9TdHJpbmcoKSwgXCIgIFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuWi5Ub1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigzMik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChcIntYOlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kKHRoaXMuWCk7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChcIiBZOlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kKHRoaXMuWSk7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChcIiBaOlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kKHRoaXMuWik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChcIn1cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAvLy8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8vLyBUcmFuc2Zvcm1zIGEgdmVjdG9yIGJ5IGEgcXVhdGVybmlvbiByb3RhdGlvbi5cclxuICAgICAgICAvLy8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vLy8gPHBhcmFtIG5hbWU9XCJ2ZWNcIj5UaGUgdmVjdG9yIHRvIHRyYW5zZm9ybS48L3BhcmFtPlxyXG4gICAgICAgIC8vLy8vIDxwYXJhbSBuYW1lPVwicXVhdFwiPlRoZSBxdWF0ZXJuaW9uIHRvIHJvdGF0ZSB0aGUgdmVjdG9yIGJ5LjwvcGFyYW0+XHJcbiAgICAgICAgLy8vLy8gPHBhcmFtIG5hbWU9XCJyZXN1bHRcIj5UaGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb24uPC9wYXJhbT5cclxuICAgICAgICAvLyAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFRyYW5zZm9ybShyZWYgVmVjdG9yMyB2ZWMsIHJlZiBRdWF0ZXJuaW9uIHF1YXQsIG91dCBWZWN0b3IzIHJlc3VsdClcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vXHRcdC8vIFRha2VuIGZyb20gdGhlIE9wZW50VEsgaW1wbGVtZW50YXRpb24gb2YgVmVjdG9yM1xyXG4gICAgICAgIC8vICAgICAgICAgICAgLy8gU2luY2UgdmVjLlcgPT0gMCwgd2UgY2FuIG9wdGltaXplIHF1YXQgKiB2ZWMgKiBxdWF0Xi0xIGFzIGZvbGxvd3M6XHJcbiAgICAgICAgLy8gICAgICAgICAgICAvLyB2ZWMgKyAyLjAgKiBjcm9zcyhxdWF0Lnh5eiwgY3Jvc3MocXVhdC54eXosIHZlYykgKyBxdWF0LncgKiB2ZWMpXHJcbiAgICAgICAgLy8gICAgICAgICAgICBWZWN0b3IzIHh5eiA9IHF1YXQuWHl6LCB0ZW1wLCB0ZW1wMjtcclxuICAgICAgICAvLyAgICAgICAgICAgIFZlY3RvcjMuQ3Jvc3MocmVmIHh5eiwgcmVmIHZlYywgb3V0IHRlbXApO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgVmVjdG9yMy5NdWx0aXBseShyZWYgdmVjLCBxdWF0LlcsIG91dCB0ZW1wMik7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBWZWN0b3IzLkFkZChyZWYgdGVtcCwgcmVmIHRlbXAyLCBvdXQgdGVtcCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBWZWN0b3IzLkNyb3NzKHJlZiB4eXosIHJlZiB0ZW1wLCBvdXQgdGVtcCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBWZWN0b3IzLk11bHRpcGx5KHJlZiB0ZW1wLCAyLCBvdXQgdGVtcCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBWZWN0b3IzLkFkZChyZWYgdmVjLCByZWYgdGVtcCwgb3V0IHJlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBQdWJsaWMgbWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPcGVyYXRvcnNcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFZlY3RvcjNEIHZhbHVlMSwgVmVjdG9yM0QgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMS5YID09IHZhbHVlMi5YXHJcbiAgICAgICAgICAgICAgICAmJiB2YWx1ZTEuWSA9PSB2YWx1ZTIuWVxyXG4gICAgICAgICAgICAgICAgJiYgdmFsdWUxLlogPT0gdmFsdWUyLlo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgIT0oVmVjdG9yM0QgdmFsdWUxLCBWZWN0b3IzRCB2YWx1ZTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gISh2YWx1ZTEgPT0gdmFsdWUyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0Qgb3BlcmF0b3IgKyhWZWN0b3IzRCB2YWx1ZTEsIFZlY3RvcjNEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YICs9IHZhbHVlMi5YO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSArPSB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgdmFsdWUxLlogKz0gdmFsdWUyLlo7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIG9wZXJhdG9yIC0oVmVjdG9yM0QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBWZWN0b3IzRCgtdmFsdWUuWCwgLXZhbHVlLlksIC12YWx1ZS5aKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IzRCBvcGVyYXRvciAtKFZlY3RvcjNEIHZhbHVlMSwgVmVjdG9yM0QgdmFsdWUyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUxLlggLT0gdmFsdWUyLlg7XHJcbiAgICAgICAgICAgIHZhbHVlMS5ZIC09IHZhbHVlMi5ZO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWiAtPSB2YWx1ZTIuWjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0Qgb3BlcmF0b3IgKihWZWN0b3IzRCB2YWx1ZTEsIFZlY3RvcjNEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YICo9IHZhbHVlMi5YO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSAqPSB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgdmFsdWUxLlogKj0gdmFsdWUyLlo7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIG9wZXJhdG9yICooVmVjdG9yM0QgdmFsdWUsIGZsb2F0IHNjYWxlRmFjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFsdWUuWCAqPSBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFsdWUuWSAqPSBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgdmFsdWUuWiAqPSBzY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IzRCBvcGVyYXRvciAqKGZsb2F0IHNjYWxlRmFjdG9yLCBWZWN0b3IzRCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlLlggKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlLlkgKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlLlogKj0gc2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0Qgb3BlcmF0b3IgLyhWZWN0b3IzRCB2YWx1ZTEsIFZlY3RvcjNEIHZhbHVlMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlMS5YIC89IHZhbHVlMi5YO1xyXG4gICAgICAgICAgICB2YWx1ZTEuWSAvPSB2YWx1ZTIuWTtcclxuICAgICAgICAgICAgdmFsdWUxLlogLz0gdmFsdWUyLlo7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvcjNEIG9wZXJhdG9yIC8oVmVjdG9yM0QgdmFsdWUsIGZsb2F0IGRpdmlkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCBmYWN0b3IgPSAxIC8gZGl2aWRlcjtcclxuICAgICAgICAgICAgdmFsdWUuWCAqPSBmYWN0b3I7XHJcbiAgICAgICAgICAgIHZhbHVlLlkgKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB2YWx1ZS5aICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG4gICAgfVxyXG59IiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTW92ZURhdGFcclxuICAgIHtcclxuICAgICAgICBzdHJpbmcgbGFiZWw7XHJcbiAgICAgICAgaW50ZXJuYWwgTGlzdDxUaWNrPiB1bml0cyA9IG5ldyBMaXN0PFRpY2s+KCk7XHJcbiAgICAgICAgaW50ZXJuYWwgTGlzdDxpbnQ+IHRhZ3MgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBNb3ZlRGF0YShzdHJpbmcgbGFiZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTW92ZURhdGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEZpbmRCeUxhYmVsKExpc3Q8TW92ZURhdGE+IG1vdmVEYXRhcywgc3RyaW5nIGxhYmVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtb3ZlRGF0YXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vdmVEYXRhc1tpXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlRGF0YXNbaV0ubGFiZWwgPT0gbGFiZWwpIHJldHVybiBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIGJvb2wgSGFzVGFnKGludCB0YWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFncy5Db250YWlucyh0YWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFRpY2tcclxuICAgIHtcclxuICAgICAgICBpbnRlcm5hbCBDb25kaXRpb24gY29uZGl0aW9uO1xyXG4gICAgICAgIGludGVybmFsIExpc3Q8b2JqZWN0PiB0aGluZ3NUb0hhcHBlbiA9IG5ldyBMaXN0PG9iamVjdD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIFRpY2sob2JqZWN0IGFjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaW5nc1RvSGFwcGVuLkFkZChhY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRpY2sob2JqZWN0W10gYWN0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaW5nc1RvSGFwcGVuLkFkZFJhbmdlKGFjdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRpY2soKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xhc3MgQ29uZGl0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgaW50ZXJuYWwgcmVhZG9ubHkgQ29uZGl0aW9uVHlwZSB0eXBlO1xyXG4gICAgICAgIGludGVybmFsIHJlYWRvbmx5IFRhcmdldCB0YXJnZXQ7XHJcbiAgICAgICAgaW50ZXJuYWwgcmVhZG9ubHkgQmFzZVV0aWxzLlZlY3RvcjJEIHZlY3RvcjtcclxuXHJcbiAgICAgICAgcHVibGljIENvbmRpdGlvbihDb25kaXRpb25UeXBlIHR5cGUsIFRhcmdldCB0YXJnZXQsIEJhc2VVdGlscy5WZWN0b3IyRCB2ZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgdGhpcy52ZWN0b3IgPSB2ZWN0b3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIENvbmRpdGlvblR5cGVcclxuICAgIHtcclxuICAgICAgICBDYW5Nb3ZlXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFN1bW1vbkVudGl0eVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpbnQgZW5lbXlXaGljaDtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgVmVjdG9yMkQgcHJlZmVyZW50aWFsUm93Q29sdW1uO1xyXG5cclxuICAgICAgICBwdWJsaWMgU3VtbW9uRW50aXR5KGludCBlbmVteVdoaWNoLCBWZWN0b3IyRCBwcmVmZXJlbnRpYWxSb3dDb2x1bW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15V2hpY2ggPSBlbmVteVdoaWNoO1xyXG4gICAgICAgICAgICB0aGlzLnByZWZlcmVudGlhbFJvd0NvbHVtbiA9IHByZWZlcmVudGlhbFJvd0NvbHVtbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBTdW1tb25FbnRpdHkgRW5lbXkoaW50IHYsIFZlY3RvcjJEIHZlY3RvcjJEKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdW1tb25FbnRpdHkodiwgdmVjdG9yMkQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIEFuaW1hdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBBcmVhIGFyZWEgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBUYXJnZXQgdGFyZ2V0ID0gVGFyZ2V0Lk5vbmU7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudCA9IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQuTm9uZTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgVmVjdG9yMkQgdXNlclJlZk9mZnNldDtcclxuXHJcbiAgICAgICAgcHVibGljIEFuaW1hdGlvbihUYXJnZXQgdGFyZ2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQW5pbWF0aW9uKFRhcmdldCB0YXJnZXQsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFuaW1hdGlvbihBcmVhIGFyZWEsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudCA9IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQuTm9uZSwgVGFyZ2V0IHRhcmdldCA9IFRhcmdldC5Ob25lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5hcmVhID0gYXJlYTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQW5pbWF0aW9uKFRhcmdldCB0YXJnZXQsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudCwgVmVjdG9yMkQgdXNlclJlZk9mZnNldCkgOiB0aGlzKHRhcmdldCwgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlclJlZk9mZnNldCA9IHVzZXJSZWZPZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBNb3ZlQWN0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IFRhcmdldCB0YXJnZXQ7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IEJhc2VVdGlscy5WZWN0b3IyRCBkaXN0YW5jZTtcclxuXHJcbiAgICAgICAgcHVibGljIE1vdmVBY3Rpb24oVGFyZ2V0IHRhcmdldCwgQmFzZVV0aWxzLlZlY3RvcjJEIGFtb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gYW1vdW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGVhbERhbWFnZUFjdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBBcmVhIGFyZWE7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IFRhcmdldCB0YXJnZXQgPSBUYXJnZXQuTm9uZTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW50IGRhbWFnZTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50O1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBWZWN0b3IyRCB1c2VyUmVmT2Zmc2V0O1xyXG5cclxuICAgICAgICBwdWJsaWMgRGVhbERhbWFnZUFjdGlvbihBcmVhIGFyZWEsIGludCBkYW1hZ2UsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYXJlYSA9IGFyZWE7XHJcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlID0gZGFtYWdlO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICB0YXJnZXQgPSBUYXJnZXQuQXJlYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEZWFsRGFtYWdlQWN0aW9uKFRhcmdldCB0YXJnZXQsIGludCBkYW1hZ2UsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICB0aGlzLmRhbWFnZSA9IGRhbWFnZTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEZWFsRGFtYWdlQWN0aW9uKFRhcmdldCB0YXJnZXQsIGludCBkYW1hZ2UsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudCwgVmVjdG9yMkQgdXNlclJlZk9mZnNldCkgOiB0aGlzKHRhcmdldCwgZGFtYWdlLCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy51c2VyUmVmT2Zmc2V0ID0gdXNlclJlZk9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEFyZWFcclxuICAgIHtcclxuICAgICAgICAvL3B1YmxpYyByZWFkb25seSBBcmVhIGFyZWE7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IFRhcmdldCB0YXJnZXQ7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IExpc3Q8VmVjdG9yMkQ+IHBvaW50cyA9IG5ldyBMaXN0PFZlY3RvcjJEPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgQXJlYShUYXJnZXQgdGFyZ2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIFRhcmdldFxyXG4gICAge1xyXG4gICAgICAgIE5vbmUsIFNlbGYsIENsb3Nlc3RUYXJnZXQsIENsb3Nlc3RUYXJnZXRYLCBBcmVhXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBBc3luY1Rhc2tzXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBBc3luY1RyYWNrXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBEZWxheWVkQWN0aW9uc1xyXG4gICAge1xyXG4gICAgICAgIExpc3Q8ZmxvYXQ+IHRpbWVzID0gbmV3IExpc3Q8ZmxvYXQ+KCk7XHJcbiAgICAgICAgTGlzdDxJTGlzdD4gbGlzdHMgPSBuZXcgTGlzdDxJTGlzdD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVXBkYXRlKGZsb2F0IGRlbHRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0aW1lcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aW1lc1tpXSAtPSBkZWx0YTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lc1tpXSA8PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEV4ZWN1dGUoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgRW5kVGFzayhpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYWJzdHJhY3Qgdm9pZCBFeGVjdXRlKGludCBpKTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBBZGQoZmxvYXQgdGltZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpbWVzLkFkZCh0aW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGltZXMuQ291bnQgPT0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgRW5kVGFzayhpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpbWVzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbCBpbiBsaXN0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbC5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQXN5bmNUYXNrU2V0dGVyPFQ+IDogRGVsYXllZEFjdGlvbnNcclxuICAgIHtcclxuICAgICAgICBMaXN0PFQ+IFRvVmFsdWUgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgIExpc3Q8QWN0aW9uPFQ+PiBzZXR0ZXJzID0gbmV3IExpc3Q8QWN0aW9uPFQ+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGQoVCBlLCBBY3Rpb248VD4gc2V0dGVyLCBmbG9hdCB0aW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVG9WYWx1ZS5BZGQoZSk7XHJcbiAgICAgICAgICAgIHNldHRlcnMuQWRkKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248VD4pc2V0dGVyKTtcclxuICAgICAgICAgICAgYmFzZS5BZGQodGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBvdmVycmlkZSB2b2lkIEV4ZWN1dGUoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZXR0ZXJzW2ldKFRvVmFsdWVbaV0pO1xyXG4gICAgICAgICAgICBUb1ZhbHVlLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICBzZXR0ZXJzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLkVDUztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCYXR0bGVTZXR1cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBFQ1NNYW5hZ2VyIGVjcztcclxuICAgICAgICBwdWJsaWMgQmF0dGxlTWFpbiBiYXR0bGVNYWluO1xyXG4gICAgICAgIHB1YmxpYyBNb3ZlQ3JlYXRvclByb2cgbW92ZUNyZWF0b3I7XHJcbiAgICAgICAgcHVibGljIFRpbWVTdGFtcCB0aW1lU3RhbXA7XHJcblxyXG4gICAgICAgIHB1YmxpYyBCYXR0bGVTZXR1cChpbnQgbW9kZSwgRW50aXR5IHN0YWdlRW50aXR5LCBFQ1NNYW5hZ2VyIGVjcywgRW5lbXlEYXRhQ3JlYXRvciBlbmVteURhdGFDcmVhdG9yLCBNb3ZlQ3JlYXRvclByb2cgbXYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGVjcztcclxuICAgICAgICAgICAgdGltZVN0YW1wID0gbmV3IFRpbWVTdGFtcCgpO1xyXG4gICAgICAgICAgICBlY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudCh0aW1lU3RhbXApO1xyXG4gICAgICAgICAgICBiYXR0bGVNYWluID0gbmV3IEJhdHRsZU1haW4obW9kZSwgZWNzLCB0aW1lU3RhbXApO1xyXG5cclxuICAgICAgICAgICAgbW92ZUNyZWF0b3IgPSBtdjtcclxuXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdmFyIGZpeGVkQXR0YWNrID0gc3RhZ2VFbnRpdHkuR2V0Q29tcG9uZW50PEZpeGVkQXR0YWNrU3RhZ2U+KCk7XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJIYW5kUG9vbCA9IGJhdHRsZU1haW4ucGxheWVySGFuZFBvb2w7XHJcbiAgICAgICAgICAgIGlmIChmaXhlZEF0dGFjayAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gZml4ZWRBdHRhY2subW92ZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVySGFuZFBvb2wuQWRkKChCYXR0bGVNYWluLk1vdmVUeXBlKWl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGxheWVySGFuZFBvb2wuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSk7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJIYW5kUG9vbC5BZGQoQmF0dGxlTWFpbi5Nb3ZlVHlwZS5JY2UpO1xyXG4gICAgICAgICAgICAgICAgcGxheWVySGFuZFBvb2wuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuVGh1bmRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkZWNrTWFuYWdlciA9IG5ldyBEZWNrTWFuYWdlcig1KTtcclxuICAgICAgICAgICAgYmF0dGxlTWFpbi5kZWNrTWFuYWdlciA9IGRlY2tNYW5hZ2VyO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGZpeGVkQXR0YWNrICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBmaXhlZEF0dGFjay5tb3ZlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgZGVja0lkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vdmVDcmVhdG9yLm1vdmVSZW5kZXJzW2l0ZW1dLmVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEJhdHRsZU1haW4uRWxlbWVudC5GaXJlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVja01hbmFnZXIuU2V0RGVmYXVsdEF0dGFjaygwLCAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVNYWluLkVsZW1lbnQuSWNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNrTWFuYWdlci5TZXREZWZhdWx0QXR0YWNrKDEsIChpbnQpQmF0dGxlTWFpbi5Nb3ZlVHlwZS5JY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVja0lkID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEJhdHRsZU1haW4uRWxlbWVudC5UaHVuZGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVja0lkID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVja01hbmFnZXIuU2V0RGVmYXVsdEF0dGFjaygyLCAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuVGh1bmRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVNYWluLkVsZW1lbnQuTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0gIT0gKGludClCYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICE9IChpbnQpQmF0dGxlTWFpbi5Nb3ZlVHlwZS5JY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAhPSAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuVGh1bmRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNrTWFuYWdlci5BZGQoZGVja0lkLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlY2tNYW5hZ2VyLlNldERlZmF1bHRBdHRhY2soMCwgKGludClCYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUpO1xyXG4gICAgICAgICAgICAgICAgZGVja01hbmFnZXIuU2V0RGVmYXVsdEF0dGFjaygxLCAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuSWNlKTtcclxuICAgICAgICAgICAgICAgIGRlY2tNYW5hZ2VyLlNldERlZmF1bHRBdHRhY2soMiwgKGludClCYXR0bGVNYWluLk1vdmVUeXBlLlRodW5kZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vZGVja01hbmFnZXIuQWRkKDAsIChpbnQpQmF0dGxlTWFpbi5Nb3ZlVHlwZS5GaXJlKTtcclxuICAgICAgICAgICAgICAgIGRlY2tNYW5hZ2VyLkFkZCgwLCAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuRG93bkZpcmUpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvL2RlY2tNYW5hZ2VyLkFkZCgxLCAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuSWNlKTsgICBcclxuICAgICAgICAgICAgICAgIC8vZGVja01hbmFnZXIuQWRkKDIsIChpbnQpQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWNrTWFuYWdlci5BZGQoMSwgKGludClCYXR0bGVNYWluLk1vdmVUeXBlLkljZUJvbWIpO1xyXG4gICAgICAgICAgICAgICAgZGVja01hbmFnZXIuQWRkKDIsIChpbnQpQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyQm9tYik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzdGFnZSA9IHN0YWdlRW50aXR5LkdldENvbXBvbmVudDxTdGFnZURhdGE+KCk7XHJcbiAgICAgICAgICAgIHZhciBzdGFnZXNQID0gZWNzLlF1aWNrQWNjZXNzb3IxPFN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZT4oKTtcclxuICAgICAgICAgICAgLy9ib29sIG5vbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvL2ZvciAoaW50IGkgPSAwOyBpIDwgc3RhZ2VzUC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgaWYgKHN0YWdlc1AuQ29tcDEoaSkuc3RhZ2VJZCA9PSBzdGFnZS5pZCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgbm9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAvL2lmIChub25lKVxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgZWNzLkNyZWF0ZUVudGl0eVdpdGhDb21wb25lbnQobmV3IFN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZShzdGFnZS5pZCkpO1xyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgIHZhciBlbm15cyA9IHN0YWdlLnNwYXduRGF0YXM7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBlbm15cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWNzLkNyZWF0ZUVudGl0eVdpdGhDb21wb25lbnQoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB0cmFja0JhdHRsZSA9IG5ldyBUcmFja0JhdHRsZSgpO1xyXG4gICAgICAgICAgICB2YXIgdHJhY2tJbmZvID0gc3RhZ2VFbnRpdHkuR2V0Q29tcG9uZW50PFRyYWNrSW5mb1N0YWdlPigpO1xyXG4gICAgICAgICAgICB0cmFja0JhdHRsZS5zdGFnZUluZm8gPSB0cmFja0luZm87XHJcbiAgICAgICAgICAgIGJhdHRsZU1haW4uTW92ZURhdGFFeGVjdXRlciA9IG5ldyBNb3ZlRGF0YUV4ZWN1dGVyKGJhdHRsZU1haW4sIG1vdmVDcmVhdG9yLm1vdmVEYXRhcywgZWNzLCB0aW1lU3RhbXApO1xyXG4gICAgICAgICAgICBiYXR0bGVNYWluLk1vdmVEYXRhRXhlY3V0ZXIudHJhY2tCYXR0bGUgPSB0cmFja0JhdHRsZTtcclxuICAgICAgICAgICAgYmF0dGxlTWFpbi50cmFja0JhdHRsZSA9IHRyYWNrQmF0dGxlO1xyXG5cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICB2YXIgZW5lbXlEYXRhcyA9IGVuZW15RGF0YUNyZWF0b3IuZW5lbXlEYXRhcztcclxuICAgICAgICAgICAgdmFyIGJhdHRsZVN0YXRlID0gYmF0dGxlTWFpbi5iYXR0bGVTdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIGJhdHRsZU1haW4uQmF0dGxlQ29uZmlndXJlKHN0YWdlLmJhdHRsZUNvbmZpZyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5lbXlGYWN0b3J5ID0gbmV3IFNwYXduRW50aXR5RmFjdG9yeShlY3MsIGVuZW15RGF0YXMsIGJhdHRsZU1haW4pO1xyXG4gICAgICAgICAgICBiYXR0bGVNYWluLmVjc0ludGVnID0gbmV3IEVDU0ludGVncmF0aW9uKGVuZW15RmFjdG9yeSwgZWNzKTtcclxuICAgICAgICAgICAgLy9iYXR0bGVNYWluLkVuZW15RmFjdG9yeSA9IGVuZW15RmFjdG9yeTtcclxuXHJcbiAgICAgICAgICAgIHsgLy9BSSBoYW5kbGluZyBjb2RlXHJcbiAgICAgICAgICAgICAgICB2YXIgZW5lbXlBaXMgPSBlY3MuUXVpY2tBY2Nlc3NvcjI8RW5lbXlBSSwgQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHk+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5lbXlBaVN0YXRlbGVzcyA9IGVjcy5DcmVhdGVBY2Nlc3NvcihuZWNlc3Nhcnk6IG5ldyBUeXBlW10geyB0eXBlb2YoRW5lbXlBSSkgfSwgbm90OiBuZXcgVHlwZVtdIHsgdHlwZW9mKEVuZW15QUlTdGF0ZSkgfSk7XHJcbiAgICAgICAgICAgICAgICBMaXN0PGludD4gcG9zc2libGVNb3ZlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb3ZlRGF0YXMgPSBtb3ZlQ3JlYXRvci5tb3ZlRGF0YXM7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJhdHRsZU1haW4uRW5lbXlHZW5lcmF0ZU1vdmVzID0gKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZW5lbXlBaVN0YXRlbGVzcy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlBaVN0YXRlbGVzcy5HZXQoMCkuQWRkQ29tcG9uZW50PEVuZW15QUlTdGF0ZT4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZW5lbXlBaXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFpID0gZW5lbXlBaXMuQ29tcDEoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXR0bGVyID0gZW5lbXlBaXMuQ29tcDIoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhaVN0YXRlID0gZW5lbXlBaXMuRW50aXR5KGkpLkdldENvbXBvbmVudDxFbmVteUFJU3RhdGU+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlcyA9IGFpLm1vdmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zUyA9IGJhdHRsZXIucG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGJhdHRsZVN0YXRlLnR1cm5zUGVyUGhhc2U7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGFpUHJvID0gKGogKyBhaVN0YXRlLnByb2dyZXNzKSAlIG1vdmVzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmUgPSBtb3Zlc1thaVByb107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbW92ZUlkID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW92ZSBpcyBNb3ZlVXNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVJZCA9IChtb3ZlIGFzIE1vdmVVc2UpLm1vdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlIGlzIFNwZWNpYWxFbmVteU1vdmVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSAoU3BlY2lhbEVuZW15TW92ZXMpbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobSA9PSBTcGVjaWFsRW5lbXlNb3Zlcy5TbWFydE1vdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGVNb3Zlcy5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpMiA9IDA7IGkyIDwgbW92ZURhdGFzLkNvdW50OyBpMisrKSAvL2NvZGUgdG8gYWRkIG1vdmVtZW50IG1vdmVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWdzID0gbW92ZURhdGFzW2kyXS50YWdzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZ3MuQ29udGFpbnMoKGludClNb3ZlRGF0YVRhZ3MuTW92ZW1lbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgdmFsaWRNb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXMgPSBtb3ZlRGF0YXNbaTJdLnVuaXRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiB1cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGluZ3MgPSBpdGVtLnRoaW5nc1RvSGFwcGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdGhpbmcgaW4gdGhpbmdzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpbmcgaXMgTW92ZUFjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWEgPSB0aGluZyBhcyBNb3ZlQWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXMgPSBtYS5kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdFBvcyA9IHBvc1MgKyBkaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlc3RQb3MuWCA8IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRNb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0UG9zLlggPiA1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRNb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0UG9zLlkgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRNb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0UG9zLlkgPiAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRNb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbGlkTW92ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGVNb3Zlcy5BZGQoaTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVJZCA9IFBpZHJvaC5CYXNlVXRpbHMuRXh0ZW5zaW9ucy5SYW5kb21FbGVtZW50PGludD4ocG9zc2libGVNb3Zlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShtb3ZlSWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlSWQgPj0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXR0bGVyLm1vdmVzW2pdID0gbW92ZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZCA9IG1vdmVDcmVhdG9yLm1vdmVEYXRhc1ttb3ZlSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cyA9IG1kLnVuaXRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIHVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaW5ncyA9IGl0ZW0udGhpbmdzVG9IYXBwZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0aGluZyBpbiB0aGluZ3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGluZyBpcyBNb3ZlQWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYSA9IHRoaW5nIGFzIE1vdmVBY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcyA9IG1hLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1MgKz0gZGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9iZS5tb3Zlc1tqXSA9IDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpU3RhdGUucHJvZ3Jlc3MgKz0gYmF0dGxlU3RhdGUudHVybnNQZXJQaGFzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLyA8c3VtbWFyeT5cclxuICAgIC8vLyBkYXRhIHRoYXQgd2lsbCBiZSBhIHBhcnQgb2Ygc3RhZ2VkYXRhIHNvIGVhY2ggc3RhZ2UgY2FuIGhhdmUgaXQncyBjb25maWdcclxuICAgIC8vLyBJdCB3aWxsIGFsc28gYmUgY29udGFpbmVkIGluIGJhdHRsZW1haW4uXHJcbiAgICAvLy8gU2hvdWxkIGJlIHN0YXRpYywgb25jZSBjcmVhdGVkLlxyXG4gICAgLy8vIDwvc3VtbWFyeT5cclxuICAgIHB1YmxpYyBjbGFzcyBCYXR0bGVDb25maWdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgTGlzdDxpbnQ+IGVuZW1pZXNUb1N1bW1vbiA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm9vbCBuZWVkS2lsbEFsbEVuZW1pZXMgPSB0cnVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgQmF0dGxlQ29uZmlnKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQmF0dGxlQ29uZmlnKGludFtdIGVuZW1pZXNUb1N1bW1vbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbWllc1RvU3VtbW9uLkFkZFJhbmdlKGVuZW1pZXNUb1N1bW1vbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQmF0dGxlQ29uZmlnKGJvb2wgbmVlZEtpbGxBbGxFbmVtaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5uZWVkS2lsbEFsbEVuZW1pZXMgPSBuZWVkS2lsbEFsbEVuZW1pZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5IYXBwcztcclxudXNpbmcgUGlkcm9oLkVDUztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWRcclxue1xyXG5cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQmF0dGxlTWFpblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEZWNrTWFuYWdlciBkZWNrTWFuYWdlcjtcclxuICAgICAgICBwdWJsaWMgTGlzdDxCYXR0bGVFbnRpdHk+IGVudGl0aWVzID0gbmV3IExpc3Q8QmF0dGxlRW50aXR5PigpO1xyXG4gICAgICAgIHB1YmxpYyBCYXR0bGVTdGF0ZSBiYXR0bGVTdGF0ZSA9IG5ldyBCYXR0bGVTdGF0ZSgpO1xyXG4gICAgICAgIHB1YmxpYyBIYXBwTWFuYWdlciBoYXBwTWFuYWdlciA9IG5ldyBIYXBwTWFuYWdlcigpO1xyXG4gICAgICAgIERpY3Rpb25hcnk8TW92ZVR5cGUsIFZlY3RvcjJEPiBtb3ZlbWVudE1vdmVzID0gbmV3IERpY3Rpb25hcnk8TW92ZVR5cGUsIFZlY3RvcjJEPigpO1xyXG4gICAgICAgIC8vRGljdGlvbmFyeTxNb3ZlVHlwZSwgUG9pbnQ+IGF0dGFja01vdmVzID0gbmV3IERpY3Rpb25hcnk8TW92ZVR5cGUsIFBvaW50PigpO1xyXG4gICAgICAgIE1vdmVUeXBlW10gZW5lbXlNb3ZlcztcclxuICAgICAgICAvL3B1YmxpYyBMaXN0PElucHV0PiBpbnB1dHMgPSBuZXcgTGlzdDxUdXJuYmFzZWQuSW5wdXQ+KCk7XHJcbiAgICAgICAgcHVibGljIElucHV0SG9sZGVyIGlucHV0cyA9IG5ldyBJbnB1dEhvbGRlcigpO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PE1vdmVUeXBlPiBwbGF5ZXJIYW5kRml4ZWQgPSBuZXcgTGlzdDxNb3ZlVHlwZT4oKTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNb3ZlVHlwZT4gcGxheWVySGFuZFVuZml4ZWQgPSBuZXcgTGlzdDxNb3ZlVHlwZT4oKTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNb3ZlVHlwZT4gcGxheWVySGFuZFBvb2wgPSBuZXcgTGlzdDxNb3ZlVHlwZT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IHRpbWVUb0Nob29zZU1heCA9IDE1ZjtcclxuICAgICAgICBwdWJsaWMgZmxvYXQgdGltZVRvQ2hvb3NlID0gLTE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBCYXR0bGVSZXN1bHQgYmF0dGxlUmVzdWx0ID0gbmV3IEJhdHRsZVJlc3VsdCgpO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIEJhdHRsZUNvbmZpZ3VyZShCYXR0bGVDb25maWcgYmF0dGxlQ29uZmlnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGJhdHRsZUNvbmZpZyA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiYXR0bGVDb25maWcgPSBuZXcgQmF0dGxlQ29uZmlnKG5lZWRLaWxsQWxsRW5lbWllczogdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5CYXR0bGVDb25maWcgPSBiYXR0bGVDb25maWc7XHJcbiAgICAgICAgICAgIGJhdHRsZVN0YXRlLnR1cm5zUGVyUGhhc2UuVmFsID0gMztcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgbkVuZW1pZXM7XHJcbiAgICAgICAgcHVibGljIE1vdmVEYXRhRXhlY3V0ZXIgTW92ZURhdGFFeGVjdXRlcjtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IFRpbWVTdGFtcCB0aW1lU3RhbXA7XHJcbiAgICAgICAgcHJpdmF0ZSBRdWlja0FjY2Vzc29yVHdvPEJhdHRsZUVudGl0eSwgUGlja3VwSW5mbz4gcGlja3VwQWNjZXNzb3I7XHJcbiAgICAgICAgaW50ZXJuYWwgRUNTSW50ZWdyYXRpb24gZWNzSW50ZWc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb24gRW5lbXlHZW5lcmF0ZU1vdmVzO1xyXG4gICAgICAgIHB1YmxpYyBUcmFja0JhdHRsZSB0cmFja0JhdHRsZTtcclxuXHJcbiAgICAgICAgcHVibGljIEJhdHRsZUNvbmZpZyBCYXR0bGVDb25maWcgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBCb2FyZFdpZHRoIHsgZ2V0OyBpbnRlcm5hbCBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEJvYXJkSGVpZ2h0IHsgZ2V0OyBpbnRlcm5hbCBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEJhdHRsZU1haW4oaW50IG1vZGUsIEVDU01hbmFnZXIgZWNzLCBUaW1lU3RhbXAgdGltZVN0YW1wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy90aGlzLmVjcyA9IGVjcztcclxuICAgICAgICAgICAgdGhpcy50aW1lU3RhbXAgPSB0aW1lU3RhbXA7XHJcbiAgICAgICAgICAgIHBpY2t1cEFjY2Vzc29yID0gZWNzLlF1aWNrQWNjZXNzb3IyPEJhdHRsZUVudGl0eSwgUGlja3VwSW5mbz4oKTtcclxuICAgICAgICAgICAgbW92ZW1lbnRNb3Zlcy5BZGQoTW92ZVR5cGUuTW92ZVVwLCBWZWN0b3IyRC5Vbml0WSk7XHJcbiAgICAgICAgICAgIG1vdmVtZW50TW92ZXMuQWRkKE1vdmVUeXBlLk1vdmVEb3duLCAtVmVjdG9yMkQuVW5pdFkpO1xyXG4gICAgICAgICAgICBtb3ZlbWVudE1vdmVzLkFkZChNb3ZlVHlwZS5Nb3ZlTGVmdCwgLVZlY3RvcjJELlVuaXRYKTtcclxuICAgICAgICAgICAgbW92ZW1lbnRNb3Zlcy5BZGQoTW92ZVR5cGUuTW92ZVJpZ2h0LCBWZWN0b3IyRC5Vbml0WCk7XHJcblxyXG4gICAgICAgICAgICBlY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudChiYXR0bGVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBwbGF5ZXJIYW5kRml4ZWQuQ2xlYXIoKTtcclxuICAgICAgICAgICAgcGxheWVySGFuZEZpeGVkLkFkZChNb3ZlVHlwZS5Nb3ZlUmlnaHQpO1xyXG4gICAgICAgICAgICBwbGF5ZXJIYW5kRml4ZWQuQWRkKE1vdmVUeXBlLk1vdmVMZWZ0KTtcclxuICAgICAgICAgICAgcGxheWVySGFuZEZpeGVkLkFkZChNb3ZlVHlwZS5Nb3ZlRG93bik7XHJcbiAgICAgICAgICAgIHBsYXllckhhbmRGaXhlZC5BZGQoTW92ZVR5cGUuTW92ZVVwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RlID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBsYXllckhhbmRVbmZpeGVkLkFkZChNb3ZlVHlwZS5Ob3JtYWxTaG90KTtcclxuICAgICAgICAgICAgICAgIGVuZW15TW92ZXMgPSBuZXcgTW92ZVR5cGVbXSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW92ZVR5cGUuTW92ZVVwLFxyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVUeXBlLk1vdmVMZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVUeXBlLk1vdmVEb3duLFxyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVUeXBlLk1vdmVSaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBNb3ZlVHlwZS5Ob3JtYWxTaG90LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vcGxheWVySGFuZFVuZml4ZWQuQWRkKE1vdmVUeXBlLkZpcmUpO1xyXG4gICAgICAgICAgICAgICAgLy9wbGF5ZXJIYW5kVW5maXhlZC5BZGQoTW92ZVR5cGUuSWNlKTtcclxuICAgICAgICAgICAgICAgIC8vcGxheWVySGFuZFVuZml4ZWQuQWRkKE1vdmVUeXBlLlRodW5kZXIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBlbmVteU1vdmVzID0gbmV3IE1vdmVUeXBlW10ge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVUeXBlLk1vdmVEb3duLFxyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVUeXBlLk1vdmVMZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVUeXBlLk1vdmVVcCxcclxuICAgICAgICAgICAgICAgICAgICBNb3ZlVHlwZS5Nb3ZlUmlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgTW92ZVR5cGUuRmlyZSxcclxuICAgICAgICAgICAgICAgICAgICBNb3ZlVHlwZS5JY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgTW92ZVR5cGUuVGh1bmRlcixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vcGxheWVySGFuZC5BZGQoTW92ZVR5cGUuTm9ybWFsU2hvdCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBJc1ZpY3RvcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhdHRsZVJlc3VsdC5yZXN1bHQgPT0gMTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBJbml0KClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBCYXR0bGVFbnRpdHkgaGVybyA9IG5ldyBCYXR0bGVFbnRpdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGhlcm8ucG9zLlNldCgxLCAxKTtcclxuICAgICAgICAgICAgaGVyby5taW5Qb3MuU2V0KDAsIDApO1xyXG4gICAgICAgICAgICBoZXJvLm1heFBvcy5TZXQoMiwgMik7XHJcbiAgICAgICAgICAgIGhlcm8uVHlwZSA9IEVudGl0eVR5cGUuaGVybztcclxuICAgICAgICAgICAgaGVyby5saWZlID0gMjtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBoZXJvLm1vdmVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoZXJvLm1vdmVzW2ldID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBlbnRpdGllcy5BZGQoaGVybyk7XHJcbiAgICAgICAgICAgIGVjc0ludGVnLkhlcm9DcmVhdGVkKGhlcm8pO1xyXG4gICAgICAgICAgICBlY3NJbnRlZy5TcGF3bkVuZW1pZXMoKTtcclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vR2FtZUVudGl0eSBwaWNrdXAgPSBuZXcgR2FtZUVudGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgLy9waWNrdXAuVHlwZSA9IEVudGl0eVR5cGUucGlja3VwO1xyXG4gICAgICAgICAgICAgICAgLy9waWNrdXAucG9zLlNldCgwLCAyKTtcclxuICAgICAgICAgICAgICAgIC8vcGlja3VwLmxpZmUgPSAyO1xyXG4gICAgICAgICAgICAgICAgLy9waWNrdXAuZ3JhcGhpYyA9IDQ7XHJcbiAgICAgICAgICAgICAgICAvL2VudGl0aWVzLkFkZChwaWNrdXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAvLyAgICBCYXR0bGVFbnRpdHkgcGFuZWxFZmZlY3QgPSBuZXcgQmF0dGxlRW50aXR5KCk7XHJcbiAgICAgICAgICAgIC8vICAgIHBhbmVsRWZmZWN0LlR5cGUgPSBFbnRpdHlUeXBlLnBhbmVsZWZmZWN0O1xyXG4gICAgICAgICAgICAvLyAgICBwYW5lbEVmZmVjdC5wb3MuU2V0KDAsIDIpO1xyXG4gICAgICAgICAgICAvLyAgICBwYW5lbEVmZmVjdC5saWZlID0gNTtcclxuICAgICAgICAgICAgLy8gICAgcGFuZWxFZmZlY3QuZ3JhcGhpYyA9IDU7XHJcbiAgICAgICAgICAgIC8vICAgIHBhbmVsRWZmZWN0LnJhbmRvbVBvc2l0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgcGFuZWxFZmZlY3QuZHJhd0xpZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgcGFuZWxFZmZlY3QuZHJhd1R1cm4gPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgUmFuZG9tUG9zaXRpb24ocGFuZWxFZmZlY3QpO1xyXG4gICAgICAgICAgICAvLyAgICBlbnRpdGllcy5BZGQocGFuZWxFZmZlY3QpO1xyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAvLyAgICBCYXR0bGVFbnRpdHkgcGFuZWxFZmZlY3QgPSBuZXcgQmF0dGxlRW50aXR5KCk7XHJcbiAgICAgICAgICAgIC8vICAgIHBhbmVsRWZmZWN0LlR5cGUgPSBFbnRpdHlUeXBlLnBhbmVsZWZmZWN0O1xyXG4gICAgICAgICAgICAvLyAgICBwYW5lbEVmZmVjdC5wb3MuU2V0KDAsIDIpO1xyXG4gICAgICAgICAgICAvLyAgICBwYW5lbEVmZmVjdC5saWZlID0gNTtcclxuICAgICAgICAgICAgLy8gICAgcGFuZWxFZmZlY3QuZ3JhcGhpYyA9IDU7XHJcbiAgICAgICAgICAgIC8vICAgIHBhbmVsRWZmZWN0LnJhbmRvbVBvc2l0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgcGFuZWxFZmZlY3QuZHJhd0xpZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgcGFuZWxFZmZlY3QuZHJhd1R1cm4gPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgUmFuZG9tUG9zaXRpb24ocGFuZWxFZmZlY3QpO1xyXG4gICAgICAgICAgICAvLyAgICBlbnRpdGllcy5BZGQocGFuZWxFZmZlY3QpO1xyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgIFJlc2V0KCk7XHJcbiAgICAgICAgICAgIEV4ZWN1dGVQaGFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJhdHRsZUVudGl0eSBOZXdCYXR0bGVFbnRpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmF0dGxlRW50aXR5IGJhdHRsZUVudGl0eSA9IG5ldyBCYXR0bGVFbnRpdHkoKTtcclxuICAgICAgICAgICAgZW50aXRpZXMuQWRkKGJhdHRsZUVudGl0eSk7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXR0bGVFbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJlc2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZW50aXRpZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50aXRpZXNbaV0ubGlmZSA9IGVudGl0aWVzW2ldLm1heExpZmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQ2hhbmdlUGhhc2UoQmF0dGxlUGhhc2UuRW5lbXlNb3ZlQ2hvaWNlKTtcclxuICAgICAgICAgICAgYmF0dGxlU3RhdGUudHVybi5WYWwgPSAwO1xyXG4gICAgICAgICAgICBiYXR0bGVTdGF0ZS50b3RhbFR1cm5zID0gMDtcclxuICAgICAgICAgICAgYmF0dGxlU3RhdGUuYWN0aW5nRW50aXR5ID0gMDtcclxuICAgICAgICAgICAgYmF0dGxlU3RhdGUubW92ZVRpY2tfTm93LlZhbCA9IDA7XHJcbiAgICAgICAgICAgIGJhdHRsZVN0YXRlLm1vdmVUaWNrX1RvdGFsID0gMTtcclxuICAgICAgICAgICAgYmF0dGxlUmVzdWx0LnJlc3VsdCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBib29sIElzT3ZlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYmF0dGxlUmVzdWx0LnJlc3VsdCAhPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVGljaygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGaW5pc2hQcmV2aW91c1RpY2soKTtcclxuICAgICAgICAgICAgYm9vbCBoZXJvQWxpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYm9vbCBlbmVteUFsaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJvb2wgcGlja3VwT2JsaWdhdG9yeUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5UeXBlID09IEVudGl0eVR5cGUuZW5lbXkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ubGlmZSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15QWxpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uVHlwZSA9PSBFbnRpdHlUeXBlLmhlcm8pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ubGlmZSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlcm9BbGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0aGlzLnBpY2t1cEFjY2Vzc29yLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGlja3VwID0gcGlja3VwQWNjZXNzb3IuQ29tcDIoaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGlja3VwLm5lY2Vzc2FyeUZvclZpY3RvcnkgJiYgcGlja3VwQWNjZXNzb3IuQ29tcDEoaSkuQWxpdmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja3VwT2JsaWdhdG9yeUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmF0dGxlU3RhdGUuQmF0dGxlRW5kRW5hYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhlcm9BbGl2ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXR0bGVSZXN1bHQucmVzdWx0ID0gMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCghZW5lbXlBbGl2ZSB8fCAhQmF0dGxlQ29uZmlnLm5lZWRLaWxsQWxsRW5lbWllcykgJiYgIXBpY2t1cE9ibGlnYXRvcnlFeGlzdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXR0bGVSZXN1bHQucmVzdWx0ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFja0JhdHRsZS5CYXR0bGVFbmRWaWN0b3J5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChiYXR0bGVSZXN1bHQucmVzdWx0ID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhhcHBNYW5hZ2VyLlRpY2soKTtcclxuICAgICAgICAgICAgICAgIHRpbWVTdGFtcC5BZHZhbmNlKDEpO1xyXG4gICAgICAgICAgICAgICAgRXhlY3V0ZVBoYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVcGRhdGUoZmxvYXQgZGVsdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGltZVRvQ2hvb3NlID4gMCAmJiBiYXR0bGVTdGF0ZS5waGFzZSA9PSBCYXR0bGVQaGFzZS5QaWNrSGFuZHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpbWVUb0Nob29zZSAtPSBkZWx0YTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lVG9DaG9vc2UgPD0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBGaW5pc2hQcmV2aW91c1RpY2soKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmF0dGxlUGhhc2UgcHJldmlvdXNQaGFzZSA9IGJhdHRsZVN0YXRlLnBoYXNlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHByZXZpb3VzUGhhc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgQmF0dGxlUGhhc2UuRW5lbXlNb3ZlQ2hvaWNlOlxyXG4gICAgICAgICAgICAgICAgICAgIENoYW5nZVBoYXNlKEJhdHRsZVBoYXNlLkhhbmRSZWNoYXJnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEJhdHRsZVBoYXNlLkhhbmRSZWNoYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICBDaGFuZ2VQaGFzZShCYXR0bGVQaGFzZS5QaWNrSGFuZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVQaGFzZS5QaWNrSGFuZHM6XHJcbiAgICAgICAgICAgICAgICAgICAgQ2hhbmdlUGhhc2UoQmF0dGxlUGhhc2UuRXhlY3V0ZU1vdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVQaGFzZS5FeGVjdXRlTW92ZTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmF0dGxlU3RhdGUubW92ZVRpY2tfTm93ID49IGJhdHRsZVN0YXRlLm1vdmVUaWNrX1RvdGFsIC0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdHRsZVN0YXRlLm1vdmVUaWNrX05vdy5WYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXR0bGVTdGF0ZS5tb3ZlVGlja19Ub3RhbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgbm9Nb3JlVW5pdHNUb0FjdFRoaXNUdXJuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGlfaW5pdGlhbCA9IGJhdHRsZVN0YXRlLmFjdGluZ0VudGl0eSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpX2luaXRpYWwgPCBlbnRpdGllcy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGlfaW5pdGlhbDsgaSA8IGVudGl0aWVzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0aWVzW2ldLkFsaXZlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0dGxlU3RhdGUuYWN0aW5nRW50aXR5ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9Nb3JlVW5pdHNUb0FjdFRoaXNUdXJuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub01vcmVVbml0c1RvQWN0VGhpc1R1cm4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYXR0bGVTdGF0ZS50dXJuID49IGJhdHRsZVN0YXRlLnR1cm5zUGVyUGhhc2UgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZVBoYXNlKEJhdHRsZVBoYXNlLkVuZW15TW92ZUNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZW50aXRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5yYW5kb21Qb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIlJBTkRPTSBQT1MhIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJhbmRvbVBvc2l0aW9uKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdHRsZVN0YXRlLmFjdGluZ0VudGl0eSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0dGxlU3RhdGUudHVybiA9IGJhdHRsZVN0YXRlLnR1cm4gKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdHRsZVN0YXRlLnRvdGFsVHVybnMgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXR0bGVTdGF0ZS5tb3ZlVGlja19Ob3cuVmFsICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBSYW5kb21Qb3NpdGlvbihCYXR0bGVFbnRpdHkgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGUucG9zLlggPSBSYW5kb21TdXBwbGllci5SYW5nZSgwLCA1KTtcclxuICAgICAgICAgICAgZS5wb3MuWSA9IFJhbmRvbVN1cHBsaWVyLlJhbmdlKDAsIDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIENoYW5nZVBoYXNlKEJhdHRsZVBoYXNlIHBoYXNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQmF0dGxlUGhhc2UgcHJldmlvdXNQaGFzZSA9IGJhdHRsZVN0YXRlLnBoYXNlO1xyXG4gICAgICAgICAgICBpZiAocGhhc2UgPT0gcHJldmlvdXNQaGFzZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHBoYXNlID09IEJhdHRsZVBoYXNlLlBpY2tIYW5kcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tCYXR0bGUuUm91bmQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1BoYXNlICE9IEJhdHRsZVBoYXNlLkNvbmZpcm1JbnB1dClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBkZWNrTWFuYWdlci5SZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVySGFuZFBvb2wuQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZXMgPSBkZWNrTWFuYWdlci5zZWxlY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtb3Zlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySGFuZFBvb2wuQWRkKChNb3ZlVHlwZSltb3Zlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vcGxheWVySGFuZFBvb2wuU2h1ZmZsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllckhhbmRVbmZpeGVkLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGNvbW1hbmRzVG9BZGQgPSBtb3Zlcy5Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWFuZHNUb0FkZCA+IHBsYXllckhhbmRQb29sLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZHNUb0FkZCA9IHBsYXllckhhbmRQb29sLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbW1hbmRzVG9BZGQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckhhbmRVbmZpeGVkLkFkZChwbGF5ZXJIYW5kUG9vbFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVRvQ2hvb3NlID0gdGltZVRvQ2hvb3NlTWF4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJldmlvdXNQaGFzZSA9PSBCYXR0bGVQaGFzZS5FeGVjdXRlTW92ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmF0dGxlU3RhdGUudHVybi5WYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgYmF0dGxlU3RhdGUuYWN0aW5nRW50aXR5ID0gMDtcclxuICAgICAgICAgICAgICAgIGJhdHRsZVN0YXRlLm1vdmVUaWNrX05vdy5WYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgYmF0dGxlU3RhdGUubW92ZVRpY2tfVG90YWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZW50aXRpZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlLm1vdmVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5tb3Zlc1tpXSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYXR0bGVTdGF0ZS5waGFzZSA9IHBoYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBDb25maXJtSW5wdXRTdGFydCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGFuZ2VQaGFzZShCYXR0bGVQaGFzZS5Db25maXJtSW5wdXQpO1xyXG4gICAgICAgICAgICBpbnB1dHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuQ29uZmlybSksIElucHV0VGFncy5NSVNDKTtcclxuICAgICAgICAgICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuQ2FuY2VsKSwgSW5wdXRUYWdzLk1JU0MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEV4ZWN1dGVQaGFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGhhc2UgPSBiYXR0bGVTdGF0ZS5waGFzZTtcclxuICAgICAgICAgICAgc3dpdGNoIChwaGFzZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVQaGFzZS5FbmVteU1vdmVDaG9pY2U6XHJcbiAgICAgICAgICAgICAgICAgICAgZWNzSW50ZWcuU3Bhd25FbmVtaWVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgRW5lbXlHZW5lcmF0ZU1vdmVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEJhdHRsZVBoYXNlLkhhbmRSZWNoYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQmF0dGxlUGhhc2UuUGlja0hhbmRzOlxyXG4gICAgICAgICAgICAgICAgICAgIFBpY2tIYW5kSW5wdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQmF0dGxlUGhhc2UuRXhlY3V0ZU1vdmU6XHJcbiAgICAgICAgICAgICAgICAgICAgZWNzSW50ZWcuU3Bhd25FbmVtaWVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgRXhlY3V0ZU1vdmVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgUGlja0hhbmRJbnB1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL2RlY2tNYW5hZ2VyLlxyXG4gICAgICAgICAgICBpbnB1dHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgaW5wdXRzLmlucHV0Rm9yQ29uZmlybWF0aW9uID0gbmV3IElucHV0KElucHV0VHlwZS5Ob25lLCAtMSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaGkgaW4gcGxheWVySGFuZEZpeGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dHMuQWRkKG5ldyBUdXJuYmFzZWQuSW5wdXQoSW5wdXRUeXBlLk1vdmUsIChpbnQpaGkpLCBJbnB1dFRhZ3MuTU9WRUZJWCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGhpIGluIHBsYXllckhhbmRVbmZpeGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihoaSAhPSBNb3ZlVHlwZS5Eb05vdGhpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5Nb3ZlLCAoaW50KWhpKSwgSW5wdXRUYWdzLk1PVkVVTkZJWCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuUmVkbyksIElucHV0VGFncy5NSVNDKTtcclxuICAgICAgICAgICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuRG9uZSksIElucHV0VGFncy5NSVNDKTtcclxuICAgICAgICAgICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuSGVscCksIElucHV0VGFncy5NSVNDKTtcclxuICAgICAgICAgICAgYm9vbCBlbmVteUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5UeXBlID09IEVudGl0eVR5cGUuZW5lbXkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5lbXlFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9pZiAoZW5lbXlFeGlzdClcclxuICAgICAgICAgICAgLy8gICAgaW5wdXRzLkFkZChuZXcgVHVybmJhc2VkLklucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuUHJldmlldyksIElucHV0VGFncy5NSVNDKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIElucHV0RG9uZShJbnB1dCBpbnB1dClcclxuICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChiYXR0bGVTdGF0ZS5waGFzZSA9PSBCYXR0bGVQaGFzZS5Db25maXJtSW5wdXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFByb2Nlc3NJbnB1dChpbnB1dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dHMuaW5wdXRGb3JDb25maXJtYXRpb24gPSBpbnB1dDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIElucHV0Q29uZmlybWVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENoYW5nZVBoYXNlKEJhdHRsZVBoYXNlLlBpY2tIYW5kcyk7XHJcbiAgICAgICAgICAgIElucHV0IGlucHV0ID0gaW5wdXRzLmlucHV0Rm9yQ29uZmlybWF0aW9uO1xyXG4gICAgICAgICAgICBpbnB1dHMuaW5wdXRGb3JDb25maXJtYXRpb24gPSBuZXcgSW5wdXQoSW5wdXRUeXBlLk5vbmUsIC0xKTtcclxuICAgICAgICAgICAgUHJvY2Vzc0lucHV0KGlucHV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBQcm9jZXNzSW5wdXQoSW5wdXQgaW5wdXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoXCJJTlBVVFwiKTtcclxuICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT0gSW5wdXRUeXBlLk1vdmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1vdmVUeXBlIGFyZzEgPSAoTW92ZVR5cGUpaW5wdXQuYXJnMTtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIklOUFVUVEVEMVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXJIYW5kRml4ZWQuQ29udGFpbnMoYXJnMSkgfHwgcGxheWVySGFuZFVuZml4ZWQuQ29udGFpbnMoYXJnMSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVja01hbmFnZXIuSW5wdXRVc2VkKChpbnQpYXJnMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlKFwiSU5QVVRURUQyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVDaG9zZW4oYXJnMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PSBJbnB1dFR5cGUuTWlzY0JhdHRsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWlzY0JhdHRsZUlucHV0IG1pc2MgPSAoTWlzY0JhdHRsZUlucHV0KWlucHV0LmFyZzE7XHJcbiAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoXCJJTlBVVFwiK21pc2MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1pc2MgPT0gTWlzY0JhdHRsZUlucHV0LlJlZG8pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZW50aXRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEVudGl0eVR5cGUuaGVybylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlLm1vdmVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLm1vdmVzW2ldID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1vdmVzW2ldID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB2YWx1ZSA9IGUubW92ZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAtMSB8fCBpID09IGJhdHRsZVN0YXRlLnR1cm5zUGVyUGhhc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBsb3N0TW92ZSA9IGUubW92ZXNbaSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVja01hbmFnZXIuUmVjb3Zlcihsb3N0TW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1vdmVzW2kgLSAxXSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1pc2MgPT0gTWlzY0JhdHRsZUlucHV0LkRvbmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGljaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1pc2MgPT0gTWlzY0JhdHRsZUlucHV0LkNvbmZpcm0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW5wdXRDb25maXJtZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBQaWNrSGFuZElucHV0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWlzYyA9PSBNaXNjQmF0dGxlSW5wdXQuQ2FuY2VsKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBCYXR0bGVEZWNpZGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBoZXJvZXMgPSAwO1xyXG4gICAgICAgICAgICBpbnQgZW5lbWllcyA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEVudGl0eVR5cGUuaGVybylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5BbGl2ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVyb2VzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEVudGl0eVR5cGUuZW5lbXkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuQWxpdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW1pZXMrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaGVyb2VzID09IDAgfHwgZW5lbWllcyA9PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTW92ZUNob3NlbihNb3ZlVHlwZSBtb3ZlVHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEVudGl0eVR5cGUuaGVybylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGUubW92ZXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IHZhbHVlID0gZS5tb3Zlc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubW92ZXNbaV0gPSAoaW50KW1vdmVUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBFeGVjdXRlTW92ZXMoKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcImJsYVwiICsgYmF0dGxlU3RhdGUudHVybi5WYWwpO1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuUmVhZCgpO1xyXG4gICAgICAgICAgICBCYXR0bGVFbnRpdHkgYXR0YWNrZXIgPSBlbnRpdGllc1tiYXR0bGVTdGF0ZS5hY3RpbmdFbnRpdHldO1xyXG4gICAgICAgICAgICBpbnQgdHVybiA9IGJhdHRsZVN0YXRlLnR1cm47XHJcbiAgICAgICAgICAgIEV4ZWN1dGVNb3ZlKGF0dGFja2VyLCB0dXJuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEV4ZWN1dGVNb3ZlKEJhdHRsZUVudGl0eSBhY3RvciwgaW50IHR1cm4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNb3ZlRGF0YUV4ZWN1dGVyLkV4ZWN1dGVNb3ZlKGFjdG9yLCB0dXJuKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgQ2FsY3VsYXRlQXR0YWNrTXVsdGlwbGllcihCYXR0bGVFbnRpdHkgYWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYmFzZUQgPSBhY3Rvci5kYW1hZ2VNdWx0aXBsaWVyO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlbnRpdGllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgIT0gYWN0b3IpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucG9zID09IGFjdG9yLnBvcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLlR5cGUgPT0gRW50aXR5VHlwZS5wYW5lbGVmZmVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUQgKj0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZUQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IENhbGN1bGF0ZURlZmVuZGVyTXVsdGlwbGllcihCYXR0bGVFbnRpdHkgYWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYmFzZUQgPSAxO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlbnRpdGllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUgIT0gYWN0b3IpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucG9zID09IGFjdG9yLnBvcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLlR5cGUgPT0gRW50aXR5VHlwZS5wYW5lbGVmZmVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUQgKj0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZUQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgQmF0dGxlU3RhdGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBWYWx1ZSB0dXJuID0gbmV3IFZhbHVlKCk7XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgdG90YWxUdXJucztcclxuICAgICAgICAgICAgcHVibGljIFZhbHVlIHR1cm5zUGVyUGhhc2UgPSBuZXcgVmFsdWUoKTtcclxuICAgICAgICAgICAgcHVibGljIFZhbHVlIG1vdmVUaWNrX05vdyA9IG5ldyBWYWx1ZSgpO1xyXG4gICAgICAgICAgICBwdWJsaWMgaW50IG1vdmVUaWNrX1RvdGFsID0gMDtcclxuICAgICAgICAgICAgcHVibGljIGludCBhY3RpbmdFbnRpdHkgPSAwO1xyXG4gICAgICAgICAgICBwdWJsaWMgQmF0dGxlUGhhc2UgcGhhc2U7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEJhdHRsZUVuZEVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgQmF0dGxlRW50aXR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgaW50IGxpZmU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBWZWN0b3IyRCBwb3MgPSBuZXcgVmVjdG9yMkQoKTtcclxuICAgICAgICAgICAgcHVibGljIFZlY3RvcjJEIG1pblBvcyA9IG5ldyBWZWN0b3IyRCgpO1xyXG4gICAgICAgICAgICBwdWJsaWMgVmVjdG9yMkQgbWF4UG9zID0gbmV3IFZlY3RvcjJEKCk7XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnRbXSBtb3ZlcyA9IG5ldyBpbnRbMTBdO1xyXG4gICAgICAgICAgICBwdWJsaWMgaW50IGdyYXBoaWM7XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgZ3JhcGhpY1JlcGVhdGVkSW5kZXg7XHJcbiAgICAgICAgICAgIHB1YmxpYyBmbG9hdCBkYW1hZ2VNdWx0aXBsaWVyID0gMTtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgZHJhd0xpZmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBkcmF3VHVybiA9IHRydWU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIHJhbmRvbVBvc2l0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHB1YmxpYyBFbGVtZW50IGVsZW1lbnQgPSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50Lk5vbmU7XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgbWF4TGlmZSA9IDM7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgRW50aXR5VHlwZSBUeXBlID0gUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uRW50aXR5VHlwZS5oZXJvO1xyXG4gICAgICAgICAgICBwdWJsaWMgVmVjdG9yMkQgUG9zaXRpb25WMkQgeyBnZXQgeyByZXR1cm4gbmV3IEJhc2VVdGlscy5WZWN0b3IyRChwb3MuWCwgcG9zLlkpOyB9IH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIERlYWQgeyBnZXQgeyByZXR1cm4gbGlmZSA8PSAwOyB9IH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEFsaXZlIHsgZ2V0IHsgcmV0dXJuICF0aGlzLkRlYWQ7IH0gfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIE1vdmVUeXBlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEb05vdGhpbmcsXHJcbiAgICAgICAgICAgIE1vdmVVcCxcclxuICAgICAgICAgICAgTW92ZUxlZnQsXHJcbiAgICAgICAgICAgIE1vdmVEb3duLFxyXG4gICAgICAgICAgICBNb3ZlUmlnaHQsXHJcbiAgICAgICAgICAgIE5vcm1hbFNob3QsXHJcbiAgICAgICAgICAgIEZpcmUsXHJcbiAgICAgICAgICAgIEljZSxcclxuICAgICAgICAgICAgVGh1bmRlcixcclxuICAgICAgICAgICAgSWNlQm9tYixcclxuICAgICAgICAgICAgVGh1bmRlckJvbWIsXHJcbiAgICAgICAgICAgIFN1bW1vbkVudGl0eSxcclxuICAgICAgICAgICAgRG93bkZpcmUsXHJcbiAgICAgICAgICAgIFRyaXBsZUZpcmUsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZW51bSBIYXBwVGFnXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBdHRhY2tIaXQsXHJcbiAgICAgICAgICAgIEF0dGFja01pc3MsXHJcbiAgICAgICAgICAgIERhbWFnZVRha2VuLFxyXG4gICAgICAgICAgICBNb3ZlbWVudEZhaWxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIEJhdHRsZVBoYXNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbmVteU1vdmVDaG9pY2UsXHJcbiAgICAgICAgICAgIEhhbmRSZWNoYXJnZSxcclxuICAgICAgICAgICAgUGlja0hhbmRzLFxyXG4gICAgICAgICAgICBDb25maXJtSW5wdXQsXHJcbiAgICAgICAgICAgIEV4ZWN1dGVNb3ZlLFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIEVudGl0eVR5cGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhlcm8sIGVuZW15LCBuZXV0cmFsLCBwaWNrdXAsIHBhbmVsZWZmZWN0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZW51bSBFbGVtZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGaXJlLCBJY2UsIFRodW5kZXIsXHJcbiAgICAgICAgICAgIE5vbmVcclxuICAgICAgICB9XHJcblxuICAgIFxucHJpdmF0ZSBpbnQgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX0JvYXJkV2lkdGg9Njtwcml2YXRlIGludCBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fQm9hcmRIZWlnaHQ9Mzt9XHJcblxyXG5cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVmFsdWVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgZmxvYXQgVmFsIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEVudW0gdmFsQXNFbnVtIHsgc2V0IHsgVmFsID0gQ29udmVydC5Ub1NpbmdsZSh2YWx1ZSk7IH0gfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNldChpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFZhbCA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZhbHVlIG9wZXJhdG9yICsoVmFsdWUgYzEsIGZsb2F0IGMyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYzEuVmFsICs9IGMyO1xyXG4gICAgICAgICAgICByZXR1cm4gYzE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZsb2F0IG9wZXJhdG9yIC0oVmFsdWUgYzEsIGZsb2F0IGMyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGMxLlZhbCAtIGMyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIG9wZXJhdG9yID09KFZhbHVlIGMxLCBWYWx1ZSBjMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJvb2wgYzJudWxsID0gb2JqZWN0LlJlZmVyZW5jZUVxdWFscyhjMiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGJvb2wgYzFudWxsID0gb2JqZWN0LlJlZmVyZW5jZUVxdWFscyhjMSwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmIChjMm51bGwgJiYgYzFudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmIChjMW51bGwgfHwgYzJudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGMxLlZhbCA9PSBjMi5WYWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgIT0oVmFsdWUgYzEsIFZhbHVlIGMyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCBjMm51bGwgPSBvYmplY3QuUmVmZXJlbmNlRXF1YWxzKGMyLCBudWxsKTtcclxuICAgICAgICAgICAgYm9vbCBjMW51bGwgPSBvYmplY3QuUmVmZXJlbmNlRXF1YWxzKGMxLCBudWxsKTtcclxuICAgICAgICAgICAgaWYgKGMybnVsbCAmJiBjMW51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChjMW51bGwgfHwgYzJudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYzEuVmFsICE9IGMyLlZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3IgZmxvYXQoVmFsdWUgZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLlZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3IgaW50KFZhbHVlIGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGludClkLlZhbDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIEJhdHRsZVJlc3VsdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdHJ1Y3QgSW5wdXRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgSW5wdXRUeXBlIHR5cGU7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGludCBhcmcxO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBJbnB1dChJbnB1dFR5cGUgdHlwZSwgaW50IGFyZzEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLmFyZzEgPSBhcmcxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElucHV0KElucHV0VHlwZSB0eXBlLCBFbnVtIGFyZzEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLmFyZzEgPSBDb252ZXJ0LlRvSW50MzIoYXJnMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIElucHV0VHlwZVxyXG4gICAge1xyXG4gICAgICAgIE5vbmUsIE1vdmUsIE1pc2NCYXR0bGVcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBNaXNjQmF0dGxlSW5wdXRcclxuICAgIHtcclxuICAgICAgICBEb25lLFxyXG4gICAgICAgIFJlZG8sXHJcbiAgICAgICAgUHJldmlldyxcclxuICAgICAgICBDb25maXJtLFxyXG4gICAgICAgIENhbmNlbCxcclxuICAgICAgICBIZWxwXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb2xvclN0dWZmXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgc3RyaW5nIEdvb2RNYWluO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIG5ldXRyYWxEYXJrID0gXCIjMTkwMTNiXCI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgbmV1dHJhbFN0cm9uZyA9IFwiIzJjM2U0M1wiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHN0cmluZyBHb29kU3ViO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHN0cmluZyBFdmlsTWFpbjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZ1tdIGNvbG9ycyA9IG5ldyBzdHJpbmdbMjVdO1xyXG5cclxuICAgICAgICBzdGF0aWMgQ29sb3JTdHVmZigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9ycy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29sb3JzW2ldID0gXCIjNDAwMDIwXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9jb2xvcnNbQ29sb3JzLkhlcm9dID0gXCIjMDA5YzhkXCI7XHJcbiAgICAgICAgICAgIC8vY29uc3Qgc3RyaW5nIGhlcm9TdWIgPSBcIiMwMDVmOTFcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQ29sb3JzLkhlcm9UdXJuXSA9IGhlcm9TdWI7XHJcbiAgICAgICAgICAgIC8vY29sb3JzW0NvbG9ycy5FbmVteV0gPSBcIiNmZjAzNTNcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQ29sb3JzLkdyaWRIZXJvXSA9IGhlcm9TdWI7XHJcbiAgICAgICAgICAgIC8vY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuR3JpZEVuZW15XSA9IFwiIzhlMDA2MFwiO1xyXG4gICAgICAgICAgICAvL2NvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLkVuZW15VHVybl0gPSBcIiM4ZTAwNjBcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5Cb2FyZF0gPSBcIiMxZTQ4NmVcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5pbnB1dEtleV0gPSBcIiM2ODg2OTBcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbF0gPSBcIiMxZTQ4NmVcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5GaXJlQXVyYV0gPSBcIiM3OTMxMDBcIjtcclxuICAgICAgICAgICAgLy9jb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5JY2VBdXJhXSA9IFwiIzAwNTU5MFwiO1xyXG4gICAgICAgICAgICAvL2NvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLlRodW5kZXJBdXJhXSA9IFwiIzAwNTgzZFwiO1xyXG5cclxuICAgICAgICAgICAgY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkhlcm9dID0gXCIjOGFkODk2XCI7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZyBoZXJvU3ViID0gXCIjNGM2ZDUwXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvVHVybl0gPSBoZXJvU3ViO1xyXG4gICAgICAgICAgICBjb2xvcnNbUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuRW5lbXldID0gXCIjZmY3Njk0XCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5HcmlkSGVyb10gPSBoZXJvU3ViO1xyXG4gICAgICAgICAgICBjb25zdCBzdHJpbmcgZW5lbXlzdWIgPSBcIiNhNzQ2NGZcIjtcclxuICAgICAgICAgICAgY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkdyaWRFbmVteV0gPSBlbmVteXN1YjtcclxuICAgICAgICAgICAgY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkVuZW15VHVybl0gPSBlbmVteXN1YjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuQm9hcmRdID0gXCIjMWU0ODZlXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLmlucHV0S2V5XSA9IFwiIzY4ODY5MFwiO1xyXG4gICAgICAgICAgICBjb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbF0gPSBcIiMxZTQ4NmVcIjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuRmlyZUF1cmFdID0gXCIjNzkzMTAwXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLkljZUF1cmFdID0gXCIjMDA1NTkwXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLlRodW5kZXJBdXJhXSA9IFwiIzAwNTgzZFwiO1xyXG4gICAgICAgICAgICBjb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5GaXJlU2hvdF0gPSBcIiNmODJiMzZcIjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuSWNlU2hvdF0gPSBcIiMwMDdlZmZcIjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuVGh1bmRlclNob3RdID0gXCIjYTM3YzAwXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tncm91bmRJbnB1dF0gPSBcIiMwODA4MDhcIjtcclxuXHJcblxyXG4gICAgICAgICAgICBjb2xvcnNbQmF0dGxlUmVuZGVyLkNvbG9ycy5pbnB1dEtleV0gPSBcIiM5RTg2NjRcIjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuSW5wdXREZXNjcmlwdGlvbl0gPSBcIiM4MDgwODBcIjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuQmFja0JhdHRsZV0gPSBcIiMwMDAwMDBcIjtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuQmFja2dyb3VuZElucHV0XSA9IFwiIzFBMUExQVwiO1xyXG4gICAgICAgICAgICBjb2xvcnNbUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuSGVyb1R1cm5dID0gXCIjMDBCMkIyXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5FbmVteVR1cm5dID0gXCIjRkYwMDQwXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5HcmlkSGVyb10gPSBcIiMwMDQ2OENcIjtcclxuICAgICAgICAgICAgY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkdyaWRFbmVteV0gPSBcIiM4QzAwMjNcIjtcclxuICAgICAgICAgICAgY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkhlcm9dID0gXCIjNjZGRkZGXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5FbmVteV0gPSBcIiNEOTAwMzZcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvXSA9IFwiI0JGQkZCRlwiO1xyXG4gICAgICAgICAgICBjb2xvcnNbUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuRW5lbXldID0gY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkhlcm9dO1xyXG4gICAgICAgICAgICBjb2xvcnNbUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuSGVyb1R1cm5dID0gY29sb3JzW1BpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkhlcm9dO1xyXG4gICAgICAgICAgICBjb2xvcnNbUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuRW5lbXlUdXJuXSA9IGNvbG9yc1tQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvXTtcclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuV2luZG93TGFiZWxdID0gXCIjNjY2NjY2XCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tDb21tYW5kXSA9IFwiIzMzMzMzM1wiO1xyXG5cclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuRmlyZUF1cmFdID0gXCIjRkY4QzY2XCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLkljZUF1cmFdID0gXCIjNjZGRkZGXCI7XHJcbiAgICAgICAgICAgIGNvbG9yc1tCYXR0bGVSZW5kZXIuQ29sb3JzLlRodW5kZXJBdXJhXSA9IFwiI0ZGRkY2NlwiO1xyXG5cclxuICAgICAgICAgICAgY29sb3JzW0JhdHRsZVJlbmRlci5Db2xvcnMuQmFja1N0cmlwZV0gPSBcIiMxQTE0MERcIjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5EZWJ1Z0V4dHJhXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRGVidWdFeFxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBMaXN0PHN0cmluZz4gbWVzc2FnZXMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBMb2coc3RyaW5nIHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtZXNzYWdlcy5BZGQodik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2hvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb25zb2xlLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIG1lc3NhZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShpdGVtKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIENvbnNvbGUuUmVhZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guQmFzZVV0aWxzO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIERlY2tNYW5hZ2VyXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxpbnQ+W10gZGVja3MgPSBuZXcgTGlzdDxpbnQ+WzNdO1xyXG4gICAgICAgIExpc3Q8aW50PltdIGRlY2tzU3RhdGljID0gbmV3IExpc3Q8aW50PlszXTtcclxuICAgICAgICBMaXN0PGludD5bXSBkaXNjYXJkcyA9IG5ldyBMaXN0PGludD5bM107XHJcbiAgICAgICAgYm9vbFtdIGRlY2tzT2sgPSBuZXcgYm9vbFszXTtcclxuICAgICAgICBpbnRbXSBkZWZhdWx0QXR0YWNrID0gbmV3IGludFszXTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IHNlbGVjdGlvbiA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICBMaXN0PGludD4gZGVja3NOb3RFbXB0eSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICBib29sIGRlZmF1bHRBdHRhY2tBbHdheXNQcmVzZW50QXRTdGFydCA9IHRydWU7XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBtb3Zlc1RvUmVtb3ZlID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGVja01hbmFnZXIoaW50IGhhbmRTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBoYW5kU2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uQWRkKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZGVja3MuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlY2tzW2ldID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgZGVja3NTdGF0aWNbaV0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlZnJlc2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9yZW1vdmVzIHVzZWQgbW92ZXMgZnJvbSBoYW5kXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIG1vdmVzVG9SZW1vdmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBpbmRleCA9IHNlbGVjdGlvbi5JbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltpbmRleF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1vdmVzVG9SZW1vdmUuQ2xlYXIoKTtcclxuICAgICAgICAgICAgaWYgKGRlZmF1bHRBdHRhY2tBbHdheXNQcmVzZW50QXRTdGFydClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBkZWZhdWx0QXR0YWNrLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltpXSA9IGRlZmF1bHRBdHRhY2tbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUmVmcmVzaERlY2tFbXB0eVN0YXR1cygpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRlY2tzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWNrc09rW2ldID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uLkNvbnRhaW5zKGRlZmF1bHRBdHRhY2tbaV0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlY2tzT2tbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBkZWNrc1N0YXRpY1tpXS5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uLkNvbnRhaW5zKGRlY2tzU3RhdGljW2ldW2pdKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2tzT2tbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzZWxlY3Rpb24uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbltpXSA+IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBhZGRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBkZWNrc09rLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVja3NPa1tqXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2tzT2tbal0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBtb3ZlID0gZGVmYXVsdEF0dGFja1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2tzW2pdLkNvdW50ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmUgPSBEcmF3KGopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25baV0gPSBtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWZyZXNoRGVja0VtcHR5U3RhdHVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghYWRkZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2tzTm90RW1wdHkuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGRlY2sgPSBQaWRyb2guQmFzZVV0aWxzLkV4dGVuc2lvbnMuUmFuZG9tRWxlbWVudDxpbnQ+KGRlY2tzTm90RW1wdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgbW92ZSA9IERyYXcoZGVjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltpXSA9IG1vdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlZnJlc2hEZWNrRW1wdHlTdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0RGVmYXVsdEF0dGFjayhpbnQgZGVja0lkLCBpbnQgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRlZmF1bHRBdHRhY2tbZGVja0lkXSA9IG1vdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludCBEcmF3KGludCBkZWNrSWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbW92ZSA9IFBpZHJvaC5CYXNlVXRpbHMuRXh0ZW5zaW9ucy5SYW5kb21FbGVtZW50PGludD4oZGVja3NbZGVja0lkXSk7XHJcbiAgICAgICAgICAgIGRlY2tzW2RlY2tJZF0uUmVtb3ZlKG1vdmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbW92ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQWRkKGludCBkZWNrSWQsIGludCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGVja3NbZGVja0lkXS5BZGQoaXRlbSk7XHJcbiAgICAgICAgICAgIGRlY2tzU3RhdGljW2RlY2tJZF0uQWRkKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFJlZnJlc2hEZWNrRW1wdHlTdGF0dXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGVja3NOb3RFbXB0eS5DbGVhcigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRlY2tzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVja3NbaV0uQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlY2tzTm90RW1wdHkuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIElucHV0VXNlZChpbnQgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vdmVzVG9SZW1vdmUuQWRkKG1vdmUpO1xyXG4gICAgICAgICAgICAvL2ludCBpbmRleCA9IHNlbGVjdGlvbi5JbmRleE9mKG1vdmUpO1xyXG4gICAgICAgICAgICAvL2lmIChpbmRleCAhPSAtMSlcclxuICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgIC8vICAgIHNlbGVjdGlvbltpbmRleF0gPSAwO1xyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJlY292ZXIoaW50IGxvc3RNb3ZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbW92ZXNUb1JlbW92ZS5SZW1vdmUobG9zdE1vdmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guRUNTO1xyXG51c2luZyBTeXN0ZW07XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIGludGVybmFsIGNsYXNzIEVDU0ludGVncmF0aW9uXHJcbiAgICB7XHJcblxyXG4gICAgICAgIFNwYXduRW50aXR5RmFjdG9yeSBlbmVteUZhY3Rvcnk7XHJcbiAgICAgICAgRUNTTWFuYWdlciBlY3M7XHJcblxyXG4gICAgICAgIHB1YmxpYyBFQ1NJbnRlZ3JhdGlvbihTcGF3bkVudGl0eUZhY3RvcnkgZW5lbXlGYWN0b3J5LCBFQ1NNYW5hZ2VyIGVjcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlGYWN0b3J5ID0gZW5lbXlGYWN0b3J5O1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGVjcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgSGVyb0NyZWF0ZWQoQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHkgaGVybylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVjcy5DcmVhdGVFbnRpdHlXaXRoQ29tcG9uZW50KGhlcm8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTcGF3bkVuZW1pZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZW5lbXlGYWN0b3J5LlNwYXduKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBFbmVteUFJXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IExpc3Q8b2JqZWN0PiBtb3ZlcyA9IG5ldyBMaXN0PG9iamVjdD4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRW5lbXlBSVN0YXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludCBwcm9ncmVzcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTW92ZVVzZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpbnQgbW92ZTtcclxuXHJcbiAgICAgICAgcHVibGljIE1vdmVVc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNb3ZlVXNlKGludCBtb3ZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlID0gbW92ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guQmFzZVV0aWxzO1xyXG51c2luZyBQaWRyb2guRUNTO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNwYXduRW50aXR5RmFjdG9yeVxyXG4gICAge1xyXG5cclxuICAgICAgICBFQ1NNYW5hZ2VyIGVjcztcclxuICAgICAgICBMaXN0PEVuZW15RGF0YT4gZW5lbXlEYXRhcztcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IEJhdHRsZU1haW4gYmF0dGxlTWFpbjtcclxuICAgICAgICBwcml2YXRlIFF1aWNrQWNjZXNzb3JPbmU8U3Bhd25EYXRhPiBzcGF3bnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTcGF3bkVudGl0eUZhY3RvcnkoRUNTTWFuYWdlciBlY3MsIExpc3Q8RW5lbXlEYXRhPiBlbmVteURhdGFzLCBCYXR0bGVNYWluIGJhdHRsZU1haW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGVjcztcclxuICAgICAgICAgICAgLy9lY3MuUXVpY2tBY2Nlc3NvcjE8RW5lbXlEYXRhPigpO1xyXG4gICAgICAgICAgICBzcGF3bnMgPSBlY3MuUXVpY2tBY2Nlc3NvcjE8U3Bhd25EYXRhPigpO1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15RGF0YXMgPSBlbmVteURhdGFzO1xyXG4gICAgICAgICAgICB0aGlzLmJhdHRsZU1haW4gPSBiYXR0bGVNYWluO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU3Bhd24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHNwYXduZWQgPSAwO1xyXG4gICAgICAgICAgICAvL2ZvciAoaW50IGkgPSAwOyBpIDwgc3Bhd25zLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHdoaWxlIChzcGF3bnMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTcGF3bkRhdGEgc3Bhd24gPSBzcGF3bnMuQ29tcDEoMCk7XHJcbiAgICAgICAgICAgICAgICBzcGF3bnMuRW50aXR5KDApLlJlbW92ZUNvbXBvbmVudChzcGF3bik7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBzcGF3bi5pZDtcclxuICAgICAgICAgICAgICAgIEJhdHRsZU1haW4uRW50aXR5VHlwZSBlbnRUeXBlID0gKEJhdHRsZU1haW4uRW50aXR5VHlwZSlzcGF3bi5lbnRpdHlUeXBlO1xyXG4gICAgICAgICAgICAgICAgaWYoZW50VHlwZSA9PSBCYXR0bGVNYWluLkVudGl0eVR5cGUucGlja3VwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiZSA9IGJhdHRsZU1haW4uTmV3QmF0dGxlRW50aXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmUuVHlwZSA9IGVudFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgUGlja3VwSW5mbyBwaWNrdXAgPSBuZXcgUGlja3VwSW5mbyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGlja3VwRSA9IGVjcy5DcmVhdGVFbnRpdHlXaXRoQ29tcG9uZW50KHBpY2t1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja3VwRS5BZGRDb21wb25lbnQoYmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLnBvcyA9IHNwYXduLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLmxpZmUgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLm1heExpZmUgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLmRyYXdMaWZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYmUuZHJhd1R1cm4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBiZS5ncmFwaGljID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlbnRUeXBlID09IEJhdHRsZU1haW4uRW50aXR5VHlwZS5uZXV0cmFsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiZSA9IGJhdHRsZU1haW4uTmV3QmF0dGxlRW50aXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmUuVHlwZSA9IGVudFR5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJlLnBvcyA9IHNwYXduLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLmxpZmUgPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICBiZS5tYXhMaWZlID0gMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgYmUuZHJhd0xpZmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBiZS5kcmF3VHVybiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLmdyYXBoaWMgPSA1O1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlbnRUeXBlID09IEJhdHRsZU1haW4uRW50aXR5VHlwZS5lbmVteSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW5lbXlBSSA9IGVuZW15RGF0YXNbaWRdLmVuZW15QUk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZW15ID0gZWNzLkNyZWF0ZUVudGl0eVdpdGhDb21wb25lbnQoZW5lbXlBSSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJlID0gYmF0dGxlTWFpbi5OZXdCYXR0bGVFbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBiZS5wb3MgPSBzcGF3bi5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBiZS5saWZlID0gZW5lbXlEYXRhc1tpZF0uaHA7XHJcbiAgICAgICAgICAgICAgICAgICAgYmUubWF4TGlmZSA9IGJlLmxpZmU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmUuZ3JhcGhpYyA9IGVuZW15RGF0YXNbaWRdLnJlbmRlcjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSBiYXR0bGVNYWluLmVudGl0aWVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gIT0gYmUgJiYgaXRlbS5ncmFwaGljID09IGJlLmdyYXBoaWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlLmdyYXBoaWNSZXBlYXRlZEluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYmUubWluUG9zID0gbmV3IFZlY3RvcjJEKDMsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlLm1heFBvcyA9IG5ldyBWZWN0b3IyRCg1LCAyKTtcclxuICAgICAgICAgICAgICAgICAgICBiZS5UeXBlID0gQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmVuZW15O1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZW15LkFkZENvbXBvbmVudChiZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgRW5lbXlBSVN0YXRlIGVuZW15QWlTdGF0ZSA9IG5ldyBFbmVteUFJU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbmVteUFpU3RhdGUucHJvZ3Jlc3MgPSBzcGF3bmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZW15LkFkZENvbXBvbmVudChlbmVteUFpU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIlNQQVdOXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwYXduZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgUGlja3VwSW5mb1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIG5lY2Vzc2FyeUZvclZpY3Rvcnk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQaWNrdXBJbmZvKGJvb2wgbmVjZXNzYXJ5Rm9yVmljdG9yeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubmVjZXNzYXJ5Rm9yVmljdG9yeSA9IG5lY2Vzc2FyeUZvclZpY3Rvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUGlja3VwSW5mbygpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRW5lbXlEYXRhXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IEVuZW15QUkgZW5lbXlBSTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW50IGhwO1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpbnQgcmVuZGVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgRW5lbXlEYXRhKEVuZW15QUkgZW5lbXlBSSwgaW50IGhwLCBpbnQgcmVuZGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5lbmVteUFJID0gZW5lbXlBSTtcclxuICAgICAgICAgICAgdGhpcy5ocCA9IGhwO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlciA9IHJlbmRlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEVuZW15RGF0YUNyZWF0b3JcclxuICAgIHtcclxuICAgICAgICBMaXN0PHN0cmluZz4gcmVuZGVyVGV4dHM7XHJcbiAgICAgICAgcHVibGljIExpc3Q8RW5lbXlEYXRhPiBlbmVteURhdGFzID0gbmV3IExpc3Q8RW5lbXlEYXRhPigpO1xyXG4gICAgICAgIE1vdmVDcmVhdG9yUHJvZyBtb3ZlQ3JlYXRvclByb2c7XHJcblxyXG4gICAgICAgIHB1YmxpYyBFbmVteURhdGFDcmVhdG9yKExpc3Q8c3RyaW5nPiByZW5kZXJUZXh0cywgTW92ZUNyZWF0b3JQcm9nIG1vdmVDcmVhdG9yUHJvZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlbmRlclRleHRzLkFkZChcIkBcIik7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGV4dHMgPSByZW5kZXJUZXh0cztcclxuICAgICAgICAgICAgdGhpcy5tb3ZlQ3JlYXRvclByb2cgPSBtb3ZlQ3JlYXRvclByb2c7XHJcblxyXG4gICAgICAgICAgICAvL2NvbW1lbnRcclxuICAgICAgICAgICAgLy9BZGRFbmVteShhaTogQWN0aW9ucyhcclxuICAgICAgICAgICAgLy8gICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLCBNb3ZlVHlwZS5Nb3ZlTGVmdCwgTW92ZVR5cGUuTW92ZURvd25cclxuICAgICAgICAgICAgLy8gICAgKSwgaHA6IDIsIHJlbmRlclRleHQ6IFwiJVwiKTtcclxuXHJcbiAgICAgICAgICAgIEFkZEVuZW15KGFpOiBBY3Rpb25zKFxyXG4gICAgICAgICAgICAgICAgTW92ZXMoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZUxlZnQsUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZURvd24sIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVSaWdodCwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZVVwLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyKVxyXG4gICAgICAgICAgICAgICAgKSwgaHA6MiwgcmVuZGVyVGV4dDpcIiVcIik7XHJcbiAgICAgICAgICAgIEFkZEVuZW15KGFpOiBBY3Rpb25zKFxyXG4gICAgICAgICAgICAgICAgTW92ZXMoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuSWNlQm9tYiwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuRG9Ob3RoaW5nLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Eb05vdGhpbmcpXHJcbiAgICAgICAgICAgICAgICApLCBocDogMywgcmVuZGVyVGV4dDogXCIjXCIpO1xyXG4gICAgICAgICAgICBBZGRFbmVteShhaTogQWN0aW9ucyhcclxuICAgICAgICAgICAgICAgTW92ZXMoXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5JY2VCb21iLFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZUxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyQm9tYixcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlXHJcbi5Nb3ZlUmlnaHRcclxuICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgKSwgaHA6IDYsIHJlbmRlclRleHQ6IFwiJlwiKTtcclxuICAgICAgICAgICAgQWRkRW5lbXkoYWk6IEFjdGlvbnMoXHJcbiAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLkljZUJvbWIsXHJcbiAgICAgICAgICAgICAgICAgICBcIlN1bW1vblwiLFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZUxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyQm9tYixcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVSaWdodCxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlXHJcbi5GaXJlXHJcblxyXG5cclxuICAgICAgICAgICAgICAgKSwgaHA6IDQ1LCByZW5kZXJUZXh0OiBcIiRcIik7XHJcbiAgICAgICAgICAgIEFkZEVuZW15KGFpOiBBY3Rpb25zKFxyXG5cclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVVcCxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVMZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZVJpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZURvd24sXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Nb3ZlTGVmdCxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVEb3duLFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGVcclxuLk1vdmVVcFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICksIGhwOiAzLCByZW5kZXJUZXh0OiBcIkhcIik7XHJcbiAgICAgICAgICAgIEFkZEVuZW15KGFpOiBBY3Rpb25zKFxyXG5cclxuICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLkljZSxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLkRvTm90aGluZyxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlXHJcbi5Eb05vdGhpbmdcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgKSwgaHA6IDMsIHJlbmRlclRleHQ6IFwiSlwiKTtcclxuICAgICAgICAgICAgQWRkRW5lbXkoYWk6IEFjdGlvbnMoXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Eb05vdGhpbmcsXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZVxyXG4uRG9Ob3RoaW5nXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICksIGhwOiAzLCByZW5kZXJUZXh0OiBcIkxcIik7XHJcbiAgICAgICAgICAgIEFkZEVuZW15KGFpOiBBY3Rpb25zKFxyXG5cclxuICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUsXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Eb05vdGhpbmcsXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZVxyXG4uRG9Ob3RoaW5nXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICksIGhwOiAzLCByZW5kZXJUZXh0OiBcIktcIik7XHJcbiAgICAgICAgICAgIEFkZEVuZW15KGFpOiBBY3Rpb25zKFxyXG5cclxuICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLkRvd25GaXJlLFxyXG4gICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlXHJcblxyXG5cclxuICAgICAgICAgICAgICAgKSwgaHA6IDMsIHJlbmRlclRleHQ6IFwiS1wiKTtcclxuICAgICAgICAgICAgQWRkRW5lbXkoYWk6IEFjdGlvbnMoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuSWNlQm9tYixcclxuICAgICAgICAgICAgICAgICAgIFNwZWNpYWxFbmVteU1vdmVzLlNtYXJ0TW92ZSxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLlRodW5kZXJCb21iLFxyXG4gICAgICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuVGh1bmRlckJvbWIsXHJcbiAgICAgICAgICAgICAgICAgICBTcGVjaWFsRW5lbXlNb3Zlcy5TbWFydE1vdmVcclxuXHJcblxyXG4gICAgICAgICAgICAgICApLCBocDogMjUsIHJlbmRlclRleHQ6IFwiJFwiKTtcclxuICAgICAgICAgICAgQWRkRW5lbXkoYWk6IEFjdGlvbnMoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSxcclxuICAgICAgICAgICAgICAgICAgIFNwZWNpYWxFbmVteU1vdmVzLlNtYXJ0TW92ZSxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlLlRodW5kZXIsXHJcbiAgICAgICAgICAgICAgICAgICBTcGVjaWFsRW5lbXlNb3Zlcy5TbWFydE1vdmUsXHJcbiAgICAgICAgICAgICAgICAgICBTcGVjaWFsRW5lbXlNb3Zlcy5TbWFydE1vdmUsXHJcbiAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgICAgU3BlY2lhbEVuZW15TW92ZXMuU21hcnRNb3ZlLFxyXG4gICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUuVHJpcGxlRmlyZSxcclxuICAgICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLk1vdmVUeXBlXHJcbi5UaHVuZGVyXHJcblxyXG4gICAgICAgICAgICAgICApLCBocDogMjUsIHJlbmRlclRleHQ6IFwiJFwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vQWRkRW5lbXkoYWk6IEFjdGlvbnMoKSwgaHA6IDMsIHJlbmRlclRleHQ6IFwiJFwiKTtcclxuICAgICAgICAgICAgLy9BZGRFbmVteShhaTogQWN0aW9ucygpLCBocDogNSwgcmVuZGVyVGV4dDogXCIjXCIpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgRW5lbXlBSSBBY3Rpb25zKHBhcmFtcyBvYmplY3RbXSBvYnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWkgPSBuZXcgRW5lbXlBSSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG8gaW4gb2JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobyBpcyBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhaS5tb3Zlcy5BZGQobmV3IE1vdmVVc2UoKGludClvKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobyBpcyBzdHJpbmcpXHJcbiAgICAgICAgICAgICAgICB7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYWkubW92ZXMuQWRkKG5ldyBNb3ZlVXNlKG1vdmVDcmVhdG9yUHJvZy5HZXRNb3ZlSWQobyBhcyBzdHJpbmcpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobyBpcyBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZVtdKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIG8gYXMgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGVbXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpLm1vdmVzLkFkZChuZXcgTW92ZVVzZSgoaW50KWl0ZW0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhaS5tb3Zlcy5BZGQobyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZVtdIE1vdmVzKHBhcmFtcyBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZVtdIG1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1vdmVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFkZEVuZW15KEVuZW15QUkgYWksIGludCBocCwgc3RyaW5nIHJlbmRlclRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgcmVuZGVyID0gcmVuZGVyVGV4dHMuQ291bnQ7XHJcbiAgICAgICAgICAgIHJlbmRlclRleHRzLkFkZChyZW5kZXJUZXh0KTtcclxuICAgICAgICAgICAgZW5lbXlEYXRhcy5BZGQobmV3IEVuZW15RGF0YShhaSwgaHAsIHJlbmRlcikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgU3BlY2lhbEVuZW15TW92ZXNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIFNwZWNpYWxFbmVteU1vdmVzIFNtYXJ0TW92ZSA9IG5ldyBTcGVjaWFsRW5lbXlNb3ZlcygwKTtcclxuICAgICAgICBwcml2YXRlIGludCBudW1iZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTcGVjaWFsRW5lbXlNb3ZlcyhpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyID0gdjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLkVDUztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgU3RhZ2VEYXRhQ3JlYXRvclxyXG4gICAge1xyXG4gICAgICAgIC8vcHVibGljIExpc3Q8U3RhZ2VEYXRhPiBzdGFnZXMgPSBuZXcgTGlzdDxTdGFnZURhdGE+KCk7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBFQ1NNYW5hZ2VyIGVjcztcclxuICAgICAgICBwcml2YXRlIFN0YWdlRGF0YUdyb3VwIGN1cnJlbnRHcm91cDtcclxuXHJcbiAgICAgICAgcHVibGljIFN0YWdlRGF0YUNyZWF0b3IoRUNTTWFuYWdlciBlY3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGVjcztcclxuXHJcbiAgICAgICAgICAgIC8vQWRkKG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgIC8vICAgIEVuZW15KDAsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoMywgMikpLFxyXG4gICAgICAgICAgICAvLyAgICBFbmVteSgyLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDMsIDEpKSxcclxuICAgICAgICAgICAgLy8gICAgRW5lbXkoMiwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg1LCAxKSlcclxuICAgICAgICAgICAgLy8gICAgKSk7XHJcblxyXG4gICAgICAgICAgICAvL0FkZChuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAvLyAgRW5lbXkoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAwKSlcclxuICAgICAgICAgICAgLy8vLyAgRW5lbXkoNSwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAxKSksXHJcbiAgICAgICAgICAgIC8vLy8gIEVuZW15KDcsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoMywgMCkpXHJcbiAgICAgICAgICAgIC8vICApKTtcclxuXHJcbiAgICAgICAgICAgIC8vQWRkKG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgIC8vICAgIC8vRW5lbXkoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAwKSksXHJcbiAgICAgICAgICAgIC8vICAgIEVuZW15KDYsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMCkpXHJcbiAgICAgICAgICAgIC8vICAgICksIG5ldyBGaXhlZEF0dGFja1N0YWdlKFxyXG4gICAgICAgICAgICAvLyAgICAgICAgKGludClCYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUpKTtcclxuICAgICAgICAgICAgU3RhZ2VEYXRhLlJlc2V0SWRDcmVhdGlvbigpO1xyXG4gICAgICAgICAgICBTdGFnZURhdGFHcm91cCB0cmFpbmluZ0dyb3VwID0gbmV3IFN0YWdlRGF0YUdyb3VwKCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRHcm91cCA9IHRyYWluaW5nR3JvdXA7XHJcbiAgICAgICAgICAgIEFkZEdyb3VwKHRyYWluaW5nR3JvdXApO1xyXG5cclxuICAgICAgICAgICAgQWRkU3RhZ2UobmV3IFN0YWdlRGF0YShcclxuICAgICAgICAgICAgICAgIC8vRW5lbXkoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAwKSksXHJcbiAgICAgICAgICAgICAgICBQaWNrdXAoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgwLCAwKSksXHJcbiAgICAgICAgICAgICAgICBQaWNrdXAoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgyLCAyKSlcclxuICAgICAgICAgICAgICAgICkuSGlkZUxpZmVVSSgpLCBuZXcgRml4ZWRBdHRhY2tTdGFnZSgpKTtcclxuXHJcbiAgICAgICAgICAgIEFkZFN0YWdlKG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgICAgICAvL0VuZW15KDAsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNCwgMCkpLFxyXG4gICAgICAgICAgICAgICAgbmV3IEJhdHRsZUNvbmZpZyhuZWVkS2lsbEFsbEVuZW1pZXM6IGZhbHNlKSxcclxuICAgICAgICAgICAgICAgIFBpY2t1cCgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDIsIDEpKSxcclxuICAgICAgICAgICAgICAgIFBpY2t1cCgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDAsIDIpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDQsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMSkpXHJcbiAgICAgICAgICAgICAgICApLkhpZGVMaWZlVUkoKSwgbmV3IEZpeGVkQXR0YWNrU3RhZ2UoKSk7XHJcbiAgICAgICAgICAgIEFkZFN0YWdlKG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgICAgICAvL0VuZW15KDAsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNCwgMCkpLFxyXG4gICAgICAgICAgICAgICAgbmV3IEJhdHRsZUNvbmZpZyhuZWVkS2lsbEFsbEVuZW1pZXM6IGZhbHNlKSxcclxuICAgICAgICAgICAgICAgIFBpY2t1cCgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDIsIDIpKSxcclxuICAgICAgICAgICAgICAgIFBpY2t1cCgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDEsIDIpKSxcclxuICAgICAgICAgICAgICAgIFBpY2t1cCgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDAsIDIpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDUsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMikpXHJcbiAgICAgICAgICAgICAgICApLCBuZXcgRml4ZWRBdHRhY2tTdGFnZSgpKTtcclxuICAgICAgICAgICAgQWRkU3RhZ2UobmV3IFN0YWdlRGF0YShcclxuICAgICAgICAgICAgICAgIC8vRW5lbXkoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAwKSksXHJcbiAgICAgICAgICAgICAgICBFbmVteSg2LCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDUsIDApKVxyXG4gICAgICAgICAgICAgICAgKSwgbmV3IEZpeGVkQXR0YWNrU3RhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgKGludClCYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUpKTtcclxuICAgICAgICAgICAgQWRkU3RhZ2UobmV3IFN0YWdlRGF0YShcclxuICAgICAgICAgICAgICAgLy9FbmVteSgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDApKSxcclxuICAgICAgICAgICAgICAgRW5lbXkoNCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAxKSlcclxuICAgICAgICAgICAgICAgKSwgbmV3IEZpeGVkQXR0YWNrU3RhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSkpO1xyXG4gICAgICAgICAgICBBZGRTdGFnZShuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAvL0VuZW15KDAsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNCwgMCkpLFxyXG4gICAgICAgICAgICAgICBFbmVteSg1LCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDEpKVxyXG4gICAgICAgICAgICAgICApLCBuZXcgRml4ZWRBdHRhY2tTdGFnZShcclxuICAgICAgICAgICAgICAgICAgIChpbnQpQmF0dGxlTWFpbi5Nb3ZlVHlwZS5GaXJlKSk7XHJcbiAgICAgICAgICAgIEFkZFN0YWdlKG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgICAgLy9FbmVteSgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDApKSxcclxuICAgICAgICAgICAgICBFbmVteSg1LCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDEpKSxcclxuICAgICAgICAgICAgICBFbmVteSg3LCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDMsIDApKVxyXG4gICAgICAgICAgICAgICksIG5ldyBGaXhlZEF0dGFja1N0YWdlKFxyXG4gICAgICAgICAgICAgICAgICAoaW50KUJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSwgKGludClCYXR0bGVNYWluLk1vdmVUeXBlLlRodW5kZXIpKTtcclxuXHJcbiAgICAgICAgICAgIEFkZChuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgRW5lbXkoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgzLCAwKSksXHJcbiAgICAgICAgICAgICAgICBFbmVteSgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDUsIDIpKVxyXG4gICAgICAgICAgICAgICAgKSk7XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50R3JvdXAgPSBuZXcgU3RhZ2VEYXRhR3JvdXAoKTtcclxuICAgICAgICAgICAgQWRkR3JvdXAoY3VycmVudEdyb3VwKTtcclxuXHJcbiAgICAgICAgICAgIEFkZChcclxuXHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgRW5lbXkoMSwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgzLCAyKSksXHJcbiAgICAgICAgICAgICAgICBFbmVteSgyLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDUsIDEpKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICAgICAgIG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgICAgICBFbmVteSgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDEpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDEsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMSkpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgRW5lbXkoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgzLCAyKSksXHJcbiAgICAgICAgICAgICAgICBFbmVteSgyLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDMsIDEpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDIsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMSkpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBCYXR0bGVDb25maWcobmV3IGludFtdIHsgMSB9KSxcclxuICAgICAgICAgICAgICAgICAgICBFbmVteSgzLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDEpKVxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vLFxyXG5cclxuICAgICAgICAgICAgICAgIC8vLFxyXG4gICAgICAgICAgICAgICAgLy9uZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgLy9uZXcgRW5lbXlTcGF3bkRhdGEoMSwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAxKSksXHJcbiAgICAgICAgICAgICAgICAvL25ldyBFbmVteVNwYXduRGF0YSgxLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDUsIDEpKSlcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50R3JvdXAgPSBuZXcgU3RhZ2VEYXRhR3JvdXAoKTtcclxuICAgICAgICAgICAgQWRkR3JvdXAoY3VycmVudEdyb3VwKTtcclxuXHJcbiAgICAgICAgICAgIEFkZChcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgIG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgICAgICBFbmVteSg4LCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDMsIDEpKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICAgICAgbmV3IFN0YWdlRGF0YShcclxuICAgICAgICAgICAgICAgIEVuZW15KDgsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNCwgMSkpLFxyXG4gICAgICAgICAgICAgICAgRW5lbXkoNSwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg1LCAxKSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICxcclxuICAgICAgICAgICAgICAgIG5ldyBTdGFnZURhdGEoXHJcbiAgICAgICAgICAgICAgICBFbmVteSg4LCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDIpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDIsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoMywgMCkpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgRW5lbXkoOCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgzLCAwKSksXHJcbiAgICAgICAgICAgICAgICBFbmVteSgxLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDQsIDIpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDEsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMSkpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhZ2VEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTmV1dHJhbCgwLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDEsIDIpKSxcclxuICAgICAgICAgICAgICAgIEVuZW15KDksIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoMywgMCkpLFxyXG4gICAgICAgICAgICAgICAgRW5lbXkoMTAsIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoNSwgMikpXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgSW5pdGlhbGl6ZVByb2dyZXNzKExpc3Q8U3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlPiBwZXJzaXN0ZW50TGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdGFnZURhdGFzID0gZWNzLlF1aWNrQWNjZXNzb3IxPFN0YWdlRGF0YT4oKTtcclxuICAgICAgICAgICAgdmFyIHN0YWdlR3JvdXBzID0gZWNzLlF1aWNrQWNjZXNzb3IxPFN0YWdlRGF0YUdyb3VwPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdGFnZURhdGFzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvb2wgbG9ja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgc3RhZ2VHcm91cHMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhZ2VHcm91cHMuQ29tcDEoaikuc3RhZ2VEYXRhSWRzWzBdLkVxdWFscyhzdGFnZURhdGFzLkVudGl0eShpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBTdGFnZVByb2dyZXNzUGVyc2lzdGVuY2UgY29tcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpbnQgaWQgPSBzdGFnZURhdGFzLkNvbXAxKGkpLmlkO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBlciBpbiBwZXJzaXN0ZW50TGlzdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyLnN0YWdlSWQgPT0gaWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wID0gcGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXAgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2lmICh0cnVlKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXAgPSBuZXcgU3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlKGlkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wLmF2YWlsYWJsZSA9ICFsb2NrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVudExpc3QuQWRkKGNvbXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcInNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdGFnZURhdGFzLkVudGl0eShpKS5BZGRDb21wb25lbnQoY29tcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENhbGN1bGF0ZVRyYWNrSW5mbyhMaXN0PEVuZW15RGF0YT4gZW5lbWllcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdGFnZURhdGFzID0gZWNzLlF1aWNrQWNjZXNzb3IxPFN0YWdlRGF0YT4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdGFnZURhdGFzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZCA9IHN0YWdlRGF0YXMuQ29tcDEoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNwYXducyA9IHNkLnNwYXduRGF0YXM7XHJcbiAgICAgICAgICAgICAgICBpbnQgdG90YWxIUCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBzcGF3bnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uZW50aXR5VHlwZSA9PSAoaW50KUJhdHRsZU1haW4uRW50aXR5VHlwZS5lbmVteSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmVteUlkID0gaXRlbS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGhwID0gZW5lbWllc1tlbmVteUlkXS5ocDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxIUCArPSBocDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbnQgdGFyZ2V0ID0gMTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3RhbEhQID09IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0b3RhbEhQID4gMylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RhcmdldCA9ICgodG90YWxIUCAtIDEpIC8gMikgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IChpbnQpTWF0aC5DZWlsaW5nKHRvdGFsSFAgLyAzZik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChzZC5iYXR0bGVDb25maWcgIT0gbnVsbCAmJiFzZC5iYXR0bGVDb25maWcubmVlZEtpbGxBbGxFbmVtaWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdGFnZURhdGFzLkVudGl0eShpKS5BZGRDb21wb25lbnQobmV3IFRyYWNrSW5mb1N0YWdlKHRhcmdldCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQWRkU3RhZ2UocGFyYW1zIG9iamVjdFtdIGNvbXBzKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBlID0gZWNzLkNyZWF0ZUVudGl0eSgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBjb21wcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZS5BZGRDb21wb25lbnQoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRHcm91cC5zdGFnZURhdGFJZHMuQWRkKGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFkZEdyb3VwKFN0YWdlRGF0YUdyb3VwIGdyb3VwKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBlID0gZWNzLkNyZWF0ZUVudGl0eSgpO1xyXG4gICAgICAgICAgICBlLkFkZENvbXBvbmVudChncm91cCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBTcGF3bkRhdGEgUGlja3VwKGludCB2LCBWZWN0b3IyRCB2ZWN0b3IyRClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3Bhd25EYXRhKHYsIHZlY3RvcjJELCAoaW50KUJhdHRsZU1haW4uRW50aXR5VHlwZS5waWNrdXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBTcGF3bkRhdGEgTmV1dHJhbChpbnQgdiwgVmVjdG9yMkQgdmVjdG9yMkQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNwYXduRGF0YSh2LCB2ZWN0b3IyRCwgKGludClCYXR0bGVNYWluLkVudGl0eVR5cGUubmV1dHJhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIFNwYXduRGF0YSBFbmVteShpbnQgdiwgVmVjdG9yMkQgdmVjdG9yMkQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNwYXduRGF0YSh2LCB2ZWN0b3IyRCwgKGludClCYXR0bGVNYWluLkVudGl0eVR5cGUuZW5lbXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFkZChwYXJhbXMgU3RhZ2VEYXRhW10gc3RhZ2VEYXRhMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIHN0YWdlRGF0YTEpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAuc3RhZ2VEYXRhSWRzLkFkZChlY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudChpdGVtKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9zdGFnZXMuQWRkUmFuZ2Uoc3RhZ2VEYXRhMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBTdGFnZURhdGFcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxTcGF3bkRhdGE+IHNwYXduRGF0YXMgPSBuZXcgTGlzdDxTcGF3bkRhdGE+KCk7XHJcbiAgICAgICAgcHVibGljIEJhdHRsZUNvbmZpZyBiYXR0bGVDb25maWc7XHJcbiAgICAgICAgcHVibGljIGJvb2wgaGlkZUxpZmVVSSA9IGZhbHNlO1xyXG4gICAgICAgIHN0YXRpYyBpbnQgc3RhdGljSWRIZWxwZXIgPSAtMTtcclxuICAgICAgICBwdWJsaWMgaW50IGlkID0gLTE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdGFnZURhdGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RhdGljSWRIZWxwZXIrKztcclxuICAgICAgICAgICAgaWQgPSBzdGF0aWNJZEhlbHBlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdGFnZURhdGEocGFyYW1zIFNwYXduRGF0YVtdIHNwYXducykgOiB0aGlzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc3Bhd25EYXRhcy5BZGRSYW5nZShzcGF3bnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN0YWdlRGF0YShCYXR0bGVDb25maWcgYmF0dGxlQ29uZmlnLCBwYXJhbXMgU3Bhd25EYXRhW10gc3Bhd25zKSA6IHRoaXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zcGF3bkRhdGFzLkFkZFJhbmdlKHNwYXducyk7XHJcbiAgICAgICAgICAgIHRoaXMuYmF0dGxlQ29uZmlnID0gYmF0dGxlQ29uZmlnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN0YWdlRGF0YSBIaWRlTGlmZVVJKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhpZGVMaWZlVUkgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyB2b2lkIFJlc2V0SWRDcmVhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdGF0aWNJZEhlbHBlciA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgU3RhZ2VEYXRhR3JvdXBcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxFbnRpdHk+IHN0YWdlRGF0YUlkcyA9IG5ldyBMaXN0PEVudGl0eT4oKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFRyYWNrSW5mb1N0YWdlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGludCB0YXJnZXRSb3VuZHMgPSAwO1xyXG5cclxuICAgICAgICBwdWJsaWMgVHJhY2tJbmZvU3RhZ2UoKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHJhY2tJbmZvU3RhZ2UoaW50IHRhcmdldFR1cm5zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRSb3VuZHMgPSB0YXJnZXRUdXJucztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEZpeGVkQXR0YWNrU3RhZ2VcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IG1vdmVzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuXHJcbiAgICAgICAgcHVibGljIEZpeGVkQXR0YWNrU3RhZ2UoaW50IG1vdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb3Zlcy5BZGQobW92ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRml4ZWRBdHRhY2tTdGFnZShwYXJhbXMgaW50W10gbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vdmVzLkFkZFJhbmdlKG1vdmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZpeGVkQXR0YWNrU3RhZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFNwYXduRGF0YVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpbnQgaWQ7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGludCBlbnRpdHlUeXBlO1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBCYXNlVXRpbHMuVmVjdG9yMkQgcG9zaXRpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBTcGF3bkRhdGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTcGF3bkRhdGEoaW50IGlkLCBWZWN0b3IyRCBwb3NpdGlvbiwgaW50IHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5lbnRpdHlUeXBlID0gdHlwZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkhhcHBzO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBQaWRyb2guQmFzZVV0aWxzO1xyXG51c2luZyBQaWRyb2guRUNTO1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTW92ZURhdGFFeGVjdXRlclxyXG4gICAge1xyXG4gICAgICAgIEJhdHRsZU1haW4gYmF0dGxlTWFpbjtcclxuICAgICAgICBMaXN0PE1vdmVEYXRhPiBtb3ZlRGF0YXM7XHJcbiAgICAgICAgcHJpdmF0ZSBIYXBwTWFuYWdlciBoYXBwTWFuYWdlcjtcclxuICAgICAgICBwcml2YXRlIExpc3Q8QmF0dGxlTWFpbi5CYXR0bGVFbnRpdHk+IGVudGl0aWVzO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgRUNTTWFuYWdlciBlY3M7XHJcbiAgICAgICAgVGltZVN0YW1wIHRpbWVTdGFtcDtcclxuICAgICAgICBMaXN0PFZlY3RvcjJEPiBhdXggPSBuZXcgTGlzdDxWZWN0b3IyRD4oKTtcclxuICAgICAgICBpbnRlcm5hbCBUcmFja0JhdHRsZSB0cmFja0JhdHRsZTtcclxuXHJcbiAgICAgICAgcHVibGljIE1vdmVEYXRhRXhlY3V0ZXIoQmF0dGxlTWFpbiB0dXJuQmFzZSwgTGlzdDxNb3ZlRGF0YT4gbW92ZURhdGFzLCBFQ1NNYW5hZ2VyIGVjcywgVGltZVN0YW1wIHRpbWVTdGFtcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYmF0dGxlTWFpbiA9IHR1cm5CYXNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVEYXRhcyA9IG1vdmVEYXRhcztcclxuICAgICAgICAgICAgdGhpcy5lY3MgPSBlY3M7XHJcbiAgICAgICAgICAgIHRoaXMudGltZVN0YW1wID0gdGltZVN0YW1wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRXhlY3V0ZU1vdmUoQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHkgYWN0b3IsIGludCB0dXJuKVxyXG4gICAgICAgIHtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgYmF0dGxlU3RhdGUgPSB0aGlzLmJhdHRsZU1haW4uYmF0dGxlU3RhdGU7XHJcbiAgICAgICAgICAgIGVudGl0aWVzID0gdGhpcy5iYXR0bGVNYWluLmVudGl0aWVzO1xyXG4gICAgICAgICAgICBpbnQgdXNlcklkID0gZW50aXRpZXMuSW5kZXhPZihhY3Rvcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgbW92ZUlkID0gYWN0b3IubW92ZXNbdHVybl07XHJcbiAgICAgICAgICAgIGlmIChtb3ZlSWQgPCAwKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBtZCA9IG1vdmVEYXRhc1ttb3ZlSWRdO1xyXG4gICAgICAgICAgICBpZiAobWQgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAobWQudW5pdHMuQ291bnQgPT0gMCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBiYXR0bGVTdGF0ZS5tb3ZlVGlja19Ub3RhbCA9IG1kLnVuaXRzLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgbW92ZVRpY2sgPSBiYXR0bGVTdGF0ZS5tb3ZlVGlja19Ob3c7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gbWQudW5pdHNbbW92ZVRpY2tdLnRoaW5nc1RvSGFwcGVuO1xyXG4gICAgICAgICAgICBoYXBwTWFuYWdlciA9IGJhdHRsZU1haW4uaGFwcE1hbmFnZXI7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIGFjdGlvbnMpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYSBpcyBNb3ZlQWN0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVBY3Rpb24gbWEgPSBhIGFzIE1vdmVBY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBtYS5kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rvci5wb3MgKz0gcDtcclxuICAgICAgICAgICAgICAgICAgICBib29sIGludmFsaWRNb3ZlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0b3IucG9zLlggPCBhY3Rvci5taW5Qb3MuWFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBhY3Rvci5wb3MuWSA8IGFjdG9yLm1pblBvcy5ZXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGFjdG9yLnBvcy5ZID4gYWN0b3IubWF4UG9zLllcclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgYWN0b3IucG9zLlggPiBhY3Rvci5tYXhQb3MuWDtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBlbnRpdGllcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlICE9IGFjdG9yICYmIGUuQWxpdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rvci5wb3MgPT0gZS5wb3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZE1vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLlR5cGUgPT0gQmF0dGxlTWFpbi5FbnRpdHlUeXBlLnBpY2t1cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubGlmZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yLmRhbWFnZU11bHRpcGxpZXIgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEJhdHRsZU1haW4uRW50aXR5VHlwZS5wYW5lbGVmZmVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRNb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkTW92ZSkgYnJlYWs7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW52YWxpZE1vdmUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiSW52YWxpZCBtb3ZlIGdlbmVyYXRlXCIgKyBiYXR0bGVTdGF0ZS5tb3ZlVGlja19Ob3cuVmFsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBhY3RvcklkID0gZW50aXRpZXMuSW5kZXhPZihhY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjJEIG1vdmVUbyA9IGFjdG9yLnBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMkQgbW92ZUZyb20gPSBhY3Rvci5wb3MgLSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVIYXBwKChpbnQpTW92ZURhdGFUYWdzLk1vdmVtZW50LCBuZXcgSGFwcE1vdmVEYXRhKGFjdG9ySWQpLCBuZXcgSGFwcE1vdmVtZW50KG1vdmVGcm9tLCBtb3ZlVG8sIGZhbHNlKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9iYXR0bGVNYWluLmhhcHBNYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIC5BZGQobmV3IEhhcHAoQmF0dGxlTWFpbi5IYXBwVGFnLk1vdmVtZW50RmFpbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIC5BZGRBdHRyaWJ1dGUobmV3IEhhcHAuQXR0cmlidXRlKCkuU2V0VmFsdWUoYWN0b3JJZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIC5BZGRBdHRyaWJ1dGUobmV3IEhhcHAuQXR0cmlidXRlKCkuU2V0VmFsdWUoYWN0b3IucG9zLlgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAuQWRkQXR0cmlidXRlKG5ldyBIYXBwLkF0dHJpYnV0ZSgpLlNldFZhbHVlKGFjdG9yLnBvcy5ZKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2JhdHRsZVN0YXRlLm1vdmVUaWNrX1RvdGFsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0b3IucG9zIC09IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBhY3RvcklkID0gZW50aXRpZXMuSW5kZXhPZihhY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjJEIG1vdmVUbyA9IGFjdG9yLnBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMkQgbW92ZUZyb20gPSBhY3Rvci5wb3MgLSBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVIYXBwKChpbnQpTW92ZURhdGFUYWdzLk1vdmVtZW50LCBuZXcgSGFwcE1vdmVEYXRhKGFjdG9ySWQpLCBuZXcgSGFwcE1vdmVtZW50KG1vdmVGcm9tLCBtb3ZlVG8sIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIk1PVkUgSEFQUCBTVUNDRVNTXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhIGlzIERlYWxEYW1hZ2VBY3Rpb24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRkYSA9IGEgYXMgRGVhbERhbWFnZUFjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0YWNrRWxlbWVudCA9IGRkYS5lbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZGEudGFyZ2V0ID09IFRhcmdldC5BcmVhKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZWEgPSBkZGEuYXJlYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVVzZXJPZkFyZWEgPSBSZXNvbHZlVGFyZ2V0KGFjdG9yLCBlbnRpdGllcywgYXJlYS50YXJnZXQsIG5ldyBWZWN0b3IyRCgwLDApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1pcnJvcmluZ1ggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0b3IuVHlwZSA9PSBCYXR0bGVNYWluLkVudGl0eVR5cGUuZW5lbXkpIC8vZW5lbWllcyBhY3Qgb24gb3Bwb3NpdGUgc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3JpbmdYID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBvaW50IGluIGFyZWEucG9pbnRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoUG9zID0gcG9pbnQgKiBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKG1pcnJvcmluZ1gsIDEpICsgcmVmZXJlbmNlVXNlck9mQXJlYS5wb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiU2VhcmNoIHBvaW50IFwiK3NlYXJjaFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGVudGl0aWVzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0aWVzW2ldLnBvcyA9PSBzZWFyY2hQb3MgJiYgZW50aXRpZXNbaV0uQWxpdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbERhbWFnZShhY3RvciwgZGRhLCBlbnRpdGllc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ZpbmQgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IHRhcmdldCA9IFJlc29sdmVUYXJnZXQoYWN0b3IsIGVudGl0aWVzLCBkZGEudGFyZ2V0LCBkZGEudXNlclJlZk9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbERhbWFnZShhY3RvciwgZGRhLCB0YXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhIGlzIFN1bW1vbkVudGl0eSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSBiYXR0bGVNYWluLmVudGl0aWVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBiYXR0bGVycyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gZW50aXRpZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5kcmF3TGlmZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0dGxlcnMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmF0dGxlcnMgPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZSA9IGEgYXMgU3VtbW9uRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5lbXlXaGljaCA9IHNlLmVuZW15V2hpY2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmVteUlkID0gYmF0dGxlTWFpbi5CYXR0bGVDb25maWcuZW5lbWllc1RvU3VtbW9uW2VuZW15V2hpY2hdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IEdldEVtcHR5U3BvdHMoc2lkZTogMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMuQ291bnQgPT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMkQgc3VtbW9uUG9zID0gc2UucHJlZmVyZW50aWFsUm93Q29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBvc2l0aW9ucy5Db250YWlucyhzdW1tb25Qb3MpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW1tb25Qb3MgPSBwb3NpdGlvbnNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWNzLkNyZWF0ZUVudGl0eVdpdGhDb21wb25lbnQobmV3IFNwYXduRGF0YShlbmVteUlkLCBzdW1tb25Qb3MsIChpbnQpQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmVuZW15KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGEgaXMgQW5pbWF0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmltID0gYSBhcyBBbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHkgdGFyZ2V0ID0gUmVzb2x2ZVRhcmdldChhY3RvciwgZW50aXRpZXMsIGFuaW0udGFyZ2V0LCBhbmltLnVzZXJSZWZPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmVhID0gYW5pbS5hcmVhO1xyXG4gICAgICAgICAgICAgICAgICAgIEhhcHBBcmVhIGhhcHBBcmVhID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVVzZXJPZkFyZWEgPSBSZXNvbHZlVGFyZ2V0KGFjdG9yLCBlbnRpdGllcywgYXJlYS50YXJnZXQsIFZlY3RvcjJELlplcm8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1pcnJvcmluZ1ggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0b3IuVHlwZSA9PSBCYXR0bGVNYWluLkVudGl0eVR5cGUuZW5lbXkpIC8vZW5lbWllcyBhY3Qgb24gb3Bwb3NpdGUgc2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXJyb3JpbmdYID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFwcEFyZWEgPSBuZXcgSGFwcEFyZWEoYXJlYSwgcmVmZXJlbmNlVXNlck9mQXJlYS5wb3MsIG1pcnJvcmluZ1gpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpbnQgdGFyZ2V0SWQgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IGVudGl0aWVzLkluZGV4T2YodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBDcmVhdGVIYXBwKG1kLCBoYXBwQXJlYSwgbmV3IEhhcHBNb3ZlRGF0YSh1c2VySWQsIHRhcmdldElkLCBhbmltLmVsZW1lbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbS50YXJnZXQgIT0gVGFyZ2V0Lk5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IyRCBpbml0aWFsUG9zID0gYWN0b3IucG9zICsgYW5pbS51c2VyUmVmT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IyRCBmaW5hbFBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFBvcyA9IHRhcmdldC5wb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsUG9zID0gaW5pdGlhbFBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsUG9zLlggPSA3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdG9yLlR5cGUgPT0gQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmVuZW15KSAvL2VuZW1pZXMgYWN0IG9uIG9wcG9zaXRlIHNpZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFBvcy5YID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlSGFwcCgoaW50KU1vdmVEYXRhVGFncy5TaG9vdCwgbmV3IEhhcHBTaG9vdChpbml0aWFsUG9zLCBmaW5hbFBvcyksIG5ldyBIYXBwTW92ZURhdGEodXNlcklkLCB0YXJnZXRJZCwgYW5pbS5lbGVtZW50KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgKGFuaW0udGFyZ2V0ICE9IFRhcmdldC5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGhhcHBNYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgLkFkZChuZXcgSGFwcChCYXR0bGVNYWluLkhhcHBUYWcuQXR0YWNrSGl0KSlcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAuQWRkQXR0cmlidXRlKG5ldyBIYXBwLkF0dHJpYnV0ZSgpLlNldFZhbHVlKGVudGl0aWVzLkluZGV4T2YodGFyZ2V0KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgLkFkZEF0dHJpYnV0ZShuZXcgSGFwcC5BdHRyaWJ1dGUoKS5TZXRWYWx1ZSh1c2VySWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIC5BZGRBdHRyaWJ1dGUobmV3IEhhcHAuQXR0cmlidXRlKCkuU2V0VmFsdWUoKGludClhbmltLmVsZW1lbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL31cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobW92ZVRpY2sgPT0gbWQudW5pdHMuQ291bnQgLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBtZC51bml0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYWN0IGluIGl0ZW0udGhpbmdzVG9IYXBwZW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0IGlzIERlYWxEYW1hZ2VBY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZUVsZW1lbnQoYWN0b3IsIChhY3QgYXMgRGVhbERhbWFnZUFjdGlvbikuZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIExpc3Q8VmVjdG9yMkQ+IEdldEVtcHR5U3BvdHMoaW50IHNpZGUgPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF1eC5DbGVhcigpO1xyXG4gICAgICAgICAgICBpbnQgb2ZmWCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChzaWRlID09IDEpIG9mZlggPSAzO1xyXG4gICAgICAgICAgICBpbnQgd2lkdGggPSBiYXR0bGVNYWluLkJvYXJkV2lkdGggLyAyO1xyXG4gICAgICAgICAgICBpZiAoc2lkZSA9PSAtMSlcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gYmF0dGxlTWFpbi5Cb2FyZFdpZHRoO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHdpZHRoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgYmF0dGxlTWFpbi5Cb2FyZEhlaWdodDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhdXguQWRkKG5ldyBWZWN0b3IyRChpK29mZlgsaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IGJhdHRsZU1haW4uZW50aXRpZXM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5BbGl2ZSAmJiBhdXguQ29udGFpbnMoZS5wb3MpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1eC5SZW1vdmUoZS5wb3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhdXg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIENoYW5nZUVsZW1lbnQoQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHkgYWN0b3IsIEJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGFjdG9yLmVsZW1lbnQgPT0gZWxlbWVudCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBhY3Rvci5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgdmFyIHRoID0gbmV3IEhhcHBUYWdzKChpbnQpTWlzY0hhcHBUYWdzLkNoYW5nZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICBlY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudCh0aCwgbmV3IEhhcHBNb3ZlRGF0YShlbnRpdGllcy5JbmRleE9mKGFjdG9yKSwgLTEsIGVsZW1lbnQpKS5BZGRDb21wb25lbnQodGltZVN0YW1wLkdldFNuYXAoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQ3JlYXRlSGFwcChNb3ZlRGF0YSBtZCwgb2JqZWN0IGNvbXAxLCBvYmplY3QgY29tcDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGggPSBuZXcgSGFwcFRhZ3MobWQudGFncyk7XHJcbiAgICAgICAgICAgIHZhciBlID0gZWNzLkNyZWF0ZUVudGl0eVdpdGhDb21wb25lbnQodGgsIHRpbWVTdGFtcC5HZXRTbmFwKCkpO1xyXG4gICAgICAgICAgICBpZiAoY29tcDEgIT0gbnVsbCkgZS5BZGRDb21wb25lbnQoY29tcDEpO1xyXG4gICAgICAgICAgICBpZiAoY29tcDIgIT0gbnVsbCkgZS5BZGRDb21wb25lbnQoY29tcDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIENyZWF0ZUhhcHAoaW50IHRhZywgb2JqZWN0IGNvbXAxLCBvYmplY3QgY29tcDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGggPSBuZXcgSGFwcFRhZ3ModGFnKTtcclxuICAgICAgICAgICAgdmFyIGUgPSBlY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudCh0aCwgdGltZVN0YW1wLkdldFNuYXAoKSk7XHJcbiAgICAgICAgICAgIGlmIChjb21wMSAhPSBudWxsKSBlLkFkZENvbXBvbmVudChjb21wMSk7XHJcbiAgICAgICAgICAgIGlmIChjb21wMiAhPSBudWxsKSBlLkFkZENvbXBvbmVudChjb21wMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRGVhbERhbWFnZShCYXR0bGVNYWluLkJhdHRsZUVudGl0eSBhY3RvciwgRGVhbERhbWFnZUFjdGlvbiBkZGEsIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IHRhcmdldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJhdHRsZU1haW4uRWxlbWVudCBhdHRhY2tFbGVtZW50ID0gZGRhLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGJvb2wgZWxlbWVudGFsQmxvY2sgPSBhdHRhY2tFbGVtZW50ID09IHRhcmdldC5lbGVtZW50ICYmIGF0dGFja0VsZW1lbnQgIT0gQmF0dGxlTWFpbi5FbGVtZW50Lk5vbmU7XHJcbiAgICAgICAgICAgIGJvb2wgc3VwZXJFZmZlY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaW50IGRhbWFnZSA9IDA7XHJcbiAgICAgICAgICAgIGludCB0YXJnZXRJZCA9IGVudGl0aWVzLkluZGV4T2YodGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRhbEJsb2NrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50YWxCbG9jaylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXVsID0gYmF0dGxlTWFpbi5DYWxjdWxhdGVBdHRhY2tNdWx0aXBsaWVyKGFjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBtdWwgKj0gYmF0dGxlTWFpbi5DYWxjdWxhdGVEZWZlbmRlck11bHRpcGxpZXIodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0YWNrRWxlbWVudCA9PSBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSAmJiB0YXJnZXQuZWxlbWVudCA9PSBCYXR0bGVNYWluLkVsZW1lbnQuSWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGF0dGFja0VsZW1lbnQgPT0gQmF0dGxlTWFpbi5FbGVtZW50LlRodW5kZXIgJiYgdGFyZ2V0LmVsZW1lbnQgPT0gQmF0dGxlTWFpbi5FbGVtZW50LkZpcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgYXR0YWNrRWxlbWVudCA9PSBCYXR0bGVNYWluLkVsZW1lbnQuSWNlICYmIHRhcmdldC5lbGVtZW50ID09IEJhdHRsZU1haW4uRWxlbWVudC5UaHVuZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsICo9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cGVyRWZmZWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYW1hZ2UgPSBkZGEuZGFtYWdlICogKGludCltdWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmxpZmUgLT0gZGFtYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuVHlwZSA9PSBCYXR0bGVNYWluLkVudGl0eVR5cGUuaGVybylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tCYXR0bGUuSGVyb0RhbWFnZShkYW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdG9yLmRhbWFnZU11bHRpcGxpZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGhhcHBNYW5hZ2VyLkFkZChuZXcgSGFwcChCYXR0bGVNYWluLkhhcHBUYWcuRGFtYWdlVGFrZW4pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5BZGRBdHRyaWJ1dGUobmV3IEhhcHAuQXR0cmlidXRlKCkuU2V0VmFsdWUodGFyZ2V0SWQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLkNyZWF0ZUhhcHAoKGludClNaXNjSGFwcFRhZ3MuRGFtYWdlLCBuZXcgSGFwcERhbWFnZURhdGEodGFyZ2V0LmVsZW1lbnQsIGRkYS5lbGVtZW50LCBlbnRpdGllcy5JbmRleE9mKHRhcmdldCksIGRhbWFnZSwgc3VwZXJFZmZlY3RpdmUsIGVsZW1lbnRhbEJsb2NrKSwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQubGlmZSA8PSAwICYmICFzdXBlckVmZmVjdGl2ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ3JlYXRlSGFwcCgoaW50KU1pc2NIYXBwVGFncy5EZWF0aCwgbmV3IEhhcHBNb3ZlRGF0YSh0YXJnZXRJZCksIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBCYXR0bGVNYWluLkJhdHRsZUVudGl0eSBSZXNvbHZlVGFyZ2V0KEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGFjdG9yLCBMaXN0PEJhdHRsZU1haW4uQmF0dGxlRW50aXR5PiBlbnRpdGllcywgVGFyZ2V0IHRhcmdldFR5cGUsIFZlY3RvcjJEIG9mZnNldFJlZmVyZW5jZVVzZXJQb3NpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlID09IFRhcmdldC5TZWxmKSByZXR1cm4gYWN0b3I7XHJcbiAgICAgICAgICAgIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IHRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgICAgIGZsb2F0IG1pbkRpcyA9IDEwO1xyXG4gICAgICAgICAgICBWZWN0b3IyRCByZWZlcmVuY2VVc2VyUG9zaXRpb24gPSBhY3Rvci5wb3M7XHJcbiAgICAgICAgICAgIHJlZmVyZW5jZVVzZXJQb3NpdGlvbiArPSBvZmZzZXRSZWZlcmVuY2VVc2VyUG9zaXRpb247XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlMiBpbiBlbnRpdGllcylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlMi5EZWFkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChhY3Rvci5UeXBlICE9IGUyLlR5cGVcclxuICAgICAgICAgICAgICAgICAgICAmJiBlMi5UeXBlICE9IEJhdHRsZU1haW4uRW50aXR5VHlwZS5wYW5lbGVmZmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICYmIGUyLlR5cGUgIT0gQmF0dGxlTWFpbi5FbnRpdHlUeXBlLnBpY2t1cClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBib29sIHNhbWVIZWlnaHQgPSByZWZlcmVuY2VVc2VyUG9zaXRpb24uWSA9PSBlMi5wb3MuWTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNhbWVIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCBkaXMgPSByZWZlcmVuY2VVc2VyUG9zaXRpb24uWCAtIGUyLnBvcy5YO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzIDwgMCkgZGlzICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzIDwgbWluRGlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXMgPSBkaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBlMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBIYXBwVGFnc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gdGFncyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBUYWdzKExpc3Q8aW50PiB0YWdzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50YWdzLkFkZFJhbmdlKHRhZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBUYWdzKGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGFncy5BZGQoaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcFRhZ3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIE1pc2NIYXBwVGFnc3tcclxuICAgICAgICBDaGFuZ2VFbGVtZW50ID0gNTAwLFxyXG4gICAgICAgIERhbWFnZSA9IDUwMSxcclxuICAgICAgICBEZWF0aCA9IDUwMlxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBIYXBwRGFtYWdlRGF0YVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBCYXR0bGVNYWluLkVsZW1lbnQgdGFyZ2V0RSwgZGFtYWdlRTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW50IHRhcmdldDtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW50IGFtb3VudDtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm9vbCBzdXBlckVmZmVjdGl2ZTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm9vbCBlbGVtZW50YWxCbG9jaztcclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBEYW1hZ2VEYXRhKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcERhbWFnZURhdGEoQmF0dGxlTWFpbi5FbGVtZW50IHRhcmdldEUsIEJhdHRsZU1haW4uRWxlbWVudCBkYW1hZ2VFLCBpbnQgdGFyZ2V0LCBpbnQgYW1vdW50LCBib29sIHN1cGVyRWZmZWN0aXZlLCBib29sIGVsZW1lbnRhbEJsb2NrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRFID0gdGFyZ2V0RTtcclxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VFID0gZGFtYWdlRTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gYW1vdW50O1xyXG4gICAgICAgICAgICB0aGlzLnN1cGVyRWZmZWN0aXZlID0gc3VwZXJFZmZlY3RpdmU7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudGFsQmxvY2sgPSBlbGVtZW50YWxCbG9jaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEhhcHBNb3ZlRGF0YVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpbnQgdXNlcjtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW50IHRhcmdldCA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBCYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudCA9IEJhdHRsZU1haW4uRWxlbWVudC5Ob25lO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcE1vdmVEYXRhKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcE1vdmVEYXRhKGludCB1c2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXBwTW92ZURhdGEoaW50IHVzZXIsIGludCB0YXJnZXQsIEJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBIYXBwTW92ZW1lbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgVmVjdG9yMkQgbW92ZUZyb207XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IFZlY3RvcjJEIG1vdmVUbztcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYm9vbCBzdWNjZXNzO1xyXG5cclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBNb3ZlbWVudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBNb3ZlbWVudChWZWN0b3IyRCBtb3ZlRnJvbSwgVmVjdG9yMkQgbW92ZVRvLCBib29sIHN1Y2Nlc3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVGcm9tID0gbW92ZUZyb207XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVRvID0gbW92ZVRvO1xyXG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSBzdWNjZXNzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgSGFwcEFyZWFcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgQXJlYSBhcmVhO1xyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IyRCBvZmZzZXQgPSBuZXcgVmVjdG9yMkQoKTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaW50IG1pcnJvcmluZ1g7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXBwQXJlYShBcmVhIGFyZWEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmFyZWEgPSBhcmVhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBBcmVhKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcEFyZWEoQXJlYSBhcmVhLCBWZWN0b3IyRCBvZmZzZXQsIGludCBtaXJyb3JpbmdYKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5hcmVhID0gYXJlYTtcclxuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgIHRoaXMubWlycm9yaW5nWCA9IG1pcnJvcmluZ1g7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBIYXBwU2hvb3RcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgVmVjdG9yMkQgc3RhcnQ7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IFZlY3RvcjJEIGVuZDtcclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBTaG9vdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEhhcHBTaG9vdChWZWN0b3IyRCBzdGFydCwgVmVjdG9yMkQgZW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICB0aGlzLmVuZCA9IGVuZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5EZWJ1Z0V4dHJhO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkhhcHBzXHJcbntcclxuXHJcbiAgICAvL2xlZ2FjeSBoYXBwc1xyXG4gICAgLy9iZXR0ZXIgc3lzdGVtIG9uIGhhcHBoYW5kbGluZ1xyXG4gICAgLy9zdGlsbCB1c2VkIGluIHNvbWUgc2l0dWF0aW9ucyB0aG91Z2guLi5cclxuICAgIHB1YmxpYyBjbGFzcyBIYXBwTWFuYWdlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQ3VycmVudFRpbWUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgTGlzdDxIYXBwPiBIYXBwcyA9IG5ldyBMaXN0PEhhcHA+KCk7XHJcbiAgICAgICAgTGlzdDxIYXBwSGFuZGxlcj4gaGFuZGxlcnMgPSBuZXcgTGlzdDxIYXBwSGFuZGxlcj4oKTtcclxuICAgICAgICBpbnQgbGF0ZXN0SGFuZGxlZCA9IC0xO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRIYW5kbGVyKEhhcHBIYW5kbGVyIGhoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGFuZGxlcnMuQWRkKGhoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRyeUhhbmRsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihsYXRlc3RIYW5kbGVkICE9IEN1cnJlbnRUaW1lKVxyXG4gICAgICAgICAgICAgICAgSGFuZGxlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgSGFuZGxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxhdGVzdEhhbmRsZWQgPSBDdXJyZW50VGltZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGggaW4gaGFuZGxlcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBIYXBwcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyBjaGVjayBhc3N1bWVzIGhhcHBzIGFyZSBvcmRlcmVkIGJ5IHRpbWUgc3RhbXBcclxuICAgICAgICAgICAgICAgICAgICAvL3doaWNoIHRoZXkgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoSGFwcHNbaV0uVGltZVN0YW1wICE9IEN1cnJlbnRUaW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdFeC5Mb2coXCJIYXBwZW5pbmcgbm90IGVxdWFsIHRvIGN1cnJlbnQgdGltZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2wgaGFzVGFncyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHRhZ3NOZWVkZWQgaW4gaC5uZWNlc3NhcnlUYWdzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFIYXBwc1tpXS5IYXNUYWcodGFnc05lZWRlZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1RhZ3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNUYWdzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdFeC5Mb2coXCJIYXBwZW5pbmcgaGFuZGxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaC5IYW5kbGUoSGFwcHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEZWJ1Z0V4LkxvZyhcIkhhcHBlbmluZyB0YWcgaXMgZGlmZmVyZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEhhcHAgQWRkKEhhcHAgaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGguVGltZVN0YW1wID0gQ3VycmVudFRpbWU7XHJcbiAgICAgICAgICAgIEhhcHBzLkFkZChoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBUaWNrKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEN1cnJlbnRUaW1lKys7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBIYXBwXHJcbiAgICB7XHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIE1haW5UYWc7XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiB0YWdzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgVGltZVN0YW1wO1xyXG4gICAgICAgIExpc3Q8QXR0cmlidXRlPiBhdHRycyA9IG5ldyBMaXN0PEF0dHJpYnV0ZT4oKTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgSGFwcChJQ29udmVydGlibGUgYylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB0YWdzLkFkZChDb252ZXJ0LlRvSW50MzIoYykpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcChvYmplY3QgbWFpblRhZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vTWFpblRhZyA9IG1haW5UYWcuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdGFncy5BZGQoQ29udmVydC5Ub0ludDMyKG1haW5UYWcpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBBdHRyaWJ1dGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBmbG9hdCBWYWx1ZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIEF0dHJpYnV0ZSBTZXRWYWx1ZShmbG9hdCBmKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWYWx1ZSA9IGY7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwdWJsaWMgVGFnSG9sZGVyIHRhZ3MgPSBuZXcgVGFnSG9sZGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcCBBZGRBdHRyaWJ1dGUoQXR0cmlidXRlIGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhdHRycy5BZGQoYSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgaW50IEdldEF0dHJpYnV0ZV9JbnQoaW50IGluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpYXR0cnNbaW5kZXhdLlZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBIYXNUYWcoaW50IHRhZ3NOZWVkZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFncy5Db250YWlucyh0YWdzTmVlZGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEhhcHBIYW5kbGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBuZWNlc3NhcnlUYWdzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248SGFwcD4gSGFuZGxlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcEhhbmRsZXIob2JqZWN0IG1haW5UYWcsIEFjdGlvbjxIYXBwPiBoYW5kbGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm5lY2Vzc2FyeVRhZ3MuQWRkKENvbnZlcnQuVG9JbnQzMihtYWluVGFnKSk7XHJcbiAgICAgICAgICAgIEhhbmRsZSA9IGhhbmRsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFRhZ0hvbGRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PG9iamVjdD4gVGFncyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSGFzVGFnKG9iamVjdCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRhZ3MuQ29udGFpbnModCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIEFkZChvYmplY3QgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRhZ3MuQWRkKHYpO1xyXG4gICAgICAgIH1cclxuXG4gICAgXG5wcml2YXRlIExpc3Q8b2JqZWN0PiBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fVGFncz1uZXcgTGlzdDxvYmplY3Q+KCk7fVxyXG5cclxuXHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dEhvbGRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PElucHV0PiBpbnB1dHMgPSBuZXcgTGlzdDxJbnB1dD4oKTtcclxuICAgICAgICBMaXN0PElucHV0VGFncz4gdGFncyA9IG5ldyBMaXN0PElucHV0VGFncz4oKTtcclxuICAgICAgICBwdWJsaWMgSW5wdXQgaW5wdXRGb3JDb25maXJtYXRpb247XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQ2xlYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW5wdXRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIHRhZ3MuQ2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQWRkKElucHV0IGlucHV0LCBJbnB1dFRhZ3MgdGFnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW5wdXRzLkFkZChpbnB1dCk7XHJcbiAgICAgICAgICAgIHRhZ3MuQWRkKHRhZyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBUYWdJcyhpbnQgaTIsIElucHV0VGFncyB0YWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGFncy5Db3VudCA8PSBpMikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFnc1tpMl0gPT0gdGFnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBDb250YWlucyhJbnB1dCBrZXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBpbnB1dHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpLmFyZzEgPT0ga2V5LmFyZzEgJiYgaS50eXBlID09IGtleS50eXBlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVudW0gSW5wdXRUYWdze1xyXG4gICAgICAgIE5PTkUsIE1PVkVGSVgsIE1PVkVVTkZJWCwgTUlTQ1xyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5FQ1M7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTW92ZUNyZWF0b3JQcm9nXHJcbiAgICB7XHJcbiAgICAgICAgaW50ZXJuYWwgTGlzdDxNb3ZlRGF0YT4gbW92ZURhdGFzID0gbmV3IExpc3Q8TW92ZURhdGE+KCk7XHJcbiAgICAgICAgaW50ZXJuYWwgTGlzdDxNb3ZlTWV0YURhdGE+IG1vdmVSZW5kZXJzID0gbmV3IExpc3Q8TW92ZU1ldGFEYXRhPigpO1xyXG4gICAgICAgIEFyZWFDcmVhdGlvblV0aWxzIGFyZWFVdGlscyA9IG5ldyBBcmVhQ3JlYXRpb25VdGlscygpO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgRUNTTWFuYWdlciBlY3M7XHJcblxyXG4gICAgICAgIHB1YmxpYyBNb3ZlQ3JlYXRvclByb2coRUNTTWFuYWdlciBlY3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGVjcztcclxuICAgICAgICAgICAgTW92ZURhdGEgaXRlbSA9IG5ldyBNb3ZlRGF0YShcIlwiKTtcclxuICAgICAgICAgICAgbW92ZURhdGFzLkFkZChpdGVtKTsgLy9kbyBub3RoaW5nXHJcbiAgICAgICAgICAgIG1vdmVSZW5kZXJzLkFkZChuZXcgTW92ZU1ldGFEYXRhKFwiXCIsIFwiXCIsIEJhdHRsZU1haW4uRWxlbWVudC5Ob25lKSk7XHJcbiAgICAgICAgICAgIGVjcy5DcmVhdGVFbnRpdHlXaXRoQ29tcG9uZW50KGl0ZW0pO1xyXG4gICAgICAgICAgICBCYXNlVXRpbHMuVmVjdG9yMkRbXSBkaXJlY3Rpb25zID0gbmV3IEJhc2VVdGlscy5WZWN0b3IyRFtdIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgwLCAxKSxcclxuICAgICAgICAgICAgICAgIG5ldyBCYXNlVXRpbHMuVmVjdG9yMkQoLTEsIDApLFxyXG4gICAgICAgICAgICAgICAgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCgwLCAtMSksXHJcbiAgICAgICAgICAgICAgICBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDEsIDApLCBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3RyaW5nW10gbW92ZUxhYmVscyA9IG5ldyBzdHJpbmdbXSB7XHJcbiAgICAgICAgICAgICAgICBcIk1vdmUgVXBcIixcclxuICAgICAgICAgICAgICAgIFwiTW92ZSBMZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICBcIk1vdmUgRG93blwiLFxyXG4gICAgICAgICAgICAgICAgXCJNb3ZlIFJpZ2h0XCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHN0cmluZ1tdIG1vdmVBYnJldiA9IG5ldyBzdHJpbmdbXSB7XHJcbiAgICAgICAgICAgICAgICBcIl5cIixcclxuICAgICAgICAgICAgICAgIFwiPFwiLFxyXG4gICAgICAgICAgICAgICAgXCJ2XCIsXHJcbiAgICAgICAgICAgICAgICBcIj5cIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBkaXJlY3Rpb25zLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBOZXdNb3ZlRGF0YShsYWJlbDptb3ZlTGFiZWxzW2ldLCBjb25kaXRpb246IG5ldyBDb25kaXRpb24oQ29uZGl0aW9uVHlwZS5DYW5Nb3ZlLCBUYXJnZXQuU2VsZiwgZGlyZWN0aW9uc1tpXSksIGFjdGlvbjogbmV3IE1vdmVBY3Rpb24oVGFyZ2V0LlNlbGYsIGRpcmVjdGlvbnNbaV0pLCB0YWdzOiBUYWdBcnJheShNb3ZlRGF0YVRhZ3MuTW92ZW1lbnQsICBNb3ZlRGF0YVRhZ3MuSGVyb0luaXRpYWwpKTtcclxuICAgICAgICAgICAgICAgIE5ld01vdmVUZXh0UmVuZGVyRGF0YShuYW1lOm1vdmVMYWJlbHNbaV0sIGFicmV2Om1vdmVBYnJldltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTmV3TW92ZURhdGEoXCJHdW5cIiwgdGlja3M6IE9uZVRpY2tQZXJBY3Rpb24obmV3IEFuaW1hdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgpLCBuZXcgRGVhbERhbWFnZUFjdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgsIDEsIEJhdHRsZU1haW4uRWxlbWVudC5Ob25lKSksIHRhZ3M6IFRhZ0FycmF5KE1vdmVEYXRhVGFncy5TaG9vdCkpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlVGV4dFJlbmRlckRhdGEoXCJHdW5cIiwgXCJHXCIpO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIE5ld01vdmVEYXRhKFwiRmlyZWd1blwiLCB0aWNrczogT25lVGlja1BlckFjdGlvbihuZXcgQW5pbWF0aW9uKFRhcmdldC5DbG9zZXN0VGFyZ2V0WCwgQmF0dGxlTWFpbi5FbGVtZW50LkZpcmUpLCBuZXcgRGVhbERhbWFnZUFjdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgsIDEsIEJhdHRsZU1haW4uRWxlbWVudC5GaXJlKSksIHRhZ3M6IFRhZ0FycmF5KE1vdmVEYXRhVGFncy5TaG9vdCkpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlVGV4dFJlbmRlckRhdGEoXCJGaXJlZ3VuXCIsIFwiRkdcIiwgIEJhdHRsZU1haW4uRWxlbWVudC5GaXJlKTtcclxuXHJcbiAgICAgICAgICAgIE5ld01vdmVEYXRhKFwiSWNlZ3VuXCIsIHRpY2tzOiBPbmVUaWNrUGVyQWN0aW9uKG5ldyBBbmltYXRpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCBCYXR0bGVNYWluLkVsZW1lbnQuSWNlKSwgbmV3IERlYWxEYW1hZ2VBY3Rpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCAxLCBCYXR0bGVNYWluLkVsZW1lbnQuSWNlKSksIHRhZ3M6IFRhZ0FycmF5KE1vdmVEYXRhVGFncy5TaG9vdCkpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlVGV4dFJlbmRlckRhdGEoXCJJY2VndW5cIiwgXCJJR1wiLCBCYXR0bGVNYWluLkVsZW1lbnQuSWNlKTtcclxuXHJcbiAgICAgICAgICAgIE5ld01vdmVEYXRhKFwiVGh1bmRlcmd1blwiLCB0aWNrczogT25lVGlja1BlckFjdGlvbihuZXcgQW5pbWF0aW9uKFRhcmdldC5DbG9zZXN0VGFyZ2V0WCwgQmF0dGxlTWFpbi5FbGVtZW50LlRodW5kZXIpLCBuZXcgRGVhbERhbWFnZUFjdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgsIDEsIEJhdHRsZU1haW4uRWxlbWVudC5UaHVuZGVyKSksIHRhZ3M6IFRhZ0FycmF5KE1vdmVEYXRhVGFncy5TaG9vdCkpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlVGV4dFJlbmRlckRhdGEoXCJUaHVuZGVyZ3VuXCIsIFwiVEdcIiwgQmF0dGxlTWFpbi5FbGVtZW50LlRodW5kZXIpO1xyXG5cclxuICAgICAgICAgICAgQXJlYSBhcmVhID0gQXJlYVVzZXIoKS5Sb3dGb3J3YXJkKHdpZHRoOiAxLCBYRGlzOiAzKTtcclxuICAgICAgICAgICAgTmV3TW92ZURhdGEoXCJJY2Vib21iXCIsIHRpY2tzOiBPbmVUaWNrUGVyQWN0aW9uKG5ldyBBbmltYXRpb24oYXJlYSwgQmF0dGxlTWFpbi5FbGVtZW50LkljZSksIG5ldyBEZWFsRGFtYWdlQWN0aW9uKGFyZWEsIDEsIEJhdHRsZU1haW4uRWxlbWVudC5JY2UpKSwgdGFnczogVGFnQXJyYXkoTW92ZURhdGFUYWdzLkJvbWIpKTtcclxuICAgICAgICAgICAgTmV3TW92ZVRleHRSZW5kZXJEYXRhKFwiSWNlYm9tYlwiLCBcIklCXCIsIEJhdHRsZU1haW4uRWxlbWVudC5JY2UpO1xyXG5cclxuICAgICAgICAgICAgTmV3TW92ZURhdGEoXCJUaHVuZGVyYm9tYlwiLCB0aWNrczogT25lVGlja1BlckFjdGlvbihuZXcgQW5pbWF0aW9uKGFyZWEsIEJhdHRsZU1haW4uRWxlbWVudC5UaHVuZGVyKSwgbmV3IERlYWxEYW1hZ2VBY3Rpb24oYXJlYSwgMSwgQmF0dGxlTWFpbi5FbGVtZW50LlRodW5kZXIpKSwgdGFnczogVGFnQXJyYXkoTW92ZURhdGFUYWdzLkJvbWIpKTtcclxuICAgICAgICAgICAgTmV3TW92ZVRleHRSZW5kZXJEYXRhKFwiVGh1bmRlcmJvbWJcIiwgXCJUQlwiLCBCYXR0bGVNYWluLkVsZW1lbnQuVGh1bmRlcik7XHJcblxyXG4gICAgICAgICAgICBOZXdNb3ZlRGF0YShcIlN1bW1vblwiLCB0aWNrczogT25lVGlja1BlckFjdGlvbihTdW1tb25FbnRpdHkuRW5lbXkoMCwgbmV3IFZlY3RvcjJEKDUsMCkpKSwgdGFnczogVGFnQXJyYXkoTW92ZURhdGFUYWdzLlN1bW1vbikpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlVGV4dFJlbmRlckRhdGEoXCJTdW1tb25cIiwgXCJTVVwiKTtcclxuXHJcbiAgICAgICAgICAgIFZlY3RvcjJEIGRpcmVjdGlvbk1vdmUgPSBuZXcgVmVjdG9yMkQoMCwgLTEpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlRGF0YShcIkRvd25maXJlXCIsXHJcbiAgICAgICAgICAgICAgICB0aWNrczogVGlja0FycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgIFRpY2tVbml0KG5ldyBBbmltYXRpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSkpLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBUaWNrVW5pdChuZXcgRGVhbERhbWFnZUFjdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgsIDEsIEJhdHRsZU1haW4uRWxlbWVudC5GaXJlKSksXHJcbiAgICAgICAgICAgICAgICAgICAgVGlja1VuaXRDb25kaXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb25kaXRpb24oQ29uZGl0aW9uVHlwZS5DYW5Nb3ZlLCBUYXJnZXQuU2VsZiwgZGlyZWN0aW9uTW92ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNb3ZlQWN0aW9uKFRhcmdldC5TZWxmLCBkaXJlY3Rpb25Nb3ZlKSksXHJcbiAgICAgICAgICAgICAgICAgICAgVGlja1VuaXQobmV3IEFuaW1hdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgsIEJhdHRsZU1haW4uRWxlbWVudC5GaXJlKSksXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFRpY2tVbml0KG5ldyBEZWFsRGFtYWdlQWN0aW9uKFRhcmdldC5DbG9zZXN0VGFyZ2V0WCwgMSwgQmF0dGxlTWFpbi5FbGVtZW50LkZpcmUpKSksXHJcbiAgICAgICAgICAgICAgICB0YWdzOiBUYWdBcnJheShNb3ZlRGF0YVRhZ3MuU2hvb3QpKTtcclxuICAgICAgICAgICAgTmV3TW92ZVRleHRSZW5kZXJEYXRhKFwiRG93bmZpcmVcIiwgXCJERlwiLCBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSk7XHJcblxyXG4gICAgICAgICAgICBOZXdNb3ZlRGF0YShcIlRyaXBsZUZpcmVcIiwgdGlja3M6XHJcbiAgICAgICAgICAgICAgICBUaWNrQXJyYXkoXHJcbiAgICAgICAgICAgICAgICAgICAgVGlja1VuaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBbmltYXRpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSwgbmV3IFZlY3RvcjJEKDAsIC0xKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBbmltYXRpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBbmltYXRpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSwgbmV3IFZlY3RvcjJEKDAsIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIFRpY2tVbml0KFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERlYWxEYW1hZ2VBY3Rpb24oVGFyZ2V0LkNsb3Nlc3RUYXJnZXRYLCAxLCBCYXR0bGVNYWluLkVsZW1lbnQuRmlyZSwgbmV3IFZlY3RvcjJEKDAsIC0xKSksXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGVhbERhbWFnZUFjdGlvbihUYXJnZXQuQ2xvc2VzdFRhcmdldFgsIDEsIEJhdHRsZU1haW4uRWxlbWVudC5GaXJlKSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEZWFsRGFtYWdlQWN0aW9uKFRhcmdldC5DbG9zZXN0VGFyZ2V0WCwgMSwgQmF0dGxlTWFpbi5FbGVtZW50LkZpcmUsIG5ldyBWZWN0b3IyRCgwLCAxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAsIHRhZ3M6IFRhZ0FycmF5KE1vdmVEYXRhVGFncy5TaG9vdCkpO1xyXG4gICAgICAgICAgICBOZXdNb3ZlVGV4dFJlbmRlckRhdGEoXCJUcmlwbGVGaXJlXCIsIFwiVEZcIiwgQmF0dGxlTWFpbi5FbGVtZW50LkZpcmUpO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgaW50IEdldE1vdmVJZChzdHJpbmcgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBNb3ZlRGF0YS5GaW5kQnlMYWJlbChtb3ZlRGF0YXMsIHYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBBcmVhQ3JlYXRpb25VdGlscyBBcmVhVXNlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhcmVhVXRpbHMudGFyZ2V0ID0gVGFyZ2V0LlNlbGY7XHJcbiAgICAgICAgICAgIHJldHVybiBhcmVhVXRpbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgQXJlYUNyZWF0aW9uVXRpbHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBUYXJnZXQgdGFyZ2V0O1xyXG4gICAgICAgICAgICBpbnQgaGVpZ2h0ID0gMztcclxuXHJcbiAgICAgICAgICAgIGludGVybmFsIEFyZWEgUm93Rm9yd2FyZChpbnQgd2lkdGgsIGludCBYRGlzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmEgPSBuZXcgQXJlYSh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaW50IG9mZnNldFkgPSAoaW50KU1hdGguRmxvb3IoKGZsb2F0KWhlaWdodCAvIDJmKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgd2lkdGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGhlaWdodDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhLnBvaW50cy5BZGQobmV3IFZlY3RvcjJEKGkrWERpcywgai1vZmZzZXRZKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIE5ld01vdmVUZXh0UmVuZGVyRGF0YShzdHJpbmcgbmFtZSwgc3RyaW5nIGFicmV2LCBCYXR0bGVNYWluLkVsZW1lbnQgZSA9IEJhdHRsZU1haW4uRWxlbWVudC5Ob25lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbW92ZVJlbmRlcnMuQWRkKG5ldyBNb3ZlTWV0YURhdGEobmFtZSwgYWJyZXYsIGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgTW92ZURhdGEgTmV3TW92ZURhdGEoc3RyaW5nIGxhYmVsLCBUaWNrW10gdGlja3MsIG9iamVjdFtdIHRhZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbXYgPSBuZXcgTW92ZURhdGEobGFiZWwpO1xyXG4gICAgICAgICAgICBtdi51bml0cy5BZGRSYW5nZSh0aWNrcyk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIHRhZ3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG12LnRhZ3MuQWRkKENvbnZlcnQuVG9JbnQzMihpdGVtKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWNzLkNyZWF0ZUVudGl0eVdpdGhDb21wb25lbnQobXYpO1xyXG4gICAgICAgICAgICBtb3ZlRGF0YXMuQWRkKG12KTtcclxuICAgICAgICAgICAgcmV0dXJuIG12O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBNb3ZlRGF0YSBOZXdNb3ZlRGF0YShzdHJpbmcgbGFiZWwsIENvbmRpdGlvbiBjb25kaXRpb24sIG9iamVjdCBhY3Rpb24sIG9iamVjdFtdIHRhZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbXYgPSBuZXcgTW92ZURhdGEobGFiZWwpO1xyXG4gICAgICAgICAgICBUaWNrIHRpY2sgPSBuZXcgVGljaygpO1xyXG4gICAgICAgICAgICB0aWNrLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcclxuICAgICAgICAgICAgdGljay50aGluZ3NUb0hhcHBlbi5BZGQoYWN0aW9uKTtcclxuICAgICAgICAgICAgbXYudW5pdHMuQWRkKHRpY2spO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiB0YWdzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtdi50YWdzLkFkZChDb252ZXJ0LlRvSW50MzIoaXRlbSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVjcy5DcmVhdGVFbnRpdHlXaXRoQ29tcG9uZW50KG12KTtcclxuICAgICAgICAgICAgbW92ZURhdGFzLkFkZChtdik7XHJcbiAgICAgICAgICAgIHJldHVybiBtdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgVGlja1tdIE9uZVRpY2tQZXJBY3Rpb24ocGFyYW1zIG9iamVjdFtdIGFjdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUaWNrW10gdGlja3MgPSBuZXcgVGlja1thY3Rpb25zLkxlbmd0aF07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGlja3MuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpY2tzW2ldID0gbmV3IFRpY2soYWN0aW9uc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRpY2tzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBUaWNrIFRpY2tVbml0Q29uZGl0aW9uKENvbmRpdGlvbiBjb25kaXRpb24sIHBhcmFtcyBPYmplY3RbXSBhY3Rpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGljayB0aWNrID0gbmV3IFRpY2soYWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRpY2suY29uZGl0aW9uID0gY29uZGl0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdGljaztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIFRpY2sgVGlja1VuaXQocGFyYW1zIE9iamVjdFtdIGFjdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2soYWN0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIFRpY2tbXSBUaWNrQXJyYXkocGFyYW1zIFRpY2tbXSB0aWNrcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aWNrcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb2JqZWN0W10gVGFnQXJyYXkocGFyYW1zIG9iamVjdFtdIGFyZ3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYXJncztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE1vdmVNZXRhRGF0YVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWw7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBBYnJldjtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgQmF0dGxlTWFpbi5FbGVtZW50IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBNb3ZlTWV0YURhdGEoc3RyaW5nIGxhYmVsLCBzdHJpbmcgYWJyZXYsIEJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGFiZWwgPSBsYWJlbDtcclxuICAgICAgICAgICAgQWJyZXYgPSBhYnJldjtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vcHVibGljIE1vdmVNZXRhRGF0YShzdHJpbmcgbGFiZWwsIHN0cmluZyBhYnJldilcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB0aGlzLkxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgLy8gICAgdGhpcy5BYnJldiA9IGFicmV2O1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uIHsgZ2V0OyBpbnRlcm5hbCBzZXQ7IH1cclxuICAgIH1cclxuXHJcblxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVHJhY2tCYXR0bGVcclxuICAgIHtcclxuXHJcblxyXG4gICAgICAgIGludGVybmFsIFRyYWNrSW5mb1N0YWdlIHN0YWdlSW5mbztcclxuXHJcbiAgICAgICAgcHVibGljIFN0YWdlQmF0dGxlTWV0cmljcyBtZXRyaWNzID0gbmV3IFN0YWdlQmF0dGxlTWV0cmljcyh0cnVlKTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBIZXJvRGFtYWdlKGludCBkYW1hZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGFtYWdlID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0cmljcy5kYW1hZ2UgKz0gZGFtYWdlO1xyXG4gICAgICAgICAgICAgICAgbWV0cmljcy5kYW1hZ2VUaW1lcysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFByZXZpZXcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWV0cmljcy5wcmV2aWV3VGltZXMrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUm91bmQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWV0cmljcy5yb3VuZCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBCYXR0bGVFbmRWaWN0b3J5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1ldHJpY3MucmFuayA9IENhbGN1bGF0ZVJhbmsoKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIFJhbmsgZm9ybXVsYVxyXG4gICAgICAgICAqIEdvZXMgZnJvbSAxIHRvIDEwMCwgd2hlcmUgMTAwIGlzIFMuIENhbiBnbyBhYm92ZSBTLlxyXG4gICAgICAgICAqIGdvb2QgdHVybnMsIG5vIGRhbWFnZSBhbmQgbm8gcHJldmlldyBnaXZlIHlvdSBTXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIGludGVybmFsIGludCBDYWxjdWxhdGVSYW5rKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCByYW5rID0gMTAwO1xyXG4gICAgICAgICAgICBpbnQgZGlmZiA9IHN0YWdlSW5mby50YXJnZXRSb3VuZHMgLSBtZXRyaWNzLnJvdW5kO1xyXG4gICAgICAgICAgICBpZiAoZGlmZiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJhbmsgKz0gZGlmZiAqIChkaWZmKSAqIDM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByYW5rIC09IGRpZmYgKiAoZGlmZikgKiAzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobWV0cmljcy5kYW1hZ2VUaW1lcyA+IDMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJhbmsgLT0gMTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1ldHJpY3MuZGFtYWdlVGltZXMgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByYW5rIC09IDEwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtZXRyaWNzLnByZXZpZXdUaW1lcyA+IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJhbmsgLT0gNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWV0cmljcy5wcmV2aWV3VGltZXMgPiAzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByYW5rIC09IDU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJhbms7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNsYXNzIFN0YWdlQmF0dGxlTWV0cmljc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgZGFtYWdlID0gLTE7XHJcbiAgICAgICAgcHVibGljIGludCBkYW1hZ2VUaW1lcyA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgcHJldmlld1RpbWVzID0gLTE7XHJcbiAgICAgICAgcHVibGljIGludCByb3VuZCA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgcmFuayA9IC0xO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgU3RhZ2VCYXR0bGVNZXRyaWNzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3RhZ2VCYXR0bGVNZXRyaWNzKGJvb2wgaW5pdFZhbHVlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VUaW1lcyA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld1RpbWVzID0gMDtcclxuICAgICAgICAgICAgdGhpcy5yYW5rID0gMDtcclxuICAgICAgICAgICAgdGhpcy5yb3VuZCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIENvcHlWYWx1ZXMoU3RhZ2VCYXR0bGVNZXRyaWNzIG1ldHJpY3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRhbWFnZSA9IG1ldHJpY3MuZGFtYWdlO1xyXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVRpbWVzID0gbWV0cmljcy5kYW1hZ2VUaW1lcztcclxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3VGltZXMgPSBtZXRyaWNzLnByZXZpZXdUaW1lcztcclxuICAgICAgICAgICAgdGhpcy5yb3VuZCA9IG1ldHJpY3Mucm91bmQ7XHJcbiAgICAgICAgICAgIHRoaXMucmFuayA9IG1ldHJpY3MucmFuaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgc3RhZ2VJZDtcclxuICAgICAgICBwdWJsaWMgU3RhZ2VCYXR0bGVNZXRyaWNzIGJlc3RCYXR0bGVNZXRyaWNzID0gbmV3IFN0YWdlQmF0dGxlTWV0cmljcygpO1xyXG4gICAgICAgIHB1YmxpYyBib29sIGF2YWlsYWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgU3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlKGludCBpZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0YWdlSWQgPSBpZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkVDUztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdGFnZVRvQmF0dGxlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEVudGl0eSBzdGFnZVRvVW5sb2NrO1xyXG4gICAgICAgIGludGVybmFsIEVudGl0eSBDdXJyZW50U3RhZ2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFZpY3RvcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc3RhZ2VUb1VubG9jay5FeGlzdCgpKVxyXG4gICAgICAgICAgICAgICAgc3RhZ2VUb1VubG9jay5HZXRDb21wb25lbnQ8U3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlPigpLmF2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5FQ1Ncclxue1xyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBBY2Nlc3NvclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTGVuZ3RoIHsgZ2V0IHsgcmV0dXJuIFNlbGVjdGVkRW50aXRpZXMuQ291bnQ7IH0gfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBUeXBlW10gVHlwZXNQcm9oaWJpdGVkIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgVHlwZVtdIFR5cGVzTmVjZXNzYXJ5O1xyXG4gICAgICAgIGludGVybmFsIExpc3Q8RW50aXR5PiBTZWxlY3RlZEVudGl0aWVzID0gbmV3IExpc3Q8RW50aXR5PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgQWNjZXNzb3IocGFyYW1zIFR5cGVbXSBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHlwZXNOZWNlc3NhcnkgPSBzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBFbnRpdHlBZGRlZChFbnRpdHkgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZWxlY3RlZEVudGl0aWVzLkNvbnRhaW5zKGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEVudGl0eSBHZXQoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VsZWN0ZWRFbnRpdGllc1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFF1aWNrQWNjZXNzb3JPbmU8VDE+XHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBRdWlja0FjY2Vzc29yT25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFjY2Vzc29yID0gbmV3IEFjY2Vzc29yKHR5cGVvZihUMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgQWNjZXNzb3IgYWNjZXNzb3I7XHJcbiAgICAgICAgcHVibGljIGludCBDb3VudCB7IGdldCB7IHJldHVybiBhY2Nlc3Nvci5MZW5ndGg7IH0gfVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgVDEgQ29tcDEoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjZXNzb3IuU2VsZWN0ZWRFbnRpdGllc1tpXS5HZXRDb21wb25lbnQ8VDE+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRW50aXR5IEVudGl0eShpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2Nlc3Nvci5TZWxlY3RlZEVudGl0aWVzW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGFzcyBRdWlja0FjY2Vzc29yVHdvPFQxLCBUMj4gXHJcbiAgICB7XHJcblxyXG4gICAgICAgIGludGVybmFsIEFjY2Vzc29yIGFjY2Vzc29yO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTGVuZ3RoIHsgZ2V0IHsgcmV0dXJuIGFjY2Vzc29yLkxlbmd0aDsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUMSBDb21wMShpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2Nlc3Nvci5TZWxlY3RlZEVudGl0aWVzW2ldLkdldENvbXBvbmVudDxUMT4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBFbnRpdHkgRW50aXR5KGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc29yLlNlbGVjdGVkRW50aXRpZXNbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUXVpY2tBY2Nlc3NvclR3bygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhY2Nlc3NvciA9IG5ldyBBY2Nlc3Nvcih0eXBlb2YoVDEpLCB0eXBlb2YoVDIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgVDIgQ29tcDIoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjZXNzb3IuU2VsZWN0ZWRFbnRpdGllc1tpXS5HZXRDb21wb25lbnQ8VDI+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guRUNTXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDbG9uZWRTdGF0ZVxyXG4gICAge1xyXG4gICAgICAgIGludGVybmFsIERpY3Rpb25hcnk8VHlwZSwgb2JqZWN0W10+IGNvbXBzID0gbmV3IERpY3Rpb25hcnk8VHlwZSwgb2JqZWN0W10+KCk7XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guQmFzZVV0aWxzO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guRUNTXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBFQ1NNYW5hZ2VyXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEVDU01hbmFnZXJbXSBtYW5hZ2VycyA9IG5ldyBFQ1NNYW5hZ2VyWzIwMDBdO1xyXG4gICAgICAgIERpY3Rpb25hcnk8VHlwZSwgb2JqZWN0W10+IGNvbXBzID0gbmV3IERpY3Rpb25hcnk8VHlwZSwgb2JqZWN0W10+KCk7XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgRUNTSWQ7XHJcbiAgICAgICAgaW50IGVudGl0eUlkTWF4ID0gLTE7XHJcbiAgICAgICAgTGlzdDxBY2Nlc3Nvcj4gYWNjZXNzb3JzID0gbmV3IExpc3Q8QWNjZXNzb3I+KCk7XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8VHlwZSwgQWN0aW9uPE9iamVjdCwgT2JqZWN0Pj4gQ29weU1ldGhvZHMgPSBuZXcgRGljdGlvbmFyeTxUeXBlLCBBY3Rpb248b2JqZWN0LCBvYmplY3Q+PigpO1xyXG5cclxuICAgICAgICBwcml2YXRlIEVDU01hbmFnZXIoKSB7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb2Nlc3NvckFjY2Vzc29yIENyZWF0ZVByb2Nlc3NvcihBY2Nlc3NvciBhY2Nlc3NvciwgQWN0aW9uPEFjY2Vzc29yPiBhY3Rpb24pXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9jZXNzb3JBY2Nlc3NvcihhY3Rpb24sIGFjY2Vzc29yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZENvcHlNZXRob2QoVHlwZSB0eXBlLCBBY3Rpb248b2JqZWN0LCBvYmplY3Q+IGNvcHlNZXRobylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvcHlNZXRob2RzLkFkZCh0eXBlLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPG9iamVjdCwgb2JqZWN0Piljb3B5TWV0aG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFjY2Vzc29yIENyZWF0ZUFjY2Vzc29yKFR5cGVbXSBuZWNlc3NhcnksIFR5cGVbXSBub3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWNjID0gbmV3IEFjY2Vzc29yKG5lY2Vzc2FyeSk7XHJcbiAgICAgICAgICAgIGFjYy5UeXBlc1Byb2hpYml0ZWQgPSBub3Q7XHJcbiAgICAgICAgICAgIEFkZEFjY2Vzc29yKGFjYyk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2M7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFF1aWNrQWNjZXNzb3JUd288VDEsIFQyPiBRdWlja0FjY2Vzc29yMjxUMSwgVDI+KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFF1aWNrQWNjZXNzb3JUd288VDEsIFQyPiBhY2Nlc3NvciA9IG5ldyBRdWlja0FjY2Vzc29yVHdvPFQxLCBUMj4oKTtcclxuICAgICAgICAgICAgQWRkQWNjZXNzb3IoYWNjZXNzb3IuYWNjZXNzb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjZXNzb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUXVpY2tBY2Nlc3Nvck9uZTxUMT4gUXVpY2tBY2Nlc3NvcjE8VDE+KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFF1aWNrQWNjZXNzb3JPbmU8VDE+IGFjY2Vzc29yID0gbmV3IFF1aWNrQWNjZXNzb3JPbmU8VDE+KCk7XHJcbiAgICAgICAgICAgIEFkZEFjY2Vzc29yKGFjY2Vzc29yLmFjY2Vzc29yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc29yO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICNyZWdpb24gc3RhdGljIG1ldGhvZHNcclxuXHJcblxyXG4gICAgICAgIGludGVybmFsIHN0YXRpYyBFQ1NNYW5hZ2VyIEdldEluc3RhbmNlKEVudGl0eSBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hbmFnZXJzW2UuZWNzXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRUNTTWFuYWdlciBDcmVhdGUoKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWFuYWdlcnMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2Vyc1tpXSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZXJzW2ldID0gbmV3IEVDU01hbmFnZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2Vyc1tpXS5FQ1NJZCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hbmFnZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHB1YmxpYyBFbnRpdHkgQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudChvYmplY3QgdilcclxuICAgICAgICB7XHJcbkVudGl0eSBlO1xuICAgICAgICAgICAgQ3JlYXRlRW50aXR5KG91dCBlKTtcclxuICAgICAgICAgICAgQWRkQ29tcG9uZW50KGUsIHYpO1xyXG4gICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBFbnRpdHkgQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudChvYmplY3Qgdiwgb2JqZWN0IHYyKVxyXG4gICAgICAgIHtcclxuRW50aXR5IGU7XG4gICAgICAgICAgICBDcmVhdGVFbnRpdHkob3V0IGUpO1xyXG4gICAgICAgICAgICBBZGRDb21wb25lbnQoZSwgdik7XHJcbiAgICAgICAgICAgIEFkZENvbXBvbmVudChlLCB2Mik7XHJcbiAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRGVsZXRlQWxsRW50aXRpZXNUaGF0RG9Ob3RIYXZlKFR5cGVbXSBjb21wb25lbnRUeXBlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhY3MgPSBuZXcgQWNjZXNzb3IoKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRW50aXR5IENyZWF0ZUVudGl0eShvdXQgRW50aXR5IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRpdHlJZE1heCsrO1xyXG4gICAgICAgICAgICBFbnRpdHkgZW50aXR5ID0gbmV3IEVudGl0eSh0aGlzLkVDU0lkLCBlbnRpdHlJZE1heCk7XHJcbiAgICAgICAgICAgIGUgPSBlbnRpdHk7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRW50aXR5IENyZWF0ZUVudGl0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRpdHlJZE1heCsrO1xyXG4gICAgICAgICAgICBFbnRpdHkgZW50aXR5ID0gbmV3IEVudGl0eSh0aGlzLkVDU0lkLCBlbnRpdHlJZE1heCk7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIFByb2Nlc3NvckZsZXg8VDEsIFQyPiBRdWlja1Byb2Nlc3NvckZsZXg8VDEsIFQyPihBY3Rpb248UXVpY2tBY2Nlc3NvclR3bzxUMSwgVDI+PiBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUHJvY2Vzc29yRmxleDxUMSwgVDI+IHByb2Nlc3NvckZsZXggPSBuZXcgUHJvY2Vzc29yRmxleDxUMSwgVDI+KHApO1xyXG4gICAgICAgICAgICBRdWlja0FjY2Vzc29yVHdvPFQxLCBUMj4gYWNjZXNzb3IgPSBwcm9jZXNzb3JGbGV4LmFjY2Vzc29yO1xyXG4gICAgICAgICAgICBBY2Nlc3NvciBhY2Nlc3NvcjEgPSBhY2Nlc3Nvci5hY2Nlc3NvcjtcclxuICAgICAgICAgICAgQWRkQWNjZXNzb3IoYWNjZXNzb3IxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NvckZsZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQWRkQWNjZXNzb3IoQWNjZXNzb3IgYWNjZXNzb3IxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYWNjZXNzb3JzLkFkZChhY2Nlc3NvcjEpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8PSBlbnRpdHlJZE1heDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBVcGRhdGVBY2Nlc3NvckVudGl0eShhY2Nlc3NvcjEsIGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFVwZGF0ZUFjY2Vzc29yRW50aXR5KEFjY2Vzc29yIGFjY2Vzc29yLCBpbnQgZW50aXR5SWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbnRpdHkgZW50aXR5ID0gbmV3IEVudGl0eShFQ1NJZCwgZW50aXR5SWQpO1xyXG4gICAgICAgICAgICBib29sIGJlbG9uZyA9IEhhc0FsbENvbXBzKGFjY2Vzc29yLlR5cGVzTmVjZXNzYXJ5LCBlbnRpdHlJZCkgJiYgSGFzTm9uZU9mVGhlc2VDb21wcyhhY2Nlc3Nvci5UeXBlc1Byb2hpYml0ZWQsIGVudGl0eUlkKTtcclxuICAgICAgICAgICAgYm9vbCBtZW1iZXIgPSBhY2Nlc3Nvci5FbnRpdHlBZGRlZChlbnRpdHkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJlbG9uZyAhPSBtZW1iZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChiZWxvbmcpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzb3IuU2VsZWN0ZWRFbnRpdGllcy5BZGQoZW50aXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiUkVNT1ZFRCBFTlRJVFkgXCIrYWNjZXNzb3IuVHlwZXNOZWNlc3NhcnlbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc29yLlNlbGVjdGVkRW50aXRpZXMuUmVtb3ZlKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShhY2Nlc3Nvci5FbnRpdHlBZGRlZChlbnRpdHkpK1wiIEJFTE9OR1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsb25lU3RhdGUoQ2xvbmVkU3RhdGUgY3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29tcHMgPSB0aGlzLmNvbXBzO1xyXG4gICAgICAgICAgICBEaWN0aW9uYXJ5PFR5cGUsIG9iamVjdFtdPiBjb21wczIgPSBjcy5jb21wcztcclxuICAgICAgICAgICAgQ29weShjb21wcywgY29tcHMyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlc3RvcmVTdGF0ZShDbG9uZWRTdGF0ZSBjcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb21wcyA9IHRoaXMuY29tcHM7XHJcbiAgICAgICAgICAgIERpY3Rpb25hcnk8VHlwZSwgb2JqZWN0W10+IGNvbXBzMiA9IGNzLmNvbXBzO1xyXG4gICAgICAgICAgICBDb3B5KGNvbXBzMiwgY29tcHMpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPD1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZW50aXR5SWRNYXg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gYWNjZXNzb3JzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFVwZGF0ZUFjY2Vzc29yRW50aXR5KGl0ZW0sIGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxUeXBlPiBhdXggPSBuZXcgTGlzdDxUeXBlPigpO1xyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQ29weShEaWN0aW9uYXJ5PFR5cGUsIG9iamVjdFtdPiBmcm9tLCBEaWN0aW9uYXJ5PFR5cGUsIG9iamVjdFtdPiB0bylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF1eC5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gZnJvbSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHlwZSB0eXBlID0gYy5LZXk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9VTkNPTU1FTlQgVEhJUyBUTyBDSEVDSyBGT1IgUEFSQU1FVEVSTEVTUyBDT05TVFJVQ1RPUlNcclxuICAgICAgICAgICAgICAgIC8vaWYgKHR5cGUuR2V0Q29uc3RydWN0b3IoVHlwZS5FbXB0eVR5cGVzKSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAvLyAgICBDb25zb2xlLldyaXRlTGluZShcIk5PIFBBUkFNRVRFUkxFU1MgXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgIC8vfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBhdXguQWRkKHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0by5Db250YWluc0tleSh0eXBlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0by5BZGQodHlwZSwgbmV3IG9iamVjdFszMDBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0b0FycmF5ID0gdG9bdHlwZV07XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luID0gYy5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIENvcHkodG8sIHR5cGUsIHRvQXJyYXksIG9yaWdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gdG8pIC8vY2hlY2tzIHR5cGVzIGluIHRvLCBzbyBpdCBjYW4gYmUgdGhyb3VnaFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUeXBlIHR5cGUgPSBjLktleTtcclxuICAgICAgICAgICAgICAgIGlmICghYXV4LkNvbnRhaW5zKHR5cGUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1eC5BZGQodHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvQXJyYXkgPSBjLlZhbHVlOyAvL2FjY2VzcyBpbnZlcnRlZCB3aGVuIGNvbXBhcmVkIHRvIHByZXZpb3VzXHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgb3JpZ2luID0gZnJvbVt0eXBlXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRvQXJyYXkuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0FycmF5W2ldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIlJlbW92aW5nIGVudGl0eVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQ29weShEaWN0aW9uYXJ5PFR5cGUsIG9iamVjdFtdPiB0bywgVHlwZSB0eXBlLCBvYmplY3RbXSB0b0FycmF5LCBvYmplY3RbXSBvcmlnaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBY3Rpb248T2JqZWN0LCBPYmplY3Q+IGNvcHlNZXRob2QgPSBudWxsO1xyXG4gICAgICAgICAgICBDb3B5TWV0aG9kcy5UcnlHZXRWYWx1ZSh0eXBlLCBvdXQgY29weU1ldGhvZCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG9yaWdpbi5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbltpXSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b0FycmF5W2ldICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiUmVtb3ZpbmcgZW50aXR5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0FycmF5W2ldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUodHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvQXJyYXlbaV0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9BcnJheVtpXSA9IEFjdGl2YXRvci5DcmVhdGVJbnN0YW5jZSh0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29weU1ldGhvZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5TWV0aG9kKG9yaWdpbltpXSwgdG9BcnJheVtpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vRGVlcENsb25lSGVscGVyLkRlZXBDb3B5UGFydGlhbChvcmlnaW5baV0sIHRvQXJyYXlbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBUIEFkZENvbXBvbmVudDxUPihFbnRpdHkgZSkgd2hlcmUgVCA6IG5ldygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUIHQgPSBuZXcgVCgpO1xyXG4gICAgICAgICAgICBBZGRDb21wb25lbnQoZSwgdCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZENvbXBvbmVudChFbnRpdHkgZSwgb2JqZWN0IHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUeXBlIHR5cGUgPSB0LkdldFR5cGUoKTtcclxuICAgICAgICAgICAgaWYgKCFjb21wcy5Db250YWluc0tleSh0eXBlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29tcHMuQWRkKHR5cGUsIG5ldyBvYmplY3RbMzAwXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcHNbdHlwZV1bZS5pZF0gPSB0O1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBhY2Nlc3NvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFVwZGF0ZUFjY2Vzc29yRW50aXR5KGl0ZW0sIGUuaWQpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVtb3ZlQ29tcG9uZW50KEVudGl0eSBlLCBvYmplY3QgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFR5cGUgdHlwZSA9IHQuR2V0VHlwZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbXBzLkNvbnRhaW5zS2V5KHR5cGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb21wcy5BZGQodHlwZSwgbmV3IG9iamVjdFszMDBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21wc1t0eXBlXVtlLmlkXSA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGFjY2Vzc29ycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVXBkYXRlQWNjZXNzb3JFbnRpdHkoaXRlbSwgZS5pZCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgSGFzQWxsQ29tcG9uZW50cyhFbnRpdHkgZSwgVHlwZVtdIHR5cGVzTmVjZXNzYXJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGlkID0gZS5pZDtcclxuICAgICAgICAgICAgcmV0dXJuIEhhc0FsbENvbXBzKHR5cGVzTmVjZXNzYXJ5LCBpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgSGFzQWxsQ29tcHMoVHlwZVtdIHR5cGVzTmVjZXNzYXJ5LCBpbnQgaWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdHlwZSBpbiB0eXBlc05lY2Vzc2FyeSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb21wcy5Db250YWluc0tleSh0eXBlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBzW3R5cGVdW2lkXSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBIYXNOb25lT2ZUaGVzZUNvbXBzKFR5cGVbXSB0eXBlc1Byb2hpYml0ZWQsIGludCBpZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlc1Byb2hpYml0ZWQgPT0gbnVsbCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0eXBlIGluIHR5cGVzUHJvaGliaXRlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBzLkNvbnRhaW5zS2V5KHR5cGUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wc1t0eXBlXVtpZF0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgVCBHZXRDb21wb25lbnQ8VD4oRW50aXR5IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUeXBlIHR5cGUgPSB0eXBlb2YoVCk7XHJcbiAgICAgICAgICAgIGlmICghY29tcHMuQ29udGFpbnNLZXkodHlwZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vY29tcHMuQWRkKHR5cGUsIG5ldyBvYmplY3RbMzAwXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdChUKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKFQpY29tcHNbdHlwZV1bZS5pZF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5FQ1Ncclxue1xyXG4gICAgcHVibGljIHN0cnVjdCBFbnRpdHkgOiBJRXF1YXRhYmxlPEVudGl0eT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEVudGl0eSBOb25lID0gbmV3IEVudGl0eSgtMSwtMSk7XHJcbiAgICAgICAgcmVhZG9ubHkgaW50ZXJuYWwgaW50IGVjcztcclxuICAgICAgICByZWFkb25seSBpbnRlcm5hbCBpbnQgaWQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBFbnRpdHkoaW50IGVjcywgaW50IGlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5lY3MgPSBlY3M7XHJcbiAgICAgICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEV4aXN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZCAhPSAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhFbnRpdHkgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gb3RoZXIuaWQgPT0gdGhpcy5pZCAmJiBvdGhlci5lY3MgPT0gdGhpcy5lY3M7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25NZXRob2RzXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSZW1vdmVDb21wb25lbnQodGhpcyBFbnRpdHkgZSwgb2JqZWN0IGNvbXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFQ1NNYW5hZ2VyLkdldEluc3RhbmNlKGUpLlJlbW92ZUNvbXBvbmVudChlLCBjb21wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVCBBZGRDb21wb25lbnQ8VD4odGhpcyBFbnRpdHkgZSkgd2hlcmUgVDogbmV3KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFQ1NNYW5hZ2VyLkdldEluc3RhbmNlKGUpLkFkZENvbXBvbmVudDxUPihlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFkZENvbXBvbmVudCh0aGlzIEVudGl0eSBlLCBvYmplY3QgY29tcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVDU01hbmFnZXIuR2V0SW5zdGFuY2UoZSkuQWRkQ29tcG9uZW50KGUsIGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFQgR2V0Q29tcG9uZW50PFQ+KHRoaXMgRW50aXR5IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRUNTTWFuYWdlci5HZXRJbnN0YW5jZShlKS5HZXRDb21wb25lbnQ8VD4oZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5FQ1Ncclxue1xyXG4gICAgcHVibGljIGNsYXNzIFByb2Nlc3NvckZsZXg8VDEsIFQyPlxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgQWN0aW9uPFF1aWNrQWNjZXNzb3JUd288VDEsIFQyPj4gcDtcclxuICAgICAgICBpbnRlcm5hbCBRdWlja0FjY2Vzc29yVHdvPFQxLCBUMj4gYWNjZXNzb3I7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9jZXNzb3JGbGV4KEFjdGlvbjxRdWlja0FjY2Vzc29yVHdvPFQxLCBUMj4+IHApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnAgPSBwO1xyXG4gICAgICAgICAgICBhY2Nlc3NvciA9IG5ldyBRdWlja0FjY2Vzc29yVHdvPFQxLCBUMj4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJ1bigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwKGFjY2Vzc29yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFByb2Nlc3NvckFjY2Vzc29yXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb248QWNjZXNzb3I+IHA7XHJcblxyXG4gICAgICAgIEFjY2Vzc29yIGE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcm9jZXNzb3JBY2Nlc3NvcihBY3Rpb248QWNjZXNzb3I+IHAsIEFjY2Vzc29yIGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnAgPSBwO1xyXG4gICAgICAgICAgICB0aGlzLmEgPSBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUnVuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHAoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UZXh0UmVuZGVyaW5nXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUZXh0V29ybGRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgUGFsZXR0ZSBwYWxldHRlID0gRGVmYXVsdFBhbGV0dGVzLkM0S2lyb0themU7XHJcbiAgICAgICAgTGlzdDxUZXh0RW50aXR5PiBhY3RpdmVBZ2VudHMgPSBuZXcgTGlzdDxUZXh0RW50aXR5PigpO1xyXG4gICAgICAgIExpc3Q8VGV4dEVudGl0eT4gZnJlZUJvYXJkcyA9IG5ldyBMaXN0PFRleHRFbnRpdHk+KCk7XHJcbiAgICAgICAgTGlzdDxUZXh0QW5pbWF0aW9uPiBhbmltYXRpb25zID0gbmV3IExpc3Q8VGV4dEFuaW1hdGlvbj4oKTtcclxuICAgICAgICBwdWJsaWMgVGV4dEJvYXJkIG1haW5Cb2FyZDtcclxuICAgICAgICBpbnQgbGF0ZXN0SWQgPSAtMTtcclxuXHJcbiAgICAgICAgcHVibGljIFQgQWRkQW5pbWF0aW9uPFQ+KFQgdGEpIHdoZXJlIFQgOiBUZXh0QW5pbWF0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbmltYXRpb25zLkFkZCh0YSk7XHJcbiAgICAgICAgICAgIHRhLlJlZ2lzdGVyTGlzdHMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW5pdChpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtYWluQm9hcmQgPSBuZXcgVGV4dEJvYXJkKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWFpbkJvYXJkLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIERyYXdDaGlsZHJlbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0NoaWxkcmVuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWN0aXZlQWdlbnRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUFnZW50c1tpXS5SZXNldEFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFuaW0gaW4gYW5pbWF0aW9ucylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltLk1vZGlmeShhY3RpdmVBZ2VudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUFnZW50c1tpXS5mcmVlSWZJZGxlICYmICFhY3RpdmVBZ2VudHNbaV0uYW5pbWF0aW5nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyZWVCb2FyZHMuQWRkKGFjdGl2ZUFnZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWdlbnRzLlJlbW92ZShhY3RpdmVBZ2VudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYWluQm9hcmQuSW5zZXJ0KGFjdGl2ZUFnZW50c1tpXS5BbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRFbnRpdHkgR2V0RnJlZUVudGl0eShpbnQgdywgaW50IGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUZXh0RW50aXR5IHRlO1xyXG4gICAgICAgICAgICBpZiAoZnJlZUJvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRlID0gZnJlZUJvYXJkc1tmcmVlQm9hcmRzLkNvdW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICBmcmVlQm9hcmRzLlJlbW92ZUF0KGZyZWVCb2FyZHMuQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRlID0gbmV3IFRleHRFbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgIHRlLmlkID0gKytsYXRlc3RJZDtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFjdGl2ZUFnZW50cy5BZGQodGUpO1xyXG4gICAgICAgICAgICB0ZS5mcmVlSWZJZGxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRlLlNldFNpemUodywgaCk7XHJcbiAgICAgICAgICAgIHRlLlJlc2V0RnVsbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEVudGl0eSBHZXRUZW1wRW50aXR5KGludCB3LCBpbnQgaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0ZSA9IEdldEZyZWVFbnRpdHkodywgaCk7XHJcbiAgICAgICAgICAgIHRlLmZyZWVJZklkbGUgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZHZhbmNlVGltZShmbG9hdCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFuaW0gaW4gYW5pbWF0aW9ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYW5pbS5VcGRhdGUodik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRyeUVuZEFuaW1hdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFuaW0gaW4gYW5pbWF0aW9ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYW5pbS5UcnlFbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBGcmVlKExpc3Q8VGV4dEVudGl0eT4gZW50aXRpZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZnJlZUJvYXJkcy5BZGRSYW5nZShlbnRpdGllcyk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVBZ2VudHMuUmVtb3ZlKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0RvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFuaW0gaW4gYW5pbWF0aW9ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbmltLklzRG9uZSgpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBUZXh0RW50aXR5XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludCBpZDtcclxuICAgICAgICBwdWJsaWMgVGV4dEJvYXJkIE9yaWdpbjtcclxuICAgICAgICBwdWJsaWMgVGV4dEJvYXJkIEFuaW1hdGlvbjtcclxuICAgICAgICBwdWJsaWMgYm9vbCBmcmVlSWZJZGxlID0gZmFsc2U7XHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBhbmltYXRpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSGVpZ2h0IHsgZ2V0IHsgcmV0dXJuIE9yaWdpbi5IZWlnaHQ7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgV2lkdGggeyBnZXQgeyByZXR1cm4gT3JpZ2luLldpZHRoOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRBbmltYXRpb24uQmFzZURhdGEgQW5pbUJhc2UoZmxvYXQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0QW5pbWF0aW9uLkJhc2VEYXRhKGxlbmd0aCwgMCwgaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgVmVjdG9yMkQgR2V0UG9zaXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9yaWdpbi5Qb3NpdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUmVzZXRBbmltYXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbi5TZXQoT3JpZ2luKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUmVzZXRGdWxsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9yaWdpbi5SZXNldEludmlzaWJsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTZXRQb3NpdGlvbihpbnQgeCwgaW50IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBPcmlnaW4uUG9zaXRpb24gPSBuZXcgVmVjdG9yMkQoeCx5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0UG9zaXRpb24oVmVjdG9yMkQgdmVjdG9yMkQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBPcmlnaW4uUG9zaXRpb24gPSB2ZWN0b3IyRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0UG9zaXRpb24oUG9pbnQyRCBwb2ludClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9yaWdpbi5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IyRChwb2ludC5YLCBwb2ludC5ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0U2l6ZShpbnQgdywgaW50IGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoT3JpZ2luID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE9yaWdpbiA9IG5ldyBUZXh0Qm9hcmQodywgaCk7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb24gPSBuZXcgVGV4dEJvYXJkKHcsIGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9yaWdpbi5SZXNpemUodywgaCk7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbi5SZXNpemUodywgaCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGVsYXlzQW5pbWF0aW9uIDogVGV4dEFuaW1hdGlvblxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFJlcXVlc3RSZWdpc3Rlckxpc3RzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBEZWxheShmbG9hdCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWRkKG5ldyBCYXNlRGF0YSh2LCAwLCAtMSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIFBvc2l0aW9uQW5pbWF0aW9uIDogVGV4dEFuaW1hdGlvbjxQb3NpdGlvbkFuaW1hdGlvbi5Qb3NpdGlvbkRhdGE+XHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE1vZGlmeShUZXh0RW50aXR5IGVudGl0eSwgUG9zaXRpb25EYXRhIG1haW5EYXRhLCBmbG9hdCBwcm9ncmVzcywgZmxvYXQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5Nb2RpZnkoZW50aXR5LCBtYWluRGF0YSwgcHJvZ3Jlc3MsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZCB0YXJnZXQgPSBlbnRpdHkuQW5pbWF0aW9uO1xyXG4gICAgICAgICAgICBpZiAobWFpbkRhdGEucGVybWFuZW50KVxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZW50aXR5Lk9yaWdpbjtcclxuICAgICAgICAgICAgdGFyZ2V0LlBvc2l0aW9uID0gVmVjdG9yMkQuSW50ZXJwb2xhdGVSb3VuZGVkKG1haW5EYXRhLnN0YXJ0UG9zaXRpb24sIG1haW5EYXRhLmVuZFBvc2l0aW9uLCBwcm9ncmVzcyAvIGxlbmd0aCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cnVjdCBQb3NpdGlvbkRhdGFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBib29sIHBlcm1hbmVudDtcclxuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IFZlY3RvcjJEIHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIFBvc2l0aW9uRGF0YShWZWN0b3IyRCBzdGFydFBvc2l0aW9uLCBWZWN0b3IyRCBlbmRQb3NpdGlvbiwgYm9vbCBwZXJtID0gZmFsc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFBvc2l0aW9uID0gZW5kUG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlcm1hbmVudCA9IHBlcm07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFRleHRBbmltYXRpb248VD4gOiBUZXh0QW5pbWF0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIExpc3Q8VD4gbWFpbkRhdGEgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFJlcXVlc3RSZWdpc3Rlckxpc3RzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuUmVnaXN0ZXJMaXN0KG1haW5EYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZChCYXNlRGF0YSBiYXNlRGF0YSwgVCBtYWluRClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuQWRkKGJhc2VEYXRhKTtcclxuICAgICAgICAgICAgbWFpbkRhdGEuQWRkKG1haW5EKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE1vZGlmeShUZXh0RW50aXR5IGVudGl0eSwgaW50IGluZGV4LCBmbG9hdCBwcm9ncmVzcywgZmxvYXQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTW9kaWZ5KGVudGl0eSwgbWFpbkRhdGFbaW5kZXhdLCBwcm9ncmVzcywgbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgTW9kaWZ5KFRleHRFbnRpdHkgZW50aXR5LCBUIG1haW5EYXRhLCBmbG9hdCBwcm9ncmVzcywgZmxvYXQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vaW50ZXJuYWwgb3ZlcnJpZGUgdm9pZCBFeGVjdXRlKGludCBpbmRleCwgQmFzZURhdGEgYmFzZURhdGEpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdGhpcy5FeGVjdXRlKG1haW5EYXRhW2luZGV4XSwgYmFzZURhdGEpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBhYnN0cmFjdCB2b2lkIEV4ZWN1dGUoVCBtYWluRGF0YSwgQmFzZURhdGEgYmFzZURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBUZXh0QW5pbWF0aW9uXHJcbiAgICB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJ1Y3QgQmFzZURhdGFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBmbG9hdCBsZW5ndGg7XHJcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBmbG9hdCBwcm9ncmVzcztcclxuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGludCB0YXJnZXQ7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgQmFzZURhdGEoZmxvYXQgbGVuZ3RoLCBmbG9hdCBwcm9ncmVzcywgaW50IHRhcmdldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBMaXN0PGZsb2F0PiBsZW5ndGggPSBuZXcgTGlzdDxmbG9hdD4oKTtcclxuICAgICAgICBMaXN0PGZsb2F0PiBwcm9ncmVzcyA9IG5ldyBMaXN0PGZsb2F0PigpO1xyXG4gICAgICAgIExpc3Q8aW50PiB0YXJnZXRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgIExpc3Q8SUxpc3Q+IGxpc3RzID0gbmV3IExpc3Q8SUxpc3Q+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlZ2lzdGVyTGlzdHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGlzdHMuQWRkKGxlbmd0aCk7XHJcbiAgICAgICAgICAgIGxpc3RzLkFkZChwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIGxpc3RzLkFkZCh0YXJnZXRzKTtcclxuICAgICAgICAgICAgUmVxdWVzdFJlZ2lzdGVyTGlzdHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIFJlcXVlc3RSZWdpc3Rlckxpc3RzKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZShmbG9hdCBkZWx0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcHJvZ3Jlc3MuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NbaV0gKz0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NbaV0gPj0gbGVuZ3RoW2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzW2ldID0gbGVuZ3RoW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vRXhlY3V0ZShpLCBuZXcgQmFzZURhdGEobGVuZ3RoW2ldLHByb2dyZXNzW2ldLCB0YXJnZXRzW2ldKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vaW50ZXJuYWwgYWJzdHJhY3Qgdm9pZCBFeGVjdXRlKGludCBpbmRleCwgQmFzZURhdGEgYmFzZURhdGEpO1xyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIEFkZChCYXNlRGF0YSBiZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLkFkZChiZC5wcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIHRhcmdldHMuQWRkKGJkLnRhcmdldCk7XHJcbiAgICAgICAgICAgIGxlbmd0aC5BZGQoYmQubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBsaXN0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uQ291bnQgIT0gcHJvZ3Jlc3MuQ291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHMuVHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9ncmVzcy5Db3VudCA9PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBFbmRUYXNrKGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGwgaW4gbGlzdHMpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICBsLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJlZ2lzdGVyTGlzdChJTGlzdCBtYWluRGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpc3RzLkFkZChtYWluRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIE1vZGlmeShUZXh0RW50aXR5IGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHByb2dyZXNzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLmlkID09IHRhcmdldHNbaV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kaWZ5KGEsIGksIHByb2dyZXNzW2ldLCBsZW5ndGhbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGEuYW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBNb2RpZnkoVGV4dEVudGl0eSBlbnRpdHksIGludCBpbmRleCwgZmxvYXQgcHJvZ3Jlc3MsIGZsb2F0IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFRyeUVuZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHByb2dyZXNzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc1tpXSA+PSBsZW5ndGhbaV0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRW5kVGFzayhpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFBhbGV0dGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nW10gSHRtbENvbG9ycztcclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBQYWxldHRlKHBhcmFtcyBzdHJpbmdbXSBjb2xvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBIdG1sQ29sb3JzID0gY29sb3JzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGVmYXVsdFBhbGV0dGVzXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBQYWxldHRlIEM0S2lyb0themUgPSBuZXcgUGFsZXR0ZShcIiMzMzJjNTBcIiwgXCIjNDY4NzhmXCIsIFwiIzk0ZTM0NFwiLCBcIiNlMmYzZTRcIik7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBQYWxldHRlIEM0UmVhZGVyID0gbmV3IFBhbGV0dGUoXCIjMjYyNjI2XCIsIFwiIzhiOGNiYVwiLCBcIiM4YmJhOTFcIiwgXCIjNjQ5ZjhkXCIpO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgUGFsZXR0ZSBDNE5vdmVsID0gbmV3IFBhbGV0dGUoXCIjMjYyNjI2XCIsIFwiIzM0MmQ0MVwiLCBcIiNiOGI4YjhcIiwgXCIjOGI4Y2JhXCIpO1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBpbnQgQzRCbGFjayA9IDA7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGludCBDNEJsYWNrTmV1dHJhbCA9IDE7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGludCBDNFdoaXRlTmV1dHJhbCA9IDI7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGludCBDNFdoaXRlID0gMztcclxuXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlRleHRSZW5kZXJpbmcuR2FtZVNjcmVlblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgS2V5Ym9hcmRJT1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gZG93blVuaWNvZGVzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UZXh0UmVuZGVyaW5nLkdhbWVTY3JlZW5cclxue1xyXG4gICAgcHVibGljIHN0cnVjdCBNb3VzZUhvdmVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFJlY3QgcmVjdDtcclxuICAgICAgICBwdWJsaWMgaW50IHR5cGU7XHJcbiAgICAgICAgcHVibGljIGludCBpZDtcclxuXHJcbiAgICAgICAgcHVibGljIE1vdXNlSG92ZXIoUmVjdCByZWN0LCBpbnQgdHlwZSwgaW50IGlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5yZWN0ID0gcmVjdDtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTW91c2VIb3Zlck1hbmFnZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxNb3VzZUhvdmVyPiBtb3VzZUhvdmVycyA9IG5ldyBMaXN0PE1vdXNlSG92ZXI+KCk7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TW91c2VIb3Zlcj4gbW91c2VIb3ZlcnNBY3RpdmUgPSBuZXcgTGlzdDxNb3VzZUhvdmVyPigpO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PE1vdXNlSG92ZXI+IG1vdXNlSG92ZXJzQ2xpY2tEb3duID0gbmV3IExpc3Q8TW91c2VIb3Zlcj4oKTtcclxuICAgICAgICBwdWJsaWMgTW91c2VJTyBtb3VzZUlPO1xyXG5cclxuICAgICAgICBwdWJsaWMgTW91c2VIb3Zlck1hbmFnZXIoTW91c2VJTyBtb3VzZUlPKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZUlPID0gbW91c2VJTztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb3VzZUhvdmVyc0FjdGl2ZS5DbGVhcigpO1xyXG4gICAgICAgICAgICBtb3VzZUhvdmVyc0NsaWNrRG93bi5DbGVhcigpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBtb3VzZUhvdmVycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ucmVjdC5Db250YWlucyhtb3VzZUlPLnBvcykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VIb3ZlcnNBY3RpdmUuQWRkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3VzZUlPLm1vdXNlQ2xpY2tIYXBwZW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3VzZUhvdmVyc0NsaWNrRG93bi5BZGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlRleHRSZW5kZXJpbmcuR2FtZVNjcmVlblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVW5pY29kZVJlbWFwXHJcbiAgICB7XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBpbnQ+IHJlbWFwcyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgaW50PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVW5pY29kZVJlbWFwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlbWFwcy5BZGQoVW5pY29kZS5rZXlVcCwgJ3cnKTtcclxuICAgICAgICAgICAgcmVtYXBzLkFkZChVbmljb2RlLmtleURvd24sICdzJyk7XHJcbiAgICAgICAgICAgIHJlbWFwcy5BZGQoVW5pY29kZS5rZXlMZWZ0LCAnYScpO1xyXG4gICAgICAgICAgICByZW1hcHMuQWRkKFVuaWNvZGUua2V5UmlnaHQsICdkJyk7XHJcblxyXG4gICAgICAgICAgICByZW1hcHMuQWRkKFVuaWNvZGUuRW50ZXIsIFVuaWNvZGUuU3BhY2UpO1xyXG5cclxuICAgICAgICAgICAgcmVtYXBzLkFkZCgnaScsICcxJyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBSZW1hcChpbnQgdW5pY29kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCByZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChyZW1hcHMuVHJ5R2V0VmFsdWUodW5pY29kZSwgb3V0IHJlc3VsdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuaWNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGV4dEJvYXJkXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGNoYXIgTk9DSEFOR0VDSEFSID0gKGNoYXIpMTtcclxuICAgICAgICBwdWJsaWMgY29uc3QgY2hhciBJTlZJU0lCTEVDSEFSID0gKGNoYXIpMjtcclxuICAgICAgICBwdWJsaWMgY29uc3QgaW50IE5PQ0hBTkdFQ09MT1IgPSAtMjtcclxuICAgICAgICBwdWJsaWMgY29uc3QgaW50IElOVklTSUJMRUNPTE9SID0gLTE7XHJcbiAgICAgICAgY2hhclssXSBjaGFycztcclxuICAgICAgICBwdWJsaWMgaW50WyxdIFRleHRDb2xvciB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50WyxdIEJhY2tDb2xvciB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICAvL1N0cmluZ0J1aWxkZXIgc3RyaW5nQnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcbiAgICAgICAgaW50IGN1cnNvclggPSAwO1xyXG4gICAgICAgIGludCBjdXJzb3JZID0gMDtcclxuICAgICAgICBwdWJsaWMgVmVjdG9yMkQgUG9zaXRpb24geyBnZXQ7IHNldDsgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRCb2FyZChpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL1NldE1heFNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIFJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdPbkNlbnRlcihzdHJpbmcgbWVzc2FnZSwgaW50IGNvbG9yLCBpbnQgeE9mZiA9IDAsIGludCB5T2ZmID0gMCwgYm9vbCBhbGlnblN0cmluZyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgeCA9IChXaWR0aCkgLyAyO1xyXG4gICAgICAgICAgICBpZiAoYWxpZ25TdHJpbmcpIHggLT0gbWVzc2FnZS5MZW5ndGggLyAyO1xyXG4gICAgICAgICAgICBpbnQgeSA9IEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgIERyYXcobWVzc2FnZSwgeCArIHhPZmYsIHkgKyB5T2ZmLCBjb2xvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3T25DZW50ZXJIb3Jpem9udGFsKHN0cmluZyBtZXNzYWdlLCBpbnQgY29sb3IsIGludCB4T2ZmID0gMCwgaW50IHkgPSAwLCBib29sIGFsaWduU3RyaW5nID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB4ID0gKFdpZHRoKSAvIDI7XHJcbiAgICAgICAgICAgIGlmIChhbGlnblN0cmluZykgeCAtPSBtZXNzYWdlLkxlbmd0aCAvIDI7XHJcbiAgICAgICAgICAgIERyYXcobWVzc2FnZSwgeCArIHhPZmYsIHksIGNvbG9yKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgU2V0TWF4U2l6ZShpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjaGFycyA9IG5ldyBjaGFyW3dpZHRoLCBoZWlnaHRdO1xyXG4gICAgICAgICAgICBUZXh0Q29sb3IgPSBuZXcgaW50W3dpZHRoLCBoZWlnaHRdO1xyXG4gICAgICAgICAgICBCYWNrQ29sb3IgPSBuZXcgaW50W3dpZHRoLCBoZWlnaHRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd1JlcGVhdGVkKCcgJywgMCwgMCwgV2lkdGgsIEhlaWdodCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNldEludmlzaWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoSU5WSVNJQkxFQ0hBUiwgMCwgMCwgV2lkdGgsIEhlaWdodCwgSU5WSVNJQkxFQ09MT1IsIElOVklTSUJMRUNPTE9SKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFdpZHRoIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBJbnNlcnQoVGV4dEJvYXJkIHNlY29uZEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzZWNvbmRCb2FyZC5XaWR0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHNlY29uZEJvYXJkLkhlaWdodDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB4ID0gKGludClzZWNvbmRCb2FyZC5Qb3NpdGlvbi5YICsgaTtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgeSA9IChpbnQpc2Vjb25kQm9hcmQuUG9zaXRpb24uWSArIGo7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPCAwIHx8IHkgPCAwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA+PSBXaWR0aCB8fCB5ID49IEhlaWdodCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZEJvYXJkLmNoYXJzW2ksIGpdICE9IElOVklTSUJMRUNIQVIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzW3gsIHldID0gc2Vjb25kQm9hcmQuY2hhcnNbaSwgal07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZEJvYXJkLlRleHRDb2xvcltpLCBqXSAhPSBJTlZJU0lCTEVDT0xPUilcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dENvbG9yW3gsIHldID0gc2Vjb25kQm9hcmQuVGV4dENvbG9yW2ksIGpdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRCb2FyZC5CYWNrQ29sb3JbaSwgal0gIT0gSU5WSVNJQkxFQ09MT1IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhY2tDb2xvclt4LCB5XSA9IHNlY29uZEJvYXJkLkJhY2tDb2xvcltpLCBqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBEcmF3SG9yaXpvbnRhbExpbmUoY2hhciBjLCBpbnQgeSwgaW50IGNvbG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd1JlcGVhdGVkKGMsIDAsIHksIFdpZHRoLCAxLCBjb2xvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIERyYXdSZWN0KGNoYXIgYywgaW50IHgsIGludCB5LCBpbnQgdywgaW50IGgsIGludCB0ZXh0Q29sb3IsIGludCBiYWNrQ29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoYywgeCwgICAgICB5LCAgIDEsIGgsIHRleHRDb2xvciwgYmFja0NvbG9yKTtcclxuICAgICAgICAgICAgRHJhd1JlcGVhdGVkKGMsIHgrdy0xLCAgeSwgICAxLCBoLCB0ZXh0Q29sb3IsIGJhY2tDb2xvcik7XHJcbiAgICAgICAgICAgIERyYXdSZXBlYXRlZChjLCB4LCAgICAgIHksICAgdywgMSwgdGV4dENvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoYywgeCwgICAgICB5K2gtMSwgdywgMSwgdGV4dENvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBIZWlnaHQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBDdXJzb3JYXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gY3Vyc29yWDsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yWCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ3Vyc29yWSB7IGdldCB7IHJldHVybiBjdXJzb3JZOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3JZID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdPbmVEaWdpdChpbnQgaSwgaW50IHgsIGludCB5LCBpbnQgY29sb3IgPSBOT0NIQU5HRUNPTE9SLCBpbnQgYmFja2dyb3VuZCA9IE5PQ0hBTkdFQ09MT1IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjaGFyIGMgPSAoY2hhcikoaSArICcwJyk7XHJcbiAgICAgICAgICAgIERyYXdDaGFyKGMsIHgsIHksIGNvbG9yLCBiYWNrZ3JvdW5kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdUd29EaWdpdHMoaW50IGksIGludCB4LCBpbnQgeSwgaW50IGNvbG9yID0gTk9DSEFOR0VDT0xPUiwgaW50IGJhY2tncm91bmQgPSBOT0NIQU5HRUNPTE9SKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd09uZURpZ2l0KGkvMTAseCx5LGNvbG9yLGJhY2tncm91bmQpO1xyXG4gICAgICAgICAgICBEcmF3T25lRGlnaXQoaSAlMTAsIHgrMSwgeSwgY29sb3IsIGJhY2tncm91bmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBTYW1lQXMoVGV4dEJvYXJkIHRleHRCb2FyZCwgaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnNbeCwgeV0gPT0gdGV4dEJvYXJkLmNoYXJzW3gsIHldXHJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLkJhY2tDb2xvclt4LHldID09IHRleHRCb2FyZC5CYWNrQ29sb3JbeCx5XVxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5UZXh0Q29sb3JbeCx5XSA9PSB0ZXh0Qm9hcmQuVGV4dENvbG9yW3gseV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIENvcHkoVGV4dEJvYXJkIHRleHRCb2FyZCwgaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFyc1t4LCB5XSA9IHRleHRCb2FyZC5jaGFyc1t4LCB5XTtcclxuICAgICAgICAgICAgdGhpcy5UZXh0Q29sb3JbeCwgeV0gPSB0ZXh0Qm9hcmQuVGV4dENvbG9yW3gsIHldO1xyXG4gICAgICAgICAgICB0aGlzLkJhY2tDb2xvclt4LCB5XSA9IHRleHRCb2FyZC5CYWNrQ29sb3JbeCwgeV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIERyYXdfQ3Vyc29yX1VuaWNvZGVMYWJlbChpbnQgdiwgaW50IGNvbG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGxlbiA9IERyYXdVbmljb2RlTGFiZWwodiwgY3Vyc29yWCwgY3Vyc29yWSwgY29sb3IpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBZHZhbmNlQ3Vyc29yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBpbnQgRHJhd1VuaWNvZGVMYWJlbChpbnQgdW5pY29kZSwgaW50IHgsIGludCB5LCBpbnQgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodW5pY29kZSA+PSAnYScgJiYgdW5pY29kZSA8PSAneicpIHtcclxuICAgICAgICAgICAgICAgIERyYXdDaGFyKChjaGFyKSh1bmljb2RlICsgJ0EnIC0gJ2EnKSwgeCwgeSwgY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVuaWNvZGUgPj0gJzAnICYmIHVuaWNvZGUgPD0gJzknKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEcmF3Q2hhcigoY2hhcikodW5pY29kZSksIHgsIHksIGNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0cmluZyBsYWJlbCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGlmICh1bmljb2RlID09IDMyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbCA9IFwiU1BBQ0VcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodW5pY29kZSA9PSBVbmljb2RlLkVzY2FwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWwgPSBcIkVTQ0FQRVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIERyYXcobGFiZWwsIHgsIHksIGNvbG9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGxhYmVsLkxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0KFRleHRCb2FyZCBvcmlnaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlBvc2l0aW9uID0gb3JpZ2luLlBvc2l0aW9uO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFdpZHRoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgSGVpZ2h0OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyc1tpLCBqXSA9IG9yaWdpbi5jaGFyc1tpLCBqXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkJhY2tDb2xvcltpLCBqXSA9IG9yaWdpbi5CYWNrQ29sb3JbaSwgal07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5UZXh0Q29sb3JbaSwgal0gPSBvcmlnaW4uVGV4dENvbG9yW2ksIGpdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJlc2l6ZShpbnQgdywgaW50IGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY2hhcnMgPT0gbnVsbCB8fCB3ID4gY2hhcnMuR2V0TGVuZ3RoKDApIHx8IGggPiBjaGFycy5HZXRMZW5ndGgoMSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNldE1heFNpemUodywgaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgV2lkdGggPSB3O1xyXG4gICAgICAgICAgICBIZWlnaHQgPSBoO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGFyIENoYXJBdChpbnQgaSwgaW50IGopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hhcnNbaSwgal07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRDdXJzb3JBdChpbnQgeCwgaW50IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjdXJzb3JYID0geDtcclxuICAgICAgICAgICAgY3Vyc29yWSA9IHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3X0N1cnNvcihzdHJpbmcgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIHYpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERyYXdfQ3Vyc29yKGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3X0N1cnNvcihzdHJpbmcgdiwgaW50IGNvbG9yLCBpbnQgYmFja0NvbG9yID0gTk9DSEFOR0VDT0xPUilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIHYpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERyYXdfQ3Vyc29yKGMsIGNvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBib29sIENhbkRyYXdfQ3Vyc29yX1NtYXJ0TGluZUJyZWFrKHN0cmluZyB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGN1cnJlbnRYID0gY3Vyc29yWDtcclxuICAgICAgICAgICAgaW50IGN1cnJlbnRZID0gY3Vyc29yWTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYm9vbCBsaW5lQnJlYWsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJvb2wgc2hvdWxkQ2hlY2tGb3JMaW5lQnJlYWtzID0gKGkgPT0gMCB8fCB2W2ldID09ICcgJykgJiYgaSAhPSB2Lkxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQ2hlY2tGb3JMaW5lQnJlYWtzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAxOyBqIDwgdi5MZW5ndGggLSBpOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiArIGN1cnJlbnRYID49IFdpZHRoKSAvL3JlYWNoIGVuZCBvZiB0aGUgbGluZSB3aXRob3V0IGVuZGluZyB0aGUgd29yZCwgc2hvdWxkIGxpbmUgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gPT0gJyAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsgLy9za2lwIHRocm91Z2ggdGhlIHNwYWNlIGlmIGl0J3MgYSBuZXcgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUJyZWFrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2W2kgKyBqXSA9PSAnICcpIC8vbmV3IHdvcmQgYmVnaW5zIHNvIG5vIG5lZWQgdG8gbGluZSBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsaW5lQnJlYWspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFkrKztcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50WCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50WCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRYID49IFdpZHRoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRZKys7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRYID49IFdpZHRoIHx8IGN1cnJlbnRZID49IEhlaWdodCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEcmF3Q3Vyc29yUmVzdWx0IERyYXdfQ3Vyc29yX1NtYXJ0TGluZUJyZWFrKHN0cmluZyB2LCBpbnQgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgb2ZmU3RhcnQgPSAwO1xyXG4gICAgICAgICAgICBpbnQgb2ZmRW5kID0gdi5MZW5ndGggLSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gRHJhd19DdXJzb3JfU21hcnRMaW5lQnJlYWsodiwgY29sb3IsIG9mZlN0YXJ0LCBvZmZFbmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERyYXdDdXJzb3JSZXN1bHQgRHJhd19DdXJzb3JfU21hcnRMaW5lQnJlYWsoc3RyaW5nIHYsIGludCBjb2xvciwgaW50IG9mZlN0YXJ0LCBpbnQgb2ZmRW5kLCBpbnQgeE5ld2xpbmUgPSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFZlY3RvcjJEIHN0YXJ0ID0gbmV3IFZlY3RvcjJEKEN1cnNvclgsIEN1cnNvclkpO1xyXG4gICAgICAgICAgICBpbnQgZW5kSW5kZXggPSBvZmZFbmQgKyAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gb2ZmU3RhcnQ7IGkgPCBlbmRJbmRleDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgb3JpZ2luWCA9IGN1cnNvclg7XHJcbiAgICAgICAgICAgICAgICBib29sIGxpbmVCcmVhayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBzaG91bGRDaGVja0ZvckxpbmVCcmVha3MgPSAoaSA9PSAwIHx8IHZbaV0gPT0gJyAnKSAmJiBpICE9IGVuZEluZGV4IC0gMTtcclxuICAgICAgICAgICAgICAgIGlmIChzaG91bGRDaGVja0ZvckxpbmVCcmVha3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDE7IGogPCBlbmRJbmRleCAtIGk7IGorKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqICsgb3JpZ2luWCA+PSBXaWR0aCkgLy9yZWFjaCBlbmQgb2YgdGhlIGxpbmUgd2l0aG91dCBlbmRpbmcgdGhlIHdvcmQsIHNob3VsZCBsaW5lIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2W2ldID09ICcgJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7IC8vc2tpcCB0aHJvdWdoIHRoZSBzcGFjZSBpZiBpdCdzIGEgbmV3IGxpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVCcmVhayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodltpICsgal0gPT0gJyAnKSAvL25ldyB3b3JkIGJlZ2lucyBzbyBubyBuZWVkIHRvIGxpbmUgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZUJyZWFrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEN1cnNvck5ld0xpbmUoeE5ld2xpbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgRHJhd19DdXJzb3IodltpXSwgY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFZlY3RvcjJEIGVuZCA9IG5ldyBWZWN0b3IyRChDdXJzb3JYLCBDdXJzb3JZKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEcmF3Q3Vyc29yUmVzdWx0KFBvc2l0aW9uVG9JbmRleChzdGFydCksIFBvc2l0aW9uVG9JbmRleChlbmQpLCBzdGFydCwgZW5kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQXV0b0ZpeEdyaWRkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgV2lkdGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBIZWlnaHQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoSXNHcmlkKGksIGopKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG1hc2sgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoSXNHcmlkKGkgLSAxLCBqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzayArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChJc0dyaWQoaSArIDEsIGopKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKElzR3JpZChpLCBqIC0gMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2sgKz0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoSXNHcmlkKGksIGogKyAxKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzayArPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWFzaylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzW2ksIGpdID0gVW5pY29kZS5Bc2NpaUdyaWRIb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzW2ksIGpdID0gVW5pY29kZS5Bc2NpaUdyaWRWZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnNbaSwgal0gPSBVbmljb2RlLkFzY2lpR3JpZFVwTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc1tpLCBqXSA9IFVuaWNvZGUuQXNjaWlHcmlkVXBSaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc1tpLCBqXSA9IFVuaWNvZGUuQXNjaWlHcmlkVXBSaWdodExlZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnNbaSwgal0gPSBVbmljb2RlLkFzY2lpR3JpZERvd25MZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc1tpLCBqXSA9IFVuaWNvZGUuQXNjaWlHcmlkRG93blJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc1tpLCBqXSA9IFVuaWNvZGUuQXNjaWlHcmlkRG93blJpZ2h0TGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgSXNHcmlkKGludCB4LCBpbnQgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHggPDAgfHwgeSA8MCB8fCB4Pj0gV2lkdGggfHwgeT49IEhlaWdodCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hhciBjID0gY2hhcnNbeCwgeV07XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIFVuaWNvZGUuZ3JpZHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjID09IGl0ZW0pIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgRHJhd0xpbmVzKGludCBoZXJvLCBwYXJhbXMgVmVjdG9yMkRbXSBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvaW50cy5MZW5ndGgtMTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEcmF3TGluZShwb2ludHNbaV0sIHBvaW50c1tpKzFdLCBoZXJvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBEcmF3TGluZShWZWN0b3IyRCBwb3MxLCBWZWN0b3IyRCBwb3MyLCBpbnQgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjaGFyIGMgPSBVbmljb2RlLkFzY2lpR3JpZEhvcjtcclxuICAgICAgICAgICAgaWYgKHBvczEuWSAhPSBwb3MyLlkpIGMgPSBVbmljb2RlLkFzY2lpR3JpZFZlcjtcclxuICAgICAgICAgICAgaW50IGhlaWdodCA9IHBvczIuWUludCAtIHBvczEuWUludDtcclxuICAgICAgICAgICAgLy9pZiAoaGVpZ2h0IDw9IDApIGhlaWdodCA9IDE7XHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IHBvczIuWEludCAtIHBvczEuWEludDtcclxuICAgICAgICAgICAgLy9pZiAod2lkdGggPD0gMCkgd2lkdGggPSAxO1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoYywgcG9zMS5YSW50LCBwb3MxLllJbnQsIHdpZHRoKzEsIGhlaWdodCsxLCBjb2xvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludCBQb3NpdGlvblRvSW5kZXgoVmVjdG9yMkQgc3RhcnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGludCkoc3RhcnQuWCArIHN0YXJ0LlkgKiBXaWR0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3T25lRGlnaXRfQ3Vyc29yKGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd19DdXJzb3IoKGNoYXIpKGkgKyAnMCcpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdfQ3Vyc29yKGNoYXIgYylcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBEcmF3Q2hhcihjLCBjdXJzb3JYLCBjdXJzb3JZKTtcclxuICAgICAgICAgICAgQWR2YW5jZUN1cnNvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd19DdXJzb3IoY2hhciBjLCBpbnQgY29sb3IsIGludCBiYWNrQ29sb3I9IE5PQ0hBTkdFQ09MT1IpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgRHJhd0NoYXIoYywgY3Vyc29yWCwgY3Vyc29yWSwgY29sb3IsIGJhY2tDb2xvcik7XHJcbiAgICAgICAgICAgIEFkdmFuY2VDdXJzb3IoKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZHZhbmNlQ3Vyc29yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGN1cnNvclgrKztcclxuICAgICAgICAgICAgaWYgKGN1cnNvclggPj0gV2lkdGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN1cnNvclggPSAwO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yWSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDdXJzb3JOZXdMaW5lKGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3Vyc29yWSsrO1xyXG4gICAgICAgICAgICBjdXJzb3JYID0geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdDaGFyKGNoYXIgdiwgaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh2ICE9IE5PQ0hBTkdFQ0hBUikge1xyXG4gICAgICAgICAgICAgICAgY2hhcnNbeCwgeV0gPSB2O1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3Q2hhcihjaGFyIHYsIGludCB4LCBpbnQgeSwgaW50IGNvbG9yLCBpbnQgYmFja0NvbG9yID0gTk9DSEFOR0VDT0xPUilcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBEcmF3Q2hhcih2LCB4LCB5KTtcclxuICAgICAgICAgICAgU2V0Q29sb3IoY29sb3IsIHgsIHkpO1xyXG4gICAgICAgICAgICBTZXRCYWNrQ29sb3IoYmFja0NvbG9yLCB4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0QWxsKGNoYXIgdGV4dCwgaW50IHRleHRDb2xvciA9IE5PQ0hBTkdFQ09MT1IsIGludCBiYWNrQ29sb3I9IE5PQ0hBTkdFQ09MT1IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQodGV4dCwgMCwgMCwgV2lkdGgsIEhlaWdodCwgdGV4dENvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTZXRBbGxJZlZpc2libGUoY2hhciB0ZXh0LCBpbnQgdGV4dENvbG9yID0gTk9DSEFOR0VDT0xPUiwgaW50IGJhY2tDb2xvciA9IE5PQ0hBTkdFQ09MT1IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWRJZlZpc2libGUodGV4dCwgMCwgMCwgV2lkdGgsIEhlaWdodCwgdGV4dENvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3V2l0aEdyaWQoc3RyaW5nIHRleHQsIGludCB4LCBpbnQgeSwgaW50IGdyaWRDb2xvciwgaW50IHRleHRDb2xvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IHRleHQuTGVuZ3RoO1xyXG4gICAgICAgICAgICBEcmF3R3JpZCh4LCB5LCB3aWR0aCArIDIsIDMsIGdyaWRDb2xvcik7XHJcbiAgICAgICAgICAgIERyYXcodGV4dCwgeCArIDEsIHkgKyAxLCB0ZXh0Q29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhdyhzdHJpbmcgdiwgaW50IHgsIGludCB5LCBpbnQgY29sb3IsIGludCBiYWNrQ29sb3IgPSBOT0NIQU5HRUNPTE9SKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgeDIgPSB4ICsgaTtcclxuICAgICAgICAgICAgICAgIGludCB5MiA9IHk7XHJcbiAgICAgICAgICAgICAgICBpZih4MiA+PSBXaWR0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4MiAtPSBXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICB5MisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgRHJhd0NoYXIodltpXSwgeDIsIHkyLCBjb2xvciwgYmFja0NvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd1dpdGhMaW5lYnJlYWtzKHN0cmluZyB2LCBpbnQgeCwgaW50IHksIGludCBuZXdsaW5lWCwgaW50IGNvbG9yLCBpbnQgYmFja0NvbG9yID0gTk9DSEFOR0VDT0xPUilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBsaW5lYnJlYWtzID0gMDtcclxuICAgICAgICAgICAgaW50IHhPZmZzZXRuZXdsaW5lcyA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHgyID0geCArIGkrIHhPZmZzZXRuZXdsaW5lcztcclxuICAgICAgICAgICAgICAgIGludCB5MiA9IHk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdoaWxlICh4MiA+PSBXaWR0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4MiA9IHgyLVdpZHRoK25ld2xpbmVYO1xyXG4gICAgICAgICAgICAgICAgICAgIHkyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmICh2W2ldID09ICdcXG4nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVicmVha3MrKztcclxuICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0bmV3bGluZXMgKz0gbmV3bGluZVggLSB4Mi0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBEcmF3Q2hhcih2W2ldLCB4MiwgeTIgKyBsaW5lYnJlYWtzLCBjb2xvciwgYmFja0NvbG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXcoSUVudW1lcmFibGU8Y2hhcj4gdiwgaW50IHgsIGludCB5LCBpbnQgY29sb3IsIGludCBiYWNrQ29sb3IgPSBOT0NIQU5HRUNPTE9SKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGNoYXI+KHYpOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERyYXdDaGFyKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PGNoYXI+KHYsaSksIHggKyBpLCB5LCBjb2xvciwgYmFja0NvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0dyaWQoaW50IHgsIGludCB5LCBpbnQgd2lkdGgsIGludCBoZWlnaHQsIGludCBjb2xvcilcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoVW5pY29kZS5Bc2NpaUdyaWRWZXIsIHgsIHksIDEsIGhlaWdodCwgY29sb3IpO1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoVW5pY29kZS5Bc2NpaUdyaWRWZXIsIHggKyB3aWR0aCAtIDEsIHksIDEsIGhlaWdodCwgY29sb3IpO1xyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoVW5pY29kZS5Bc2NpaUdyaWRIb3IsIHgsIHksIHdpZHRoLCAxLCBjb2xvcik7XHJcbiAgICAgICAgICAgIERyYXdSZXBlYXRlZChVbmljb2RlLkFzY2lpR3JpZEhvciwgeCwgeSArIGhlaWdodCAtIDEsIHdpZHRoLCAxLCBjb2xvcik7XHJcblxyXG4gICAgICAgICAgICBEcmF3UmVwZWF0ZWQoKGNoYXIpMjE4LCB4LCB5LCAxLCAxLCBjb2xvcik7XHJcbiAgICAgICAgICAgIERyYXdSZXBlYXRlZCgoY2hhcikxOTIsIHgsICAgICAgICAgICAgICB5K2hlaWdodC0xLCAxLCAxLCBjb2xvcik7XHJcbiAgICAgICAgICAgIERyYXdSZXBlYXRlZCgoY2hhcikyMTcsIHgrd2lkdGgtMSwgICAgICB5KyBoZWlnaHQgLSAxLCAxLCAxLCBjb2xvcik7XHJcbiAgICAgICAgICAgIERyYXdSZXBlYXRlZCgoY2hhcikxOTEsIHggKyB3aWR0aCAtIDEsICB5LCAxLCAxLCBjb2xvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3UmVwZWF0ZWQoY2hhciBjLCBpbnQgeCwgaW50IHksIGludCB3aWR0aCwgaW50IGhlaWdodCwgaW50IGNvbG9yLCBpbnQgYmFja0NvbG9yID0gTk9DSEFOR0VDT0xPUilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSB4OyBpIDwgeCArIHdpZHRoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSB5OyBqIDwgeSArIGhlaWdodDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIERyYXdDaGFyKGMsIGksIGosIGNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU2V0QmFja0NvbG9yKGJhY2tDb2xvciwgaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdSZXBlYXRlZElmVmlzaWJsZShjaGFyIGMsIGludCB4LCBpbnQgeSwgaW50IHdpZHRoLCBpbnQgaGVpZ2h0LCBpbnQgY29sb3IsIGludCBiYWNrQ29sb3IgPSBOT0NIQU5HRUNPTE9SKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IHg7IGkgPCB4ICsgd2lkdGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IHk7IGogPCB5ICsgaGVpZ2h0OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJzW2ksIGpdICE9IFRleHRCb2FyZC5JTlZJU0lCTEVDSEFSIHx8IFRleHRDb2xvcltpLGpdICE9IElOVklTSUJMRUNPTE9SKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEcmF3Q2hhcihjLCBpLCBqLCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoQmFja0NvbG9yW2ksal0gIT0gVGV4dEJvYXJkLklOVklTSUJMRUNPTE9SKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRCYWNrQ29sb3IoYmFja0NvbG9yLCBpLCBqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Q29sb3IoaW50IGNvbG9yLCBpbnQgeCwgaW50IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY29sb3IgIT0gTk9DSEFOR0VDT0xPUilcclxuICAgICAgICAgICAgICAgIFRleHRDb2xvclt4LCB5XSA9IGNvbG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0QmFja0NvbG9yKGludCBjb2xvciwgaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNvbG9yICE9IE5PQ0hBTkdFQ09MT1IpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJhY2tDb2xvclt4LCB5XSA9IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3KHN0cmluZyB2LCBpbnQgeDIsIGludCB5Miwgb2JqZWN0IGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3R3JpZChpbnQgdjEsIGludCB2MiwgaW50IHYzLCBpbnQgdjQsIG9iamVjdCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cnVjdCBEcmF3Q3Vyc29yUmVzdWx0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgaW50IFN0YXJ0SW5kZXg7XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgRW5kSW5kZXg7XHJcbiAgICAgICAgICAgIHB1YmxpYyBWZWN0b3IyRCBTdGFydFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBwdWJsaWMgVmVjdG9yMkQgRW5kUG9zaXRpb247XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgRHJhd0N1cnNvclJlc3VsdChpbnQgc3RhcnRJbmRleCwgaW50IGVuZEluZGV4LCBWZWN0b3IyRCBzdGFydFBvc2l0aW9uLCBWZWN0b3IyRCBlbmRQb3NpdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU3RhcnRJbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBFbmRJbmRleCA9IGVuZEluZGV4O1xyXG4gICAgICAgICAgICAgICAgU3RhcnRQb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBFbmRQb3NpdGlvbiA9IGVuZFBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZy5HYW1lU2NyZWVuO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGV4dFNjcmVlbk4gOiBJVGV4dFNjcmVlbiwgSU1vdXNlSW5wdXQsIElLZXlib2FyZElucHV0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFRleHRXb3JsZCBUZXh0V29ybGQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgVXBkYXRlKGZsb2F0IGYpIHsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dFNjcmVlbk4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0U2NyZWVuTihUZXh0V29ybGQgdGV4dFdvcmxkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGV4dFdvcmxkID0gdGV4dFdvcmxkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljICB2b2lkIEluaXQoaW50IHcsIGludCBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGV4dFdvcmxkID0gbmV3IFRleHRXb3JsZCgpO1xyXG4gICAgICAgICAgICBUZXh0V29ybGQuSW5pdCh3LCBoKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEJvYXJkIEdldEJvYXJkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUZXh0V29ybGQubWFpbkJvYXJkO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNb3VzZUV2ZW50KE1vdXNlRXZlbnRzIG1vdXNlRG93biwgaW50IHYxLCBpbnQgdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5wdXRVbmljb2RlIHsgc2V0OyBnZXQ7IH1cclxuICAgICAgICBpbnQgSW5wdXRBc051bWJlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBJbnB1dFVuaWNvZGUgLSA0ODtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIE1vdXNlSU8gbW91c2VJTyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXG4gICAgXG5wcml2YXRlIE1vdXNlSU8gX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX21vdXNlSU89bmV3IE1vdXNlSU8oKTt9XHJcblxyXG4gICAgcHVibGljIGludGVyZmFjZSBJVGV4dFNjcmVlblxyXG4gICAge1xyXG4gICAgICAgIFxyXG4gICAgICAgIFRleHRCb2FyZCBHZXRCb2FyZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZvaWQgVXBkYXRlKGZsb2F0IGYpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnRlcmZhY2UgSU1vdXNlSW5wdXRcclxuICAgIHtcclxuICAgICAgICB2b2lkIE1vdXNlRXZlbnQoTW91c2VFdmVudHMgZXZlbnRUeXBlLCBpbnQgdjEsIGludCB2Mik7XHJcbiAgICAgICAgTW91c2VJTyBtb3VzZUlPIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnRlcmZhY2UgSUtleWJvYXJkSW5wdXRcclxuICAgIHtcclxuICAgICAgICBpbnQgSW5wdXRVbmljb2RlIHsgc2V0OyB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVudW0gTW91c2VFdmVudHNcclxuICAgIHsgXHJcbiAgICAgICAgTW91c2VEb3duLFxyXG4gICAgICAgIE5vbmVcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVGV4dFNjcmVlbkhvbGRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBJVGV4dFNjcmVlbiBTY3JlZW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBJTW91c2VJbnB1dCBNb3VzZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElLZXlib2FyZElucHV0IEtleSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2V0QWxsKG9iamVjdCBkbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTY3JlZW4gPSBkbnMgYXMgSVRleHRTY3JlZW47XHJcbiAgICAgICAgICAgIE1vdXNlID0gZG5zIGFzIElNb3VzZUlucHV0O1xyXG4gICAgICAgICAgICBLZXkgPSBkbnMgYXMgSUtleWJvYXJkSW5wdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZDtcclxudXNpbmcgUGlkcm9oLkVDUztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UdXJuQmFzZWQuVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBjbGFzcyBBdHRhY2tQcmV2aWV3XHJcbiAgICB7XHJcbiAgICAgICAgRUNTTWFuYWdlciBlY3M7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBCYXR0bGVSZW5kZXIgcmVuZGVyO1xyXG4gICAgICAgIHByaXZhdGUgUXVpY2tBY2Nlc3Nvck9uZTxNb3ZlRGF0YT4gbW92ZURhdGFzO1xyXG4gICAgICAgIExpc3Q8VGV4dEVudGl0eT4gZW50aXRpZXMgPSBuZXcgTGlzdDxUZXh0RW50aXR5PigpO1xyXG4gICAgICAgIHByaXZhdGUgaW50IGN1cnJlbnRNb3ZlSWQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBdHRhY2tQcmV2aWV3KEVDU01hbmFnZXIgZWNzLCBCYXR0bGVSZW5kZXIgcmVuZGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5lY3MgPSBlY3M7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyID0gcmVuZGVyO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5hdHRhY2tQcmV2aWV3ID0gdGhpcztcclxuICAgICAgICAgICAgbW92ZURhdGFzID0gZWNzLlF1aWNrQWNjZXNzb3IxPE1vdmVEYXRhPigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNob3dQcmV2aWV3KGludCB1c2VyLCBpbnQgbW92ZUlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1vdmVJZCA9PSBjdXJyZW50TW92ZUlkKSByZXR1cm47XHJcbiAgICAgICAgICAgIEVuZCgpO1xyXG4gICAgICAgICAgICBjdXJyZW50TW92ZUlkID0gbW92ZUlkO1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiU1RBUlRcIik7XHJcblxyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwibW92ZSBcIittb3ZlSWQpO1xyXG4gICAgICAgICAgICB2YXIgbW92ZURhdGEgPSBtb3ZlRGF0YXMuQ29tcDEobW92ZUlkKTtcclxuICAgICAgICAgICAgVmVjdG9yMkQgcG9zID0gcmVuZGVyLkVudGl0eVNjcmVlblBvc2l0aW9uKHVzZXIpO1xyXG4gICAgICAgICAgICBSZWN0IGdyaWRSZWN0ID0gcmVuZGVyLkdldEdyaWRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBtb3ZlRGF0YS51bml0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gaXRlbS50aGluZ3NUb0hhcHBlbjtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0aGluZyBpbiBpdGVtcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpbmcgaXMgRGVhbERhbWFnZUFjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IHRoaW5nIGFzIERlYWxEYW1hZ2VBY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBkYS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFRhcmdldC5Ob25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBUYXJnZXQuU2VsZjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVGFyZ2V0LkNsb3Nlc3RUYXJnZXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFRhcmdldC5DbG9zZXN0VGFyZ2V0WDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJlZUVudGl0eSA9IHJlbmRlci50ZXh0V29ybGQuR2V0RnJlZUVudGl0eShncmlkUmVjdC5YK2dyaWRSZWN0LldpZHRoIC0gcG9zLlhJbnQsMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMuQWRkKGZyZWVFbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyZWVFbnRpdHkuU2V0UG9zaXRpb24ocG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVlRW50aXR5Lk9yaWdpbi5TZXRBbGwoVGV4dEJvYXJkLklOVklTSUJMRUNIQVIsIFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFRhcmdldC5BcmVhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBFbmQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TW92ZUlkID49IDApIHtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoXCJFTkRcIik7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50TW92ZUlkID0gLTE7XHJcbiAgICAgICAgICAgICAgICByZW5kZXIudGV4dFdvcmxkLkZyZWUoZW50aXRpZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZDtcclxudXNpbmcgUGlkcm9oLkVDUztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UdXJuQmFzZWQuVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFwcEhhbmRsaW5nXHJcbiAgICB7XHJcbiAgICAgICAgQmF0dGxlUmVuZGVyIGJhdHRsZVJlbmRlcjtcclxuICAgICAgICBFQ1NNYW5hZ2VyIGVjcztcclxuICAgICAgICBwdWJsaWMgQWN0aW9uIEhhbmRsZTtcclxuICAgICAgICBMaXN0PEhhcHBIYW5kbGVyPiBoYW5kbGVycyA9IG5ldyBMaXN0PEhhcHBIYW5kbGVyPigpO1xyXG4gICAgICAgIHByaXZhdGUgUXVpY2tBY2Nlc3NvclR3bzxIYXBwVGFncywgVGltZVN0YW1wU25hcD4gaGFwcHM7XHJcbiAgICAgICAgcHJpdmF0ZSBmbG9hdCBoaWdoZXN0SGFuZGxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGhhbmRsZVN0YXRlLmhpZ2hlc3RIYW5kbGVkOyB9XHJcbiAgICAgICAgICAgIHNldCB7IGhhbmRsZVN0YXRlLmhpZ2hlc3RIYW5kbGVkID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpdmF0ZSBIYXBwSGFuZGxlU3RhdGUgaGFuZGxlU3RhdGUgPSBuZXcgSGFwcEhhbmRsZVN0YXRlKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXBwSGFuZGxpbmcoQmF0dGxlUmVuZGVyIGJhdHRsZVJlbmRlciwgQmF0dGxlU2V0dXAgYmF0dGxlU2V0dXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmJhdHRsZVJlbmRlciA9IGJhdHRsZVJlbmRlcjtcclxuICAgICAgICAgICAgdmFyIHdvcmxkID0gYmF0dGxlUmVuZGVyLnRleHRXb3JsZDtcclxuICAgICAgICAgICAgdmFyIHBvc0FuaW0gPSB3b3JsZC5BZGRBbmltYXRpb248Z2xvYmFsOjpQaWRyb2guVGV4dFJlbmRlcmluZy5Qb3NpdGlvbkFuaW1hdGlvbj4obmV3IFBvc2l0aW9uQW5pbWF0aW9uKCkpO1xyXG4gICAgICAgICAgICB2YXIgYmxpbmtBbmltID0gd29ybGQuQWRkQW5pbWF0aW9uPGdsb2JhbDo6UGlkcm9oLlRleHRSZW5kZXJpbmcuQmxpbmtBbmltPihuZXcgQmxpbmtBbmltKCkpO1xyXG4gICAgICAgICAgICB2YXIgZGVsYXlBbmltID0gd29ybGQuQWRkQW5pbWF0aW9uPGdsb2JhbDo6UGlkcm9oLlRleHRSZW5kZXJpbmcuRGVsYXlzQW5pbWF0aW9uPihuZXcgRGVsYXlzQW5pbWF0aW9uKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGJhdHRsZVNldHVwLmVjcztcclxuICAgICAgICAgICAgdGhpcy5lY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudChoYW5kbGVTdGF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBiYXR0bGVNYWluID0gYmF0dGxlU2V0dXAuYmF0dGxlTWFpbjtcclxuICAgICAgICAgICAgdmFyIHRpbWUgPSBiYXR0bGVTZXR1cC50aW1lU3RhbXA7XHJcbiAgICAgICAgICAgIGJhdHRsZVJlbmRlci5IYXBwSGFuZGxpbmcgPSB0aGlzO1xyXG4gICAgICAgICAgICBoYXBwcyA9IGVjcy5RdWlja0FjY2Vzc29yMjxIYXBwVGFncywgVGltZVN0YW1wU25hcD4oKTtcclxuICAgICAgICAgICAgaGlnaGVzdEhhbmRsZWQgPSAtMTtcclxuXHJcblxyXG4gICAgICAgICAgICBoYW5kbGVycy5BZGQobmV3IEhhcHBIYW5kbGVyKChlKSA9PlxyXG4gICAgICAgICAgICB7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGFtYWdlID0gZS5HZXRDb21wb25lbnQ8SGFwcERhbWFnZURhdGE+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFtb3VudCA9IGRhbWFnZS5hbW91bnQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBzdHJpbmcgbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGlmIChkYW1hZ2UuZWxlbWVudGFsQmxvY2spXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHRleHQgPSBkYW1hZ2UuZGFtYWdlRS5Ub1N0cmluZygpLlRvVXBwZXIoKSArIFwiIEJMT0NLIFwiICsgZGFtYWdlLnRhcmdldEUuVG9TdHJpbmcoKS5Ub1VwcGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlMiA9IGJhdHRsZVJlbmRlci50ZXh0V29ybGQuR2V0VGVtcEVudGl0eSh0ZXh0Lkxlbmd0aCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBjb2xvckUgPSBCYXR0bGVSZW5kZXIuRWxlbWVudFRvUHJvakNvbG9yKGRhbWFnZS5kYW1hZ2VFKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTIuT3JpZ2luLkRyYXcodGV4dCwgMCwgMCwgY29sb3JFKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsaW5rQW5pbS5BZGQobWVzc2FnZTIuQW5pbUJhc2UoMC42ZiksIEJsaW5rQW5pbS5CbGlua0RhdGEuRnJvbnRDb2xvcihjb2xvckUsIDAuMmYpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG9mZnNldCA9IChpbnQpTWF0aC5GbG9vcigtdGV4dC5MZW5ndGggLyAyZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UyLlNldFBvc2l0aW9uKGJhdHRsZVJlbmRlci5iYXR0bGVyUmVuZGVyc1tkYW1hZ2UudGFyZ2V0XS5HZXRQb3NpdGlvbigpICsgbmV3IFZlY3RvcjJEKCsxICsgb2Zmc2V0LCAtMykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheUFuaW0uRGVsYXkoMC42NWYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBiYXR0bGVSZW5kZXIuQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihiYXR0bGVNYWluLmVudGl0aWVzW2RhbWFnZS50YXJnZXRdLnBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibGFzdCA9IGJhdHRsZVJlbmRlci50ZXh0V29ybGQuR2V0VGVtcEVudGl0eSg1LCA1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhc3QuU2V0UG9zaXRpb24ocG9zICsgbmV3IFZlY3RvcjJEKC0yLCAtMikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhc3QuT3JpZ2luLkRyYXdSZWN0KCcgJywgMCwgMCwgNSwgNSwgVGV4dEJvYXJkLklOVklTSUJMRUNPTE9SLCBCYXR0bGVSZW5kZXIuRWxlbWVudFRvUHJvakNvbG9yKGRhbWFnZS5kYW1hZ2VFKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmxhc3QuT3JpZ2luLkRyYXdSZXBlYXRlZCgnICcsIDEsIDEsIDMsIDMsIFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUiwgQmF0dGxlUmVuZGVyLkVsZW1lbnRUb1Byb2pDb2xvcihkYW1hZ2UuZGFtYWdlRSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibGlua0FuaW0uQWRkKGJsYXN0LkFuaW1CYXNlKDAuMmYpLCBCbGlua0FuaW0uQmxpbmtEYXRhLkJhY2tDb2xvcihCYXR0bGVSZW5kZXIuQ29sb3JzLmlucHV0S2V5LCAwLjA1ZiwgZmFsc2UpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGRhbWFnZS5kYW1hZ2VFICsgXCIgYWJzb3JicyBcIiArIGRhbWFnZS50YXJnZXRFICsgXCJcXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IGJhdHRsZVJlbmRlci5HZXRFbnRpdHlOYW1lKGRhbWFnZS50YXJnZXQpICsgXCIgaXMgdW5hZmVjdHRlZC5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9tZXNzYWdlID0gYmF0dGxlUmVuZGVyLkdldEVudGl0eU5hbWUoZGFtYWdlLnRhcmdldCkgKyBcIiBnZXRzIGhpdCFcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGFtYWdlLnN1cGVyRWZmZWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyB0ZXh0ID0gZGFtYWdlLmRhbWFnZUUuVG9TdHJpbmcoKS5Ub1VwcGVyKCkgKyBcIiBCUkVBSyBcIiArIGRhbWFnZS50YXJnZXRFLlRvU3RyaW5nKCkuVG9VcHBlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UyID0gYmF0dGxlUmVuZGVyLnRleHRXb3JsZC5HZXRUZW1wRW50aXR5KHRleHQuTGVuZ3RoLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBjb2xvckUgPSBCYXR0bGVSZW5kZXIuRWxlbWVudFRvUHJvakNvbG9yKGRhbWFnZS5kYW1hZ2VFKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UyLk9yaWdpbi5EcmF3KHRleHQsIDAsIDAsIGNvbG9yRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxpbmtBbmltLkFkZChtZXNzYWdlMi5BbmltQmFzZSgwLjQ1ZiksIEJsaW5rQW5pbS5CbGlua0RhdGEuRnJvbnRDb2xvcihjb2xvckUsIDAuMmYpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBvZmZzZXQgPSAoaW50KU1hdGguRmxvb3IoLXRleHQuTGVuZ3RoIC8gMmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTIuU2V0UG9zaXRpb24oYmF0dGxlUmVuZGVyLmJhdHRsZXJSZW5kZXJzW2RhbWFnZS50YXJnZXRdLkdldFBvc2l0aW9uKCkgKyBuZXcgVmVjdG9yMkQoKzEgKyBvZmZzZXQsIC0yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheUFuaW0uRGVsYXkoMC42NWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9tZXNzYWdlID0gZGFtYWdlLmRhbWFnZUUgKyBcIiByYXZhZ2VzIFwiICsgZGFtYWdlLnRhcmdldEUgKyBcIlxcblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL21lc3NhZ2UgKz0gYmF0dGxlUmVuZGVyLkdldEVudGl0eU5hbWUoZGFtYWdlLnRhcmdldCkrXCIgdGFrZXMgYSBoZWF2eSBoaXQhXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBiYXR0bGVSZW5kZXIuQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihiYXR0bGVNYWluLmVudGl0aWVzW2RhbWFnZS50YXJnZXRdLnBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxhc3QgPSBiYXR0bGVSZW5kZXIudGV4dFdvcmxkLkdldFRlbXBFbnRpdHkoNSwgNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFzdC5TZXRQb3NpdGlvbihwb3MgKyBuZXcgVmVjdG9yMkQoLTIsIC0yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhc3QuT3JpZ2luLkRyYXdSZXBlYXRlZCgnICcsIDEsIDEsIDMsIDMsIFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUiwgQmF0dGxlUmVuZGVyLkNvbG9ycy5FbmVteSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGlua0FuaW0uQWRkKGJsYXN0LkFuaW1CYXNlKDAuMmYpLCBCbGlua0FuaW0uQmxpbmtEYXRhLkJhY2tDb2xvcihCYXR0bGVSZW5kZXIuRWxlbWVudFRvUHJvakNvbG9yKGRhbWFnZS5kYW1hZ2VFKSwgMC4wNWYpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL21lc3NhZ2UgPSBiYXR0bGVSZW5kZXIuR2V0RW50aXR5TmFtZShkYW1hZ2UudGFyZ2V0KSArIFwiIGdldHMgaHVydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBiYXR0bGVSZW5kZXIuQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihiYXR0bGVNYWluLmVudGl0aWVzW2RhbWFnZS50YXJnZXRdLnBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bWJlciA9IGJhdHRsZVJlbmRlci50ZXh0V29ybGQuR2V0VGVtcEVudGl0eSgxLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVmVjdG9yMkQgaW5pdGlhbFBvcyA9IHBvcyArIG5ldyBWZWN0b3IyRCgwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXIuU2V0UG9zaXRpb24oaW5pdGlhbFBvcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlci5PcmlnaW4uRHJhd09uZURpZ2l0KGFtb3VudCwgMCwgMCwgQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NBbmltLkFkZChudW1iZXIuQW5pbUJhc2UoMC42ZiksIG5ldyBQb3NpdGlvbkFuaW1hdGlvbi5Qb3NpdGlvbkRhdGEoaW5pdGlhbFBvcywgaW5pdGlhbFBvcyArIG5ldyBWZWN0b3IyRCgwLCAtMykpKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2JsaW5rQW5pbS5BZGQobnVtYmVyLkFuaW1CYXNlKDFmKSwgQmxpbmtBbmltLkJsaW5rRGF0YS5DaGFyKCcgJywgNWYpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGJhdHRsZVJlbmRlci5TaG93TWVzc2FnZShtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZW5kZXIgPSBiYXR0bGVSZW5kZXIuYmF0dGxlclJlbmRlcnNbZGFtYWdlLnRhcmdldF07XHJcblxyXG4gICAgICAgICAgICAgICAgLy92YXIgZmUgPSBiYXR0bGVSZW5kZXIudGV4dFdvcmxkLkdldFRlbXBFbnRpdHkoZGVmZW5kZXIuV2lkdGgsIGRlZmVuZGVyLkhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhbWFnZS5zdXBlckVmZmVjdGl2ZSAmJiAhZGFtYWdlLmVsZW1lbnRhbEJsb2NrIFxyXG4gICAgICAgICAgICAgICAgLy8mJiBiYXR0bGVNYWluLmVudGl0aWVzW2RhbWFnZS50YXJnZXRdLkFsaXZlXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlID0gYmF0dGxlUmVuZGVyLnRleHRXb3JsZC5HZXRUZW1wRW50aXR5KDMsIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYWNrQ29sb3IgPSBCYXR0bGVSZW5kZXIuRWxlbWVudFRvUHJvakNvbG9yKGRhbWFnZS5kYW1hZ2VFKTtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrQ29sb3IgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB4Q29sb3IgPSBCYXR0bGVSZW5kZXIuRWxlbWVudFRvUHJvakNvbG9yKGRhbWFnZS5kYW1hZ2VFKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyIGRhbWFnZUNoYXIgPSAnWCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZmUuT3JpZ2luLkRyYXdDaGFyKGRhbWFnZUNoYXIsIDEsIDAsIHhDb2xvciwgYmFja0NvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBmZS5PcmlnaW4uRHJhd0NoYXIoZGFtYWdlQ2hhciwgMSwgMSwgeENvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlLk9yaWdpbi5EcmF3Q2hhcihkYW1hZ2VDaGFyLCAxLCAyLCB4Q29sb3IsIGJhY2tDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZmUuT3JpZ2luLkRyYXdDaGFyKGRhbWFnZUNoYXIsIDAsIDEsIHhDb2xvciwgYmFja0NvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBmZS5PcmlnaW4uRHJhd0NoYXIoZGFtYWdlQ2hhciwgMiwgMSwgeENvbG9yLCBiYWNrQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZmUuT3JpZ2luLkRyYXdDaGFyKFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlLk9yaWdpbi5Qb3NpdGlvbiA9IGRlZmVuZGVyLkdldFBvc2l0aW9uKCkgKyBuZXcgVmVjdG9yMkQoLTEsIC0xKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmxpbmtBbmltLkFkZChmZS5BbmltQmFzZSgwLjM1ZiksIEJsaW5rQW5pbS5CbGlua0RhdGEuQ2hhcignWicsIDAuMDVmKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9ibGlua0FuaW0uQWRkKGZlLkFuaW1CYXNlKDAuMzVmKSwgQmxpbmtBbmltLkJsaW5rRGF0YS5CYWNrQ29sb3IoQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvLCAwLjA1ZikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIkNIQU5HRSBFTEVcIik7XHJcblxyXG4gICAgICAgICAgICB9LCBNaXNjSGFwcFRhZ3MuRGFtYWdlKSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXJzLkFkZChuZXcgSGFwcEhhbmRsZXIoKGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBobWQgPSBlLkdldENvbXBvbmVudDxIYXBwTW92ZURhdGE+KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHN0cmluZyB0ZXh0ID0gaG1kLmVsZW1lbnQuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gYmF0dGxlUmVuZGVyLnRleHRXb3JsZC5HZXRUZW1wRW50aXR5KHRleHQuTGVuZ3RoLCAxKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuT3JpZ2luLkRyYXcodGV4dCwgMCwgMCwgQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvKTtcclxuICAgICAgICAgICAgICAgIGJsaW5rQW5pbS5BZGQobWVzc2FnZS5BbmltQmFzZSgwLjVmKSwgQmxpbmtBbmltLkJsaW5rRGF0YS5Gcm9udENvbG9yKEJhdHRsZVJlbmRlci5Db2xvcnMuSW5wdXREZXNjcmlwdGlvbiwgMC4xNWYpKTtcclxuICAgICAgICAgICAgICAgIGludCBvZmZzZXQgPSAoaW50KU1hdGguRmxvb3IoLXRleHQuTGVuZ3RoIC8gMmYpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5TZXRQb3NpdGlvbihiYXR0bGVSZW5kZXIuYmF0dGxlclJlbmRlcnNbaG1kLnVzZXJdLkdldFBvc2l0aW9uKCkgKyBuZXcgVmVjdG9yMkQoKzEgKyBvZmZzZXQsIC0xKSk7XHJcblxyXG4gICAgICAgICAgICB9LCBNaXNjSGFwcFRhZ3MuQ2hhbmdlRWxlbWVudCkpO1xyXG4gICAgICAgICAgICBoYW5kbGVycy5BZGQobmV3IEhhcHBIYW5kbGVyKChlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG1kID0gZS5HZXRDb21wb25lbnQ8SGFwcE1vdmVEYXRhPigpO1xyXG4gICAgICAgICAgICAgICAgLy92YXIgZGVmZW5kZXIgPSBiYXR0bGVSZW5kZXIuYmF0dGxlclJlbmRlcnNbaG1kLnRhcmdldF07XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zID0gYmF0dGxlUmVuZGVyLkJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24oYmF0dGxlTWFpbi5lbnRpdGllc1tobWQudXNlcl0ucG9zKTtcclxuICAgICAgICAgICAgICAgIHZhciBibGFzdCA9IGJhdHRsZVJlbmRlci50ZXh0V29ybGQuR2V0VGVtcEVudGl0eSgzLCAzKTtcclxuICAgICAgICAgICAgICAgIGJsYXN0LlNldFBvc2l0aW9uKHBvcyArIG5ldyBWZWN0b3IyRCgtMSwgLTEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBibGFzdC5PcmlnaW4uRHJhd1JlcGVhdGVkKCcgJywgMSwgMSwgMSwgMSwgVGV4dEJvYXJkLklOVklTSUJMRUNPTE9SLCBCYXR0bGVSZW5kZXIuQ29sb3JzLkVuZW15KTtcclxuICAgICAgICAgICAgICAgIGJsaW5rQW5pbS5BZGQoYmxhc3QuQW5pbUJhc2UoMC4yZiksIEJsaW5rQW5pbS5CbGlua0RhdGEuQmFja0NvbG9yKEJhdHRsZVJlbmRlci5Db2xvcnMuSGVybywgMC4wNWYpKTtcclxuICAgICAgICAgICAgICAgIC8vZGVsYXlBbmltLkRlbGF5KDUpO1xyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlKFwiREVBVEhcIik7XHJcbiAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoXCJDSEFOR0UgRUxFXCIpO1xyXG5cclxuICAgICAgICAgICAgfSwgTWlzY0hhcHBUYWdzLkRlYXRoKSk7XHJcbiAgICAgICAgICAgIEFjdGlvbjxFbnRpdHk+IG1vdmVIYW5kbGUgPSAoZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIkhBTkRMRSEzXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhtZCA9IGUuR2V0Q29tcG9uZW50PEhhcHBNb3ZlRGF0YT4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBobWYgPSBlLkdldENvbXBvbmVudDxIYXBwTW92ZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBpbnQgZUlkID0gaG1kLnVzZXI7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW92ZXIgPSBiYXR0bGVNYWluLmVudGl0aWVzW2VJZF07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IG1vdmVyLlBvc2l0aW9uVjJEO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvczIgPSBobWYubW92ZVRvO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc0YgPSAocG9zICsgcG9zMikgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBmZSA9IGJhdHRsZVJlbmRlci5iYXR0bGVyUmVuZGVyc1tlSWRdO1xyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIk1vdmUgZmFpbFwiKTtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoXCJIQVBQIE1PVkUgSEFORExFXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhtZi5zdWNjZXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlY3RvcjJEIGZpbmFsUG9zU2NyZWVuID0gYmF0dGxlUmVuZGVyLkJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24oaG1mLm1vdmVUbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zQW5pbS5BZGQoZmUuQW5pbUJhc2UoMC4yZiksIG5ldyBQb3NpdGlvbkFuaW1hdGlvbi5Qb3NpdGlvbkRhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgYmF0dGxlUmVuZGVyLkJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24oaG1mLm1vdmVGcm9tKSxcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbFBvc1NjcmVlbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlLlNldFBvc2l0aW9uKGZpbmFsUG9zU2NyZWVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NBbmltLkFkZChmZS5BbmltQmFzZSgwLjJmKSwgbmV3IFBvc2l0aW9uQW5pbWF0aW9uLlBvc2l0aW9uRGF0YShcclxuICAgICAgICAgICAgICAgICAgICBiYXR0bGVSZW5kZXIuQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihobWYubW92ZUZyb20pLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhdHRsZVJlbmRlci5CYXR0bGVFbnRpdHlUb1NjcmVlblBvc2l0aW9uKHBvc0YpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaGFuZGxlcnMuQWRkKG5ldyBIYXBwSGFuZGxlcihtb3ZlSGFuZGxlLCBNb3ZlRGF0YVRhZ3MuTW92ZW1lbnQpKTtcclxuXHJcbiAgICAgICAgICAgIGhhbmRsZXJzLkFkZChuZXcgSGFwcEhhbmRsZXIoKGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBoYSA9IGUuR2V0Q29tcG9uZW50PEhhcHBBcmVhPigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhtZCA9IGUuR2V0Q29tcG9uZW50PEhhcHBNb3ZlRGF0YT4oKTtcclxuICAgICAgICAgICAgICAgIGludCBlSWQgPSBobWQudXNlcjtcclxuICAgICAgICAgICAgICAgIHZhciBtb3ZlciA9IGJhdHRsZU1haW4uZW50aXRpZXNbZUlkXTtcclxuICAgICAgICAgICAgICAgIC8vdmFyIHVzZXJSZW5kZXIgPSBiYXR0bGVSZW5kZXIuYmF0dGxlckVudGl0aWVzW2VJZF07XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJlYSA9IGhhLmFyZWE7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRzID0gYXJlYS5wb2ludHM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHVzZUVmZmVjdCA9IHdvcmxkLkdldFRlbXBFbnRpdHkoMSwgMSk7XHJcbiAgICAgICAgICAgICAgICB1c2VFZmZlY3QuU2V0UG9zaXRpb24oYmF0dGxlUmVuZGVyLkJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24obW92ZXIucG9zKSk7XHJcbiAgICAgICAgICAgICAgICBibGlua0FuaW0uQWRkKHVzZUVmZmVjdC5BbmltQmFzZSgwLjVmKSwgQmxpbmtBbmltLkJsaW5rRGF0YS5CYWNrQ29sb3IoQmF0dGxlUmVuZGVyLkVsZW1lbnRUb1Byb2pDb2xvcihobWQuZWxlbWVudCksIDAuMTVmKSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBwb2ludHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eSA9IHdvcmxkLkdldFRlbXBFbnRpdHkoMSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsUG9zID0gaXRlbSAqIG5ldyBWZWN0b3IyRChoYS5taXJyb3JpbmdYLCAxKSArIGhhLm9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxQb3MuWCA8IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbFBvcy5ZIDwgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsUG9zLlggPiA1KSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxQb3MuWSA+IDIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShmaW5hbFBvcy5YSW50KTtcclxuICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoZmluYWxQb3MuWUludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGJhdHRsZVJlbmRlci5CYXR0bGVFbnRpdHlUb1NjcmVlblBvc2l0aW9uKGZpbmFsUG9zKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuU2V0UG9zaXRpb24ocG9zLlhJbnQsIHBvcy5ZSW50KTtcclxuICAgICAgICAgICAgICAgICAgICBibGlua0FuaW0uQWRkKGVudGl0eS5BbmltQmFzZSgwLjVmKSwgQmxpbmtBbmltLkJsaW5rRGF0YS5CYWNrQ29sb3IoQmF0dGxlUmVuZGVyLkVsZW1lbnRUb1Byb2pDb2xvcihobWQuZWxlbWVudCksIDAuMTVmKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIE1vdmVEYXRhVGFncy5Cb21iKSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXJzLkFkZChuZXcgSGFwcEhhbmRsZXIoKGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBoYSA9IGUuR2V0Q29tcG9uZW50PEhhcHBTaG9vdD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBtZCA9IGUuR2V0Q29tcG9uZW50PEhhcHBNb3ZlRGF0YT4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChoYSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIEJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50ID0gbWQuZWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0RW50aXR5IGZlID0gYmF0dGxlUmVuZGVyLkdldFByb2pUZXh0RW50aXR5KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBoYS5zdGFydDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zMiA9IGhhLmVuZDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeERpcyA9IE1hdGguQWJzKHBvcy5YIC0gcG9zMi5YKTtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCB0aW1lViA9IChmbG9hdCl4RGlzICogMC4xZjtcclxuICAgICAgICAgICAgICAgICAgICBwb3NBbmltLkFkZChmZS5BbmltQmFzZSh0aW1lViksIG5ldyBQb3NpdGlvbkFuaW1hdGlvbi5Qb3NpdGlvbkRhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXR0bGVSZW5kZXIuQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihwb3MpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0dGxlUmVuZGVyLkJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24ocG9zMikpKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSwgTW92ZURhdGFUYWdzLlNob290KSk7XHJcblxyXG4gICAgICAgICAgICBIYW5kbGUgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiSEFORExFIVwiKTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IG5ld0hpZ2hlc3RIYW5kbGVkID0gaGlnaGVzdEhhbmRsZWQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGhhcHBzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIkFEVlwiK2JhdHRsZVJlbmRlci5DYW5BZHZhbmNlR3JhcGhpY3MoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXR0bGVSZW5kZXIuQ2FuQWR2YW5jZUdyYXBoaWNzKCkpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWdzID0gaGFwcHMuQ29tcDEoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZiAoaGFwcHMuQ29tcDIoaSkuVGltZVNuYXAgPiBoaWdoZXN0SGFuZGxlZClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IGhpZ2hlc3RIYW5kbGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9uZXdIaWdoZXN0SGFuZGxlZCA9IGhhcHBzLkNvbXAyKGkpLlRpbWVTbmFwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdIaWdoZXN0SGFuZGxlZCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIkhhbmRsZWRcIitpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShcIkhBTkRMRSFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaGFuIGluIGhhbmRsZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiSEFORExFIXhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuLkNhbkhhbmRsZSh0YWdzLnRhZ3MpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIkhhbmRsZWRYXCIgKyBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKGhhcHBzLkNvbXAyKGkpLlRpbWVTbmFwICsgXCIgLSBcIiArIHRpbWUuQ3VycmVudFNuYXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoXCJIQU5ETEUhMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW4uSGFuZGxlcihoYXBwcy5FbnRpdHkoaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFuZGxlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gdGFncy50YWdzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoXCJOb3QgaGFuZGxlZCB0YWcgXCIgKyB0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKGhhcHBzLkNvbXAyKGkpLlRpbWVTbmFwK1wiIC0gXCIrIHRpbWUuQ3VycmVudFNuYXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhpZ2hlc3RIYW5kbGVkID0gbmV3SGlnaGVzdEhhbmRsZWQ7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIEhhcHBIYW5kbGVTdGF0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGZsb2F0IGhpZ2hlc3RIYW5kbGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsYXNzIEhhcHBIYW5kbGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBMaXN0PGludD4gbmVjZXNzYXJ5VGFncyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgaW50ZXJuYWwgQWN0aW9uPEVudGl0eT4gSGFuZGxlcjtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBIYXBwSGFuZGxlcihBY3Rpb248RW50aXR5PiBoYW5kbGVyLCBwYXJhbXMgb2JqZWN0W10gdGFncylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gdGFncylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuZWNlc3NhcnlUYWdzLkFkZChDb252ZXJ0LlRvSW50MzIodCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5IYW5kbGVyID0gaGFuZGxlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50ZXJuYWwgYm9vbCBDYW5IYW5kbGUoTGlzdDxpbnQ+IHRhZ3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIG5lY2Vzc2FyeVRhZ3MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWdzLkNvbnRhaW5zKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBib29sIElzRG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gaGlnaGVzdEhhbmRsZWQgPj0gaGFwcHMuTGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guVHVybkJhc2VkLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhlbHBTY3JlZW5JbnRlZ3JhdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIHNob3dSZXF1ZXN0O1xyXG4gICAgICAgIGludGVybmFsIElUZXh0U2NyZWVuXyBjYWxsZXI7XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2hvdyhJVGV4dFNjcmVlbl8gc2NyZWVuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2hvd1JlcXVlc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYWxsZXIgPSBzY3JlZW47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZDtcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nLkdhbWVTY3JlZW47XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UdXJuQmFzZWQuVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBjbGFzcyBIZWxwU2NyZWVuIDogSVRleHRTY3JlZW5fXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGludCBJbnB1dCB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBrZXlEb3duVW5pY29kZSB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgcHVibGljIEtleWJvYXJkSU8gS2V5Ym9hcmQgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBNb3VzZUlPIE1vdXNlIHsgc2V0OyBnZXQ7IH1cclxuICAgICAgICBUZXh0V29ybGQgdGV4dFdvcmxkO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgSGVscFNjcmVlbk1vZGVsIG1vZGVsO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgTGlzdDxNb3ZlTWV0YURhdGE+IG1vdmVSZW5kZXJzO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgTGlzdDxNb3ZlRGF0YT4gbW92ZURhdGFzO1xyXG4gICAgICAgIGNoYXIgTGVhdmVCdXR0b247XHJcbiAgICAgICAgcHVibGljIGJvb2wgd2FubmFMZWF2ZTtcclxuICAgICAgICBwcml2YXRlIFRleHRFbnRpdHkgZXhwbGFuYXRpb25FbnRpdHk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIZWxwU2NyZWVuKEhlbHBTY3JlZW5Nb2RlbCBoZWxwTW9kZWwsIExpc3Q8TW92ZU1ldGFEYXRhPiBtb3ZlUmVuZGVycywgTGlzdDxNb3ZlRGF0YT4gbW92ZURhdGFzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0V29ybGQgPSBuZXcgVGV4dFdvcmxkKCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5Jbml0KEdhbWVNYWluLldpZHRoLCBHYW1lTWFpbi5IZWlnaHQpO1xyXG4gICAgICAgICAgICBtb2RlbCA9IGhlbHBNb2RlbDtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlUmVuZGVycyA9IG1vdmVSZW5kZXJzO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVEYXRhcyA9IG1vdmVEYXRhcztcclxuICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5TZXRBbGwoVGV4dEJvYXJkLklOVklTSUJMRUNIQVIsIEJhdHRsZVJlbmRlci5Db2xvcnMuQmFja0NvbW1hbmQsIEJhdHRsZVJlbmRlci5Db2xvcnMuQmFja0NvbW1hbmQpO1xyXG4gICAgICAgICAgICBleHBsYW5hdGlvbkVudGl0eSA9IHRleHRXb3JsZC5HZXRGcmVlRW50aXR5KEdhbWVNYWluLldpZHRoLTQsIDM1KTtcclxuICAgICAgICAgICAgZXhwbGFuYXRpb25FbnRpdHkuU2V0UG9zaXRpb24oMiwgNCk7XHJcbiAgICAgICAgICAgIC8vZXhwbGFuYXRpb25FbnRpdHkuT3JpZ2luLkRyYXcoXCJTU1NfX1NTU1NEQVNEQVNEQVNcIiwgMCwwLCBCYXR0bGVSZW5kZXIuQ29sb3JzLklucHV0RGVzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhdyhmbG9hdCBmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0ga2V5RG93blVuaWNvZGU7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dCA9PSBMZWF2ZUJ1dHRvbikgd2FubmFMZWF2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dCA9PSAnSCcpIHdhbm5hTGVhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQgPT0gJ2gnKSB3YW5uYUxlYXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKGlucHV0ID09IFVuaWNvZGUuRXNjYXBlKSB3YW5uYUxlYXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL3RleHRXb3JsZC5tYWluQm9hcmQuUmVzZXQoKTtcclxuICAgICAgICAgICAgaW50IHBvcyA9IDA7XHJcbiAgICAgICAgICAgIC8vdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3V2l0aExpbmVicmVha3MoXCJJbnB1dCB5b3VyIGNvbW1hbmRzIGFuZCB3YXRjaCB0aGUgdHVybiBwbGF5IG91dC4gWW91IGNhbiBzZWUgZXZlcnl0aGluZyB5b3VyIGVuZW1pZXMgd2lsbCBkb1xcblxcbkF0dGFja3MgaGF2ZSB0aHJlZSBlbGVtZW50cywgRmlyZSwgVGh1bmRlciBhbmQgSWNlLiBGaXJlIGJlYXRzIEljZSwgSWNlIGJlYXRzIFRodW5kZXIsIFRodW5kZXIgYmVhdHMgRmlyZS5cXG5UaGUgZWxlbWVudCBvZiB0aGUgYXR0YWNrZXIgY2hhbmdlcyB1cG9uIGF0dGFja2luZy4gQXR0YWNrZXJzIGFyZSBpbW11bmUgdG8gYXR0YWNrcyBvZiB0aGUgc2FtZSBlbGVtZW50IVwiLCAyLCBwb3MsIDAsIEJhdHRsZVJlbmRlci5Db2xvcnMuaW5wdXRLZXksIFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUik7XHJcbiAgICAgICAgICAgIGV4cGxhbmF0aW9uRW50aXR5Lk9yaWdpbi5TZXRDdXJzb3JBdCgwLCAwKTtcclxuICAgICAgICAgICAgLy9pZiAoIW1vZGVsLmJhdHRsZUludHJvTW9kZSl7XHJcbiAgICAgICAgICAgIGlmIChmYWxzZSkgeyBcclxuICAgICAgICAgICAgICAgIGV4cGxhbmF0aW9uRW50aXR5Lk9yaWdpbi5EcmF3X0N1cnNvcl9TbWFydExpbmVCcmVhayhcIklucHV0IHlvdXIgY29tbWFuZHMgYW5kIHdhdGNoIHRoZSB0dXJuIHBsYXkgb3V0LiBQbGFuIHlvdXIgbW92ZXMgYmFzZWQgb24gd2hhdCB0aGUgZW5lbXkgd2lsbCBkbyFcIiwgQmF0dGxlUmVuZGVyLkNvbG9ycy5JbnB1dERlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIGV4cGxhbmF0aW9uRW50aXR5Lk9yaWdpbi5DdXJzb3JOZXdMaW5lKDApO1xyXG4gICAgICAgICAgICAgICAgZXhwbGFuYXRpb25FbnRpdHkuT3JpZ2luLkN1cnNvck5ld0xpbmUoMCk7XHJcbiAgICAgICAgICAgICAgICBleHBsYW5hdGlvbkVudGl0eS5PcmlnaW4uRHJhd19DdXJzb3JfU21hcnRMaW5lQnJlYWsoXCJBdHRhY2tzIGhhdmUgdGhyZWUgZWxlbWVudHMsIEZpcmUsIFRodW5kZXIgYW5kIEljZS4gRmlyZSBiZWF0cyBJY2UsIEljZSBiZWF0cyBUaHVuZGVyLCBUaHVuZGVyIGJlYXRzIEZpcmUuXCIsIEJhdHRsZVJlbmRlci5Db2xvcnMuSW5wdXREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICBleHBsYW5hdGlvbkVudGl0eS5PcmlnaW4uQ3Vyc29yTmV3TGluZSgwKTtcclxuICAgICAgICAgICAgICAgIGV4cGxhbmF0aW9uRW50aXR5Lk9yaWdpbi5DdXJzb3JOZXdMaW5lKDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGxhbmF0aW9uRW50aXR5Lk9yaWdpbi5EcmF3X0N1cnNvcl9TbWFydExpbmVCcmVhayhcIlRoZSBlbGVtZW50IG9mIHRoZSBhdHRhY2tlciBjaGFuZ2VzIHVwb24gYXR0YWNraW5nLiBBdHRhY2tlcnMgYXJlIGltbXVuZSB0byBhdHRhY2tzIG9mIHRoZSBzYW1lIGVsZW1lbnQhXCIsIEJhdHRsZVJlbmRlci5Db2xvcnMuSW5wdXREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICBwb3MgKz0gMTg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHBvcyA9IDU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5EcmF3KCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuU2V0QWxsKCcgJywgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tncm91bmRJbnB1dCk7XHJcblxyXG4gICAgICAgICAgICAvL3RleHRXb3JsZC5tYWluQm9hcmQuRHJhd1dpdGhMaW5lYnJlYWtzKFwiSW5wdXQgeW91ciBjb21tYW5kcyBhbmQgd2F0Y2ggdGhlIHR1cm4gcGxheSBvdXQuIFlvdSBjYW4gc2VlIGV2ZXJ5dGhpbmcgeW91ciBlbmVtaWVzIHdpbGwgZG9cXG5cIiwgMiwgcG9zLCAyLCBCYXR0bGVSZW5kZXIuQ29sb3JzLklucHV0RGVzY3JpcHRpb24pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhdyhcIllPVVIgQ09NTUFORFNcIiwgMiwgcG9zLTIsIEJhdHRsZVJlbmRlci5Db2xvcnMuV2luZG93TGFiZWwpO1xyXG4gICAgICAgICAgICBzdHJpbmcgbWVudVRpdGxlID0gXCJIRUxQXCI7XHJcbiAgICAgICAgICAgIHN0cmluZyBsZWF2ZUxhYmVsID0gXCJFWElUXCI7XHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5iYXR0bGVJbnRyb01vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxlYXZlTGFiZWwgPSBcIlNUQVJUXCI7XHJcbiAgICAgICAgICAgICAgICBtZW51VGl0bGUgPSBcIkJBVFRMRSBJTlRST1wiO1xyXG4gICAgICAgICAgICAgICAgTGVhdmVCdXR0b24gPSAoY2hhcilVbmljb2RlLlNwYWNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTGVhdmVCdXR0b24gPSAneCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXJIb3Jpem9udGFsKG1lbnVUaXRsZSwgQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbCwgMCwgMSk7XHJcblxyXG4gICAgICAgICAgICBMaXN0PGludD4gY29tbWFuZExpc3QgPSBtb2RlbC5jb21tYW5kc0hlcm87XHJcbiAgICAgICAgICAgIHBvcyA9IFNob3dDb21tYW5kcyhwb3MsIGNvbW1hbmRMaXN0KTtcclxuICAgICAgICAgICAgcG9zICs9IDQ7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhdyhcIkVORU1ZIENPTU1BTkRTXCIsIDIsIHBvcywgQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbCk7XHJcbiAgICAgICAgICAgIHBvcyArPSAyO1xyXG4gICAgICAgICAgICBwb3MgPSBTaG93Q29tbWFuZHMocG9zLCBtb2RlbC5jb21tYW5kc0VuZW15KTtcclxuXHJcbiAgICAgICAgICAgIEdhbWVNYWluLkRyYXdJbnB1dCgxLCBwb3MgKyAzLCBMZWF2ZUJ1dHRvbiwgbGVhdmVMYWJlbCwgdGV4dFdvcmxkLm1haW5Cb2FyZCk7XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IFNob3dDb21tYW5kcyhpbnQgcG9zLCBMaXN0PGludD4gY29tbWFuZExpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbW1hbmRMaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIkRSQVdXV1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgY29tbWFuZCA9IGNvbW1hbmRMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBkcmF3RmxhZyA9IENoZWNrRHJhd0NvbW1hbmQoY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHJhd0ZsYWcpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3KG1vdmVSZW5kZXJzW2NvbW1hbmRdLkFicmV2LCAyLCBwb3MsIEJhdHRsZVJlbmRlci5Db2xvcnMuSGVyb1R1cm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhdyhtb3ZlUmVuZGVyc1tjb21tYW5kXS5MYWJlbC5Ub1VwcGVyKCksIDUsIHBvcywgQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvVHVybik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5TZXRDdXJzb3JBdCgzLCBwb3MgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdfQ3Vyc29yX1NtYXJ0TGluZUJyZWFrKG1vdmVSZW5kZXJzW2NvbW1hbmRdLkRlc2NyaXB0aW9uLEJhdHRsZVJlbmRlci5Db2xvcnMuSW5wdXREZXNjcmlwdGlvbiwgMCwgbW92ZVJlbmRlcnNbY29tbWFuZF0uRGVzY3JpcHRpb24uTGVuZ3RoLTEsIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3KG1vdmVSZW5kZXJzW2NvbW1hbmRdLkRlc2NyaXB0aW9uLCAzLCBwb3MgKyAxLCBCYXR0bGVSZW5kZXIuQ29sb3JzLklucHV0RGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBvcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBJc1Nob3dpbmdDb21tYW5kSW5MaXN0KExpc3Q8aW50PiBjb21tYW5kTGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29tbWFuZExpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlKFwiRFJBV1dXXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBjb21tYW5kID0gY29tbWFuZExpc3RbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoQ2hlY2tEcmF3Q29tbWFuZChjb21tYW5kKSkgcmV0dXJuIHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIENoZWNrRHJhd0NvbW1hbmQoaW50IGNvbW1hbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBib29sIGRyYXdGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChjb21tYW5kID49IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWQgPSBtb3ZlRGF0YXNbY29tbWFuZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1kLkhhc1RhZygoaW50KU1vdmVEYXRhVGFncy5Nb3ZlbWVudCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhd0ZsYWcgPSBtb3ZlUmVuZGVyc1tjb21tYW5kXS5MYWJlbC5MZW5ndGggIT0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZHJhd0ZsYWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEJvYXJkIEdldEJvYXJkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0V29ybGQubWFpbkJvYXJkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTaG93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vZGVsLlJlZnJlc2hEYXRhKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIEhlbHBNb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vZGVsLmJhdHRsZUludHJvTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYm9vbCBJc1dhbm5hU2hvd0ludHJvKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vZGVsLlJlZnJlc2hEYXRhKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBJc1Nob3dpbmdDb21tYW5kSW5MaXN0KG1vZGVsLmNvbW1hbmRzRW5lbXkpIHx8IElzU2hvd2luZ0NvbW1hbmRJbkxpc3QobW9kZWwuY29tbWFuZHNIZXJvKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gbW9kZWwuY29tbWFuZHNFbmVteS5Db3VudCAhPSAwIHx8IG1vZGVsLmNvbW1hbmRzSGVyby5Db3VudCAhPSAwO1xyXG4gICAgICAgIH1cclxuXG4gICAgXG5wcml2YXRlIE1vdXNlSU8gX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX01vdXNlPW5ldyBNb3VzZUlPKCk7fVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBIZWxwU2NyZWVuTW9kZWxcclxuICAgIHtcclxuICAgICAgICBCYXR0bGVNYWluIGJhdHRsZU1haW47XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBjb21tYW5kc0hlcm8gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBjb21tYW5kc0VuZW15ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgIHB1YmxpYyBib29sIGJhdHRsZUludHJvTW9kZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSGVscFNjcmVlbk1vZGVsKEJhdHRsZU1haW4gYmF0dGxlTWFpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYmF0dGxlTWFpbiA9IGJhdHRsZU1haW47XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVmcmVzaERhdGEoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29tbWFuZHNIZXJvLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIEFkZEFsbChiYXR0bGVNYWluLnBsYXllckhhbmRGaXhlZCwgY29tbWFuZHNIZXJvKTtcclxuICAgICAgICAgICAgQWRkQWxsKGJhdHRsZU1haW4ucGxheWVySGFuZFVuZml4ZWQsIGNvbW1hbmRzSGVybyk7XHJcbiAgICAgICAgICAgIEFkZEFsbChiYXR0bGVNYWluLnBsYXllckhhbmRQb29sLCBjb21tYW5kc0hlcm8pO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBiYXR0bGVNYWluLmVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBZGRBbGxBcnJheShpdGVtLm1vdmVzLCBjb21tYW5kc0VuZW15KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBBZGRBbGwoTGlzdDxCYXR0bGVNYWluLk1vdmVUeXBlPiBtb3ZlcywgTGlzdDxpbnQ+IGNvbW1hbmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG0gaW4gbW92ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBhID0gKGludCkgbTtcclxuICAgICAgICAgICAgICAgIGlmIChhIDwgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbW1hbmRzLkNvbnRhaW5zKGEpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzLkFkZChhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFkZEFsbEFycmF5KGludFtdIG1vdmVzLCBMaXN0PGludD4gY29tbWFuZHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiBtb3ZlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPCAwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmICghY29tbWFuZHMuQ29udGFpbnMoYSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZHMuQWRkKGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guVHVybkJhc2VkLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIElucHV0SGFuZGxpbmdcclxuICAgIHtcclxuICAgICAgICBpbnRbXSB1bmZpeGVkQ29tbWFuZEtleXMgPSB7JzEnLCAnMicsJzMnLCc0JywgJzUnIH07XHJcbiAgICAgICAgRGljdGlvbmFyeTxJbnB1dCwgaW50PiBmaXhlZE1vdmVCdXR0b25zID0gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IERpY3Rpb25hcnk8SW5wdXQsIGludD4oKSwoX28xKT0+e19vMS5BZGQobmV3IElucHV0KElucHV0VHlwZS5Nb3ZlLCBCYXR0bGVNYWluLk1vdmVUeXBlLk5vcm1hbFNob3QpLCdnJyk7X28xLkFkZChuZXcgSW5wdXQoSW5wdXRUeXBlLk1vdmUsIEJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSksJ2YnKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTW92ZSwgQmF0dGxlTWFpbi5Nb3ZlVHlwZS5JY2UpLCdpJyk7X28xLkFkZChuZXcgSW5wdXQoSW5wdXRUeXBlLk1vdmUsIEJhdHRsZU1haW4uTW92ZVR5cGUuSWNlQm9tYiksJ2InKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTW92ZSwgQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyQm9tYiksJ3knKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTW92ZSwgQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyKSwndCcpO19vMS5BZGQobmV3IElucHV0KElucHV0VHlwZS5Nb3ZlLCBCYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVSaWdodCksJ2QnKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTW92ZSwgQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Nb3ZlVXApLCd3Jyk7X28xLkFkZChuZXcgSW5wdXQoSW5wdXRUeXBlLk1vdmUsIEJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZURvd24pLCdzJyk7X28xLkFkZChuZXcgSW5wdXQoSW5wdXRUeXBlLk1vdmUsIEJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZUxlZnQpLCdhJyk7X28xLkFkZChuZXcgSW5wdXQoSW5wdXRUeXBlLk1pc2NCYXR0bGUsIE1pc2NCYXR0bGVJbnB1dC5Eb25lKSxVbmljb2RlLlNwYWNlKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTWlzY0JhdHRsZSwgTWlzY0JhdHRsZUlucHV0LlJlZG8pLCdyJyk7X28xLkFkZChuZXcgSW5wdXQoSW5wdXRUeXBlLk1pc2NCYXR0bGUsIE1pc2NCYXR0bGVJbnB1dC5QcmV2aWV3KSwncCcpO19vMS5BZGQobmV3IElucHV0KElucHV0VHlwZS5NaXNjQmF0dGxlLCBNaXNjQmF0dGxlSW5wdXQuSGVscCksJ2gnKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTWlzY0JhdHRsZSwgTWlzY0JhdHRsZUlucHV0LkNhbmNlbCksJ3InKTtfbzEuQWRkKG5ldyBJbnB1dChJbnB1dFR5cGUuTWlzY0JhdHRsZSwgTWlzY0JhdHRsZUlucHV0LkNvbmZpcm0pLFVuaWNvZGUuU3BhY2UpO3JldHVybiBfbzE7fSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgR2V0Rml4ZWRNb3ZlVW5pY29kZShJbnB1dCBpbnB1dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKGZpeGVkTW92ZUJ1dHRvbnMuVHJ5R2V0VmFsdWUoaW5wdXQsIG91dCB2YWx1ZSkpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJbnB1dCBJbnB1dHRlZChpbnQgdW5pY29kZUtleSwgSW5wdXRIb2xkZXIgaW5wdXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGVMaW5lKFwiIGlucHV0ICsgXCIrKGNoYXIpdW5pY29kZUtleSk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGZpeGVkTW92ZUJ1dHRvbnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLlZhbHVlID09IHVuaWNvZGVLZXkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5wdXQuQ29udGFpbnMoaXRlbS5LZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5LZXk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1bmZpeGVkQ29tbWFuZEtleXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh1bmZpeGVkQ29tbWFuZEtleXNbaV0gPT0gdW5pY29kZUtleSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgdW5maXhlZENvbW1hbmRQb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkyID0gMDsgaTIgPCBpbnB1dC5pbnB1dHMuQ291bnQ7IGkyKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuVGFnSXMoaTIsIElucHV0VGFncy5NT1ZFVU5GSVgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5maXhlZENvbW1hbmRQb3MgPT0gaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQuaW5wdXRzW2kyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZml4ZWRDb21tYW5kUG9zKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQoSW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guQmFzZVV0aWxzO1xyXG51c2luZyBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQ7XHJcbnVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guVHVybkJhc2VkLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VPblBvc2l0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgQmF0dGxlUmVuZGVyIGJhdHRsZVJlbmRlcjtcclxuICAgICAgICBwcml2YXRlIFRleHRXb3JsZCB0ZXh0V29ybGQ7XHJcbiAgICAgICAgcHJpdmF0ZSBCbGlua0FuaW0gYmxpbmtBbmltO1xyXG5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZU9uUG9zaXRpb24oQmF0dGxlUmVuZGVyIGJhdHRsZVJlbmRlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZCA9IGJhdHRsZVJlbmRlci50ZXh0V29ybGQ7XHJcbiAgICAgICAgICAgIGJsaW5rQW5pbSA9IHRleHRXb3JsZC5BZGRBbmltYXRpb248Z2xvYmFsOjpQaWRyb2guVGV4dFJlbmRlcmluZy5CbGlua0FuaW0+KG5ldyBCbGlua0FuaW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNZXNzYWdlT25Qb3MoVmVjdG9yMkQgcG9zLCBzdHJpbmcgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlbnRpdHkgPSB0ZXh0V29ybGQuR2V0VGVtcEVudGl0eSh2Lkxlbmd0aCArIDIsIDYpO1xyXG4gICAgICAgICAgICBibGlua0FuaW0uQWRkKGVudGl0eS5BbmltQmFzZSgyZiksIG5ldyBCbGlua0FuaW0uQmxpbmtEYXRhKFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBUZXh0Qm9hcmQuTk9DSEFOR0VDT0xPUiwgMC4zNWYsIDAuMzVmKSk7XHJcbiAgICAgICAgICAgIHZhciB4T2ZmID0gKHYuTGVuZ3RoIC0gMykgLyAyO1xyXG4gICAgICAgICAgICBpZiAoeE9mZiA8IDApIHhPZmYgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbGluZVN0YXJ0ID0gbmV3IFZlY3RvcjJEKHhPZmYsIDApO1xyXG4gICAgICAgICAgICBlbnRpdHkuU2V0UG9zaXRpb24ocG9zICsgbmV3IFZlY3RvcjJEKDEgLSB4T2ZmLCAwKSk7XHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShwb3MpO1xyXG4gICAgICAgICAgICAvL2VudGl0eS5PcmlnaW4uRHJhdyh2LCAxLCA1KTtcclxuICAgICAgICAgICAgZW50aXR5Lk9yaWdpbi5EcmF3V2l0aEdyaWQodiwgMCwgMywgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuSGVybywgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuSGVybyk7XHJcblxyXG4gICAgICAgICAgICBlbnRpdHkuT3JpZ2luLkRyYXdMaW5lcyhQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvLCBsaW5lU3RhcnQsIGxpbmVTdGFydCArIG5ldyBWZWN0b3IyRCgyLCAwKSwgbGluZVN0YXJ0ICsgbmV3IFZlY3RvcjJEKDIsIDIpKTtcclxuICAgICAgICAgICAgZW50aXR5Lk9yaWdpbi5BdXRvRml4R3JpZGRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmcuR2FtZVNjcmVlbjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlR1cm5CYXNlZC5UZXh0UmVuZGVyaW5nXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBNb3VzZUhvdmVyVGV4dFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmdbXVtdIHRleHRzID0gbmV3IHN0cmluZ1szXVtdO1xyXG4gICAgICAgIHB1YmxpYyBNb3VzZUhvdmVyTWFuYWdlciBob3Zlck1hbmFnZXI7XHJcbiAgICAgICAgcHVibGljIFRleHRFbnRpdHkgZW50aXR5O1xyXG5cclxuICAgICAgICBwdWJsaWMgTW91c2VIb3ZlclRleHQoTW91c2VIb3Zlck1hbmFnZXIgaG92ZXJNYW5hZ2VyLCBUZXh0RW50aXR5IGVudGl0eSwgc3RyaW5nW10gbW92ZURlc2NyaXB0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXJNYW5hZ2VyID0gaG92ZXJNYW5hZ2VyO1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICAgICAgLy90ZXh0c1swXSA9IG5ldyBzdHJpbmdbRW51bS5HZXRWYWx1ZXModHlwZW9mKEJhdHRsZU1haW4uTW92ZVR5cGUpKS5MZW5ndGhdO1xyXG5cclxuICAgICAgICAgICAgdGV4dHNbMF0gPSBtb3ZlRGVzY3JpcHRpb25zO1xyXG4gICAgICAgICAgICAvL0RvbmUsXHJcbiAgICAgICAgLy8gICAgUmVkbyxcclxuICAgICAgICAvL1ByZXZpZXcsXHJcbiAgICAgICAgLy9Db25maXJtLFxyXG4gICAgICAgIC8vQ2FuY2VsXHJcbiAgICAgICAgICAgIHRleHRzWzFdID0gbmV3IHN0cmluZ1tdIHtcclxuICAgICAgICAgICAgICAgIFwiU3RhcnRzIGNvbW1hbmQgZXhlY3V0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICBcIlJlbW92ZXMgdGhlIGxhc3QgaW5wdXR0ZWQgY29tbWFuZFwiLFxyXG4gICAgICAgICAgICAgICAgXCJQcmV2aWV3IG1vdmVzIG9mIHRoZSBvcHBvbmVudHNcIixcclxuICAgICAgICAgICAgICAgIFwiSW5wdXRzIG1vdmVcIixcclxuICAgICAgICAgICAgICAgIFwiUmV0dXJuc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJTaG93cyBoZWxwZnVsIGluZm9ybWF0aW9uXCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRleHRzWzJdID0gbmV3IHN0cmluZ1tdIHtcclxuICAgICAgICAgICAgICAgIFwiTW92ZXMgaW4gdGhlIGNvcnJlc3BvbmRpbmcgZGlyZWN0aW9uXCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVXBkYXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVudGl0eS5SZXNldEZ1bGwoKTtcclxuICAgICAgICAgICAgaG92ZXJNYW5hZ2VyLlVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gaG92ZXJNYW5hZ2VyLm1vdXNlSG92ZXJzQWN0aXZlO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlKFwiSE9WRVJcIik7XHJcbiAgICAgICAgICAgICAgICBpbnQgaWQgPSBhY3RpdmVbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgICBpZihpZCA+PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyB0ZXh0ID0gdGV4dHNbYWN0aXZlWzBdLnR5cGVdW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICAvL2VudGl0eS5PcmlnaW4uRHJhdyh0ZXh0LCAwLCAwLCAyLCBCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tCYXR0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5PcmlnaW4uU2V0Q3Vyc29yQXQoMCwwKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuT3JpZ2luLkRyYXdfQ3Vyc29yX1NtYXJ0TGluZUJyZWFrKHRleHQsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGludCB4ID0gYWN0aXZlWzBdLnJlY3QuWCArIDEgLSB0ZXh0Lkxlbmd0aC8yO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4IDwgMCkgeCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LlNldFBvc2l0aW9uKHgsIGFjdGl2ZVswXS5yZWN0LlkgLTIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZDtcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UdXJuQmFzZWQuVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTmF2aWdhdGlvbktleWJvYXJkXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxQb2ludDJEPiBwb2ludHMgPSBuZXcgTGlzdDxQb2ludDJEPigpO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgY3VycmVudFBvaW50ID0gMDtcclxuICAgICAgICBwcml2YXRlIFRleHRXb3JsZCB0ZXh0V29ybGQ7XHJcbiAgICAgICAgcHJpdmF0ZSBUZXh0RW50aXR5IGN1cnNvcjtcclxuICAgICAgICBwdWJsaWMgaW50IGNob3Nlbk9wdGlvbiA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyBib29sIHNob3dFc2NhcGUgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIHdhbnRUb0VzY2FwZSA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgTmF2aWdhdGlvbktleWJvYXJkKFRleHRXb3JsZCB0ZXh0V29ybGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRXb3JsZCA9IHRleHRXb3JsZDtcclxuICAgICAgICAgICAgY3Vyc29yID0gdGV4dFdvcmxkLkdldEZyZWVFbnRpdHkoMSwgMSk7XHJcbiAgICAgICAgICAgIGN1cnNvci5PcmlnaW4uRHJhd0NoYXIoJ0AnLCAwLCAwLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvKTtcclxuICAgICAgICAgICAgLy9VcGRhdGVQb2ludCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9pbnQgaW5wdXRVbmljb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDaGVja0lucHV0KGludCBpbnB1dFVuaWNvZGUpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgLy9Db25zb2xlLldyaXRlTGluZShpbnB1dFVuaWNvZGUpO1xyXG4gICAgICAgICAgICBpZiAoaW5wdXRVbmljb2RlID09IFVuaWNvZGUuU3BhY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNob3Nlbk9wdGlvbiA9IGN1cnJlbnRQb2ludDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRVbmljb2RlID09ICdzJyB8fCBpbnB1dFVuaWNvZGUgPT0gJ2QnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNb3ZlKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFVuaWNvZGUgPT0gJ3cnIHx8IGlucHV0VW5pY29kZSA9PSAnYScpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1vdmUoLTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGlucHV0VW5pY29kZSA9PSBVbmljb2RlLkVzY2FwZSAmJiBzaG93RXNjYXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3YW50VG9Fc2NhcGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgTW92ZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQb2ludCArPSB2O1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFBvaW50ID49IHBvaW50cy5Db3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBvaW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFBvaW50IDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBvaW50ID0gcG9pbnRzLkNvdW50IC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBVcGRhdGVQb2ludCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFVwZGF0ZVBvaW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UG9pbnQgPCBwb2ludHMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICBjdXJzb3IuU2V0UG9zaXRpb24ocG9pbnRzW2N1cnJlbnRQb2ludF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0NvbnRyb2xzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB5ID0gMzA7XHJcbiAgICAgICAgICAgIFVJUmV1c2FibGUuRHJhd0NvbnRyb2xzTGFiZWwodGV4dFdvcmxkLCB5KTtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvcmNlSW5wdXRMYWJlbCA9IFVJUmV1c2FibGUuV0FTRDtcclxuICAgICAgICAgICAgICAgIHZhciBmb3JjZUNvbW1hbmRMYWJlbCA9IFVJUmV1c2FibGUuYXJyb3dzO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBCYXR0bGVSZW5kZXIuRHJhd0lucHV0KDcsIHkrMiwgZm9yY2VJbnB1dExhYmVsLCBmb3JjZUNvbW1hbmRMYWJlbCwgdGV4dFdvcmxkLm1haW5Cb2FyZCk7XHJcbiAgICAgICAgICAgICAgICBHYW1lTWFpbi5EcmF3SW5wdXQoNywgeSs0LCBVbmljb2RlLlNwYWNlLCBcIlNFTEVDVFwiLCB0ZXh0V29ybGQubWFpbkJvYXJkKTtcclxuICAgICAgICAgICAgICAgIGlmKHNob3dFc2NhcGUpXHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZU1haW4uRHJhd0lucHV0KDcsIHkrNiwgVW5pY29kZS5Fc2NhcGUsIFwiUkVUVVJOXCIsIHRleHRXb3JsZC5tYWluQm9hcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQ2xlYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcG9pbnRzLkNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJlc2V0Q2hvaWNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNob3Nlbk9wdGlvbiA9IC0xO1xyXG4gICAgICAgICAgICB3YW50VG9Fc2NhcGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgQWRkKGludCB4LCBpbnQgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBvaW50cy5BZGQobmV3IFBvaW50MkQoeCwgeSkpO1xyXG4gICAgICAgICAgICBVcGRhdGVQb2ludCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBQaWRyb2guRUNTO1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UdXJuQmFzZWQuVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUHJldmlld1N5c3RlbVxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgRUNTTWFuYWdlciBlY3M7XHJcbiAgICAgICAgcHJpdmF0ZSBCYXR0bGVNYWluIGJhdHRsZU1haW47XHJcbiAgICAgICAgcHVibGljIGJvb2wgcHJldmlld0FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHByaXZhdGUgQ2xvbmVkU3RhdGUgY2xvbmVkU3RhdGU7XHJcbiAgICAgICAgcHJpdmF0ZSBRdWlja0FjY2Vzc29yT25lPEJhdHRsZU1haW4uQmF0dGxlRW50aXR5PiBiYXR0bGVFbnRpdHk7XHJcbiAgICAgICAgRGVidWdnZXIgZGVidWcgPSBuZXcgRGVidWdnZXIodHJ1ZSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBQcmV2aWV3U3lzdGVtKEVDU01hbmFnZXIgZWNzLCBCYXR0bGVNYWluIGJhdHRsZU1haW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmVjcyA9IGVjcztcclxuICAgICAgICAgICAgZWNzLkFkZENvcHlNZXRob2QodHlwZW9mKEJhdHRsZU1haW4uQmF0dGxlRW50aXR5KSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxvYmplY3QsIG9iamVjdD4pKChvMSwgbzIpPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvID0gbzIgYXMgQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IG8xIGFzIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgdG8ucG9zID0gZnJvbS5wb3M7XHJcbiAgICAgICAgICAgICAgICB0by5saWZlID0gZnJvbS5saWZlO1xyXG4gICAgICAgICAgICAgICAgdG8ubWF4TGlmZSA9IGZyb20ubWF4TGlmZTtcclxuICAgICAgICAgICAgICAgIHRvLmVsZW1lbnQgPSBmcm9tLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRvLm1vdmVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvLm1vdmVzW2ldID0gZnJvbS5tb3Zlc1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBlY3MuQWRkQ29weU1ldGhvZCh0eXBlb2YoQmF0dGxlTWFpbi5CYXR0bGVTdGF0ZSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248b2JqZWN0LCBvYmplY3Q+KSgobzEsIG8yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG8gPSBvMiBhcyBCYXR0bGVNYWluLkJhdHRsZVN0YXRlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyb20gPSBvMSBhcyBCYXR0bGVNYWluLkJhdHRsZVN0YXRlO1xyXG4gICAgICAgICAgICAgICAgdG8uYWN0aW5nRW50aXR5ID0gZnJvbS5hY3RpbmdFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICB0by5CYXR0bGVFbmRFbmFibGUgPSBmcm9tLkJhdHRsZUVuZEVuYWJsZTtcclxuICAgICAgICAgICAgICAgIHRvLm1vdmVUaWNrX05vdyA9IGZyb20ubW92ZVRpY2tfTm93O1xyXG4gICAgICAgICAgICAgICAgdG8ubW92ZVRpY2tfVG90YWwgPSBmcm9tLm1vdmVUaWNrX1RvdGFsO1xyXG4gICAgICAgICAgICAgICAgdG8ucGhhc2UgPSBmcm9tLnBoYXNlO1xyXG4gICAgICAgICAgICAgICAgdG8udHVybiA9IGZyb20udHVybjtcclxuICAgICAgICAgICAgICAgIHRvLnR1cm5zUGVyUGhhc2UgPSBmcm9tLnR1cm5zUGVyUGhhc2U7XHJcbiAgICAgICAgICAgICAgICB0by50b3RhbFR1cm5zID0gZnJvbS50b3RhbFR1cm5zO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIGVjcy5BZGRDb3B5TWV0aG9kKHR5cGVvZihUaW1lU3RhbXApLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPG9iamVjdCwgb2JqZWN0PikoKG8xLCBvMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvID0gbzIgYXMgVGltZVN0YW1wO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyb20gPSBvMSBhcyBUaW1lU3RhbXA7XHJcbiAgICAgICAgICAgICAgICB0by5DdXJyZW50U25hcCA9IGZyb20uQ3VycmVudFNuYXA7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgZWNzLkFkZENvcHlNZXRob2QodHlwZW9mKEhhcHBIYW5kbGluZy5IYXBwSGFuZGxlU3RhdGUpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPG9iamVjdCwgb2JqZWN0PikoKG8xLCBvMikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvID0gbzIgYXMgSGFwcEhhbmRsaW5nLkhhcHBIYW5kbGVTdGF0ZTtcclxuICAgICAgICAgICAgICAgIHZhciBmcm9tID0gbzEgYXMgSGFwcEhhbmRsaW5nLkhhcHBIYW5kbGVTdGF0ZTtcclxuICAgICAgICAgICAgICAgIHRvLmhpZ2hlc3RIYW5kbGVkID0gZnJvbS5oaWdoZXN0SGFuZGxlZDtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0aGlzLmJhdHRsZU1haW4gPSBiYXR0bGVNYWluO1xyXG4gICAgICAgICAgICBjbG9uZWRTdGF0ZSA9IG5ldyBDbG9uZWRTdGF0ZSgpO1xyXG4gICAgICAgICAgICBiYXR0bGVFbnRpdHkgPSBlY3MuUXVpY2tBY2Nlc3NvcjE8QmF0dGxlTWFpbi5CYXR0bGVFbnRpdHk+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFN0YXJ0UHJldmlldygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXR0bGVNYWluLnRyYWNrQmF0dGxlLlByZXZpZXcoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gYmF0dGxlTWFpbi5lbnRpdGllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVidWcuUHJpbnQoXCJBTEwgRU5USVRJRVMgQkVGT1JFIFBSRVZJRVdcIik7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGRlYnVnLlByaW50KGl0ZW0ucmFuZG9tUG9zaXRpb24gKyBcIiBSQU5ET00gUE9TXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVidWcuUHJpbnQoaXRlbS5UeXBlICsgXCIgdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgIGRlYnVnLlByaW50KGl0ZW0uZHJhd1R1cm4gKyBcIiBkcmF3IHR1cm5cIik7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChcIkVORFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlY3MuQ2xvbmVTdGF0ZShjbG9uZWRTdGF0ZSk7XHJcbiAgICAgICAgICAgIGJhdHRsZU1haW4uYmF0dGxlU3RhdGUuQmF0dGxlRW5kRW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHByZXZpZXdBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGl0ZW0gaW4gYmF0dGxlTWFpbi5lbnRpdGllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uVHlwZSA9PSBCYXR0bGVNYWluLkVudGl0eVR5cGUuaGVybylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmxpZmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaXRlbS5tb3Zlcy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubW92ZXNbaV0gPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmF0dGxlTWFpbi5UaWNrKCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBFbmRQcmV2aWV3KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIkVuZCBwcmV2aWV3XCIpO1xyXG4gICAgICAgICAgICAvLyAgIENvbnNvbGUuUmVhZEtleSgpO1xyXG4gICAgICAgICAgICBwcmV2aWV3QWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoYmF0dGxlTWFpbi5lbnRpdGllcy5Db250YWlucyhiYXR0bGVFbnRpdHkuQ29tcDEoMCkpK1wiWFhYU1wiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVjcy5SZXN0b3JlU3RhdGUoY2xvbmVkU3RhdGUpO1xyXG4gICAgICAgICAgICBiYXR0bGVNYWluLmJhdHRsZVN0YXRlLnBoYXNlID0gQmF0dGxlTWFpbi5CYXR0bGVQaGFzZS5QaWNrSGFuZHM7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBiYXR0bGVNYWluLmVudGl0aWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChcIkFMTCBFTlRJVElFUyBBRlRFUiBQUkVWSUVXXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVidWcuUHJpbnQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChpdGVtLnJhbmRvbVBvc2l0aW9uK1wiIFJBTkRPTSBQT1NcIik7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Zy5QcmludChpdGVtLlR5cGUgKyBcIiB0eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGVidWcuUHJpbnQoaXRlbS5kcmF3VHVybiArIFwiIGRyYXcgdHVyblwiKTtcclxuICAgICAgICAgICAgICAgIGRlYnVnLlByaW50KFwiRU5EXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZDtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlR1cm5CYXNlZC5UZXh0UmVuZGVyaW5nXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBSZWZsZWN0aW9uVGVzdFxyXG4gICAge1xyXG5cclxuICAgICAgICBwdWJsaWMgUmVmbGVjdGlvblRlc3QoKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWJ1ZyA9IG5ldyBEZWJ1Z2dlcih0cnVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGJlID0gbmV3IENvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlRW50aXR5KCk7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gYmUuR2V0VHlwZSgpO1xyXG4gICAgICAgICAgICBCYXR0bGVNYWluLkJhdHRsZUVudGl0eSBiZTIgPSBuZXcgQmF0dGxlTWFpbi5CYXR0bGVFbnRpdHkoKTtcclxuICAgICAgICAgICAgYmUyLnJhbmRvbVBvc2l0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgZGVidWcuUHJpbnQodHlwZS5HZXRGaWVsZChcInJhbmRvbVBvc2l0aW9uXCIpLkdldFZhbHVlKGJlMikuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGRlYnVnLlByaW50KGJlMi5yYW5kb21Qb3NpdGlvbiArIFwiXCIpO1xyXG4gICAgICAgICAgICBkZWJ1Zy5QcmludChiZSk7XHJcbiAgICAgICAgICAgIERlZXBDbG9uZUhlbHBlci5EZWVwQ29weVBhcnRpYWwoYmUsIGJlMik7XHJcbiAgICAgICAgICAgIERlZXBDbG9uZUhlbHBlci5EZWVwQ29weVBhcnRpYWwoYmUyLCBiZSk7XHJcbiAgICAgICAgICAgIGRlYnVnLlByaW50KGJlKTtcclxuICAgICAgICAgICAgZGVidWcuUHJpbnQoYmUyKTtcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBkZWJ1Zy5QcmludCh0eXBlLkdldEZpZWxkKFwicmFuZG9tUG9zaXRpb25cIikuR2V0VmFsdWUoYmUyKS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgZGVidWcuUHJpbnQoYmUyLnJhbmRvbVBvc2l0aW9uK1wiXCIpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlR1cm5CYXNlZC5UZXh0UmVuZGVyaW5nXHJcbntcclxuXHJcbiAgICBcclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVUlSZXVzYWJsZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFdBU0QgPSBcIldBU0RcIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBhcnJvd3MgPSBcIlwiICsgVW5pY29kZS5VcGFycm93MiArIFVuaWNvZGUuTGVmdGFycm93MiArIFVuaWNvZGUuRG93bmFycm93MiArIFVuaWNvZGUuUmlnaHRhcnJvdzI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERyYXdDb250cm9sc0xhYmVsKFRleHRXb3JsZCB0ZXh0V29ybGQsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXJIb3Jpem9udGFsKFwiQ29udHJvbHNcIiwgQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbCwgMCwgeSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guQmFzZVV0aWxzO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmcuR2FtZVNjcmVlbjtcclxudXNpbmcgUGlkcm9oLlR1cm5CYXNlZC5UZXh0UmVuZGVyaW5nO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCYXR0bGVSZW5kZXIgOiBJVGV4dFNjcmVlbl9cclxuICAgIHtcclxuICAgICAgICBpbnRlcm5hbCBBdHRhY2tQcmV2aWV3IGF0dGFja1ByZXZpZXc7XHJcbiAgICAgICAgcHVibGljIEtleWJvYXJkSU8gS2V5Ym9hcmQgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHByaXZhdGUgQmF0dGxlTWFpbiB0dXJuQmFzZVRyeTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IFN0YWdlRGF0YSBzdGFnZURhdGE7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBQcmV2aWV3U3lzdGVtIHByZXZpZXdTeXN0ZW07XHJcbiAgICAgICAgcHJpdmF0ZSBQb3NpdGlvbkFuaW1hdGlvbiBwb3NBbmltO1xyXG4gICAgICAgIHByaXZhdGUgQ2hhckJ5Q2hhckFuaW1hdGlvbiBjaGFyQnlDaGFyQW5pbTtcclxuICAgICAgICBwcml2YXRlIERlbGF5c0FuaW1hdGlvbiBkZWxheUFuaW07XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0V29ybGQgdGV4dFdvcmxkO1xyXG4gICAgICAgIHB1YmxpYyBUZXh0Qm9hcmQgVGV4dEJvYXJkIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBMaXN0PFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkJhdHRsZVBoYXNlPiBpbnB1dFBoYXNlcyA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkJhdHRsZVBoYXNlPigpLChfbzEpPT57X28xLkFkZChQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5CYXR0bGVQaGFzZS5QaWNrSGFuZHMpO19vMS5BZGQoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlUGhhc2UgLkNvbmZpcm1JbnB1dCk7cmV0dXJuIF9vMTt9KTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgVmVjdG9yMkQgRW50aXR5U2NyZWVuUG9zaXRpb24oaW50IHVzZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbih0dXJuQmFzZVRyeS5lbnRpdGllc1t1c2VyXS5wb3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgUmVjdCBHZXRHcmlkUmVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlY3QoZ3JpZE9mZnNldHgsIGdyaWRPZmZzZXR5LCBncmlkU2NhbGUgKiA2LCBncmlkU2NhbGUgKiAzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBpbnB1dDtcclxuICAgICAgICBwdWJsaWMgaW50IElucHV0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gaW5wdXQ7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0ID0gdmFsdWU7IC8vQ29uc29sZS5Xcml0ZUxpbmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSGFwcEhhbmRsaW5nIEhhcHBIYW5kbGluZyB7IGdldDsgaW50ZXJuYWwgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBrZXlEb3duVW5pY29kZSB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgcHVibGljIE1vdXNlSU8gTW91c2UgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBNb3VzZUhvdmVyTWFuYWdlciBtb3VzZUhvdmVyO1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBMaXN0PERlbGF5ZWRBY3Rpb25zPiB0YXNrcyA9IG5ldyBMaXN0PERlbGF5ZWRBY3Rpb25zPigpO1xyXG4gICAgICAgIERpY3Rpb25hcnk8b2JqZWN0LCBzdHJpbmc+IG1vdmVDaGFycztcclxuICAgICAgICBEaWN0aW9uYXJ5PG9iamVjdCwgc3RyaW5nPiBtb3ZlRGVzY3JpcHRpb25zID0gbmV3IERpY3Rpb25hcnk8b2JqZWN0LCBzdHJpbmc+KCk7XHJcbiAgICAgICAgRGljdGlvbmFyeTxNaXNjQmF0dGxlSW5wdXQsIHN0cmluZz4gbWlzY0Rlc2NyaXB0aW9ucyA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBEaWN0aW9uYXJ5PE1pc2NCYXR0bGVJbnB1dCwgc3RyaW5nPigpLChfbzIpPT57X28yLkFkZChNaXNjQmF0dGxlSW5wdXQuRG9uZSxcIkRPTkVcIik7X28yLkFkZChNaXNjQmF0dGxlSW5wdXQuUmVkbyxcIlJFRE9cIik7X28yLkFkZChNaXNjQmF0dGxlSW5wdXQuSGVscCxcIkhFTFBcIik7X28yLkFkZChNaXNjQmF0dGxlSW5wdXQuUHJldmlldyxcIlBSRVZJRVdcIik7X28yLkFkZChNaXNjQmF0dGxlSW5wdXQuQ29uZmlybSxcIkNPTkZJUk1cIik7X28yLkFkZChNaXNjQmF0dGxlSW5wdXQuQ2FuY2VsLFwiQ0FOQ0VMXCIpO3JldHVybiBfbzI7fSk7XHJcbiAgICAgICAgcHJpdmF0ZSBEaWN0aW9uYXJ5PElucHV0LCBzdHJpbmc+IG1vdmVCdXR0b25zO1xyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgZGVidWdPbiA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgZ3JpZFNjYWxlID0gNTtcclxuICAgICAgICBwcml2YXRlIGludCBncmlkT2Zmc2V0eCA9IDI7XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgZ3JpZE9mZnNldHkgPSAxO1xyXG4gICAgICAgIGludGVybmFsIExpc3Q8VGV4dEVudGl0eT4gYmF0dGxlclJlbmRlcnM7XHJcblxyXG4gICAgICAgIGNoYXJbXVtdIGVudGl0aWVzQ2hhcnM7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIE1lc3NhZ2VEb05vdEhpZGU7XHJcbiAgICAgICAgc3RyaW5nIG1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCB3YWl0aW5nRm9yTWVzc2FnZUlucHV0O1xyXG4gICAgICAgIHByaXZhdGUgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlUGhhc2UgbGFzdFBoYXNlO1xyXG4gICAgICAgIHByaXZhdGUgVGV4dEVudGl0eSBtZXNzYWdlRW50O1xyXG5cclxuICAgICAgICBwdWJsaWMgSW5wdXRIYW5kbGluZyBpbnB1dEggPSBuZXcgSW5wdXRIYW5kbGluZygpO1xyXG4gICAgICAgIC8vcHVibGljIGJvb2wgaGVscFZpc3VhbGl6ZVJlcXVlc3Q7XHJcbiAgICAgICAgcHVibGljIEhlbHBTY3JlZW5JbnRlZ3JhdGlvbiBoZWxwO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBhdHRhY2tNZW51ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBCYXR0bGVSZW5kZXIoQmF0dGxlTWFpbiBiYXR0bGVMb2dpYywgU3RhZ2VEYXRhIHN0YWdlRGF0YSwgUHJldmlld1N5c3RlbSBQcmV2aWV3U3lzdGVtKVxyXG4gICAgICAgIHtcclxuXHJcblxyXG4gICAgICAgICAgICBzdHJpbmdbXSBlbnRpdHlUZXh0cyA9IHsgXCJAXCIsIFwiJlwiLCBcIiVcIiwgXCIkXCIsIFwiT1wiLCBcIlhcIiwgXCJKXCIsIFwiWVwiLCBcIlpcIiwgXCJNXCIsXCJDXCIsIFwiRFwiLCBcIkVcIiB9O1xyXG4gICAgICAgICAgICBlbnRpdGllc0NoYXJzID0gbmV3IGNoYXJbZW50aXR5VGV4dHMuTGVuZ3RoXVtdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGVudGl0eVRleHRzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRpdGllc0NoYXJzW2ldID0gZW50aXR5VGV4dHNbaV0uVG9DaGFyQXJyYXkoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHVybkJhc2VUcnkgPSBiYXR0bGVMb2dpYztcclxuICAgICAgICAgICAgdGhpcy5zdGFnZURhdGEgPSBzdGFnZURhdGE7XHJcbiAgICAgICAgICAgIHByZXZpZXdTeXN0ZW0gPSBQcmV2aWV3U3lzdGVtO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQgPSBuZXcgVGV4dFdvcmxkKCk7XHJcbiAgICAgICAgICAgIHBvc0FuaW0gPSB0ZXh0V29ybGQuQWRkQW5pbWF0aW9uPGdsb2JhbDo6UGlkcm9oLlRleHRSZW5kZXJpbmcuUG9zaXRpb25BbmltYXRpb24+KG5ldyBQb3NpdGlvbkFuaW1hdGlvbigpKTtcclxuICAgICAgICAgICAgY2hhckJ5Q2hhckFuaW0gPSB0ZXh0V29ybGQuQWRkQW5pbWF0aW9uPGdsb2JhbDo6UGlkcm9oLlRleHRSZW5kZXJpbmcuQ2hhckJ5Q2hhckFuaW1hdGlvbj4obmV3IENoYXJCeUNoYXJBbmltYXRpb24oKSk7XHJcbiAgICAgICAgICAgIGRlbGF5QW5pbSA9IHRleHRXb3JsZC5BZGRBbmltYXRpb248Z2xvYmFsOjpQaWRyb2guVGV4dFJlbmRlcmluZy5EZWxheXNBbmltYXRpb24+KG5ldyBEZWxheXNBbmltYXRpb24oKSk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5Jbml0KEdhbWVNYWluLldpZHRoLCBHYW1lTWFpbi5IZWlnaHQpO1xyXG4gICAgICAgICAgICBUZXh0Qm9hcmQgPSB0ZXh0V29ybGQubWFpbkJvYXJkO1xyXG4gICAgICAgICAgICAvL1RleHRCb2FyZCA9IG5ldyBUZXh0Qm9hcmQoNzAsIDI1KTtcclxuXHJcbiAgICAgICAgICAgIC8vdmFyIHBvc0FuaW0gPSB0ZXh0V29ybGQuQWRkQW5pbWF0aW9uKG5ldyBQb3NpdGlvbkFuaW1hdGlvbigpKTtcclxuICAgICAgICAgICAgdmFyIGJsaW5rQW5pbSA9IHRleHRXb3JsZC5BZGRBbmltYXRpb248Z2xvYmFsOjpQaWRyb2guVGV4dFJlbmRlcmluZy5CbGlua0FuaW0+KG5ldyBCbGlua0FuaW0oKSk7XHJcblxyXG4gICAgICAgICAgICBiYXR0bGVyUmVuZGVycyA9IG5ldyBMaXN0PFRleHRFbnRpdHk+KCk7XHJcbiAgICAgICAgICAgIFVwZGF0ZUJhdHRsZVJlbmRlckNvdW50KCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBtZXNzYWdlRW50ID0gdGV4dFdvcmxkLkdldEZyZWVFbnRpdHkoNDAsIDQpO1xyXG5cclxuICAgICAgICAgICAgdHVybkJhc2VUcnkuaGFwcE1hbmFnZXIuQWRkSGFuZGxlcihuZXcgSGFwcHMuSGFwcEhhbmRsZXIoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uSGFwcFRhZy5BdHRhY2tIaXQsIChoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXR0YWNrZXIgPSB0dXJuQmFzZVRyeS5lbnRpdGllc1toLkdldEF0dHJpYnV0ZV9JbnQoMSldO1xyXG4gICAgICAgICAgICAgICAgaW50IGRlZmVuZGVyRUlEID0gaC5HZXRBdHRyaWJ1dGVfSW50KDApO1xyXG4gICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGRlZmVuZGVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZlbmRlckVJRCA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVuZGVyID0gdHVybkJhc2VUcnkuZW50aXRpZXNbZGVmZW5kZXJFSURdO1xyXG4gICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50ID0gKFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQpaC5HZXRBdHRyaWJ1dGVfSW50KDIpO1xyXG4gICAgICAgICAgICAgICAgVGV4dEVudGl0eSBmZSA9IEdldFByb2pUZXh0RW50aXR5KGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZWZlbmRlciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBhdHRhY2tlci5Qb3NpdGlvblYyRDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zMiA9IGRlZmVuZGVyLlBvc2l0aW9uVjJEO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4RGlzID0gTWF0aC5BYnMocG9zLlggLSBwb3MyLlgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHRpbWUgPSAoZmxvYXQpeERpcyAqIDAuMWY7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBwb3NBbmltLkFkZChmZS5BbmltQmFzZSh0aW1lKSwgbmV3IFBvc2l0aW9uQW5pbWF0aW9uLlBvc2l0aW9uRGF0YShcclxuICAgICAgICAgICAgICAgICAgICAgICAgQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihhdHRhY2tlci5Qb3NpdGlvblYyRCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24oZGVmZW5kZXIuUG9zaXRpb25WMkQpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGF0dGFja2VyLlBvc2l0aW9uVjJEO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MyID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRhY2tlci5UeXBlID09IEJhdHRsZU1haW4uRW50aXR5VHlwZS5lbmVteSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zMi5YID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MyLlggPSA2O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4RGlzID0gTWF0aC5BYnMocG9zLlggLSBwb3MyLlgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHRpbWUgPSAoZmxvYXQpeERpcyAqIDAuMWY7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zQW5pbS5BZGQoZmUuQW5pbUJhc2UodGltZSksIG5ldyBQb3NpdGlvbkFuaW1hdGlvbi5Qb3NpdGlvbkRhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24ocG9zKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihwb3MyKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgdHVybkJhc2VUcnkuaGFwcE1hbmFnZXIuQWRkSGFuZGxlcihuZXcgSGFwcHMuSGFwcEhhbmRsZXIoQmF0dGxlTWFpbi5IYXBwVGFnLkF0dGFja01pc3MsIChoKSA9PlxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGF0dGFja2VyID0gdHVybkJhc2VUcnkuZW50aXRpZXNbaC5HZXRBdHRyaWJ1dGVfSW50KDApXTtcclxuICAgICAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudCA9IChQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50KWguR2V0QXR0cmlidXRlX0ludCgxKTtcclxuICAgICAgICAgICAgICAgIFRleHRFbnRpdHkgZmUgPSBHZXRQcm9qVGV4dEVudGl0eShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBhdHRhY2tlci5Qb3NpdGlvblYyRDtcclxuICAgICAgICAgICAgICAgIHZhciBwb3MyID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dGFja2VyLlR5cGUgPT0gQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmVuZW15KVxyXG4gICAgICAgICAgICAgICAgICAgIHBvczIuWCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHBvczIuWCA9IDY7XHJcbiAgICAgICAgICAgICAgICB2YXIgeERpcyA9IE1hdGguQWJzKHBvcy5YIC0gcG9zMi5YKTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHRpbWUgPSAoZmxvYXQpeERpcyAqIDAuMWY7XHJcbiAgICAgICAgICAgICAgICBwb3NBbmltLkFkZChmZS5BbmltQmFzZSh0aW1lKSwgbmV3IFBvc2l0aW9uQW5pbWF0aW9uLlBvc2l0aW9uRGF0YShcclxuICAgICAgICAgICAgICAgICAgICBCYXR0bGVFbnRpdHlUb1NjcmVlblBvc2l0aW9uKHBvcyksXHJcbiAgICAgICAgICAgICAgICAgICAgQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbihwb3MyKSkpO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG5cclxuICAgICAgICAgICAgbW92ZUNoYXJzID0gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IERpY3Rpb25hcnk8b2JqZWN0LCBzdHJpbmc+KCksKF9vMyk9PntfbzMuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuRmlyZSxcIkZcIik7X28zLkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLkljZSxcIklcIik7X28zLkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLlRodW5kZXIsXCJUXCIpO19vMy5BZGQoQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Ob3JtYWxTaG90LFwiR1wiKTtfbzMuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZVJpZ2h0LFVuaWNvZGUuUmlnaHRhcnJvdzIrXCJcIik7X28zLkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVVcCxVbmljb2RlLlVwYXJyb3cyK1wiXCIpO19vMy5BZGQoQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Nb3ZlRG93bixVbmljb2RlLkRvd25hcnJvdzIrXCJcIik7X28zLkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVMZWZ0LFVuaWNvZGUuTGVmdGFycm93MitcIlwiKTtfbzMuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuSWNlQm9tYixcIklCXCIpO19vMy5BZGQoQmF0dGxlTWFpbi5Nb3ZlVHlwZS5UaHVuZGVyQm9tYixcIlRCXCIpO19vMy5BZGQoQmF0dGxlTWFpbi5Nb3ZlVHlwZS5TdW1tb25FbnRpdHksXCJTVVwiKTtfbzMuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuRG9Ob3RoaW5nLFwiIFwiKTtfbzMuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuRG93bkZpcmUsXCJGRFwiKTtfbzMuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuVHJpcGxlRmlyZSxcIlRGXCIpO3JldHVybiBfbzM7fSk7XHJcblxyXG4gICAgICAgICAgICBtb3ZlRGVzY3JpcHRpb25zID0gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IERpY3Rpb25hcnk8b2JqZWN0LCBzdHJpbmc+KCksKF9vNCk9PntfbzQuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuSWNlLFwiSWNlIFNob3RcIik7X280LkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLkZpcmUsXCJGaXJlIFNob3RcIik7X280LkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLlRodW5kZXIsXCJUaHVuZGVyIFNob3RcIik7X280LkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLkljZUJvbWIsXCJJY2UgQm9tYlwiKTtfbzQuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuTm9ybWFsU2hvdCxcIkd1blwiKTtfbzQuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuTW92ZVJpZ2h0LFVuaWNvZGUuUmlnaHRhcnJvdzIrXCJcIik7X280LkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVVcCxVbmljb2RlLlVwYXJyb3cyK1wiXCIpO19vNC5BZGQoQmF0dGxlTWFpbi5Nb3ZlVHlwZS5Nb3ZlRG93bixVbmljb2RlLkRvd25hcnJvdzIrXCJcIik7X280LkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLk1vdmVMZWZ0LFVuaWNvZGUuTGVmdGFycm93MitcIlwiKTtfbzQuQWRkKEJhdHRsZU1haW4uTW92ZVR5cGUuVGh1bmRlckJvbWIsXCJUaHVuZGVyIEJvbWJcIik7X280LkFkZChCYXR0bGVNYWluLk1vdmVUeXBlLlN1bW1vbkVudGl0eSxcIlN1bW1vblwiKTtyZXR1cm4gX280O30pO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1lc09uUG9zID0gbmV3IE1lc3NhZ2VPblBvc2l0aW9uKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0dXJuQmFzZVRyeS5lbnRpdGllcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHR1cm5CYXNlVHJ5LmVudGl0aWVzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuVHlwZSA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmhlcm8pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGJhdHRsZXJSZW5kZXJzW2ldLkdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9tZXNPblBvcy5NZXNzYWdlT25Qb3MoQmF0dGxlRW50aXR5VG9TY3JlZW5Qb3NpdGlvbih0dXJuQmFzZVRyeS5lbnRpdGllc1tpXS5wb3MpLCBcIllPVVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL01lc3NhZ2VPblBvcyhWZWN0b3IyRC5aZXJvLCBcIllPVVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5SZWFkTGluZSgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgVXBkYXRlQmF0dGxlUmVuZGVyQ291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKGJhdHRsZXJSZW5kZXJzLkNvdW50IDwgdGhpcy50dXJuQmFzZVRyeS5lbnRpdGllcy5Db3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dEVudGl0eSBpdGVtID0gdGV4dFdvcmxkLkdldEZyZWVFbnRpdHkoMiwgMik7XHJcbiAgICAgICAgICAgICAgICBiYXR0bGVyUmVuZGVycy5BZGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLlNldFBvc2l0aW9uKEJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24odHVybkJhc2VUcnkuZW50aXRpZXNbYmF0dGxlclJlbmRlcnMuQ291bnQgLSAxXS5wb3MpKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHN0cmluZyBHZXRFbnRpdHlOYW1lKGludCB1c2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGdhbWVFbnRpdHkgPSB0dXJuQmFzZVRyeS5lbnRpdGllc1t1c2VyXTtcclxuICAgICAgICAgICAgdmFyIGNoYXJzID0gR2V0Q2hhcihnYW1lRW50aXR5KTtcclxuICAgICAgICAgICAgc3RyaW5nIG5hbWUgPSBuZXcgc3RyaW5nKGNoYXJzKTtcclxuICAgICAgICAgICAgaWYgKGdhbWVFbnRpdHkuZ3JhcGhpY1JlcGVhdGVkSW5kZXggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSArIChnYW1lRW50aXR5LmdyYXBoaWNSZXBlYXRlZEluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEVudGl0eSBHZXRQcm9qVGV4dEVudGl0eShQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50IGVsZW1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZmUgPSB0ZXh0V29ybGQuR2V0VGVtcEVudGl0eSgxLCAxKTtcclxuICAgICAgICAgICAgZmUuT3JpZ2luLkRyYXdDaGFyKFRleHRCb2FyZC5JTlZJU0lCTEVDSEFSLCAwLCAwKTtcclxuICAgICAgICAgICAgaW50IGVsZW1lbnRDb2xvciA9IEVsZW1lbnRUb1Byb2pDb2xvcihlbGVtZW50KTtcclxuICAgICAgICAgICAgZmUuT3JpZ2luLlNldEJhY2tDb2xvcihlbGVtZW50Q29sb3IsIDAsIDApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3KGZsb2F0IGRlbHRhKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIElucHV0S2V5IGlucHV0ID0gKElucHV0S2V5KUlucHV0O1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQgIT0gSW5wdXRLZXkuTk9ORSAmJiB3YWl0aW5nRm9yTWVzc2FnZUlucHV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3YWl0aW5nRm9yTWVzc2FnZUlucHV0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2lmIChpbnB1dCAhPSBJbnB1dEtleS5OT05FKSBDb25zb2xlLldyaXRlTGluZShpbnB1dCk7XHJcbiAgICAgICAgICAgIC8vaW50IGlucHV0TnVtYmVyID0gaW5wdXQgLSAnMCc7XHJcbiAgICAgICAgICAgIC8vaWYgKGRlYnVnT24gJiYgaW5wdXQgPT0gJ2snKVxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgRGVidWdFeHRyYS5EZWJ1Z0V4LlNob3coKTtcclxuICAgICAgICAgICAgLy99XHJcblxyXG4gICAgICAgICAgICBpZiAobGFzdFBoYXNlICE9IHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHVybkJhc2VUcnkuYmF0dGxlU3RhdGUucGhhc2UgPT0gUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlUGhhc2UuUGlja0hhbmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vU2hvd01lc3NhZ2UoXCJQaWNrIHlvdXIgY29tbWFuZHNcIiwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLlNldEFsbChUZXh0Qm9hcmQuTk9DSEFOR0VDSEFSLCBUZXh0Qm9hcmQuTk9DSEFOR0VDT0xPUiwgQ29sb3JzLkZpcmVBdXJhKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFBoYXNlID09IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkJhdHRsZVBoYXNlLlBpY2tIYW5kcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoXCJYX19YXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIEhpZGVNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UZXh0Qm9hcmQuU2V0QWxsKFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXN0UGhhc2UgPSB0dXJuQmFzZVRyeS5iYXR0bGVTdGF0ZS5waGFzZTtcclxuICAgICAgICAgICAgaWYgKGlucHV0UGhhc2VzLkNvbnRhaW5zKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleURvd25Vbmljb2RlID49IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleURvd25Vbmljb2RlID09ICdwJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoXCJQUkVWSUVXXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3U3lzdGVtLlN0YXJ0UHJldmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlEb3duVW5pY29kZSA9PSAnZScgJiYgSGFzQXR0YWNrcygpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNrTWVudSA9ICFhdHRhY2tNZW51O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGFja01lbnUgJiYga2V5RG93blVuaWNvZGUgPT0gVW5pY29kZS5Fc2NhcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNrTWVudSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRYID0gaW5wdXRILklucHV0dGVkKGtleURvd25Vbmljb2RlLCB0dXJuQmFzZVRyeS5pbnB1dHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFgudHlwZSA9PSBJbnB1dFR5cGUuTWlzY0JhdHRsZSAmJiBpbnB1dFguYXJnMSA9PSAoaW50KU1pc2NCYXR0bGVJbnB1dC5IZWxwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9oZWxwVmlzdWFsaXplUmVxdWVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHAuU2hvdyh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFgudHlwZSAhPSBJbnB1dFR5cGUuTm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHVybkJhc2VUcnkuSW5wdXREb25lKGlucHV0WCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChLZXlib2FyZC5kb3duVW5pY29kZXMuQ29udGFpbnMoJ2MnKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2tNZW51ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNrTWVudSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHVybkJhc2VUcnkuaW5wdXRzLmlucHV0Rm9yQ29uZmlybWF0aW9uLnR5cGUgIT0gSW5wdXRUeXBlLk5vbmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgKHR1cm5CYXNlVHJ5LmlucHV0cy5pbnB1dEZvckNvbmZpcm1hdGlvbi50eXBlID09IElucHV0VHlwZS5Nb3ZlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNrUHJldmlldy5TaG93UHJldmlldygwLCB0dXJuQmFzZVRyeS5pbnB1dHMuaW5wdXRGb3JDb25maXJtYXRpb24uYXJnMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5CYXNlVHJ5LkNvbmZpcm1JbnB1dFN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFja1ByZXZpZXcuRW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5CYXNlVHJ5LklucHV0Q29uZmlybWVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRhY2tQcmV2aWV3LkVuZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvL2ZvcmVhY2ggKHZhciBpdGVtIGluIG1vdmVLZXlzKVxyXG4gICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAvLyAgICBpZiAoaXRlbS5WYWx1ZSA9PSBpbnB1dClcclxuICAgICAgICAgICAgICAgIC8vICAgIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICB0dXJuQmFzZVRyeS5JbnB1dERvbmUoaXRlbS5LZXkpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgfVxyXG4gICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVXBkYXRlQmF0dGxlUmVuZGVyQ291bnQoKTtcclxuICAgICAgICAgICAgRHJhd0dyYXBoaWNzKGRlbHRhKTtcclxuICAgICAgICAgICAgaWYgKENhbkFkdmFuY2VfTG9naWMoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlICE9IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkJhdHRsZVBoYXNlIC5FeGVjdXRlTW92ZSAmJiBwcmV2aWV3U3lzdGVtLnByZXZpZXdBY3RpdmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlld1N5c3RlbS5FbmRQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQmF0dGxlTWFpbi5CYXR0bGVQaGFzZS5FbmVteU1vdmVDaG9pY2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5CYXNlVHJ5LlRpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVNYWluLkJhdHRsZVBoYXNlLkhhbmRSZWNoYXJnZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHVybkJhc2VUcnkuVGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEJhdHRsZU1haW4uQmF0dGxlUGhhc2UuUGlja0hhbmRzOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBCYXR0bGVNYWluLkJhdHRsZVBoYXNlLkV4ZWN1dGVNb3ZlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1N5c3RlbS5UaHJlYWRpbmcuVGhyZWFkLlNsZWVwKDMwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5CYXNlVHJ5LlRpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vVXBkYXRlQmF0dGxlUmVuZGVyQ291bnQoKTtcclxuICAgICAgICAgICAgLy9EcmF3R3JhcGhpY3MoZGVsdGEpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENhbkFkdmFuY2VHcmFwaGljcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dFdvcmxkLklzRG9uZSgpICYmICF3YWl0aW5nRm9yTWVzc2FnZUlucHV0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIENhbkFkdmFuY2VfTG9naWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENhbkFkdmFuY2VHcmFwaGljcygpICYmIEhhcHBIYW5kbGluZy5Jc0RvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNob3dNZXNzYWdlKHN0cmluZyBzLCBib29sIHdhaXRGb3JJbnB1dCA9IHRydWUsIGJvb2wgZG9Ob3RIaWRlID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLk1lc3NhZ2VEb05vdEhpZGUgPSBkb05vdEhpZGU7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBzO1xyXG4gICAgICAgICAgICBtZXNzYWdlRW50Lk9yaWdpbi5SZXNldEludmlzaWJsZSgpO1xyXG4gICAgICAgICAgICBmbG9hdCB0aW1lVG9Xcml0ZSA9IG1lc3NhZ2UuTGVuZ3RoICogMC4wMTVmO1xyXG4gICAgICAgICAgICBpZiAodGltZVRvV3JpdGUgPiAwLjRmKSB0aW1lVG9Xcml0ZSA9IDAuNGY7XHJcbiAgICAgICAgICAgIGNoYXJCeUNoYXJBbmltLkFkZChtZXNzYWdlRW50LkFuaW1CYXNlKHRpbWVUb1dyaXRlKSwgbmV3IENoYXJCeUNoYXJBbmltYXRpb24uQ2hhckJ5Q2hhckRhdGEoMCwgbWVzc2FnZS5MZW5ndGggKyAxKSk7XHJcbiAgICAgICAgICAgIGRlbGF5QW5pbS5EZWxheSh0aW1lVG9Xcml0ZSArIDAuOGYpO1xyXG5cclxuICAgICAgICAgICAgLy93YWl0aW5nRm9yTWVzc2FnZUlucHV0ID0gd2FpdEZvcklucHV0O1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoXCJNOiBcIitzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEhpZGVNZXNzYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB3YWl0aW5nRm9yTWVzc2FnZUlucHV0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZShcIk06IFwiK3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2hvd0JhdHRsZU1lc3NhZ2Uoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIXR1cm5CYXNlVHJ5LkJhdHRsZURlY2lkZWQoKSlcclxuICAgICAgICAgICAgICAgIFNob3dNZXNzYWdlKHMpO1xyXG4gICAgICAgICAgICAvL0NvbnNvbGUuV3JpdGUoXCJNOiBcIitzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdHcmFwaGljcyhmbG9hdCBkZWx0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vdXNlSG92ZXIubW91c2VIb3ZlcnMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgdHVybkJhc2VUcnkuVXBkYXRlKGRlbHRhKTtcclxuICAgICAgICAgICAgLy9jbGVhciBncmlkXHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5SZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlucHV0UGhhc2VzLkNvbnRhaW5zKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dEJvYXJkLlNldEFsbChUZXh0Qm9hcmQuTk9DSEFOR0VDSEFSLCBUZXh0Qm9hcmQuTk9DSEFOR0VDT0xPUiwgQ29sb3JzLkJhY2tncm91bmRJbnB1dCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBjb250cm9sc1kgPSBncmlkU2NhbGUgKiAzICsgMTAgKyAzICsgMjtcclxuXHJcbiAgICAgICAgICAgIGludCBlbmVteUdyaWRPZmZYID0gZ3JpZFNjYWxlICogMztcclxuICAgICAgICAgICAgYm9vbCBkcmF3RG90ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3UmVwZWF0ZWQoJyAnLCBncmlkT2Zmc2V0eCwgZ3JpZE9mZnNldHksIGdyaWRTY2FsZSAqIDYsIGdyaWRTY2FsZSAqIDMsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBDb2xvcnMuQmFja0JhdHRsZSk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMyAqIGdyaWRTY2FsZTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IDMgKiBncmlkU2NhbGU7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhd0RvdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3Q2hhcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgJy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkT2Zmc2V0eCArIGksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRPZmZzZXR5ICsgaiwgQ29sb3JzLkdyaWRIZXJvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdDaGFyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZE9mZnNldHggKyBpICsgZW5lbXlHcmlkT2ZmWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRPZmZzZXR5ICsgaiwgQ29sb3JzLkdyaWRFbmVteSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpICUgZ3JpZFNjYWxlID09IDAgJiYgaiAlIGdyaWRTY2FsZSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3R3JpZChpICsgZ3JpZE9mZnNldHggKyBlbmVteUdyaWRPZmZYLCBqICsgZ3JpZE9mZnNldHksIGdyaWRTY2FsZSwgZ3JpZFNjYWxlLCBDb2xvcnMuR3JpZEVuZW15KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdHcmlkKGkgKyBncmlkT2Zmc2V0eCwgaiArIGdyaWRPZmZzZXR5LCBncmlkU2NhbGUsIGdyaWRTY2FsZSwgQ29sb3JzLkdyaWRIZXJvKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdHVybkJhc2VUcnkuZW50aXRpZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGdhbWVFbnRpdHkgPSB0dXJuQmFzZVRyeS5lbnRpdGllc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWMgPSBHZXRDaGFyKGdhbWVFbnRpdHkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBnYW1lRW50aXR5LlBvc2l0aW9uVjJEO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcmVlblBvcyA9IEJhdHRsZUVudGl0eVRvU2NyZWVuUG9zaXRpb24oKEJhc2VVdGlscy5WZWN0b3IyRClwb3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVFbnRpdHkuVHlwZSA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbnRpdHlUeXBlLnBhbmVsZWZmZWN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblBvcy5ZID0gc2NyZWVuUG9zLlkgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblBvcy5YID0gc2NyZWVuUG9zLlggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodGV4dFdvcmxkLklzRG9uZSgpICYmIEhhcHBIYW5kbGluZy5Jc0RvbmUoKSlcclxuICAgICAgICAgICAgICAgICAgICBiYXR0bGVyUmVuZGVyc1tpXS5PcmlnaW4uUG9zaXRpb24gPSBzY3JlZW5Qb3M7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmF0dGxlclJlbmRlcnNbaV0uT3JpZ2luLlBvc2l0aW9uICE9IHNjcmVlblBvcyAmJiB0ZXh0V29ybGQuSXNEb25lKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9iYXR0bGVyUmVuZGVyc1tpXS5PcmlnaW4uUG9zaXRpb24gPSBzY3JlZW5Qb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9mbG9hdCB0aW1lID0gMC4xNWY7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8vL3RpbWUgPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcG9zQW5pbS5BZGQoYmF0dGxlclJlbmRlcnNbaV0uQW5pbUJhc2UodGltZSksIG5ldyBQb3NpdGlvbkFuaW1hdGlvbi5Qb3NpdGlvbkRhdGEoYmF0dGxlclJlbmRlcnNbaV0uT3JpZ2luLlBvc2l0aW9uLCBzY3JlZW5Qb3MsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IENvbG9ycy5IZXJvO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVFbnRpdHkuVHlwZSA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmVuZW15KSBjID0gQ29sb3JzLkVuZW15O1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVFbnRpdHkuVHlwZSA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbnRpdHlUeXBlLnBpY2t1cCkgYyA9IENvbG9ycy5pbnB1dEtleTtcclxuICAgICAgICAgICAgICAgIGlmIChnYW1lRW50aXR5LkRlYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUjtcclxuICAgICAgICAgICAgICAgIGludCBiYyA9IFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZUVudGl0eS5BbGl2ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50IGVsZW1lbnQgPSBnYW1lRW50aXR5LmVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT0gUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uRWxlbWVudC5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gRWxlbWVudFRvQXVyYUNvbG9yKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChnYW1lRW50aXR5LkRlYWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBlYy5MZW5ndGggKyAxOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXR0bGVyUmVuZGVyc1tpXS5PcmlnaW4uRHJhd0NoYXIoVGV4dEJvYXJkLklOVklTSUJMRUNIQVIsIGosIDAsIGMsIGJjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhdHRsZXJSZW5kZXJzW2ldLk9yaWdpbi5EcmF3KGVjLCAwLCAwLCBjLCBiYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVFbnRpdHkuZ3JhcGhpY1JlcGVhdGVkSW5kZXggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXR0bGVyUmVuZGVyc1tpXS5PcmlnaW4uRHJhd09uZURpZ2l0KGdhbWVFbnRpdHkuZ3JhcGhpY1JlcGVhdGVkSW5kZXggKyAxLCAwICsgZWMuTGVuZ3RoLCAwLCBjLCBiYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGludCB0ZXh0Qm9hcmRIZWlnaHQgPSAzICogZ3JpZFNjYWxlO1xyXG5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9pbnQgeSA9IDI7XHJcbiAgICAgICAgICAgICAgICAvL2ludCB4ID0gNiAqIGdyaWRTY2FsZSArIDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCB4ID0gMztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRQaGFzZXMuQ29udGFpbnModHVybkJhc2VUcnkuYmF0dGxlU3RhdGUucGhhc2UpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIERyYXdDb250cm9scyhjb250cm9sc1ksIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuQmFzZVRyeS50aW1lVG9DaG9vc2UgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQgcmF0aW8gPSB0dXJuQmFzZVRyeS50aW1lVG9DaG9vc2UgLyB0dXJuQmFzZVRyeS50aW1lVG9DaG9vc2VNYXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3UmVwZWF0ZWQoJyAnLCB4LCBjb250cm9sc1kgKyAxNiwgKGludCkocmF0aW8gKiAxNSksIDEsIENvbG9ycy5Cb2FyZCwgQ29sb3JzLkdyaWRIZXJvKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdSZXBlYXRlZCgnICcsIHggLSAxLCBjb250cm9sc1kgLSAxLCAxNSwgMTUsIENvbG9ycy5Cb2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCB0dXJuT3JkZXJYID0gNiAqIGdyaWRTY2FsZSArIDU7XHJcbiAgICAgICAgICAgIGludCB0dXJuT3JkZXJZID0gMjtcclxuICAgICAgICAgICAgdHVybk9yZGVyWCA9IDI7XHJcbiAgICAgICAgICAgIHR1cm5PcmRlclkgPSAzICogZ3JpZFNjYWxlICsgMTtcclxuICAgICAgICAgICAgaWYgKGlucHV0UGhhc2VzLkNvbnRhaW5zKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlKSlcclxuICAgICAgICAgICAgICAgIHR1cm5PcmRlclkgKz0gMztcclxuXHJcbiAgICAgICAgICAgIERyYXdUdXJuT3JkZXIodHVybk9yZGVyWCwgdHVybk9yZGVyWSk7XHJcbiAgICAgICAgICAgIGlmICghc3RhZ2VEYXRhLmhpZGVMaWZlVUkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERyYXdMaWZlKHR1cm5PcmRlclggKyAxNCwgdHVybk9yZGVyWSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludCBYID0gMjtcclxuICAgICAgICAgICAgICAgIC8vY29uc3QgaW50IFkgPSAxNjtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VFbnQuU2V0UG9zaXRpb24oWCwgY29udHJvbHNZIC0gMik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZSAhPSBudWxsICYmICghQ2FuQWR2YW5jZUdyYXBoaWNzKCkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdHcmlkKFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIG1lc3NhZ2VFbnQuT3JpZ2luLlBvc2l0aW9uLlhJbnQsIG1lc3NhZ2VFbnQuT3JpZ2luLlBvc2l0aW9uLllJbnQsIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIG1lc3NhZ2VFbnQuV2lkdGgsIG1lc3NhZ2VFbnQuSGVpZ2h0LCBDb2xvcnMuQm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbWVzc2FnZUVudC5PcmlnaW4uRHJhd0dyaWQoMCwgMCwgNDAsIDQsIENvbG9ycy5Cb2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVudC5PcmlnaW4uRHJhd1dpdGhMaW5lYnJlYWtzKG1lc3NhZ2UsIDEsIDAsIDEsIENvbG9ycy5IZXJvVHVybik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFNZXNzYWdlRG9Ob3RIaWRlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbnQuT3JpZ2luLlNldEFsbChUZXh0Qm9hcmQuSU5WSVNJQkxFQ0hBUik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3UmVwZWF0ZWQoJyAnLFgsIFksIDQwLCA0LCBDb2xvcnMuQm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5DdXJzb3JOZXdMaW5lKDEpO1xyXG4gICAgICAgICAgICBUZXh0Qm9hcmQuQ3Vyc29yTmV3TGluZSgxKTtcclxuICAgICAgICAgICAgLy90ZXh0Qm9hcmQuRHJhd19DdXJzb3IodHVybkJhc2VUcnkuYmF0dGxlU3RhdGUucGhhc2UuVG9TdHJpbmcoKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgdGV4dFdvcmxkLkRyYXdDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQuVHJ5RW5kQW5pbWF0aW9ucygpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQuQWR2YW5jZVRpbWUoZGVsdGEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKENhbkFkdmFuY2VHcmFwaGljcygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBIYXBwSGFuZGxpbmcuSGFuZGxlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoQ2FuQWR2YW5jZUdyYXBoaWNzKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHVybkJhc2VUcnkuaGFwcE1hbmFnZXIuVHJ5SGFuZGxlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9pZiAoQ2FuQWR2YW5jZSgpKVxyXG4gICAgICAgICAgICAvL3tcclxuXHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgRWxlbWVudFRvQXVyYUNvbG9yKFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBiYyA9IFRleHRCb2FyZC5JTlZJU0lCTEVDT0xPUjtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uRWxlbWVudC5GaXJlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiYyA9IENvbG9ycy5GaXJlQXVyYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50LkljZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmMgPSBDb2xvcnMuSWNlQXVyYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50LlRodW5kZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJjID0gQ29sb3JzLlRodW5kZXJBdXJhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYmM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBFbGVtZW50VG9Qcm9qQ29sb3IoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGJjID0gQ29sb3JzLmlucHV0S2V5O1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50LkZpcmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJjID0gQ29sb3JzLkZpcmVTaG90O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQuSWNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiYyA9IENvbG9ycy5JY2VBdXJhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQuVGh1bmRlcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmMgPSBDb2xvcnMuVGh1bmRlckF1cmE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBiYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IyRCBCYXR0bGVFbnRpdHlUb1NjcmVlblBvc2l0aW9uKEJhc2VVdGlscy5WZWN0b3IyRCBwb3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBvcy5YO1xyXG4gICAgICAgICAgICB2YXIgeSA9IHBvcy5ZO1xyXG4gICAgICAgICAgICB2YXIgc2NyZWVuUG9zID0gbmV3IEJhc2VVdGlscy5WZWN0b3IyRCh4ICogZ3JpZFNjYWxlICsgZ3JpZFNjYWxlIC8gMiArIGdyaWRPZmZzZXR4LCAyICogZ3JpZFNjYWxlIC0geSAqIGdyaWRTY2FsZSArIGdyaWRTY2FsZSAvIDIgKyBncmlkT2Zmc2V0eSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzY3JlZW5Qb3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRHJhd0NvbnRyb2xzKGludCB5LCBpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdHcmlkKHggLSAyLCB5IC0gMSwgMjAsIDE1LCBDb2xvcnMuQm9hcmQpO1xyXG4gICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3KFwiQ29udHJvbHNcIiwgeCwgeSwgKTtcclxuICAgICAgICAgICAgVGV4dEJvYXJkLlNldEN1cnNvckF0KHgrNSwgeSk7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3X0N1cnNvcihcIkNvbnRyb2xzXCIsIENvbG9ycy5XaW5kb3dMYWJlbCk7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5DdXJzb3JOZXdMaW5lKHgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vSW5wdXRUYWdzIGlucHV0VGFnID0gSW5wdXRUYWdzLk1PVkVGSVg7XHJcbiAgICAgICAgICAgIGludCB5T2ZmID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICghYXR0YWNrTWVudSkge1xyXG4gICAgICAgICAgICAgICAgeU9mZiA9IERyYXdJbnB1dHNfRml4KHksIHgsIElucHV0VGFncy5NT1ZFRklYLCB5T2ZmKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2lmIChIYXNBdHRhY2tzKCkpXHJcbiAgICAgICAgICAgICAgICAvLyAgICBHYW1lTWFpbi5EcmF3SW5wdXQoeCwgeSArIDIgKyB5T2ZmLCAnZScsIFwiQVRUQUNLXCIsIFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgICAgICAvL2Vsc2VcclxuICAgICAgICAgICAgICAgIC8vICAgIERyYXdJbnB1dCh4LCB5ICsgMiArIHlPZmYsIFwiXCIsIFwiXCIsIFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgICAgICAvL3lPZmYgKz0gMjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihQcmV2aWV3VmlzaWJsZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVNYWluLkRyYXdJbnB1dCh4LCB5ICsgMiArIHlPZmYsICdwJywgXCJQUkVWSUVXXCIsIFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgRHJhd0lucHV0KHgsIHkgKyAyICsgeU9mZiwgXCJcIiwgXCJcIiwgVGV4dEJvYXJkKTtcclxuICAgICAgICAgICAgICAgIHlPZmYgKz0gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3lPZmYrKztcclxuICAgICAgICAgICAgICAgIHlPZmYgPSBEcmF3SW5wdXRzX0ZpeCh5LCB4LCBJbnB1dFRhZ3MuTUlTQywgeU9mZik7XHJcbiAgICAgICAgICAgICAgICAvL3lPZmYrKztcclxuICAgICAgICAgICAgICAgIC8veU9mZiA9IERyYXdJbnB1dHNfRml4KHksIHgsIElucHV0VGFncy5NT1ZFVU5GSVgsIHlPZmYpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGludCBhdHRhY2tOdW1iZXIgPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHR1cm5CYXNlVHJ5LmlucHV0cy5pbnB1dHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHgyID0geDtcclxuICAgICAgICAgICAgICAgIGludCB5MiA9IHkgKyAyICsgeU9mZjtcclxuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHR1cm5CYXNlVHJ5LmlucHV0cy5pbnB1dHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR1cm5CYXNlVHJ5LmlucHV0cy5UYWdJcyhpLCBJbnB1dFRhZ3MuTU9WRVVORklYKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB5T2ZmKys7XHJcbiAgICAgICAgICAgICAgICAgICAgeU9mZisrO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB1bmljb2RlID0gJzAnICsgYXR0YWNrTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dGFja051bWJlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlSG92ZXIubW91c2VIb3ZlcnMuQWRkKG5ldyBNb3VzZUhvdmVyKG5ldyBSZWN0KHgyIC0gMiwgeTIsIDIwLCAxKSwgMCwgaW5wdXQuYXJnMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdDaGFyKCdbJywgeDIgLSAxLCB5MiwgQ29sb3JzLkhlcm9UdXJuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhd0NoYXIoJ10nLCB4MiArIGxlbmd0aEJuYW1lLCB5MiwgQ29sb3JzLkhlcm9UdXJuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGRlc2NyaXB0aW9uID0gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09IElucHV0VHlwZS5Nb3ZlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUgbSA9IChQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZSlpbnB1dC5hcmcxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlRGVzY3JpcHRpb25zLlRyeUdldFZhbHVlKG0sIG91dCBkZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXNjcmlwdGlvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG0uVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT0gSW5wdXRUeXBlLk1pc2NCYXR0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNaXNjQmF0dGxlSW5wdXQgYXJnMSA9IChNaXNjQmF0dGxlSW5wdXQpaW5wdXQuYXJnMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBtaXNjRGVzY3JpcHRpb25zW2FyZzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgVGV4dEJvYXJkID0gdGhpcy5UZXh0Qm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZU1haW4uRHJhd0lucHV0KHgyLCB5MiwgdW5pY29kZSwgZGVzY3JpcHRpb24sIFRleHRCb2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vdmFyIGMgPSBtb3ZlQ2hhcnNbbW92ZV07XHJcbiAgICAgICAgICAgICAgICAvL0RyYXdNb3ZlKG1vdmUsIENvbG9ycy5IZXJvVHVybik7XHJcbiAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3KGMsIHgyICsgMywgeTIsIENvbG9ycy5IZXJvVHVybik7XHJcbiAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3V2l0aEdyaWQoYytcIlwiLCB4MiwgeSArIDIsIENvbG9ycy5IZXJvVHVybik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgR2FtZU1haW4uRHJhd0lucHV0KHgsIHkgKyAyICsgeU9mZiwgJ2MnLCBcIkNPTlRST0xTXCIsIFRleHRCb2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgSGFzQXR0YWNrcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHR1cm5CYXNlVHJ5LmlucHV0cy5pbnB1dHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR1cm5CYXNlVHJ5LmlucHV0cy5UYWdJcyhpLCBJbnB1dFRhZ3MuTU9WRVVORklYKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBQcmV2aWV3VmlzaWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiB0dXJuQmFzZVRyeS5lbnRpdGllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuVHlwZSA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbnRpdHlUeXBlLmVuZW15KSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludCBEcmF3SW5wdXRzX0ZpeChpbnQgeSwgaW50IHgsIElucHV0VGFncyBpbnB1dFRhZywgaW50IHlPZmYpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0dXJuQmFzZVRyeS5pbnB1dHMuaW5wdXRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCB4MiA9IHg7XHJcbiAgICAgICAgICAgICAgICBpbnQgeTIgPSB5ICsgMiArIHlPZmY7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB0dXJuQmFzZVRyeS5pbnB1dHMuaW5wdXRzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0dXJuQmFzZVRyeS5pbnB1dHMuVGFnSXMoaSwgaW5wdXRUYWcpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmljb2RlID0gaW5wdXRILkdldEZpeGVkTW92ZVVuaWNvZGUoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBmb3JjZUlucHV0TGFiZWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBmb3JjZUNvbW1hbmRMYWJlbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9vbCBtb3ZlbWVudENvbW1hbmQgPSB1bmljb2RlID09ICd3JztcclxuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZW1lbnRDb21tYW5kKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VJbnB1dExhYmVsID0gVUlSZXVzYWJsZS5XQVNEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZUNvbW1hbmRMYWJlbCA9IFVJUmV1c2FibGUuYXJyb3dzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodW5pY29kZSA9PSAnYScgfHwgdW5pY29kZSA9PSAncycgfHwgdW5pY29kZSA9PSAnZCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgeU9mZisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHlPZmYrKztcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3Q2hhcignWycsIHgyIC0gMSwgeTIsIENvbG9ycy5IZXJvVHVybik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdDaGFyKCddJywgeDIgKyBsZW5ndGhCbmFtZSwgeTIsIENvbG9ycy5IZXJvVHVybik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbiA9IHN0cmluZy5FbXB0eTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PSBJbnB1dFR5cGUuTW92ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZUNvbW1hbmRMYWJlbCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGZvcmNlQ29tbWFuZExhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uTW92ZVR5cGUgbSA9IChQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5Nb3ZlVHlwZSlpbnB1dC5hcmcxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZURlc2NyaXB0aW9ucy5UcnlHZXRWYWx1ZShtLCBvdXQgZGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9uID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBtLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PSBJbnB1dFR5cGUuTWlzY0JhdHRsZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1pc2NCYXR0bGVJbnB1dCBhcmcxID0gKE1pc2NCYXR0bGVJbnB1dClpbnB1dC5hcmcxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG1pc2NEZXNjcmlwdGlvbnNbYXJnMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlSG92ZXIubW91c2VIb3ZlcnMuQWRkKG5ldyBNb3VzZUhvdmVyKG5ldyBSZWN0KHgyIC0gMiwgeTIsIDIwLCAxKSwgMSwgaW5wdXQuYXJnMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW92ZW1lbnRDb21tYW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VIb3Zlci5tb3VzZUhvdmVycy5BZGQobmV3IE1vdXNlSG92ZXIobmV3IFJlY3QoeDIgLSAyLCB5MiwgMjAsIDEpLCAyLCAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlSG92ZXIubW91c2VIb3ZlcnMuQWRkKG5ldyBNb3VzZUhvdmVyKG5ldyBSZWN0KHgyIC0gMiwgeTIsIDIwLCAxKSwgMCwgaW5wdXQuYXJnMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgVGV4dEJvYXJkID0gdGhpcy5UZXh0Qm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmNlSW5wdXRMYWJlbCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRHJhd0lucHV0KHgyLCB5MiwgdW5pY29kZSwgZGVzY3JpcHRpb24sIFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERyYXdJbnB1dCh4MiwgeTIsIGZvcmNlSW5wdXRMYWJlbCwgZGVzY3JpcHRpb24sIFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3ZhciBjID0gbW92ZUNoYXJzW21vdmVdO1xyXG4gICAgICAgICAgICAgICAgLy9EcmF3TW92ZShtb3ZlLCBDb2xvcnMuSGVyb1R1cm4pO1xyXG4gICAgICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhdyhjLCB4MiArIDMsIHkyLCBDb2xvcnMuSGVyb1R1cm4pO1xyXG4gICAgICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhd1dpdGhHcmlkKGMrXCJcIiwgeDIsIHkgKyAyLCBDb2xvcnMuSGVyb1R1cm4pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geU9mZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEcmF3SW5wdXQoaW50IHgyLCBpbnQgeTIsIGludCBrZXlVbmljb2RlLCBzdHJpbmcgZGVzY3JpcHRpb24sIFRleHRCb2FyZCBUZXh0Qm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgeDMgPSBEcmF3SW5wQ29tbW9uKHgyLCB5MiwgZGVzY3JpcHRpb24sIFRleHRCb2FyZCk7XHJcblxyXG4gICAgICAgICAgICBUZXh0Qm9hcmQuRHJhd1VuaWNvZGVMYWJlbChrZXlVbmljb2RlLCB4MywgeTIsIENvbG9ycy5pbnB1dEtleSk7XHJcbiAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdSZWN0KFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIGJhcngsIHkyLCA2K3gzLWJhcngsIDEsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBDb2xvcnMuQmFja0JhdHRsZSk7XHJcbiAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdSZWN0KFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIHgyLCB5MiwgNiArIHgzIC0geDIsIDEsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBDb2xvcnMuQmFja0JhdHRsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpbnQgRHJhd0lucENvbW1vbihpbnQgeDIsIGludCB5Miwgc3RyaW5nIGRlc2NyaXB0aW9uLCBUZXh0Qm9hcmQgVGV4dEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd0Jyb3duU3RyaXBlKHkyLCBUZXh0Qm9hcmQpO1xyXG4gICAgICAgICAgICBUZXh0Qm9hcmQuRHJhdyhkZXNjcmlwdGlvbiwgeDIsIHkyLCBDb2xvcnMuSW5wdXREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGludCB4MyA9IHgyICsgMTQ7XHJcblxyXG4gICAgICAgICAgICAvL2ludCBvZmZiID0gNztcclxuICAgICAgICAgICAgaW50IGJhcnggPSB4MiArIGRlc2NyaXB0aW9uLkxlbmd0aDtcclxuICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdSZWN0KFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIHgzLCB5MiwgNiwgMSwgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIENvbG9ycy5CYWNrQmF0dGxlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHgzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEcmF3U3RyaXBwZWRUZXh0KGludCB4LCBpbnQgeSwgc3RyaW5nIGRlc2NyaXB0aW9uLCBUZXh0Qm9hcmQgVGV4dEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd0Jyb3duU3RyaXBlKHksIFRleHRCb2FyZCk7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3KGRlc2NyaXB0aW9uLCB4LCB5LCBDb2xvcnMuSW5wdXREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRHJhd1N1YlRleHQoaW50IHgsIGludCB5LCBzdHJpbmcgZGVzY3JpcHRpb24sIFRleHRCb2FyZCBUZXh0Qm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUZXh0Qm9hcmQuRHJhd1JlY3QoVGV4dEJvYXJkLk5PQ0hBTkdFQ0hBUiwgeCwgeSwgNiwgMSwgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIENvbG9ycy5CYWNrQmF0dGxlKTtcclxuICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXcoZGVzY3JpcHRpb24sIHgrMSwgeSwgQ29sb3JzLmlucHV0S2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEcmF3SW5wdXQoaW50IHgyLCBpbnQgeTIsIHN0cmluZyBrZXlMYWJlbCwgc3RyaW5nIGRlc2NyaXB0aW9uLCBUZXh0Qm9hcmQgVGV4dEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHgzID0gRHJhd0lucENvbW1vbih4MiwgeTIsIGRlc2NyaXB0aW9uLCBUZXh0Qm9hcmQpO1xyXG4gICAgICAgICAgICBUZXh0Qm9hcmQuRHJhdyhrZXlMYWJlbCwgeDMsIHkyLCBDb2xvcnMuaW5wdXRLZXkpO1xyXG4gICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3UmVjdChUZXh0Qm9hcmQuTk9DSEFOR0VDSEFSLCBiYXJ4LCB5MiwgNiArIHgzIC0gYmFyeCwgMSwgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIENvbG9ycy5CYWNrQmF0dGxlKTtcclxuICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhd1JlY3QoVGV4dEJvYXJkLk5PQ0hBTkdFQ0hBUiwgeDIsIHkyLCA2ICsgeDMgLSB4MiwgMSwgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIENvbG9ycy5CYWNrQmF0dGxlKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRHJhd0xpZmUoaW50IHR1cm5PcmRlclgsIGludCB0dXJuT3JkZXJZKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhd0dyaWQodHVybk9yZGVyWCAtIDEsIHR1cm5PcmRlclkgLSAxLCAyMCwgOSwgQ29sb3JzLldpbmRvd0xhYmVsKTtcclxuICAgICAgICAgICAgVGV4dEJvYXJkLlNldEN1cnNvckF0KHR1cm5PcmRlclggKyAxLCB0dXJuT3JkZXJZKTtcclxuICAgICAgICAgICAgaWYgKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlID09IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkJhdHRsZVBoYXNlLlBpY2tIYW5kcylcclxuICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3X0N1cnNvcihcIkxpZmVcIiwgQ29sb3JzLldpbmRvd0xhYmVsKTtcclxuICAgICAgICAgICAgVGV4dEJvYXJkLlNldEN1cnNvckF0KHR1cm5PcmRlclggKyA4LCB0dXJuT3JkZXJZKTtcclxuICAgICAgICAgICAgaWYgKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlID09IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkJhdHRsZVBoYXNlLlBpY2tIYW5kcylcclxuICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3X0N1cnNvcihcIkVsZW1lbnRcIiwgQ29sb3JzLldpbmRvd0xhYmVsKTtcclxuICAgICAgICAgICAgaW50IGluZGV4ID0gLTE7IC8vdXNpbmcgdGhpcyBiZWNhdXNlIG5vdCBhbGwgdW5pdHMgZ2V0IGRyYXduXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgeE9mZiA9IHR1cm5PcmRlclggKyAxO1xyXG4gICAgICAgICAgICAgICAgaW50IHlPZmYgPSB0dXJuT3JkZXJZICsgMiArIGkgKiAyO1xyXG4gICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdSZWN0KFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIHhPZmYsIHlPZmYsIDQsIDEsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tCYXR0bGUpO1xyXG4gICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdSZWN0KFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIHhPZmYrNywgeU9mZiwgOCwgMSwgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIEJhdHRsZVJlbmRlci5Db2xvcnMuQmFja0JhdHRsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0dXJuQmFzZVRyeS5lbnRpdGllcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0dXJuQmFzZVRyeS5lbnRpdGllcy5Db3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGUgPSB0dXJuQmFzZVRyeS5lbnRpdGllc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICghZS5kcmF3TGlmZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZS5EZWFkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IHhPZmYgPSB0dXJuT3JkZXJYICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgeU9mZiA9IHR1cm5PcmRlclkgKyAyICsgaW5kZXggKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb2xvciA9IENvbG9ycy5IZXJvVHVybjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEJhdHRsZU1haW4uRW50aXR5VHlwZS5lbmVteSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gQ29sb3JzLkVuZW15VHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZWxlbWVudCAhPSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50Lk5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gRWxlbWVudFRvQXVyYUNvbG9yKGUuZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhd09uZURpZ2l0X0N1cnNvcigoaW50KWUubGlmZS5WYWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL0RyYXdFbnRpdHlDaGFyKGUsIGNvbG9yLCB4T2ZmLCB5T2ZmKTtcclxuICAgICAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5EcmF3Q2hhcihHZXRDaGFyKGUpLCB4T2ZmLCB0dXJuT3JkZXJZICsgMiwgY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3VHdvRGlnaXRzKChpbnQpZS5saWZlLCB4T2ZmLCB5T2ZmLCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGVsZW1lbnQgPSBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQuRmlyZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBcIkZpcmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVNYWluLkVsZW1lbnQuSWNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IFwiSWNlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50LlRodW5kZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gXCJUaHVuZGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50Lk5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZUNvbG9yID0gRWxlbWVudFRvQXVyYUNvbG9yKGUuZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3KGVsZW1lbnQsIHhPZmYgKyA3LCB5T2ZmLCBlQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdPbmVEaWdpdF9DdXJzb3IoKGludCllLmxpZmUuVmFsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5DdXJzb3JOZXdMaW5lKHg6IDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRHJhd0Jyb3duU3RyaXBlKGludCB5T2ZmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd0Jyb3duU3RyaXBlKHlPZmYsIFRleHRCb2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgcHJpdmF0ZSB2b2lkIERyYXdCcm93blN0cmlwZShpbnQgeU9mZiwgVGV4dEJvYXJkIHRleHRCb2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHRCb2FyZC5EcmF3UmVjdChUZXh0Qm9hcmQuTk9DSEFOR0VDSEFSLCAwLCB5T2ZmLCB0ZXh0Qm9hcmQuV2lkdGgsIDEsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tTdHJpcGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIERyYXdUdXJuT3JkZXIoaW50IHR1cm5PcmRlclgsIGludCB0dXJuT3JkZXJZLCBib29sIGhvcml6b250YWwgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVmFsdWUgdHVybnNQZXJQaGFzZSA9IHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnR1cm5zUGVyUGhhc2U7XHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5TZXRDdXJzb3JBdCh0dXJuT3JkZXJYICsgMywgdHVybk9yZGVyWSk7XHJcbiAgICAgICAgICAgIGlmICh0dXJuQmFzZVRyeS5iYXR0bGVTdGF0ZS5waGFzZSA9PSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5CYXR0bGVQaGFzZS5QaWNrSGFuZHMpXHJcbiAgICAgICAgICAgICAgICBUZXh0Qm9hcmQuRHJhd19DdXJzb3IoXCJUdXJuXCIsIENvbG9ycy5XaW5kb3dMYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgZHJhd2luZ0lkID0gLTE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgeU9mZiA9IHR1cm5PcmRlclkgKyAyICsgaSAqIDI7XHJcbiAgICAgICAgICAgICAgICBEcmF3QnJvd25TdHJpcGUoeU9mZiwgVGV4dEJvYXJkKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgMzsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB4T2ZmID0gdHVybk9yZGVyWCArIGogKiAzICsgMztcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdSZWN0KFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIHhPZmYsIHlPZmYsIDIsIDEsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tCYXR0bGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdHVybkJhc2VUcnkuZW50aXRpZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGUgPSB0dXJuQmFzZVRyeS5lbnRpdGllc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICghZS5kcmF3VHVybilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZS5EZWFkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYXdpbmdJZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb2xvciA9IENvbG9ycy5IZXJvVHVybjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5UeXBlID09IEJhdHRsZU1haW4uRW50aXR5VHlwZS5lbmVteSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gQ29sb3JzLkVuZW15VHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZWxlbWVudCAhPSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlTWFpbi5FbGVtZW50Lk5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yID0gRWxlbWVudFRvQXVyYUNvbG9yKGUuZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdPbmVEaWdpdF9DdXJzb3IoKGludCllLmxpZmUuVmFsKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgeE9mZiA9IHR1cm5PcmRlclggKyAxICsgZHJhd2luZ0lkICogMztcclxuICAgICAgICAgICAgICAgICAgICBpbnQgeUVudGl0eSA9IHR1cm5PcmRlclkgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB5Rmlyc3RNb3ZlID0gdHVybk9yZGVyWSArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IHhGaXJzdE1vdmUgPSB4T2ZmO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChob3Jpem9udGFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeE9mZiA9IHR1cm5PcmRlclg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlFbnRpdHkgPSB0dXJuT3JkZXJZICsgMiArIGRyYXdpbmdJZCAqIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlGaXJzdE1vdmUgPSB5RW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4Rmlyc3RNb3ZlID0gdHVybk9yZGVyWCArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIERyYXdFbnRpdHlDaGFyKGUsIGNvbG9yLCB4T2ZmLCB5RW50aXR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dEJvYXJkLlNldEN1cnNvckF0KHhGaXJzdE1vdmUsIHlGaXJzdE1vdmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpMiA9IDA7IGkyIDwgdHVybnNQZXJQaGFzZTsgaTIrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBjb2xvcjIgPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGJhY2tDb2xvciA9IENvbG9ycy5CYWNrQ29tbWFuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnBoYXNlID09IEJhdHRsZU1haW4uQmF0dGxlUGhhc2UuRXhlY3V0ZU1vdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcmF3aW5nSWQgPT0gdHVybkJhc2VUcnkuYmF0dGxlU3RhdGUuYWN0aW5nRW50aXR5ICYmIGkyID09IHR1cm5CYXNlVHJ5LmJhdHRsZVN0YXRlLnR1cm4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbG9yMiA9IENvbG9ycy5IZXJvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tDb2xvciA9IENvbG9ycy5CYWNrQmF0dGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMiA9IENvbG9ycy5JbnB1dERlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkyIDwgdHVybnNQZXJQaGFzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGMgPSBHZXRDaGFyT2ZNb3ZlKGUsIGkyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlSG92ZXIubW91c2VIb3ZlcnMuQWRkKG5ldyBNb3VzZUhvdmVyKG5ldyBSZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5DdXJzb3JYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5DdXJzb3JZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIGUubW92ZXNbaTJdKSk7IC8vYWRkIGhlcmUuLi4/IEBfQFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3X0N1cnNvcihjLCBjb2xvcjIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvcml6b250YWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGMuTGVuZ3RoOyBqIDwgMzsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJvYXJkLkFkdmFuY2VDdXJzb3IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdfQ3Vyc29yKCcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0Qm9hcmQuRHJhd19DdXJzb3IoJyAnLCBjb2xvciwgQ29sb3JzLkJhY2tDb21tYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9yaXpvbnRhbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRCb2FyZC5DdXJzb3JOZXdMaW5lKHg6IHhGaXJzdE1vdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvL1RleHRCb2FyZC5DdXJzb3JOZXdMaW5lKHg6IDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRHJhd0VudGl0eUNoYXIoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGUsIGludCBjb2xvciwgaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2hhcltdIGNoYXJzID0gR2V0Q2hhcihlKTtcclxuXHJcbiAgICAgICAgICAgIFRleHRCb2FyZC5EcmF3KGNoYXJzLCB4LCB5LCBjb2xvcik7XHJcbiAgICAgICAgICAgIGlmIChlLmdyYXBoaWNSZXBlYXRlZEluZGV4ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dEJvYXJkLkRyYXdPbmVEaWdpdChlLmdyYXBoaWNSZXBlYXRlZEluZGV4ICsgMSwgeCArIGNoYXJzLkxlbmd0aCwgeSwgY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0cmluZyBHZXRDaGFyT2ZNb3ZlKEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGUsIGludCBpMilcclxuICAgICAgICB7XHJcblxyXG5cclxuICAgICAgICAgICAgZmxvYXQgdmFsID0gZS5tb3Zlc1tpMl07XHJcbiAgICAgICAgICAgIGlmICh2YWwgPj0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBtb3ZlQ2hhcnNbKEJhdHRsZU1haW4uTW92ZVR5cGUpdmFsXTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoYXJbXSBHZXRDaGFyKEJhdHRsZU1haW4uQmF0dGxlRW50aXR5IGdhbWVFbnRpdHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZW50aXRpZXNDaGFyc1tnYW1lRW50aXR5LmdyYXBoaWNdO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBEcmF3TW92ZShWYWx1ZSBtb3ZlLCBpbnQgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobW92ZS5WYWwgPj0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQmF0dGxlTWFpbi5Nb3ZlVHlwZSBtID0gKEJhdHRsZU1haW4uTW92ZVR5cGUpbW92ZS5WYWw7XHJcbiAgICAgICAgICAgICAgICBEcmF3TW92ZShtLCBjb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUZXh0Qm9hcmQuRHJhd19DdXJzb3IoJyAnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBEcmF3TW92ZShCYXR0bGVNYWluLk1vdmVUeXBlIG1vdmUsIGludCBjb2xvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjID0gbW92ZUNoYXJzW21vdmVdO1xyXG4gICAgICAgICAgICBUZXh0Qm9hcmQuRHJhd19DdXJzb3IoYywgY29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRCb2FyZCBHZXRCb2FyZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVGV4dEJvYXJkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjbGFzcyBDb2xvcnNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBjb25zdCBpbnQgR3JpZEhlcm8gPSAxO1xyXG4gICAgICAgICAgICBwdWJsaWMgY29uc3QgaW50IEdyaWRFbmVteSA9IDI7XHJcbiAgICAgICAgICAgIHB1YmxpYyBjb25zdCBpbnQgSGVybyA9IDM7XHJcbiAgICAgICAgICAgIHB1YmxpYyBjb25zdCBpbnQgRW5lbXkgPSA0O1xyXG4gICAgICAgICAgICBwdWJsaWMgY29uc3QgaW50IEhlcm9UdXJuID0gNTtcclxuICAgICAgICAgICAgcHVibGljIGNvbnN0IGludCBFbmVteVR1cm4gPSA2O1xyXG4gICAgICAgICAgICBwdWJsaWMgY29uc3QgaW50IGlucHV0S2V5ID0gNztcclxuICAgICAgICAgICAgcHVibGljIGNvbnN0IGludCBCb2FyZCA9IDg7XHJcbiAgICAgICAgICAgIHB1YmxpYyBjb25zdCBpbnQgV2luZG93TGFiZWwgPSA5O1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBzdGF0aWMgaW50IEZpcmVBdXJhID0gMTA7XHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyBpbnQgSWNlQXVyYSA9IDExO1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBzdGF0aWMgaW50IFRodW5kZXJBdXJhID0gMTI7XHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyBpbnQgRmlyZVNob3QgPSAxMztcclxuICAgICAgICAgICAgaW50ZXJuYWwgc3RhdGljIGludCBJY2VTaG90ID0gMTQ7XHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyBpbnQgVGh1bmRlclNob3QgPSAxNTtcclxuICAgICAgICAgICAgcHVibGljIGNvbnN0IGludCBCYWNrZ3JvdW5kSW5wdXQgPSAxNjtcclxuICAgICAgICAgICAgcHVibGljIGNvbnN0IGludCBJbnB1dERlc2NyaXB0aW9uID0gMTc7XHJcbiAgICAgICAgICAgIGludGVybmFsIHN0YXRpYyBpbnQgQmFja0JhdHRsZSA9IDE4O1xyXG4gICAgICAgICAgICBpbnRlcm5hbCBzdGF0aWMgaW50IEJhY2tDb21tYW5kID0gMTk7XHJcbiAgICAgICAgICAgIGludGVybmFsIGNvbnN0IGludCBCYWNrU3RyaXBlID0gMjA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZW51bSBJbnB1dEtleVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTk9ORSwgTEVGVCwgUklHSFQsIERPV04sIFVQLCBGSVJFLCBSRURPLCBET05FLFxyXG4gICAgICAgICAgICBJQ0UsXHJcbiAgICAgICAgICAgIFRIVU5ERVIsXHJcbiAgICAgICAgICAgIE5PUk1BTFNIT1RcclxuICAgICAgICB9XHJcblxuXHJcblxyXG4gICAgXG5wcml2YXRlIGludCBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fa2V5RG93blVuaWNvZGU9LTE7fVxyXG5cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFBpZHJvaC5CYXNlVXRpbHM7XHJcbnVzaW5nIFBpZHJvaC5FQ1M7XHJcbnVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZy5HYW1lU2NyZWVuO1xyXG51c2luZyBQaWRyb2guVHVybkJhc2VkLlRleHRSZW5kZXJpbmc7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHYW1lTWFpbiA6IElUZXh0U2NyZWVuX1xyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgQmF0dGxlTWFpbiBiYXR0bGVNYWluO1xyXG4gICAgICAgIHByaXZhdGUgQmF0dGxlUmVuZGVyIGJhdHRsZVJlbmRlcjtcclxuICAgICAgICBwcml2YXRlIE1vZGVTZWxlY3Rpb25TY3JlZW4gbW9kZVNlbGVjdGlvblNjcmVlbjtcclxuICAgICAgICBJVGV4dFNjcmVlbl8gbWFpbkRyYXc7XHJcbiAgICAgICAgcHJpdmF0ZSBIZWxwU2NyZWVuIGhlbHBTY3JlZW47XHJcbiAgICAgICAgSGVscFNjcmVlbkludGVncmF0aW9uIGhlbHBJbnQgPSBuZXcgSGVscFNjcmVlbkludGVncmF0aW9uKCk7XHJcbiAgICAgICAgcHJpdmF0ZSBSZXN1bHRTY3JlZW4gcmVzdWx0U2NyZWVuO1xyXG4gICAgICAgIGludCBzdGFnZUlkO1xyXG4gICAgICAgIGludCBzdGFnZUdyb3VwSWQgPSAtMTtcclxuICAgICAgICAvL2ludCBzdGFnZUdyb3VwID0gMDtcclxuICAgICAgICBpbnRbXSBlbmVteUFtb3VudCA9IG5ldyBpbnRbXSB7IDEsIDEsIDIsIDEsIDIsIDMsIDIsIDMsIDEsIDIsIDMsIDMgfTtcclxuICAgICAgICBpbnRbXSB0dXJuQW1vdW50ID0gbmV3IGludFtdIHsgMiwgNCwgMiwgNiwgNCwgMiwgNiwgNCwgOCwgOCwgNiwgOCB9O1xyXG4gICAgICAgIHByaXZhdGUgTW91c2VIb3ZlclRleHQgbW91c2VIb3ZlcjtcclxuICAgICAgICBwdWJsaWMgU3RhZ2VUb0JhdHRsZSBzdGFnZVRvQmF0dGxlID0gbmV3IFN0YWdlVG9CYXR0bGUoKTtcclxuICAgICAgICBMaXN0PFN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZT4gc3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlID0gbmV3IExpc3Q8U3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlPigpO1xyXG4gICAgICAgIHB1YmxpYyBLZXlib2FyZElPIEtleWJvYXJkIHsgc2V0OyBnZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEdhbWVNYWluKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vZGVTZWxlY3Rpb25TY3JlZW4gPSBuZXcgTW9kZVNlbGVjdGlvblNjcmVlbigpO1xyXG4gICAgICAgICAgICBzdGFnZVNlbGVjU2NyZWVuID0gbmV3IFN0YWdlU2VsZWN0aW9uU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIHN0YWdlR3JvdXBTZWxlY3Rpb24gPSBuZXcgU3RhZ2VHcm91cFNlbGVjdGlvblNjcmVlbigpO1xyXG5cclxuICAgICAgICAgICAgUmVzZXQoKTtcclxuICAgICAgICAgICAgbW9kZVNlbGVjdGlvblNjcmVlbi5tb2RlID0gMTtcclxuICAgICAgICAgICAgbW9kZVNlbGVjdGlvblNjcmVlbi53YW5uYUxlYXZlID0gMTtcclxuICAgICAgICAgICAgbWFpbkRyYXcgPSBtb2RlU2VsZWN0aW9uU2NyZWVuO1xyXG5cclxuICAgICAgICAgICAgXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vUmVzZXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBSZXNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL3ZhciBtb3ZlUmVuZGVySW5mbyA9IG5ldyBNb3ZlUmVuZGVySW5mbygpO1xyXG4gICAgICAgICAgICAvL21vdmVSZW5kZXJJbmZvLkFkZE1vdmVOYW1lcygpO1xyXG4gICAgICAgICAgICBzdHJpbmdbXSBtb3ZlRGVzY3JpcHRpb25zID0gbmV3IHN0cmluZ1tdIHtcclxuICAgICAgICAgICAgICAgIFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIk1vdmUgdXBcIixcclxuICAgICAgICAgICAgICAgIFwiTW92ZSBsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICBcIk1vdmUgZG93blwiLFxyXG4gICAgICAgICAgICAgICAgXCJNb3ZlIHJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICBcIlNob290cyBmb3J3YXJkXCIsXHJcbiAgICAgICAgICAgICAgICBcIlNob290cyBmaXJlIGZvcndhcmRcIixcclxuICAgICAgICAgICAgICAgIFwiU2hvb3RzIGljZSBmb3J3YXJkXCIsXHJcbiAgICAgICAgICAgICAgICBcIlNob290cyB0aHVuZGVyIGZvcndhcmRcIixcclxuICAgICAgICAgICAgICAgIFwiVGhyb3dzIGljZSBib21iIHRocmVlIHNxdWFyZXMgZm9yd2FyZFwiLFxyXG4gICAgICAgICAgICAgICAgXCJUaHJvd3MgdGh1bmRlciBib21iIHRocmVlIHNxdWFyZXMgZm9yd2FyZFwiLFxyXG4gICAgICAgICAgICAgICAgXCJTdW1tb25zIGFub3RoZXIgZW5lbXlcIixcclxuICAgICAgICAgICAgICAgIFwiU2hvb3QsIGRvd24sIHNob290XCIsXHJcbiAgICAgICAgICAgICAgICBcIlNob290cyBpbiB0aHJlZSBsaW5lcyBhcm91bmQgdXNlclwiLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaW50IG1vZGUgPSBtb2RlU2VsZWN0aW9uU2NyZWVuLm1vZGU7XHJcbiAgICAgICAgICAgIGJvb2wgdGltZUF0dGFjayA9IG1vZGVTZWxlY3Rpb25TY3JlZW4udGltZUF0dGFjaztcclxuXHJcbiAgICAgICAgICAgIHZhciBlY3MgPSBFQ1NNYW5hZ2VyLkNyZWF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgU3RhZ2VEYXRhQ3JlYXRvciBzZGMgPSBuZXcgU3RhZ2VEYXRhQ3JlYXRvcihlY3MpO1xyXG5cclxuICAgICAgICAgICAgLy92YXIgc3RhZ2VzID0gZWNzLlF1aWNrQWNjZXNzb3IxPFN0YWdlRGF0YT4oKTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwcyA9IGVjcy5RdWlja0FjY2Vzc29yMTxTdGFnZURhdGFHcm91cD4oKTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLkNvbXAxKDApO1xyXG4gICAgICAgICAgICBpZiAoc3RhZ2VHcm91cElkID49IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXBzLkNvbXAxKHN0YWdlR3JvdXBJZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0YWdlU2VsZWNTY3JlZW4uc3RhZ2VHcm91cCA9IGdyb3VwO1xyXG5cclxuICAgICAgICAgICAgc3RhZ2VJZCA9IHN0YWdlU2VsZWNTY3JlZW4uY2hvc2VuU3RhZ2U7XHJcbiAgICAgICAgICAgIGlmIChzdGFnZVNlbGVjU2NyZWVuLmNob3NlblN0YWdlIDwgMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhZ2VJZCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW50IGQgPSBzdGFnZUlkO1xyXG4gICAgICAgICAgICBpZiAoZ3JvdXAuc3RhZ2VEYXRhSWRzLkNvdW50IDw9IGQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1haW5EcmF3ID0gbW9kZVNlbGVjdGlvblNjcmVlbjtcclxuICAgICAgICAgICAgICAgIG1vZGVTZWxlY3Rpb25TY3JlZW4uUmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIHN0YWdlSWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgc3RhZ2VHcm91cElkID0gLTE7XHJcbiAgICAgICAgICAgICAgICBSZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTdGFnZURhdGEgc3RhZ2VEYXRhID0gZ3JvdXAuc3RhZ2VEYXRhSWRzW3N0YWdlSWRdLkdldENvbXBvbmVudDxTdGFnZURhdGE+KCk7XHJcblxyXG4gICAgICAgICAgICAvL2QgPSAyMDA7XHJcbiAgICAgICAgICAgIGlmIChkID49IGVuZW15QW1vdW50Lkxlbmd0aCkgZCA9IGVuZW15QW1vdW50Lkxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIGludCBuRW5lbWllcyA9IGVuZW15QW1vdW50W2RdO1xyXG4gICAgICAgICAgICBMaXN0PHN0cmluZz4gZW50aXR5UmVuZGVyVGV4dHMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgIHZhciBtb3ZlQ3JlYXRvciA9IG5ldyBNb3ZlQ3JlYXRvclByb2coZWNzKTtcclxuXHJcbiAgICAgICAgICAgIEVuZW15RGF0YUNyZWF0b3IgZW5lbXlEYXRhID0gbmV3IEVuZW15RGF0YUNyZWF0b3IoZW50aXR5UmVuZGVyVGV4dHMsIG1vdmVDcmVhdG9yKTtcclxuICAgICAgICAgICAgc2RjLkNhbGN1bGF0ZVRyYWNrSW5mbyhlbmVteURhdGEuZW5lbXlEYXRhcyk7XHJcbiAgICAgICAgICAgIHNkYy5Jbml0aWFsaXplUHJvZ3Jlc3Moc3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlKTtcclxuICAgICAgICAgICAgc3RhZ2VFbnRpdHkgPSBncm91cC5zdGFnZURhdGFJZHNbc3RhZ2VJZF07XHJcbiAgICAgICAgICAgIGlmIChncm91cC5zdGFnZURhdGFJZHMuQ291bnQgPiBzdGFnZUlkICsgMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhZ2VUb0JhdHRsZS5zdGFnZVRvVW5sb2NrID0gZ3JvdXAuc3RhZ2VEYXRhSWRzW3N0YWdlSWQgKyAxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0YWdlVG9CYXR0bGUuc3RhZ2VUb1VubG9jayA9IEVudGl0eS5Ob25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YWdlVG9CYXR0bGUuQ3VycmVudFN0YWdlID0gc3RhZ2VFbnRpdHk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBCYXR0bGVTZXR1cCBiYXR0bGVTZXR1cCA9IG5ldyBCYXR0bGVTZXR1cChtb2RlLCBzdGFnZUVudGl0eSwgZWNzLCBlbmVteURhdGEsIG1vdmVDcmVhdG9yKTtcclxuICAgICAgICAgICAgYmF0dGxlTWFpbiA9IGJhdHRsZVNldHVwLmJhdHRsZU1haW47XHJcbiAgICAgICAgICAgIExpc3Q8TW92ZU1ldGFEYXRhPiBtb3ZlUmVuZGVycyA9IG1vdmVDcmVhdG9yLm1vdmVSZW5kZXJzO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1vdmVSZW5kZXJzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1vdmVSZW5kZXJzW2ldLkRlc2NyaXB0aW9uID0gbW92ZURlc2NyaXB0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgIC8vQ29uc29sZS5Xcml0ZUxpbmUoXCJ7MH0gezF9XCIsIG1vdmVSZW5kZXJzW2ldLkxhYmVsLCBtb3ZlUmVuZGVyc1tpXS5EZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgSGVscFNjcmVlbk1vZGVsIGhlbHBNb2RlbCA9IG5ldyBIZWxwU2NyZWVuTW9kZWwoYmF0dGxlTWFpbik7XHJcbiAgICAgICAgICAgIGhlbHBTY3JlZW4gPSBuZXcgSGVscFNjcmVlbihoZWxwTW9kZWwsIG1vdmVSZW5kZXJzLCBtb3ZlQ3JlYXRvci5tb3ZlRGF0YXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBzID0gbmV3IFByZXZpZXdTeXN0ZW0oZWNzLCBiYXR0bGVNYWluKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgLy9lY3MuQ3JlYXRlRW50aXR5V2l0aENvbXBvbmVudChuZXcgRW5lbXlTcGF3bkRhdGEoMCwgbmV3IEJhc2VVdGlscy5WZWN0b3IyRCg0LCAxKSkpO1xyXG4gICAgICAgICAgICAvL2Vjcy5DcmVhdGVFbnRpdHlXaXRoQ29tcG9uZW50KG5ldyBFbmVteVNwYXduRGF0YSgxLCBuZXcgQmFzZVV0aWxzLlZlY3RvcjJEKDUsIDEpKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgZmxvYXQgdGltZVRvQ2hvb3NlID0gLTE7XHJcbiAgICAgICAgICAgIGlmICh0aW1lQXR0YWNrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aW1lVG9DaG9vc2UgPSAoNWYgKiB0dXJuQW1vdW50W2RdKSAqIG5FbmVtaWVzO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYXR0bGVNYWluLnRpbWVUb0Nob29zZU1heCA9IHRpbWVUb0Nob29zZTtcclxuICAgICAgICAgICAgYmF0dGxlTWFpbi5Jbml0KCk7XHJcblxyXG4gICAgICAgICAgICBiYXR0bGVSZW5kZXIgPSBuZXcgQmF0dGxlUmVuZGVyKGJhdHRsZU1haW4sIHN0YWdlRGF0YTogc3RhZ2VEYXRhLCBQcmV2aWV3U3lzdGVtOiBwcyk7XHJcbiAgICAgICAgICAgIGJhdHRsZVJlbmRlci5oZWxwID0gaGVscEludDtcclxuICAgICAgICAgICAgbmV3IEF0dGFja1ByZXZpZXcoZWNzLCBiYXR0bGVSZW5kZXIpO1xyXG4gICAgICAgICAgICBuZXcgSGFwcEhhbmRsaW5nKGJhdHRsZVJlbmRlciwgYmF0dGxlU2V0dXApO1xyXG4gICAgICAgICAgICAvL1xyXG5cclxuICAgICAgICAgICAgaWYgKGhlbHBTY3JlZW4uSXNXYW5uYVNob3dJbnRybygpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoZWxwU2NyZWVuLlNob3coKTtcclxuICAgICAgICAgICAgICAgIG1haW5EcmF3ID0gaGVscFNjcmVlbjtcclxuICAgICAgICAgICAgICAgIGhlbHBNb2RlbC5iYXR0bGVJbnRyb01vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWFpbkRyYXcgPSBiYXR0bGVSZW5kZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vaGVscFNjcmVlbi5cclxuICAgICAgICAgICAgcmVzdWx0U2NyZWVuID0gbmV3IFJlc3VsdFNjcmVlbihiYXR0bGVNYWluLnRyYWNrQmF0dGxlKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdFNjcmVlbi5iYXR0bGVSZXN1bHQgPSBiYXR0bGVNYWluLmJhdHRsZVJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIE1vdXNlSG92ZXJNYW5hZ2VyIGhvdmVyTWFuYWdlciA9IG5ldyBNb3VzZUhvdmVyTWFuYWdlcihNb3VzZSk7XHJcbiAgICAgICAgICAgIGhvdmVyTWFuYWdlci5tb3VzZUhvdmVycy5BZGQobmV3IE1vdXNlSG92ZXIobmV3IEJhc2VVdGlscy5SZWN0KDUsIDUsIDUsIDUpLCAwLCAwKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgbW91c2VIb3ZlciA9IG5ldyBNb3VzZUhvdmVyVGV4dChob3Zlck1hbmFnZXIsIGJhdHRsZVJlbmRlci50ZXh0V29ybGQuR2V0RnJlZUVudGl0eShiYXR0bGVSZW5kZXIudGV4dFdvcmxkLm1haW5Cb2FyZC5XaWR0aCAtIDIsIDMpLCBtb3ZlRGVzY3JpcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGJhdHRsZVJlbmRlci5tb3VzZUhvdmVyID0gaG92ZXJNYW5hZ2VyO1xyXG4gICAgICAgICAgICBpZiAoc3RhZ2VTZWxlY1NjcmVlbi5jaG9zZW5TdGFnZSA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1haW5EcmF3ID0gc3RhZ2VTZWxlY1NjcmVlbjtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YWdlR3JvdXBJZCA9PSAtMSlcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIHN0YWdlR3JvdXBTZWxlY3Rpb24uU2V0RUNTKGVjcyk7XHJcbiAgICAgICAgICAgICAgICBtYWluRHJhdyA9IHN0YWdlR3JvdXBTZWxlY3Rpb247XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5wdXQgeyBzZXQgeyBtYWluRHJhdy5JbnB1dCA9IHZhbHVlOyB9IGdldCB7IHJldHVybiAnYyc7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBpbnQga2V5RG93blVuaWNvZGUgeyBzZXQgeyB2YWx1ZSA9IHJlbWFwLlJlbWFwKHZhbHVlKTsgbWFpbkRyYXcua2V5RG93blVuaWNvZGUgPSB2YWx1ZTsgfSBnZXQgeyByZXR1cm4gJ2MnOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIE1vdXNlSU8gTW91c2UgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIFVuaWNvZGVSZW1hcCByZW1hcCA9IG5ldyBVbmljb2RlUmVtYXAoKTtcclxuICAgICAgICBwcml2YXRlIFN0YWdlR3JvdXBTZWxlY3Rpb25TY3JlZW4gc3RhZ2VHcm91cFNlbGVjdGlvbjtcclxuICAgICAgICBwcml2YXRlIFN0YWdlU2VsZWN0aW9uU2NyZWVuIHN0YWdlU2VsZWNTY3JlZW47XHJcbiAgICAgICAgcHJpdmF0ZSBFbnRpdHkgc3RhZ2VFbnRpdHk7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpbnQgV2lkdGggPSAzNTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGludCBIZWlnaHQgPSA0NjtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERyYXdJbnB1dChpbnQgeDIsIGludCB5MiwgaW50IHVuaWNvZGUsIHN0cmluZyBkZXNjcmlwdGlvbiwgVGV4dEJvYXJkIHRleHRCb2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vVGV4dEJvYXJkLkRyYXdVbmljb2RlTGFiZWwodW5pY29kZSwgeDIsIHkyLCBCYXR0bGVSZW5kZXIuQ29sb3JzLmlucHV0S2V5KTtcclxuICAgICAgICAgICAgLy9UZXh0Qm9hcmQuRHJhdyhkZXNjcmlwdGlvbiwgeDIgKyAyICsgNSwgeTIsIEJhdHRsZVJlbmRlci5Db2xvcnMuSW5wdXREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIEJhdHRsZVJlbmRlci5EcmF3SW5wdXQoeDIsIHkyLCB1bmljb2RlLCBkZXNjcmlwdGlvbiwgdGV4dEJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXcoZmxvYXQgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vdXNlSG92ZXIuVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIG1haW5EcmF3LkRyYXcoZik7XHJcbiAgICAgICAgICAgIG1haW5EcmF3Lk1vdXNlID0gTW91c2U7XHJcbiAgICAgICAgICAgIG1haW5EcmF3LktleWJvYXJkID0gS2V5Ym9hcmQ7XHJcbiAgICAgICAgICAgIGlmIChtYWluRHJhdyA9PSBzdGFnZVNlbGVjU2NyZWVuICYmIHN0YWdlU2VsZWNTY3JlZW4uY2hvc2VuU3RhZ2UgPj0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3RhZ2VHcm91cFNlbGVjdGlvbiAhPSBudWxsICYmIHN0YWdlR3JvdXBTZWxlY3Rpb24ud2FudGVkR3JvdXAgPj0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhZ2VHcm91cElkID0gc3RhZ2VHcm91cFNlbGVjdGlvbi53YW50ZWRHcm91cDtcclxuICAgICAgICAgICAgICAgIHN0YWdlR3JvdXBTZWxlY3Rpb24uUmVzZXRDaG9pY2UoKTtcclxuICAgICAgICAgICAgICAgIFJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YWdlU2VsZWNTY3JlZW4ud2FudFRvUmV0dXJuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGFnZUdyb3VwU2VsZWN0aW9uLlJlc2V0Q2hvaWNlKCk7XHJcbiAgICAgICAgICAgICAgICBzdGFnZVNlbGVjU2NyZWVuLlJlc2V0Q2hvaWNlKCk7XHJcbiAgICAgICAgICAgICAgICBzdGFnZUdyb3VwU2VsZWN0aW9uLndhbnRlZEdyb3VwID0gLTE7XHJcbiAgICAgICAgICAgICAgICBzdGFnZUdyb3VwSWQgPSAtMTtcclxuICAgICAgICAgICAgICAgIFJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhlbHBTY3JlZW4ud2FubmFMZWF2ZSA9PSB0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoZWxwU2NyZWVuLndhbm5hTGVhdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIG1haW5EcmF3ID0gYmF0dGxlUmVuZGVyO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaGVscEludC5zaG93UmVxdWVzdCl7XHJcbiAgICAgICAgICAgICAgICBoZWxwU2NyZWVuLlNob3coKTtcclxuICAgICAgICAgICAgICAgIGhlbHBJbnQuc2hvd1JlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIG1haW5EcmF3ID0gaGVscFNjcmVlbjtcclxuICAgICAgICAgICAgICAgIGhlbHBTY3JlZW4uSGVscE1vZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWFpbkRyYXcgPT0gYmF0dGxlUmVuZGVyKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9pZiAoYmF0dGxlUmVuZGVyLmhlbHBWaXN1YWxpemVSZXF1ZXN0KVxyXG4gICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAvLyAgICBoZWxwU2NyZWVuLlNob3coKTtcclxuICAgICAgICAgICAgICAgIC8vICAgIG1haW5EcmF3ID0gaGVscFNjcmVlbjtcclxuICAgICAgICAgICAgICAgIC8vICAgIC8vYmF0dGxlUmVuZGVyLmhlbHBWaXN1YWxpemVSZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyAgICBoZWxwU2NyZWVuLkhlbHBNb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgICAgIGlmIChiYXR0bGVNYWluLklzT3ZlcigpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXR0bGVNYWluLklzVmljdG9yeSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWdlSWQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhZ2VUb0JhdHRsZS5WaWN0b3J5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWdlU2VsZWNTY3JlZW4uUmVzZXRDaG9pY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhZ2VUb0JhdHRsZS5DdXJyZW50U3RhZ2UuR2V0Q29tcG9uZW50PFN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZT4oKS5iZXN0QmF0dGxlTWV0cmljcy5Db3B5VmFsdWVzKGJhdHRsZU1haW4udHJhY2tCYXR0bGUubWV0cmljcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFNjcmVlbi5FbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW5EcmF3ID0gcmVzdWx0U2NyZWVuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYWluRHJhdyA9PSByZXN1bHRTY3JlZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRTY3JlZW4ud2FubmFMZWF2ZSA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1haW5EcmF3ID09IG1vZGVTZWxlY3Rpb25TY3JlZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlU2VsZWN0aW9uU2NyZWVuLndhbm5hTGVhdmUgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRCb2FyZCBHZXRCb2FyZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFpbkRyYXcuR2V0Qm9hcmQoKTtcclxuICAgICAgICB9XHJcblxuICAgIFxucHJpdmF0ZSBLZXlib2FyZElPIF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19LZXlib2FyZD1uZXcgS2V5Ym9hcmRJTygpO3ByaXZhdGUgTW91c2VJTyBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fTW91c2U9bmV3IE1vdXNlSU8oKTt9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkJhc2VVdGlscztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nLkdhbWVTY3JlZW47XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFJlc3VsdFNjcmVlbiA6IElUZXh0U2NyZWVuX1xyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgVGV4dFdvcmxkIHRleHRXb3JsZDtcclxuICAgICAgICBzdHJpbmcgeW91V2luID0gXCJZb3UgV2luXCI7XHJcbiAgICAgICAgcHVibGljIE1vdXNlSU8gTW91c2UgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHN0cmluZyB5b3VMb3NlID0gXCJZb3UgbG9zZVwiO1xyXG4gICAgICAgIHB1YmxpYyBCYXR0bGVSZXN1bHQgYmF0dGxlUmVzdWx0O1xyXG4gICAgICAgIHB1YmxpYyBUcmFja0JhdHRsZSB0cmFja0JhdHRsZTtcclxuICAgICAgICBwdWJsaWMgS2V5Ym9hcmRJTyBLZXlib2FyZCB7IHNldDsgZ2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBSZXN1bHRTY3JlZW4oVHJhY2tCYXR0bGUgdHJhY2tCYXR0bGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQgPSBuZXcgVGV4dFdvcmxkKCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5Jbml0KEdhbWVNYWluLldpZHRoLCBHYW1lTWFpbi5IZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYWNrQmF0dGxlID0gdHJhY2tCYXR0bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IHdhbm5hTGVhdmU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5wdXQgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQga2V5RG93blVuaWNvZGUgeyBzZXQ7IGdldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBFbnRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3YW5uYUxlYXZlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXcoZmxvYXQgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChrZXlEb3duVW5pY29kZSA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdhbm5hTGVhdmUgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuU2V0QWxsKCcgJywgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tncm91bmRJbnB1dCk7XHJcbiAgICAgICAgICAgIHN0cmluZyBtZXNzYWdlID0geW91V2luO1xyXG4gICAgICAgICAgICBpZiAoYmF0dGxlUmVzdWx0LnJlc3VsdCA9PSAyKSBtZXNzYWdlID0geW91TG9zZTtcclxuICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXIobWVzc2FnZSwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuVGh1bmRlclNob3QpO1xyXG5cclxuICAgICAgICAgICAgaW50IHggPSAzO1xyXG4gICAgICAgICAgICBpbnQgeSA9IDM7XHJcbiAgICAgICAgICAgIEJhdHRsZVJlbmRlci5EcmF3U3RyaXBwZWRUZXh0KHgseSwgXCJUVVJOU1wiLCB0ZXh0V29ybGQubWFpbkJvYXJkKTtcclxuICAgICAgICAgICAgdmFyIG1ldHJpY3MgPSB0aGlzLnRyYWNrQmF0dGxlLm1ldHJpY3M7XHJcbiAgICAgICAgICAgIEJhdHRsZVJlbmRlci5EcmF3U3ViVGV4dCh4KzE0LCB5LCBtZXRyaWNzLnJvdW5kK1wiXCIsIHRleHRXb3JsZC5tYWluQm9hcmQpO1xyXG4gICAgICAgICAgICBCYXR0bGVSZW5kZXIuRHJhd1N0cmlwcGVkVGV4dCh4LCB5KzIsIFwiVElNRVMgSElUXCIsIHRleHRXb3JsZC5tYWluQm9hcmQpO1xyXG4gICAgICAgICAgICBCYXR0bGVSZW5kZXIuRHJhd1N1YlRleHQoeCArIDE0LCB5KzIsIG1ldHJpY3MuZGFtYWdlVGltZXMgKyBcIlwiLCB0ZXh0V29ybGQubWFpbkJvYXJkKTtcclxuICAgICAgICAgICAgQmF0dGxlUmVuZGVyLkRyYXdTdHJpcHBlZFRleHQoeCwgeSArIDQsIFwiUFJFVklFV1NcIiwgdGV4dFdvcmxkLm1haW5Cb2FyZCk7XHJcbiAgICAgICAgICAgIEJhdHRsZVJlbmRlci5EcmF3U3ViVGV4dCh4ICsgMTQsIHkgKyA0LCBtZXRyaWNzLnByZXZpZXdUaW1lcyArIFwiXCIsIHRleHRXb3JsZC5tYWluQm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgQmF0dGxlUmVuZGVyLkRyYXdTdHJpcHBlZFRleHQoeCwgeSArIDEwLCBcIlJBTktcIiwgdGV4dFdvcmxkLm1haW5Cb2FyZCk7XHJcbiAgICAgICAgICAgIEJhdHRsZVJlbmRlci5EcmF3U3ViVGV4dCh4ICsgMTQsIHkgKyAxMCwgbWV0cmljcy5yYW5rICsgXCJcIiwgdGV4dFdvcmxkLm1haW5Cb2FyZCk7XHJcblxyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdIb3Jpem9udGFsTGluZShVbmljb2RlLkFzY2lpR3JpZEhvciwgeSArIDcsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLklucHV0RGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdIb3Jpem9udGFsTGluZShVbmljb2RlLkFzY2lpR3JpZEhvciwgeSArIDEzLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5JbnB1dERlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8vdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25lRGlnaXQodHJhY2tCYXR0bGUucm91bmQsIDMsMywgQ29sb3JzLkhlcm8pO1xyXG4gICAgICAgICAgICAvL3RleHRXb3JsZC5tYWluQm9hcmQuRHJhdyhcIlRVUk5TXCIsIHgsIHksIENvbG9ycy5XaW5kb3dMYWJlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEJvYXJkIEdldEJvYXJkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0V29ybGQubWFpbkJvYXJkO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFBpZHJvaC5FQ1M7XHJcbnVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZy5HYW1lU2NyZWVuO1xyXG51c2luZyBQaWRyb2guVHVybkJhc2VkLlRleHRSZW5kZXJpbmc7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN0YWdlR3JvdXBTZWxlY3Rpb25TY3JlZW4gOiBJVGV4dFNjcmVlbl9cclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIFF1aWNrQWNjZXNzb3JPbmU8U3RhZ2VEYXRhR3JvdXA+IHN0YWdlR3JvdXBzO1xyXG4gICAgICAgIHByaXZhdGUgVGV4dFdvcmxkIHRleHRXb3JsZDtcclxuICAgICAgICBwdWJsaWMgTW91c2VJTyBNb3VzZSB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgcHVibGljIEtleWJvYXJkSU8gS2V5Ym9hcmQgeyBzZXQ7IGdldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IHdhbnRlZEdyb3VwID0gLTE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdGFnZUdyb3VwU2VsZWN0aW9uU2NyZWVuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0ZXh0V29ybGQgPSBuZXcgVGV4dFdvcmxkKCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5Jbml0KEdhbWVNYWluLldpZHRoLCBHYW1lTWFpbi5IZWlnaHQpO1xyXG4gICAgICAgICAgICBuYXZLZXkgPSBuZXcgTmF2aWdhdGlvbktleWJvYXJkKHRleHRXb3JsZCk7XHJcbiAgICAgICAgICAgIG5hdktleS5zaG93RXNjYXBlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuU2V0QWxsKFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBCYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tncm91bmRJbnB1dCk7XHJcblxyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlckhvcml6b250YWwoXCJTdGFnZSBTZWxlY3Rpb25cIiwgQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvLCAwLCAxKTtcclxuXHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhd09uQ2VudGVySG9yaXpvbnRhbChcIkNvbnRyb2xzXCIsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLldpbmRvd0xhYmVsLCAwLCA2KTtcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0RUNTKEVDU01hbmFnZXIgZWNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3RhZ2VHcm91cHMgPSBlY3MuUXVpY2tBY2Nlc3NvcjE8U3RhZ2VEYXRhR3JvdXA+KCk7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgd2FubmFMZWF2ZTtcclxuICAgICAgICBwcml2YXRlIE5hdmlnYXRpb25LZXlib2FyZCBuYXZLZXk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5wdXQgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQga2V5RG93blVuaWNvZGUgeyBzZXQ7IGdldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBFbnRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3YW5uYUxlYXZlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXcoZmxvYXQgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hdktleS5DbGVhcigpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuU2V0QWxsKCcgJywgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tncm91bmRJbnB1dCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5EcmF3Q2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgLy90ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlckhvcml6b250YWwoXCJDb250cm9sc1wiLCBDb2xvcnMuV2luZG93TGFiZWwsIDAsIDYpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlckhvcml6b250YWwoXCJTdGFnZSBTZWxlY3Rpb25cIiwgQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvLCAwLCAxKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RhZ2VHcm91cHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHggPSA1O1xyXG4gICAgICAgICAgICAgICAgaW50IHkgPSA1ICsgaSAqIDI7XHJcbiAgICAgICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXcoXCJXb3JsZCBcIiArIChpICsgMSksIHgsIHksIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLldpbmRvd0xhYmVsKTtcclxuICAgICAgICAgICAgICAgIG5hdktleS5BZGQoeCAtIDIsIHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoa2V5RG93blVuaWNvZGUgPj0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmF2S2V5LkNoZWNrSW5wdXQoa2V5RG93blVuaWNvZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3YW50ZWRHcm91cCA9IG5hdktleS5jaG9zZW5PcHRpb247XHJcbiAgICAgICAgICAgIG5hdktleS5EcmF3Q29udHJvbHMoKTtcclxuICAgICAgICAgICAgLy93YW50VG9SZXR1cm4gPSBuYXZLZXkud2FudFRvRXNjYXBlO1xyXG5cclxuICAgICAgICAgICAgLy9pbnQgaW5wID0gSW5wdXRVbmljb2RlIC0gJzEnO1xyXG4gICAgICAgICAgICAvL2lmKGlucCA+PSAwICYmIGlucDwgOSkge1xyXG4gICAgICAgICAgICAvLyAgICB3YW50ZWRHcm91cCA9IGlucDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3KFwiU3RhZ2UgXCIgKyBpLCAyLCBpICogMiArIDMsIEJhdHRsZVJlbmRlci5Db2xvcnMuSGVybyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBSZXNldENob2ljZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3YW50ZWRHcm91cCA9IC0xO1xyXG4gICAgICAgICAgICBuYXZLZXkuUmVzZXRDaG9pY2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0Qm9hcmQgR2V0Qm9hcmQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHRXb3JsZC5tYWluQm9hcmQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRlc3RHYW1lIDogSVRleHRHYW1lXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFRleHRTY3JlZW5Ib2xkZXIgU2NyZWVuSG9sZGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBQYWxldHRlIHBhbGV0dGUgPSBEZWZhdWx0UGFsZXR0ZXMuQzROb3ZlbDtcclxuXHJcbiAgICAgICAgcHVibGljIFBhbGV0dGUgR2V0UGFsZXR0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFsZXR0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEluaXQoaW50IHcsIGludCBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGV4dFNjcmVlbk4gc2NyZWVuID0gbmV3IFRlc3RTY3JlZW4oKTtcclxuICAgICAgICAgICAgU2NyZWVuSG9sZGVyLlNldEFsbChzY3JlZW4pO1xyXG4gICAgICAgICAgICBzY3JlZW4uSW5pdCh3LCBoKTtcclxuICAgICAgICAgICAgc2NyZWVuLkdldEJvYXJkKCkuRHJhdyhcIlRlc3RcIiwgMCwwLCAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZShmbG9hdCBkZWx0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXG4gICAgXG5wcml2YXRlIFRleHRTY3JlZW5Ib2xkZXIgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1NjcmVlbkhvbGRlcj1uZXcgVGV4dFNjcmVlbkhvbGRlcigpO31cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgVGVzdFNjcmVlbiA6IFRleHRTY3JlZW5OXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgVXBkYXRlKGZsb2F0IGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZztcclxudXNpbmcgUGlkcm9oLlRleHRSZW5kZXJpbmcuR2FtZVNjcmVlbjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIFBpZHJvaC5UdXJuQmFzZWQuVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTW9kZVNlbGVjdGlvblNjcmVlbiA6IElUZXh0U2NyZWVuX1xyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgVGV4dFdvcmxkIHRleHRXb3JsZDtcclxuICAgICAgICBwdWJsaWMgTW91c2VJTyBNb3VzZSB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgaW50IHNlbGVjdGlvbjtcclxuICAgICAgICBwdWJsaWMgQmF0dGxlUmVzdWx0IGJhdHRsZVJlc3VsdDtcclxuICAgICAgICBwdWJsaWMgS2V5Ym9hcmRJTyBLZXlib2FyZCB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgcHVibGljIE1vZGVTZWxlY3Rpb25TY3JlZW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dFdvcmxkID0gbmV3IFRleHRXb3JsZCgpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQuSW5pdCg3MCwgMjUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IHdhbm5hTGVhdmU7XHJcbiAgICAgICAgcHVibGljIGludCBtb2RlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIHRpbWVBdHRhY2sgPSBmYWxzZTtcclxuICAgICAgICBwdWJsaWMgaW50IHNjcmVlblN0YWdlO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IElucHV0IHsgc2V0OyBnZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IGtleURvd25Vbmljb2RlIHsgc2V0OyBnZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRW50ZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2FubmFMZWF2ZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3KGZsb2F0IGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuSW5wdXRLZXkgaWsgPSAoUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5JbnB1dEtleSkgSW5wdXQ7XHJcbiAgICAgICAgICAgIG1vZGUgPSAtMTtcclxuICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3KFwiUHJvZ0JhdHRsZSBQcm90b3R5cGUgdjAuM1wiLCAxLCAxLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5HcmlkSGVybyk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhdyhcIkEgZ2FtZSBieSBQaWRyb2hcIiwgMSwgMiwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuR3JpZEhlcm8pO1xyXG4gICAgICAgICAgICBpZiAoc2NyZWVuU3RhZ2UgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChpaylcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLklucHV0S2V5LkxFRlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlblN0YWdlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUF0dGFjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuSW5wdXRLZXkuUklHSFQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlblN0YWdlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUF0dGFjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5JbnB1dEtleS5ET1dOOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lQXR0YWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5JbnB1dEtleS5VUDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVBdHRhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlcihcIlt3XSBWYW5pbGxhXCIsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkdyaWRIZXJvLCB5T2ZmOiA0LCBhbGlnblN0cmluZzogZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXIoXCJbYV0gRWxlbWVudGFsXCIsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkdyaWRIZXJvLCB5T2ZmOiA1LCBhbGlnblN0cmluZzogZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXIoXCJbc10gVmFuaWxsYSBUaW1lIEF0dGFja1wiLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5HcmlkSGVybywgeU9mZjogNiwgYWxpZ25TdHJpbmc6IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhd09uQ2VudGVyKFwiW2RdIEVsZW1lbnRhbCBUaW1lIEF0dGFja1wiLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5HcmlkSGVybywgeU9mZjogNywgYWxpZ25TdHJpbmc6IGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2NyZWVuU3RhZ2UgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlrID09IFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuSW5wdXRLZXkuVVApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaWsgPT0gUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5JbnB1dEtleS5ET1dOKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblN0YWdlID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhd09uQ2VudGVyKFwiRWxlbWVudGFsIE1vZGVcIiwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuR3JpZEhlcm8sIHlPZmY6IC01KTtcclxuICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhd09uQ2VudGVyKFwiRmlyZSBiZWF0cyBJY2UsIEljZSBiZWF0cyBUaHVuZGVyLCBUaHVuZGVyIGJlYXRzIGZpcmVcIiwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuR3JpZEhlcm8sIHlPZmY6IC0yKTtcclxuICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhd09uQ2VudGVyKFwiU2FtZSBlbGVtZW50ID0gbm8gZGFtYWdlXCIsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkdyaWRIZXJvLCB5T2ZmOiAwKTtcclxuICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhd09uQ2VudGVyKFwiSXQgaXMgYmVzdCB0byBoYXZlIGhhZCBzb21lIGV4cGVyaWVuY2Ugd2l0aCB2YW5pbGxhIG1vZGVcIiwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuR3JpZEhlcm8sIHlPZmY6IDEpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXIoXCJbd10gU3RhcnQgRWxlbWVudGFsIE1vZGVcIiwgUGlkcm9oLkNvbnNvbGVBcHAuVHVybmJhc2VkLkJhdHRsZVJlbmRlci5Db2xvcnMuR3JpZEhlcm8sIHlPZmY6IDQsIGFsaWduU3RyaW5nOiBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlcihcIltzXSBHbyBiYWNrXCIsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkdyaWRIZXJvLCB5T2ZmOiA1LCBhbGlnblN0cmluZzogZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGUgPj0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2FubmFMZWF2ZSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIC8vc3RyaW5nIG1lc3NhZ2UgPSB5b3VXaW47XHJcbiAgICAgICAgICAgIC8vaWYgKGJhdHRsZVJlc3VsdC5yZXN1bHQgPT0gMikgbWVzc2FnZSA9IHlvdUxvc2U7XHJcbiAgICAgICAgICAgIC8vdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3T25DZW50ZXIobWVzc2FnZSwgQ29sb3JzLkJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbW9kZSA9IC0xO1xyXG4gICAgICAgICAgICB3YW5uYUxlYXZlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0Qm9hcmQgR2V0Qm9hcmQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHRXb3JsZC5tYWluQm9hcmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQ7XHJcbnVzaW5nIFBpZHJvaC5FQ1M7XHJcbnVzaW5nIFBpZHJvaC5UZXh0UmVuZGVyaW5nO1xyXG51c2luZyBQaWRyb2guVGV4dFJlbmRlcmluZy5HYW1lU2NyZWVuO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBQaWRyb2guVHVybkJhc2VkLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN0YWdlU2VsZWN0aW9uU2NyZWVuIDogSVRleHRTY3JlZW5fXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN0YWdlRGF0YUdyb3VwIHN0YWdlR3JvdXA7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5wdXQgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQga2V5RG93blVuaWNvZGUgeyBzZXQ7IGdldDsgfVxyXG4gICAgICAgIHB1YmxpYyBNb3VzZUlPIE1vdXNlIHsgc2V0OyBnZXQ7IH1cclxuICAgICAgICBwdWJsaWMgS2V5Ym9hcmRJTyBLZXlib2FyZCB7IHNldDsgZ2V0OyB9XHJcbiAgICAgICAgVGV4dFdvcmxkIHRleHRXb3JsZDtcclxuICAgICAgICBwcml2YXRlIE5hdmlnYXRpb25LZXlib2FyZCBuYXZLZXk7XHJcbiAgICAgICAgcHVibGljIGludCBjaG9zZW5TdGFnZSA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyBib29sIHdhbnRUb1JldHVybjtcclxuXHJcbiAgICAgICAgcHVibGljIFN0YWdlU2VsZWN0aW9uU2NyZWVuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZCA9IG5ldyBUZXh0V29ybGQoKTtcclxuICAgICAgICAgICAgdGV4dFdvcmxkLkluaXQoR2FtZU1haW4uV2lkdGgsIEdhbWVNYWluLkhlaWdodCk7XHJcbiAgICAgICAgICAgIG5hdktleSA9IG5ldyBOYXZpZ2F0aW9uS2V5Ym9hcmQodGV4dFdvcmxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXcoZmxvYXQgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hdktleS5DbGVhcigpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLlJlc2V0KCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuU2V0QWxsKCcgJywgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIFBpZHJvaC5Db25zb2xlQXBwLlR1cm5iYXNlZC5CYXR0bGVSZW5kZXIuQ29sb3JzLkJhY2tncm91bmRJbnB1dCk7XHJcbiAgICAgICAgICAgIHRleHRXb3JsZC5EcmF3Q2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgLy90ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlckhvcml6b250YWwoXCJDb250cm9sc1wiLCBDb2xvcnMuV2luZG93TGFiZWwsIDAsIDYpO1xyXG4gICAgICAgICAgICB0ZXh0V29ybGQubWFpbkJvYXJkLkRyYXdPbkNlbnRlckhvcml6b250YWwoXCJTdGFnZSBTZWxlY3Rpb25cIiwgQmF0dGxlUmVuZGVyLkNvbG9ycy5IZXJvLCAwLCAxKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RhZ2VHcm91cC5zdGFnZURhdGFJZHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHggPSA1O1xyXG4gICAgICAgICAgICAgICAgaW50IHkgPSA1ICsgaSAqIDM7XHJcbiAgICAgICAgICAgICAgICBFbnRpdHkgZSA9IHN0YWdlR3JvdXAuc3RhZ2VEYXRhSWRzW2ldO1xyXG4gICAgICAgICAgICAgICAgU3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlIHN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZSA9IGUuR2V0Q29tcG9uZW50PFN0YWdlUHJvZ3Jlc3NQZXJzaXN0ZW5jZT4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFnZVByb2dyZXNzUGVyc2lzdGVuY2UuYXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3KFwiU3RhZ2UgXCIgKyAoaSArIDEpLCB4LCB5LCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5pbnB1dEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IHJhbmsgPSBzdGFnZVByb2dyZXNzUGVyc2lzdGVuY2UuYmVzdEJhdHRsZU1ldHJpY3MucmFuaztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuayA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFdvcmxkLm1haW5Cb2FyZC5EcmF3KFwiQmVzdCBSYW5rOiBcIiArIHJhbmssIHgrMiwgeSsxLCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRXb3JsZC5tYWluQm9hcmQuRHJhdyhcIj8/P1wiLCB4LCB5LCBQaWRyb2guQ29uc29sZUFwcC5UdXJuYmFzZWQuQmF0dGxlUmVuZGVyLkNvbG9ycy5XaW5kb3dMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICBuYXZLZXkuQWRkKHggLSAyLCB5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa2V5RG93blVuaWNvZGUgPj0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmF2S2V5LkNoZWNrSW5wdXQoa2V5RG93blVuaWNvZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjaG9zZW5TdGFnZSA9IG5hdktleS5jaG9zZW5PcHRpb247XHJcbiAgICAgICAgICAgIGlmIChjaG9zZW5TdGFnZSA+PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0YWdlR3JvdXAuc3RhZ2VEYXRhSWRzW2Nob3NlblN0YWdlXS5HZXRDb21wb25lbnQ8U3RhZ2VQcm9ncmVzc1BlcnNpc3RlbmNlPigpLmF2YWlsYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNob3NlblN0YWdlID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2S2V5LmNob3Nlbk9wdGlvbiA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2S2V5LkRyYXdDb250cm9scygpO1xyXG4gICAgICAgICAgICB3YW50VG9SZXR1cm4gPSBuYXZLZXkud2FudFRvRXNjYXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRCb2FyZCBHZXRCb2FyZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dFdvcmxkLm1haW5Cb2FyZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUmVzZXRDaG9pY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2hvc2VuU3RhZ2UgPSAtMTtcclxuICAgICAgICAgICAgbmF2S2V5LlJlc2V0Q2hvaWNlKCk7XHJcbiAgICAgICAgICAgIHdhbnRUb1JldHVybiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgUGlkcm9oLlRleHRSZW5kZXJpbmdcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJsaW5rQW5pbSA6IFRleHRBbmltYXRpb248QmxpbmtBbmltLkJsaW5rRGF0YT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBNb2RpZnkoVGV4dEVudGl0eSBlbnRpdHksIEJsaW5rRGF0YSBtYWluRGF0YSwgZmxvYXQgcHJvZ3Jlc3MsIGZsb2F0IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuTW9kaWZ5KGVudGl0eSwgbWFpbkRhdGEsIHByb2dyZXNzLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICBmbG9hdCBhdXggPSBwcm9ncmVzcztcclxuICAgICAgICAgICAgYm9vbCBibGluayA9IHRydWU7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxpbmspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV4IC09IG1haW5EYXRhLmJsaW5rQWN0aXZlVGltZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXggLT0gbWFpbkRhdGEuYmxpbmtJbmFjdGl2ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhdXggPCAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsaW5rID0gIWJsaW5rO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghYmxpbmspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYWluRGF0YS5jaGFuZ2VJbnZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LkFuaW1hdGlvbi5TZXRBbGwobWFpbkRhdGEudGV4dCwgbWFpbkRhdGEudGV4dENvbG9yLCBtYWluRGF0YS5iYWNrQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LkFuaW1hdGlvbi5TZXRBbGxJZlZpc2libGUobWFpbkRhdGEudGV4dCwgbWFpbkRhdGEudGV4dENvbG9yLCBtYWluRGF0YS5iYWNrQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RydWN0IEJsaW5rRGF0YVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGNoYXIgdGV4dDtcclxuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGludCBiYWNrQ29sb3IsIHRleHRDb2xvcjtcclxuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGZsb2F0IGJsaW5rQWN0aXZlVGltZTtcclxuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGZsb2F0IGJsaW5rSW5hY3RpdmU7XHJcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBib29sIGNoYW5nZUludmlzaWJsZTtcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBCbGlua0RhdGEoY2hhciB0ZXh0LCBpbnQgYmFja0NvbG9yLCBpbnQgdGV4dENvbG9yLCBmbG9hdCBibGlua0FjdGl2ZVRpbWUsIGZsb2F0IGJsaW5rSW5hY3RpdmUsIGJvb2wgY2hhbmdlTm9DaGFuZ2VDb2xvciA9IHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tDb2xvciA9IGJhY2tDb2xvcjtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dENvbG9yID0gdGV4dENvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ibGlua0FjdGl2ZVRpbWUgPSBibGlua0FjdGl2ZVRpbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJsaW5rSW5hY3RpdmUgPSBibGlua0luYWN0aXZlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIEJsaW5rRGF0YSBCYWNrQ29sb3IoaW50IGJhY2tDb2xvciwgZmxvYXQgYmxpbmtEdXJhdGlvbiwgYm9vbCBjaGFuZ2VOb0NoYW5nZUNvbG9yID0gdHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCbGlua0RhdGEoVGV4dEJvYXJkLk5PQ0hBTkdFQ0hBUiwgYmFja0NvbG9yLCBUZXh0Qm9hcmQuTk9DSEFOR0VDT0xPUiwgYmxpbmtEdXJhdGlvbiwgYmxpbmtEdXJhdGlvbiwgY2hhbmdlTm9DaGFuZ2VDb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgQmxpbmtEYXRhIEZyb250Q29sb3IoaW50IGZyb250Q29sb3IsIGZsb2F0IGJsaW5rRHVyYXRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxpbmtEYXRhKFRleHRCb2FyZC5OT0NIQU5HRUNIQVIsIFRleHRCb2FyZC5OT0NIQU5HRUNPTE9SLCBmcm9udENvbG9yLCAgYmxpbmtEdXJhdGlvbiwgYmxpbmtEdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgQmxpbmtEYXRhIENoYXIoY2hhciBjLCBmbG9hdCBibGlua0R1cmF0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsaW5rRGF0YShjLCBUZXh0Qm9hcmQuTk9DSEFOR0VDT0xPUiwgVGV4dEJvYXJkLk5PQ0hBTkdFQ09MT1IsIGJsaW5rRHVyYXRpb24sIGJsaW5rRHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBQaWRyb2guVGV4dFJlbmRlcmluZ1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQ2hhckJ5Q2hhckFuaW1hdGlvbiA6IFRleHRBbmltYXRpb248Q2hhckJ5Q2hhckFuaW1hdGlvbi5DaGFyQnlDaGFyRGF0YT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBNb2RpZnkoVGV4dEVudGl0eSBlbnRpdHksIENoYXJCeUNoYXJEYXRhIG1haW5EYXRhLCBmbG9hdCBwcm9ncmVzcywgZmxvYXQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5Nb2RpZnkoZW50aXR5LCBtYWluRGF0YSwgcHJvZ3Jlc3MsIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZsb2F0IHJhdGlvID0gcHJvZ3Jlc3MgLyBsZW5ndGg7XHJcbiAgICAgICAgICAgIGZsb2F0IGxlbmd0aFRleHQgPSBtYWluRGF0YS5jaGFyRW5kIC0gbWFpbkRhdGEuY2hhclN0YXJ0O1xyXG4gICAgICAgICAgICBpbnQgbGluZUJyZWFrcyA9IDA7XHJcbiAgICAgICAgICAgIGludCBvZmZzZXRlZFBlcm0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gbWFpbkRhdGEuY2hhclN0YXJ0OyBpIDwgbWFpbkRhdGEuY2hhckVuZDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgb2Zmc2V0ZWQgPSBpICsgb2Zmc2V0ZWRQZXJtO1xyXG4gICAgICAgICAgICAgICAgaW50IGxpbmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRiID0gZW50aXR5LkFuaW1hdGlvbjtcclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXRlZCA+PSB0Yi5XaWR0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lKys7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ZWQgLT0gdGIuV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lk9yaWdpbi5DaGFyQXQob2Zmc2V0ZWQsIGxpbmUgKyBsaW5lQnJlYWtzKSA9PSAnXFxuJylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lQnJlYWtzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ZWRQZXJtIC09IG9mZnNldGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldGVkID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpID4gKChsZW5ndGhUZXh0ICogcmF0aW8pICsgbWFpbkRhdGEuY2hhclN0YXJ0KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0Yi5EcmF3Q2hhcignICcsIG9mZnNldGVkLCBsaW5lICsgbGluZUJyZWFrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90Yi5EcmF3KFwiXCIgKyBpLCA2LCA1LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgQ2hhckJ5Q2hhckRhdGFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludGVybmFsIGludCBjaGFyU3RhcnQ7XHJcbiAgICAgICAgICAgIGludGVybmFsIGludCBjaGFyRW5kO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIENoYXJCeUNoYXJEYXRhKGludCBjaGFyU3RhcnQsIGludCBjaGFyRW5kKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJTdGFydCA9IGNoYXJTdGFydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhckVuZCA9IGNoYXJFbmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0KfQo=
2018-10-12T09:31:31:195 	Trace		Saving content (string) into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js ...
2018-10-12T09:31:31:196 	Trace		Saved file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js
2018-10-12T09:31:31:196 	Trace		Output BridgeBuild.meta.js
2018-10-12T09:31:31:197 	Trace		Output file name changed to C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.meta.js
2018-10-12T09:31:31:197 	Trace		Output full name C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.meta.js
2018-10-12T09:31:31:200 	Trace		Saving content (string) into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.meta.js ...
2018-10-12T09:31:31:200 	Trace		Saved file C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.meta.js
2018-10-12T09:31:31:201 	Info		Done Save path = C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\
2018-10-12T09:31:31:201 	Info		Injecting resources...
2018-10-12T09:31:31:204 	Trace		PrepareResourcesForEmbedding...
2018-10-12T09:31:31:208 	Trace		Preparing outputs for resources
2018-10-12T09:31:31:208 	Trace		Getting output C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.js
2018-10-12T09:31:31:209 	Trace		Reading content file as the output has HasGeneratedSourceMap
2018-10-12T09:31:31:214 	Trace		Read 1099879 bytes for BridgeBuild.js
2018-10-12T09:31:31:214 	Trace		Embedding resource BridgeBuild.js (fileName: BridgeBuild.js)
2018-10-12T09:31:31:217 	Trace		Added resource BridgeBuild.js (fileName: BridgeBuild.js)
2018-10-12T09:31:31:218 	Trace		Getting output C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\bridge\BridgeBuild.meta.js
2018-10-12T09:31:31:218 	Trace		The output item does not have HasGeneratedSourceMap so we use it right from the Outputs
2018-10-12T09:31:31:219 	Trace		The output is of content 221335 length
2018-10-12T09:31:31:220 	Trace		Embedding resource BridgeBuild.meta.js (fileName: BridgeBuild.meta.js)
2018-10-12T09:31:31:220 	Trace		Added resource BridgeBuild.meta.js (fileName: BridgeBuild.meta.js)
2018-10-12T09:31:31:220 	Trace		Done preparing output files for resources
2018-10-12T09:31:31:223 	Trace		PrepareResourcesForEmbedding done
2018-10-12T09:31:31:224 	Trace		Embedding resources...
2018-10-12T09:31:31:227 	Trace		Added resource list Bridge.Resources.json
2018-10-12T09:31:31:228 	Trace		[
  {
    "FileName": "BridgeBuild.js",
    "Name": "BridgeBuild.js",
    "Path": null,
    "Parts": null
  },
  {
    "FileName": "BridgeBuild.meta.js",
    "Name": "BridgeBuild.meta.js",
    "Path": null,
    "Parts": null
  }
]
2018-10-12T09:31:31:228 	Trace		Removing mscorlib reference
2018-10-12T09:31:31:229 	Trace		Writing resources into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\BridgeBuild.dll
2018-10-12T09:31:31:237 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:238 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference, ReaderParameters) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null, Deferred
2018-10-12T09:31:31:250 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:250 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:251 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:251 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:251 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:252 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:252 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:253 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:253 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:253 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:254 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:254 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:255 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:255 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:255 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:256 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:257 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:257 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:257 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:258 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:258 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:259 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:259 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:260 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:260 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:260 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:260 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:261 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:261 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:261 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:262 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:262 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:262 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:263 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:263 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:263 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:263 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:264 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:264 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:264 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:265 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:265 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:265 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:266 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:266 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:267 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:267 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:268 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:335 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:336 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:337 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:337 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:338 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:338 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:339 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:339 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:340 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:340 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:340 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:341 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:345 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:348 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:348 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:348 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:349 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:350 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:350 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:351 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:351 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:351 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:353 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:353 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:354 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:354 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:354 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:355 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:355 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:355 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:356 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:356 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:356 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:357 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:357 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:358 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:358 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:358 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:359 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:359 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:359 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:361 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:361 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:361 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:362 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:362 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:363 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:364 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:365 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:365 	Trace		CecilAssemblyResolver: Resolve(AssemblyNameReference) Bridge, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null
2018-10-12T09:31:31:450 	Trace		Wrote resources into C:\Users\Pedro\Documents\TurnBased\VisualStudioSolution\BridgeBuild\bin\Debug\BridgeBuild.dll
2018-10-12T09:31:31:450 	Trace		Done embedding resources
2018-10-12T09:31:31:451 	Info		Done injecting resources
2018-10-12T09:31:31:451 	Info		Checking AfterBuild event...
2018-10-12T09:31:31:452 	Trace		No AfterBuild event specified
2018-10-12T09:31:31:452 	Info		Done checking AfterBuild event...
2018-10-12T09:31:31:452 	Info		Run plugins AfterOutput...
2018-10-12T09:31:31:453 	Info		Done plugins AfterOutput
2018-10-12T09:31:31:456 	Trace		GenerateHtml...
2018-10-12T09:31:31:456 	Trace		GenerateHtml skipped as disabled in config.
2018-10-12T09:31:31:457 	Trace		Report...
2018-10-12T09:31:31:458 	Trace		Report skipped as disabled in config.
2018-10-12T09:31:31:458 	Info		Done post processing
